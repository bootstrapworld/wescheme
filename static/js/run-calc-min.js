var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,d,f){if(b){d=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var l=a[f];l in d||(d[l]={});d=d[l]}a=a[a.length-1];f=d[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(d){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(d||"")+"_"+b++,d)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,f={next:function(){if(d<a.length){var l=d++;return{value:b(l,a[l]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return[a,d]})}},"es6","es3");
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,d){return d})}},"es8","es3");$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var f=a.length,l=0;l<f;l++){var n=a[l];if(b.call(d,n,l,a))return{i:l,v:n}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};
goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,d){a=a.split(".");d=d||goog.global;a[0]in d||!d.execScript||d.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)!a.length&&goog.isDef(b)?d[f]=b:d=d[f]?d[f]:d[f]={}};
goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var d;d=a.shift();)if(goog.isDefAndNotNull(b[d]))b=b[d];else return null;return b};goog.globalize=function(a,b){b=b||goog.global;for(var d in a)b[d]=a[d]};
goog.addDependency=function(a,b,d){if(!COMPILED){var f;a=a.replace(/\\/g,"/");for(var l=goog.dependencies_,n=0;f=b[n];n++)l.nameToPath[f]=a,a in l.pathToNames||(l.pathToNames[a]={}),l.pathToNames[a][f]=!0;for(f=0;b=d[f];f++)a in l.requires||(l.requires[a]={}),l.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}};
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var d=a[b].src,f=d.lastIndexOf("?");f=
-1==f?d.length:f;if("base.js"==d.substr(f-7,7)){goog.basePath=d.substr(0,f-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>'),!0):!1},goog.writeScripts_=function(){function a(l){if(!(l in f.written)){if(!(l in f.visited)&&(f.visited[l]=
!0,l in f.requires))for(var n in f.requires[l])if(!goog.isProvided_(n))if(n in f.nameToPath)a(f.nameToPath[n]);else throw Error("Undefined nameToPath for "+n);l in d||(d[l]=!0,b.push(l))}}var b=[],d={},f=goog.dependencies_,l;for(l in goog.included_)f.written[l]||a(l);for(l=0;l<b.length;l++)if(b[l])goog.importScript_(goog.basePath+b[l]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),
goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.propertyIsEnumerableCustom_=function(a,b){if(b in a)for(var d in a)if(d==b&&Object.prototype.hasOwnProperty.call(a,b))return!0;return!1};goog.propertyIsEnumerable_=function(a,b){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,b):goog.propertyIsEnumerableCustom_(a,b)};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};
goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};
goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){a=goog.typeOf(a);return"object"==a||"array"==a||"function"==a};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);goog.uidCounter_=0;
goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var d in a)b[d]=goog.cloneObject(a[d]);return b}return a};goog.bindNative_=function(a,b,d){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,d){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,f);return a.apply(b,d)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,d){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var d=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,d);return a.apply(this,b)}};goog.mixin=function(a,b){for(var d in b)a[d]=b[d]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,d=b.createElement("script");d.type="text/javascript";d.defer=!1;d.appendChild(b.createTextNode(a));b.body.appendChild(d);
b.body.removeChild(d)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var d=function(a){return goog.cssNameMapping_[a]||a},f=function(a){a=a.split("-");for(var b=[],f=0;f<a.length;f++)b.push(d(a[f]));return b.join("-")};f=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?d:f:function(a){return a};return b?a+"-"+f(b):f(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b=b||{};for(var d in b){var f=(""+b[d]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),f)}return a};goog.exportSymbol=function(a,b,d){goog.exportPath_(a,b,d)};goog.exportProperty=function(a,b,d){a[b]=d};goog.inherits=function(a,b){function d(){}d.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new d;a.prototype.constructor=a};
goog.base=function(a,b,d){var f=arguments.callee.caller;if(f.superClass_)return f.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var l=Array.prototype.slice.call(arguments,2),n=!1,A=a.constructor;A;A=A.superClass_&&A.superClass_.constructor)if(A.prototype[b]===f)n=!0;else if(n)return A.prototype[b].apply(a,l);if(a[b]===f)return a.constructor.prototype[b].apply(a,l);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var plt={wescheme:{}};plt.wescheme.SharedAs=function(a){this.entries=a};plt.wescheme.SharedAs.fromDom=function(a){var b=[];jQuery(a).children("Entry").each(function(){var a=jQuery(this).children("publicId").text(),f=jQuery(this).children("title").text(),l=parseInt(jQuery(this).children("modified").text());b.push({publicId:a,title:f,modified:l})});return new plt.wescheme.SharedAs(b)};plt.wescheme.SharedAs.prototype.getEntries=function(){return this.entries};
plt.wescheme.WeSchemeProperties={};plt.wescheme.WeSchemeProperties.wescheme_server_base="http://www.wescheme.org";plt.wescheme.base64={};
(function(){plt.wescheme.base64.encode=function(a){var b=0,d=0,f=[];if(!a)return a;do{var l=a.charCodeAt(b++);var n=a.charCodeAt(b++);var A=a.charCodeAt(b++);var I=l<<16|n<<8|A;l=I>>18&63;n=I>>12&63;A=I>>6&63;I&=63;f[d++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(A)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(I)}while(b<
a.length);b=f.join("");a=a.length%3;return(a?b.slice(0,a-3):b)+"===".slice(a||3)};plt.wescheme.base64.decode=function(a){var b=0,d=0,f=[];if(!a)return a;a+="";do{var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));
var F=l<<18|n<<12|A<<6|I;l=F>>16&255;n=F>>8&255;F&=255;64==A?f[d++]=String.fromCharCode(l):64==I?f[d++]=String.fromCharCode(l,n):f[d++]=String.fromCharCode(l,n,F)}while(b<a.length);return f.join("")}})();plt.wescheme.Program={};
(function(){plt.wescheme.Program=function(a){this.json=a};plt.wescheme.Program.prototype.getId=function(){return this.json.id};plt.wescheme.Program.prototype.hasSharingUrls=function(){return 0<this.getSharedAsEntries().length};plt.wescheme.Program.prototype.getSharedAsEntries=function(){return new plt.wescheme.SharedAs(this.json.sharedAs)};plt.wescheme.Program.prototype.isPublished=function(){return this.json.published};plt.wescheme.Program.prototype.getTitle=function(){return this.json.title};plt.wescheme.Program.prototype.getOwner=
function(){return this.json.owner};plt.wescheme.Program.prototype.getPublicId=function(){return this.json.publicId};plt.wescheme.Program.prototype.getNotes=function(){return this.json.notes};plt.wescheme.Program.prototype.getSourceCode=function(){return this.json.source.src};plt.wescheme.Program.prototype.getPermissions=function(){return this.json.permissions};plt.wescheme.Program.prototype.getProvides=function(){return this.json.provides};plt.wescheme.Program.prototype.isSourcePublic=function(){return this.json.isSourcePublic};
plt.wescheme.Program.prototype.getObjectCode=function(){return this.json.object.obj};plt.wescheme.Program.prototype.isAndroidPackageBuilt=function(){return!1};plt.wescheme.Program.prototype.getAndroidPackageUrl=function(){return""};plt.wescheme.Program.prototype.getPublicEditingUrl=function(){return plt.wescheme.WeSchemeProperties.wescheme_server_base+"/openEditor?publicId="+encodeURIComponent(this.getPublicId())}})();plt.wescheme.AjaxActions={};
(function(){plt.wescheme.AjaxActions=function(){};plt.wescheme.AjaxActions.prototype.loadProject=function(a,b,d,f){data=a?{pid:a}:{publicId:b};data.gensym=Math.random();jQuery.ajax({cache:!1,data:data,dataType:"json",type:"GET",url:"/loadProject",success:function(a){d(new plt.wescheme.Program(a))},error:function(a){f(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.listProjects=function(a,b){var d={};d.gensym=Math.random();jQuery.ajax({cache:!1,data:d,
dataType:"xml",type:"GET",url:"/listProjects",success:function(b){b=jQuery(b);a(b)},error:function(a){b(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.makeAClone=function(a,b,d,f){jQuery.ajax({cache:!1,data:null===b?{pid:a}:{pid:a,code:b},dataType:"text",type:"POST",url:"/cloneProject",success:function(a){a=parseInt(a);d(a)},error:function(a){f(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.share=
function(a,b,d,f){jQuery.ajax({cache:!1,data:{pid:a,isPublic:b},dataType:"xml",type:"POST",url:"/shareProject",success:function(a){d(jQuery(a))},error:function(a){f(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.deleteProject=function(a,b,d){jQuery.ajax({cache:!1,data:{pid:a},dataType:"xml",type:"POST",url:"/deleteProject",success:function(a){b(jQuery(a))},error:function(a){d(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.save=
function(a,b,d){var f,l={},n=["title","code","notes"];a.pid&&(l.pid=a.pid);for(f=0;f<n.length;f++)Object.hasOwnProperty.call(a,n[f])&&(l[n[f]]=a[n[f]]);jQuery.ajax({cache:!1,data:l,dataType:"text",type:"POST",url:"/saveProject",success:function(a){a=parseInt(a);b(a)},error:function(a){d(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.sendFeedback=function(a,b,d,f){jQuery.ajax({cache:!1,data:{author:a,type:b,feedbackText:d},datatype:"text",type:"POST",
url:"/addFeedback",success:function(a){f()},error:function(a){f()},xhr:function(a){return new XMLHttpRequest(a)}})}})();plt.wescheme.makeDynamicModuleLoader={};
(function(){plt.wescheme.makeDynamicModuleLoader=function(a){var b=new plt.wescheme.AjaxActions,d=function(a,d,n){var f=a.match(/wescheme\/(\w+)/)[1];b.loadProject(null,f,function(b){try{window.COLLECTIONS[a]={name:a,bytecode:(0,eval)("("+b.getObjectCode()+")"),provides:b.getProvides()}}catch(F){n();return}d()},n)};return function(b,l,n){window.COLLECTIONS=window.COLLECTIONS||{};var f=b.match(/^wescheme\/(\w+)$/)?!0:!1;f?d(b,l,n):loadScript(a+"/"+b+"-min.js?__gensym="+encodeURIComponent(""+Math.random()),
l,n)}}})();plt.compiler={};plt.compiler.throwError={};plt.compiler.Program={};plt.compiler.comment={};plt.compiler.couple={};plt.compiler.defFunc={};plt.compiler.defVar={};plt.compiler.defVars={};plt.compiler.defStruct={};plt.compiler.beginExpr={};plt.compiler.lambdaExpr={};plt.compiler.localExpr={};plt.compiler.letrecExpr={};plt.compiler.letExpr={};plt.compiler.letStarExpr={};plt.compiler.condExpr={};plt.compiler.caseExpr={};plt.compiler.andExpr={};plt.compiler.orExpr={};plt.compiler.callExpr={};
plt.compiler.ifExpr={};plt.compiler.whenUnlessExpr={};plt.compiler.symbolExpr={};plt.compiler.literal={};plt.compiler.quotedExpr={};plt.compiler.unquotedExpr={};plt.compiler.quasiquotedExpr={};plt.compiler.unquoteSplice={};plt.compiler.requireExpr={};plt.compiler.provideStatement={};plt.compiler.unsupportedExpr={};plt.compiler.pinfo={};plt.compiler.getBasePinfo={};plt.compiler.isExpression={};plt.compiler.isDefinition={};plt.compiler.env={};plt.compiler.emptyEnv={};plt.compiler.localEnv={};
plt.compiler.globalEnv={};plt.compiler.moduleBinding={};plt.compiler.functionBinding={};plt.compiler.constantBinding={};plt.compiler.structBinding={};plt.compiler.unnamedEnv={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a,b,d){b.source=b.source||"<unknown>";a.args=a.args.map(function(a){if("string"===typeof a)return a;if(a instanceof E)return'["span", [["class", "SchemeValue-Symbol"]], '+a.val+"]";if(void 0!==a.location)return{text:a.text,type:"ColoredPart",loc:a.location.toString(),toString:function(){return a.text}};if(void 0!==a.locations)return{text:a.text,type:"MultiPart",solid:a.solid,locs:a.locations.map(function(a){return a.toString()}),toString:function(){return a.text}}});a={type:"moby-failure",
"dom-message":["span",[["class","Error"]],["span",[["class",d||"Message"]]].concat(d?[["span",[["class","Error.reason"]],a.toString()],["span",[["class",(d||"message")+("Error-GenericReadError"===d?".locations":".otherLocations")]]]]:a.args.map(function(a){return a.toString()})),["br",[],""],["span",[["class","Error.location"]],["span",[["class","location-reference"],["style","display:none"]],["span",[["class","location-offset"]],(b.startChar+1).toString()],["span",[["class","location-line"]],b.startRow.toString()],
["span",[["class","location-column"]],b.startCol.toString()],["span",[["class","location-span"]],b.span.toString()],["span",[["class","location-id"]],b.source.toString()]]]],"structured-error":JSON.stringify({message:d?!1:a.args,location:b.toString()})};throw JSON.stringify(a);}function b(a){k.call(this);this.txt=a;this.toString=function(){return";"+this.txt}}function d(a,b,d,f){k.call(this);this.name=a;this.args=b;this.body=d;this.stx=f;this.toString=function(){return"(define ("+this.name.toString()+
" "+this.args.join(" ")+")\n    "+this.body.toString()+")"}}function f(a,b,d){k.call(this);this.name=a;this.expr=b;this.stx=d;this.toString=function(){return"(define "+this.name.toString()+" "+this.expr.toString()+")"}}function l(a,b,d){k.call(this);this.names=a;this.expr=b;this.stx=d;this.toString=function(){return"(define-values ("+this.names.join(" ")+") "+this.expr.toString()+")"}}function n(a,b,d){k.call(this);this.name=a;this.fields=b;this.stx=d;this.toString=function(){return"(define-struct "+
this.name.toString()+" ("+this.fields.toString()+"))"}}function A(a,b){k.call(this);this.exprs=a;this.stx=b;this.toString=function(){return"(begin "+this.exprs.join(" ")+")"}}function I(a,b,d){k.call(this);this.args=a;this.body=b;this.stx=d;this.toString=function(){return"(lambda ("+this.args.join(" ")+") "+this.body.toString()+")"}}function F(a,b,d){k.call(this);this.defs=a;this.body=b;this.stx=d;this.toString=function(){return"(local ("+this.defs.toString()+") "+this.body.toString()+")"}}function H(a,
b,d){k.call(this);this.expr=a;this.clauses=b;this.stx=d;this.toString=function(){return"(case "+this.expr.toString()+"\n    "+this.clauses.join("\n    ")+")"}}function u(a,b,d){k.call(this);this.func=a;this.args=b;this.stx=d;this.toString=function(){return"("+[this.func].concat(this.args).join(" ")+")"}}function P(a,b,d,f){k.call(this);this.predicate=a;this.consequence=b;this.alternative=d;this.stx=f;this.toString=function(){return"(if "+this.predicate.toString()+" "+this.consequence.toString()+" "+
this.alternative.toString()+")"}}function v(a,b,d){k.call(this);this.predicate=a;this.exprs=b;this.stx=d;this.toString=function(){return"("+this.stx[0]+" "+this.predicate.toString()+" "+this.exprs.toString()+")"}}function E(a,b){k.call(this);this.val=a;this.stx=b}function Q(a){k.call(this);this.val=a;this.toString=function(){if(!0===this.val)return"#t";if(!1===this.val)return"#f";if(this.val instanceof Char){var a=this.val.val;return"\b"===a?"#\\backspace":"\t"===a?"#\\tab":"\n"===a?"#\\newline":
" "===a?"#\\space":"\v"===a?"#\\vtab":this.val.toWrittenString()}return types.toWrittenString(this.val)}}function D(a){k.call(this);this.val=a;this.toString=function(){function a(a){a=a.val;if("quasiquote"===a)a="`";else if("quote"===a)a="'";else if("unquote"===a)a=",";else{if("unquote-splicing"!==a)throw"impossible quote-like string";a=",@"}return a}function b(d){return d instanceof Array&&2===d.length&&d[0]instanceof E&&("quasiquote"===d[0].val||"quote"===d[0].val||"unquote"===d[0].val||"unquote-splicing"===
d[0].val)?a(d[0]).concat(b(d[1])):d instanceof Array?d.reduce(function(a,d){return a.concat(b(d))},"(").concat(")"):d.toString()}return"'"+b(this.val)}}function R(a){k.call(this);this.val=a;this.toString=function(){return","+this.val.toString()}}function N(a){k.call(this);this.val=a;this.toString=function(){return this.val instanceof Array?"`("+this.val.toString()+")":"`"+this.val.toString()}}function S(a){k.call(this);this.val=a;this.toString=function(){return",@"+this.val.toString()}}function y(a,
b){k.call(this);this.spec=a;this.stx=b;this.toString=function(){return"(require "+this.spec.toString()+")"}}function T(a,b){k.call(this);this.clauses=a;this.stx=b;this.toString=function(){return"(provide "+this.clauses.toString()+")"}}function U(a,b,d){k.call(this);this.val=a;this.errorMsg=b;this.errorSpan=d;this.toString=function(){return this.val.toString()}}function W(a,b,d,f){this.name=a;this.moduleSource=b;this.permissions=d;this.loc=f;this.toString=function(){return this.name};return this}function K(a,
b,d,f,k,x,p){this.name=a;this.moduleSource=b;this.minArity=d;this.isVarArity=f;this.permissions=k;this.isCps=x;this.loc=p;this.toString=function(){return this.name};return this}function C(a,b,d,f,k,x,p,l,n){this.name=a;this.moduleSource=b;this.fields=d;this.constructor=f;this.predicate=k;this.accessors=x;this.mutators=p;this.permissions=l;this.loc=n;this.toString=function(){return this.name};return this}function G(a){var b=this;this.bindings=a||O();this.lookup=function(a){return this.bindings.containsKey(a)?
this.bindings.get(a):!1};this.peek=function(a){return 0==a?this:this instanceof L?"IMPOSSIBLE - peeked at an emptyEnv!":this.parent.peek(a-1)};this.contains=function(a){return!1!==this.lookup(a)};this.keys=this.bindings.keys;this.extend=function(a){this.bindings.put(a.name,a);return new plt.compiler.env(this.bindings)};this.extendFunction=function(a,b,d,x,p){return this.extend(new K(a,b,d,x,[],!1,p))};this.extendConstant=function(a,b,d){return this.extend(new W(a,b,[],d))};this.lookup_context=function(a){return a.context instanceof
G?a.context.contains(a)?a.context.lookup(a):!1:b.contains(a)?b.lookup(a):!1};this.extendEnv_moduleBinding=function(a){return a.bindings.reduceRight(function(a,b){return a.extend(b)},this)};this.toString=function(){return this.bindings.values().reduce(function(a,b){return a+"\n  |---"+b.name},"")}}function L(){G.call(this);this.lookup=function(a,b){return new plt.compiler.unboundStackReference(a)}}function X(a){G.call(this);this.parent=a;this.lookup=function(a,b){return this.parent.lookup(a,b+1)}}
function B(a,b,d){G.call(this);this.name=a;this.boxed=b;this.parent=d;this.lookup=function(a,b){return a===this.name?new plt.compiler.localStackReference(a,this.boxed,b):this.parent.lookup(a,b+1)}}function Y(a,b,d){G.call(this);this.names=a;this.boxed=b;this.parent=d;this.lookup=function(a,b){var d=this.names.indexOf(a);return-1<d?new plt.compiler.globalStackReference(a,b,d):this.parent.lookup(a,b+1)}}var r=function(a){var b=function(){};b.prototype=a;return new b},k=function(){this.toString=function(){return this.val.toString()};
this.location=null};b.prototype=r(k.prototype);d.prototype=r(k.prototype);f.prototype=r(k.prototype);l.prototype=r(k.prototype);n.prototype=r(k.prototype);A.prototype=r(k.prototype);I.prototype=r(k.prototype);F.prototype=r(k.prototype);H.prototype=r(k.prototype);u.prototype=r(k.prototype);P.prototype=r(k.prototype);v.prototype=r(k.prototype);E.prototype=r(k.prototype);Q.prototype=r(k.prototype);Vector.prototype.toString=Vector.prototype.toWrittenString=function(){var a=this.elts.filter(function(a){return void 0!==
a}),b=a[a.length-1];return"#("+this.elts.map(function(a){return void 0===a?b:a})+")"};D.prototype=r(k.prototype);R.prototype=r(k.prototype);N.prototype=r(k.prototype);S.prototype=r(k.prototype);y.prototype=r(k.prototype);T.prototype=r(k.prototype);U.prototype=r(k.prototype);var O=types.makeLowLevelEqHash;plt.compiler.keywords="cond else let case let* letrec quote quasiquote unquote unquote-splicing local begin if or and when unless lambda \u03bb define define-struct define-values".split(" ");L.prototype=
r(G.prototype);X.prototype=r(G.prototype);B.prototype=r(G.prototype);Y.prototype=r(G.prototype);plt.compiler.defaultModuleResolver=function(a){for(var b=0;b<plt.compiler.knownModules.length;b++)if(plt.compiler.knownModules[b].name===a)return plt.compiler.knownModules[b];return!1};plt.compiler.moduleGuess=function(a){return plt.compiler.knownModules.reduce(function(b,d){var f=d.name;if(0===f.length)f=a.length;else if(0===a.length)f=f.length;else{for(var k=[],x=0;x<=a.length;x++)k[x]=[x];for(var p=
0;p<=f.length;p++)k[0][p]=p;for(x=1;x<=a.length;x++)for(p=1;p<=f.length;p++)a.charAt(x-1)==f.charAt(p-1)?k[x][p]=k[x-1][p-1]:k[x][p]=Math.min(k[x-1][p-1]+1,Math.min(k[x][p-1]+1,k[x-1][p]+1));f=k[a.length][f.length]}return f<b.distance?{name:d.name,distance:f}:b},{name:a,distance:5})};plt.compiler.defaultModulePathResolver=function(a,b){b=a.toString().split("/");var d=b[0];b.slice(1).join();return-1<plt.compiler.knownCollections.indexOf(d)&&plt.compiler.defaultModuleResolver(a.toString())||/^wescheme\/\w+$/.exec(a)};
plt.compiler.throwError=a;plt.compiler.Program=k;plt.compiler.comment=b;plt.compiler.couple=function(a,b){this.first=a;this.second=b;this.toString=function(){return"("+this.first.toString()+" "+this.second.toString()+")"}};plt.compiler.defFunc=d;plt.compiler.defVar=f;plt.compiler.defVars=l;plt.compiler.defStruct=n;plt.compiler.beginExpr=A;plt.compiler.lambdaExpr=I;plt.compiler.localExpr=F;plt.compiler.letrecExpr=function(a,b,d){this.bindings=a;this.body=b;this.stx=d;this.toString=function(){return"(letrec ("+
this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letExpr=function(a,b,d){this.bindings=a;this.body=b;this.stx=d;this.toString=function(){return"(let ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letStarExpr=function(a,b,d){this.bindings=a;this.body=b;this.stx=d;this.toString=function(){return"(let* ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.condExpr=function(a,b){this.clauses=a;this.stx=b;this.toString=function(){return"(cond\n    "+
this.clauses.join("\n    ")+")"}};plt.compiler.caseExpr=H;plt.compiler.andExpr=function(a,b){this.exprs=a;this.stx=b;this.toString=function(){return"(and "+this.exprs.join(" ")+")"}};plt.compiler.orExpr=function(a,b){this.exprs=a;this.stx=b;this.toString=function(){return"(or "+this.exprs.toString()+")"}};plt.compiler.callExpr=u;plt.compiler.ifExpr=P;plt.compiler.whenUnlessExpr=v;plt.compiler.symbolExpr=E;plt.compiler.literal=Q;plt.compiler.quotedExpr=D;plt.compiler.unquotedExpr=R;plt.compiler.quasiquotedExpr=
N;plt.compiler.unquoteSplice=S;plt.compiler.requireExpr=y;plt.compiler.provideStatement=T;plt.compiler.unsupportedExpr=U;plt.compiler.pinfo=function(b,d,f,k,l,x,p,n,r,h,e,g,c,w){this.env=b||new L;this.modules=d||[];this.usedBindingsHash=f||O();this.freeVariables=k||[];this.gensymCounter=l||0;this.providedNames=x||O();this.definedNames=p||O();this.sharedExpressions=n||O();this.withLocationEmits=r||!0;this.allowRedefinition=h||!1;this.moduleResolver=e||plt.compiler.defaultModuleResolver;this.modulePathResolver=
g||plt.compiler.defaultModulePathResolver;this.currentModulePath=c||"";this.declaredPermissions=w||[];this.isRedefinition=function(a){return this.env.lookup(a)};this.usedBindings=this.usedBindingsHash.values;this.accumulateDeclaredPermission=function(a,c){this.declaredPermissions=[[a,c]].concat(this.declaredPermissions);return this};this.accumulateSharedExpression=function(a,c){c=makeLabeledTranslation(this.gensymCounter,c);this.sharedExpressions.put(c,a);return this};this.accumulateDefinedBinding=
function(c,g){if(-1<plt.compiler.keywords.indexOf(c.name))a(new types.Message([new types.ColoredPart(c.name,c.loc),": this is a reserved keyword and cannot be used as a variable or function name"]),c.loc);else if(!this.allowRedefinition&&this.isRedefinition(c.name))g=this.env.lookup(c.name),g.loc?a(new types.Message([new types.ColoredPart(c.name,c.loc),": this name has a ",new types.ColoredPart("previous definition",g.loc)," and cannot be re-defined"]),c.loc):a(new types.Message([new types.ColoredPart(c.name,
c.loc),": this name has a ","previous definition"," and cannot be re-defined"]),c.loc);else return this.env.extend(c),this.definedNames.put(c.name,c),this};this.accumulateDefinedBindings=function(a,c){var g=this;a.forEach(function(a){g.accumulateDefinedBinding(a,c)});return this};this.accumulateModuleBindings=function(a){var c=this;a.forEach(function(a){c.env.extend(a)});return this};this.accumulateModule=function(a){this.modules=[a].concat(this.modules);return this};this.accumulateBindingUse=function(a){var c=
this.usedBindingsHash.get(a.name);c&&c.moduleSource||this.usedBindingsHash.put(a.name,a);return this};this.accumulateFreeVariableUse=function(a){this.freeVariables=-1<this.freeVariables.indexOf(a)?this.freeVariables:[a].concat(this.freeVariables);return this};this.gensym=function(a){return[this,new E(a+this.gensymCounter++)]};this.permissions=function(){return this.usedBindings().reduce(function(a,c){return(c instanceof K||c instanceof W)&&0<c.permissions.length?a.concat(c.permissions):a},[]).filter(function(a,
c,g){return g.indexOf(a)===c})};this.getExposedBindings=function(){function c(c){function b(a){return e.definedNames.get(a)}e.definedNames.containsKey(c.symbl)||a(new types.Message(["provided-name-not-defined: ",c.symbl]));var h=g(h,e.definedNames.get(c.symbl));return c instanceof plt.compiler.provideBindingStructId?[b(h.constructor),b(h.predicate)].concat(h.accessors.map(b),h.mutators.map(b)):[h]}function g(c,g){if(c instanceof plt.compiler.provideBindingStructId&&!(g instanceof C))a(new types.Message(["provided-structure-not-structure: ",
g.symbl]));else return g}var e=this;bindings=bindings.reduce(function(a,g){return a.concat(c(g))},[]);return bindings.map(function(a){var c=e.declaredPermissions.filter(function(c){return c[0]===a.name});a.permissions=c.map(function(a){return a[1]});return a})};this.toString=function(){var a="pinfo-------------\n**env****: "+this.env.toString();a+="\n**modules**: "+this.modules.join(",");a+="\n**used bindings**: "+this.usedBindings();a+="\n**free variables**: "+this.freeVariables.join(",");a+="\n**gensym counter**: "+
this.gensymCounter;a+="\n**provided names**: "+this.providedNames.values();a+="\n**defined names**: "+this.definedNames.values();return a+="\n**permissions**: "+this.permissions()}};plt.compiler.getBasePinfo=function(a){var b="null empty true false eof pi e js-undefined js-null".split(" ").reduce(function(a,b){return a.extendConstant(b.toString(),'"moby/toplevel"',!1)},new L),d=new plt.compiler.pinfo;b=plt.compiler.topLevelModules.reduceRight(function(a,b){return a.extendEnv_moduleBinding(b)},b);
"moby"===a?d.env=b.extendEnv_moduleBinding(mobyModuleBinding):"base"===a&&(d.env=b);return d};plt.compiler.isExpression=function(a){return!(a instanceof f||a instanceof l||a instanceof n||a instanceof d||a instanceof T||a instanceof U||a instanceof y)};plt.compiler.isDefinition=function(a){return a instanceof f||a instanceof l||a instanceof n||a instanceof d};plt.compiler.env=G;plt.compiler.emptyEnv=L;plt.compiler.localEnv=B;plt.compiler.globalEnv=Y;plt.compiler.moduleBinding=function(a,b){this.name=
a;this.bindings=b};plt.compiler.functionBinding=K;plt.compiler.constantBinding=W;plt.compiler.structBinding=C;plt.compiler.unnamedEnv=X})();plt.compiler.lex={};plt.compiler.sexpToString={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return"("===a||")"===a||"["===a||"]"===a||"{"===a||"}"===a}function b(a,b){return"("===a&&")"===b||"["===a&&"]"===b||"{"===a&&"}"===b}function d(a){return"("===a?")":"["===a?"]":"{"===a?"}":")"===a?"(":"]"===a?"[":"}"===a?"{":y(new types.Message(["otherDelim: Unknown delimiter: ",a]))}function f(a,b){var d;if(b<a.length)for(d=a.charAt(b);/\s/.test(d)&&b<a.length;)"\n"===d?(r++,k=0):k++,d=a.charAt(++b);return b}function l(a){return a instanceof Array?"("+a.map(l).toString()+
")":a.toString()}function n(a,b){O=k;V=r;var p=b;b=f(a,b);var x=a.charAt(b);b>=a.length&&(M=b,y(new types.Message([J,":",V.toString(),":",(O-1).toString(),": read: (found end-of-file)"]),new t(O-1,V,b-2,2),"Error-GenericReadError"));return U.test(x)?y(new types.Message(["read: expected an open '",d(x),"' to open ",new types.ColoredPart(" "+x+" ",new t(k,V,p,1))]),new t(k,V,p,1)):T.test(x)?A(a,b):'"'===x?I(a,b):"#"===x?F(a,b):";"===x?v(a,b):K.test(x)?E(a,b):Q(a,b)}function A(a,p){function x(a,c,g){a=
n(a,c);c=a.location.end().startChar+1;if(a instanceof N&&"."==a.val){if(ba){var e=new types.Message(["A syntax list may have only 2 `.'s"]);y(e,g[Z].location)}ba=Z?g.length:!1;Z=Z||g.length}a instanceof D||(a.parent=g,g.push(a));return c}function l(a,c,g){if(0===c){var e=new types.Message(["A `.' cannot be the first element in a syntax list"]);y(e,a[c].location)}if(c===a.length-1||g===a.length-1)e=new types.Message(["A `.' cannot be the last element in a syntax list"]),y(e,a[g||c].location);if(g)if(2!==
g-c)e=new types.Message(["Two `.'s may only surround one syntax item"]),y(e,a[g].location);else return a.slice(c+1,c+2).concat(a.slice(0,c),a.slice(g+1));a[c+1]instanceof Array||(e=new types.Message(["A `.' must be followed by a syntax list, but found ",new types.ColoredPart("something else",a[c+1].location)]),y(e,a[c+1].location));if(a.length>c+2)e=new types.Message(["A `.' followed by a syntax list must be followed by a closing delimeter, but found ",new types.ColoredPart("something else",a[c+2].location)]),
y(e,a[c+1].location);else return a.slice(0,c).concat(a[c+1],a.slice(c+2))}function h(a){if(/expected a .+ to (close|open)/.exec(a)||/unexpected/.exec(a)||/syntax list/.exec(a)||/bad syntax/.exec(a)||/bad character constant/.exec(a))throw a;var c=JSON.parse(JSON.parse(a)["structured-error"]).location;z=new t(Number(c.column),Number(c.line),Number(c.offset)-1,Number(c.span));p=M;w=a;return p}var e=k,g=r,c=p,w=!1,z=new t(e,g,c,1),q=a.charAt(p++),Z=!1,ba=!1;k++;var ca=[];Y.push(q);for(p=f(a,p);p<a.length&&
!U.test(a.charAt(p));){"\n"===a.charAt(p)&&(r++,k=0);try{p=x(a,p,ca)}catch(fa){p=h(fa)}p=f(a,p)}if(p>=a.length){var u=new types.Message(["read: expected a closing '",d(q),"' to close ",new types.ColoredPart(" "+q.toString()+" ",new t(e,g,c,1))]);y(u,z)}b(q,a.charAt(p))||(u=new types.Message(["read: expected a closing '",d(q),"' to close ",new types.ColoredPart(" "+q.toString()+" ",new t(e,g,c,1))," but found a ",new types.ColoredPart(" "+a.charAt(p).toString()+" ",new t(k,r,p,1))]),y(u,new t(k,r,
p,1)));k++;p++;if(w)throw M=p,w;if(Z||ba)ca=l(ca,Z,ba);ca.location=new t(e,g,c,p-c);return ca}function I(a,b){var d=k,p=r,h=b,e=/^"[^"]*(\\"[^"]*)*[^\\]"|""/.test(a.slice(b)),g=/^"[^"]*(\\"[^"]*)*/.exec(a.slice(h))[0];b++;k++;for(var c,w="";b<a.length&&'"'!==a.charAt(b);){c=a.charAt(b++);"\n"===c?(r++,k=0):k++;if("\\"===c){k++;c=a.charAt(b++);if(b>=a.length)break;switch(!0){case /a/.test(c):c="\u0007";break;case /b/.test(c):c="\b";break;case /t/.test(c):c="\t";break;case /n/.test(c):c="\n";break;
case /v/.test(c):c="\v";break;case /f/.test(c):c="\f";break;case /r/.test(c):c="\r";break;case /e/.test(c):c="'";break;case /\n/.test(c):c="";break;case /["'\\]/.test(c):break;case /[xuU]/.test(c):var z="x"===c?C:"u"===c?G:X;z.test(a.slice(b))||(M=h+g.length+1,y(new types.Message([J,":",p.toString(),":",d.toString(),": read: no hex digit following \\"+c+" in string"]),new t(d,p,h,b-h+1),"Error-GenericReadError"));z=z.exec(a.slice(b))[1];c=String.fromCharCode(parseInt(z,16));b+=z.length;k+=z.length;
break;case B.test(a.slice(b-1)):z=B.exec(a.slice(b-1))[1];c=String.fromCharCode(parseInt(z,8));b+=z.length-1;k+=z.length-1;break;default:M=h+g.length+1,y(new types.Message([J,":",p.toString(),":",d.toString(),": read: unknown escape sequence \\"+c+" in string"]),new t(d,p,h,b-h),"Error-GenericReadError")}}w+=c}e||(M=h+g.length,y(new types.Message([J,":",p.toString(),":",d.toString(),": read: expected a closing '\"'"]),new t(d,p,h,1),"Error-GenericReadError"));a=new R(new types.string(w));b++;k++;
a.location=new t(d,p,h,b-h);return a}function F(a,b){function d(a,c){a=new types.Message([J,":",r.toString(),":",(k-1).toString(),a]);y(a,new t(f,h,e,c.length+1),"Error-GenericReadError")}var f=k,h=r,e=b;b++;k++;if(b<a.length){var g=a.charAt(b).toLowerCase(),c=/^(((fl|fx|s|hash|hasheq)[[({])|((rx|px)#{0,1}"))/g.exec(a.slice(b));g=/^(!(?!\/)|reader|lang[\s]{0,1})/.exec(a.slice(b));var w=/^(c|C)(i|I|s|S)/.exec(a.slice(b)),z=/^([0-9]*)[[({]/g.exec(a.slice(b));if(c&&0<c[0].length){a=n(a,b+c[0].length-
1);b=c[0].length;var q=c[0].replace(/[\(\[\{"|#"]/g,"");switch(q){case "fl":q="flvectors";break;case "fx":q="fxvectors";break;case "s":q="structs";break;case "hash":case "hasheq":q="hashtables";break;case "px":case "rx":q="regular expressions";break;default:throw"IMPOSSIBLE: unsupportedMatch captured something it shouldn't: "+q;}z=new types.Message([J,":",r.toString(),":","0",": read-syntax: literal "+q+" not allowed"]);q=new S(a,z,b);q.location=new t(f,h,e,c[0].length+a.location.span);return q}if(g&&
0<g[0].length)d(": read: #"+g[0].trim()+" not enabled in the current context",g[0]);else{if(w&&0<w[0].length)return aa="cs"===w[0].toLowerCase(),k+=2,n(a,b+2);if(z&&0<z[0].length)return q=z[1]?parseInt(z[1]):"",c=q.toString().length,b+=c,k+=c,c=A(a,b),q=""===q?c.length:parseInt(z[1]),c.length>q&&(a=new types.Message(["read: vector length "+q+" is too small, ",c.length+" value"+(1<c.length?"s":"")," provided"]),y(a,new t(f,h,e,z[0].length))),b+=c.location.span,q=new R(new Vector(q,c)),q.location=new t(f,
h,e,b-e),q;c=/^(hasheq|hash|fl|fx|\d+|true|false|[tfeibdox]|\<\<|[\\\"\%\:\&\|\;\!\`\,\']|)/i.exec(a.slice(b))[0];z=a.charAt(b+c.length);g=c.charAt(0).toLowerCase();switch(g){case "\\":q=H(a,b-1);b+=q.location.span-1;break;case '"':d(": byte strings are not supported in WeScheme",'#"');case "%":q=Q(a,b);q.val="#"+q.val;b+=q.location.span;break;case ":":q=Q(a,b-1);z=new types.Message([J,":",r.toString(),":","0",": read-syntax: Keyword internment is not supported in WeScheme"]);q=new S(q.val,z,q.location.span);
b+=q.val.length-1;break;case "&":k++;a=n(a,b+1);c=new N("box");q=[c,a];b+=a.location.span+1;c.location=new t(f,h,e,b-e);break;case "|":b--;q=u(a,b);b+=q.location.span+1;break;case ";":q=P(a,b+1);b+=q.location.span+1;break;case "!":q=v(a,b-1);b+=q.location.span;break;case "`":case ",":case "'":q=E(a,b);q.location.startChar--;q.location.span++;M=b+q.location.span;a=new types.Message([J,":",h.toString(),":",(k-1).toString()," read: WeScheme does not support the '#"+g+"' notation for ",","===g?"unsyntax":
"'"===g?"syntax":"quasisyntax"]);y(a,q.location);break;case "<<":q=I(a,b-1);b+=q.location.span;break;case "e":case "i":case "b":case "o":case "d":case "x":k--;q=Q(a,b-1);b+=q.location.span-1;break;case "true":case "false":case "t":case "f":if(!W.exec(z)){q=new R("t"===g||"true"===c);b+=c.length;k+=c.length;break}default:M=b,a=new types.Message([J,":",r.toString(),":",(k-1).toString(),": read: bad syntax `#",c+z,"'"]),y(a,new t(f,h,e,(c+z).length+1),"Error-GenericReadError")}}}else M=b,y(new types.Message([J,
":",r.toString(),":",(k-1).toString(),": read: bad syntax `#'"]),new t(f,h,e,b-e),"Error-GenericReadError");q.location=new t(f,h,e,b-e);return q}function H(b,d){var f=k,p=r,h=d;d+=2;k++;for(var e="",g=!0,c;d<b.length&&"#\\"!==b.slice(d,d+2)&&(g||!/\s/.test(b.charAt(d))&&!a(b.charAt(d)));)g=!1,k++,e+=b.charAt(d++);b=/(backspace|tab|newline|space|vtab)[^a-zA-Z]*/i;g=b.exec(e);b.test(e)?(e="backspace"===e?"\b":"tab"===e?"\t":"newline"===e?"\n":"space"===e?" ":"vtab"===e?"\v":"Impossible: unknown special char was matched by special char!",
d=h+2+g[1].length):/^[0-9].*/.test(e)&&B.test(e)&&B.exec(e)[0]===e&&256>parseInt(B.exec(e)[0],8)&&31<parseInt(B.exec(e)[0],8)?(g=/[0-7]+/.exec(e)[0],e=String.fromCharCode(parseInt(g,8)),d=h+2+g.length):/[uU]/.test(e)&&(c="u"===e.charAt(0)?G:L)&&c.test(e.slice(1))?(g=c.exec(e.slice(1))[0],k+=g.length-e.length+1,e=String.fromCharCode(parseInt(g,16)),d=h+3+g.length):1===e.length||/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]$/.test(e.charAt(1))?(e=e.charAt(0),d=h+3):y(new types.Message([J,":",p.toString(),":",(f-
1).toString(),": read: bad character constant: #\\",e]),new t(f-1,p,h,d-h),"Error-GenericReadError");e=new R(new types["char"](e));e.location=new t(f,p,h,d-h);return e}function u(a,b){var d=k,f=r,h=b;b+=2;k+=2;for(var e="";b+1<a.length&&("|"!==a.charAt(b)||"#"!==a.charAt(b+1));)"\n"===a.charAt(b)&&(r++,k=0),e+=a.charAt(b),b++,k++;b+1>=a.length&&y(new types.Message(["read: Unexpected EOF when reading a multiline comment"]),new t(d,f,h,b-h));b++;k++;a=new D(e);a.location=new t(d,f,h,b-h);return a}function P(a,
b){for(var d=k++,l=r,h=b,e;(b=f(a,b))&&b+1<a.length&&(e=n(a,b))&&e instanceof D;)b=e.location.endChar;b+1>=a.length&&(M=b,y(new types.Message([J,":",l.toString(),":",(d-1).toString(),": read: expected a commented-out element for `#;' (found end-of-file)"]),new t(d-1,l,b-2,2),"Error-GenericReadError"));a=new D("("+e.toString()+")");b=e.location.endChar;a.location=new t(d,l,h,b-h);return a}function v(a,b){var d=k,f=r,h=b;b++;k++;for(var e="";b<a.length&&"\n"!==a.charAt(b);)e+=a.charAt(b),k++,b++;b>
a.length&&(M=b,y(new types.Message(["read: Unexpected EOF when reading a line comment"]),new t(d,f,h,b-h)));a=new D(e);a.location=new t(d,f,h,b+1-h);r++;k=0;return a}function E(a,b){function d(a){M=a+1;y(new types.Message([J,":",h.toString(),":",l.toString(),": read: expected an element for"+("'"==g?" quoting ":"`"==g?" quasiquoting ":","==g?" unquoting ":",@"==g?" unquoting ":""),g," (found end-of-file)"]),new t(l,h,e,g.length),"Error-GenericReadError")}var l=k,h=r,e=b,g=a.charAt(b),c="'"==g?new N("quote"):
"`"==g?new N("quasiquote"):"";b+1>=a.length&&d(b);b++;k++;","==g&&("@"==a.charAt(b)?(b++,k++,g+="@",c=new N("unquote-splicing")):c=new N("unquote"));for(c.location=new t(k-1,h,e,b-e);!w||w instanceof D;){b=f(a,b);try{var w=n(a,b)}catch(z){/read: \(found end-of-file\)/.test(z)&&d(b);if(w=/expected a .* to open ","(.)"/.exec(z))M=b+1,y(new types.Message([J,":",r.toString(),":",k.toString(),": read: unexpected `"+w[1]+"'"]),new t(k,r,b,1),"Error-GenericReadError");throw z;}b=w.location.end().startChar+
1}b=[c,w];w=w.location.end().startChar+1-e;b.location=new t(l,h,e,w);return b}function Q(a,b){var d=k,f=r,h=b,e=/(\|(.|\n)*\||\\(.|\n)|[^\(\)\{\}\[\]\,\'\`\s\"\;])+/mg.exec(a.slice(b))[0],g=/\.*\\+$/.exec(e);g&&0<g[0].length%2&&(M=b=a.length,y(new types.Message([J,":",r.toString(),":",d.toString(),": read: EOF following `\\' in symbol"]),new t(d,f,h,b-h),"Error-GenericReadError"));b+=e.length;k+=e.length;g="";for(var c=0;c<e.length;c++)"\\"==e.charAt(c)&&c++,g+=e.charAt(c);g=g.split("|");if(0===g.length%
2){M=a.length;var w=e.slice(0,e.length-(g[g.length-1].length+1)),z=h+w.length;k=d;for(c=0;c<w.length;c++)"\n"===a.charAt(b)?(r++,k=0):k++;y(new types.Message([J,":",r.toString(),":",k.toString(),": read: unbalanced `|'"]),new t(k,r,z,a.length-z),"Error-GenericReadError")}a=g.reduce(function(a,b,c){return a+(c%2||aa?b:b.toLowerCase())},"");"\n"===a&&(r++,k=0);c=/^$|[\(\)\{\}\[\]\,\'\`\s\"\\]/g;a=/^.*\\[\d]*.*|\|[\d]*\|/.test(e)||c.test(a)?"|"+a+"|":a;e=new N(a);if(1===g.length&&!/^[a-zA-Z\-\?]+$/.test(a))try{var q=
jsnums.fromString(a,!0);if(q||0===q)q instanceof Object&&(q.stx=a,q.location=new t(d,f,h,b-h)),e=new R(q)}catch(Z){M=b,q=new types.Message([J,":",f.toString(),":",d.toString(),": read: "+Z.message]),y(q,new t(d,f,h,b-h),"Error-GenericReadError")}e.stx=a;e.location=new t(d,f,h,b-h);return e}var D=plt.compiler.comment,R=plt.compiler.literal,N=plt.compiler.symbolExpr,S=plt.compiler.unsupportedExpr,y=plt.compiler.throwError,T=/[(\u005B\u007B]/,U=/[)\u005D\u007D]/,W=/^[^(\u005B\u007B)\u005D\u007D\s]+/,
K=/['`,]/,C=/^([0-9a-f]{1,2})/i,G=/^([0-9a-f]{1,4})/i,L=/^([0-9a-f]{1,6})/i,X=/^([0-9a-f]{1,8})/i,B=/^([0-7]{1,3})/i,Y,r,k,O,V,J,aa,M,t=function(a,b,d,f,h){this.startCol=a;this.startRow=b;this.startChar=d;this.span=f;this.source=h||J;this.endCol=k;this.endRow=r;this.endChar=d+f;this.start=function(){return new t("","",this.startChar,1)};this.end=function(){return new t("","",this.startChar+this.span-1,1)};this.toString=function(){return"Loc("+this.startCol+", "+this.startRow+", "+(this.startChar+
1)+","+this.span+")"};this.toVector=function(){return new types.vector(['"'+this.source+'"',this.startChar+1,this.startRow,this.startCol,this.span])};this.toString=function(){return{line:this.startRow.toString(),id:this.source,span:this.span.toString(),offset:(this.startChar+1).toString(),column:this.startCol.toString()}}};Array.prototype.toString=function(){return this.join(" ")};plt.compiler.lex=function(a,b,d){var p=(new Date).getTime();try{var h=0;O=k=0;V=r=1;aa=!0;J=b||"<definitions>";b=[];Y=
[];for(h=f(a,0);h<a.length;){var e=n(a,h);e instanceof D||b.push(e);h=f(a,e.location.startChar+e.location.span)}b.location=new t(O,V,0,h,J);var g=b}catch(c){throw console.log("LEXING ERROR"),c;}a=(new Date).getTime();d&&(console.log("Lexed in "+Math.floor(a-p)+"ms"),console.log(g),console.log(l(g)));return g};plt.compiler.sexpToString=l})();plt.compiler.parse={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return a instanceof k}function b(a){return a instanceof Array&&1<=a.length}function d(a,b){a=a instanceof k?a.val:a;b=b instanceof k?b.val:b;return a===b}function f(a){return a.map(function(a){return u(a)?P(a):u(a)||L(a)||B(a)?L(a)?X(a):B(a)?Y(a):m(new types.Message(["Not a Definition, Expression, Library Require, or Provide"]),a.location):v(a)})}function l(a){return 0===a.length?[]:b(a)?f(a):m(new types.Message(["The sexp is not a list of definitions or expressions: "+a]),
a.location)}function n(c){return b(c)&&a(c[0])&&d("define-struct",c[0])}function A(c){return b(c)&&a(c[0])&&d("define",c[0])}function I(c){return b(c)&&a(c[0])&&d("define-val",c[0])}function F(c){return b(c)&&a(c[0])&&d("define-fun",c[0])}function H(c){return b(c)&&a(c[0])&&d("define-values",c[0])}function u(a){return n(a)||A(a)||H(a)||I(a)||F(a)}function P(a){function b(a){2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected the structure name after define-struct, but nothing's there"]),
a.location);a[1]instanceof k||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected the structure name after define-struct, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",a[1].location),", but nothing's there"]),a.location);a[2]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",a[1].location),", but found ",new types.ColoredPart("something else",a[2].location)]),a.location);a[2].forEach(function(b){b instanceof k||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a field name, but found ",new types.ColoredPart("something else",b.location)]),a.location)});if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=1===
a[2].length?"field name":"field names",g=b.length+" extra "+(1===b.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected nothing after the ",new types.ColoredPart(c,a[2].location),", but found ",new types.MultiPart(g,b,!1)]),a.location)}return new fa(C(a[1]),a[2].map(C),a)}function c(a){2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found neither"]),a.location);3>a.length&&
m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found only ",new types.ColoredPart("one part",a[1].location)]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+(1===b.length?
"part":"parts");b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found ",new types.MultiPart(c,b,!1)]);m(b,a.location)}return new ha(a[1].map(C),v(a[2]),a)}function g(a){if(3!==a.length){var b=a.slice(1).map(function(a){return a.location}),c=4>a.length?" fewer than two":new types.MultiPart("more than two parts",b,!1);m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected exactly two parts for the definition: a name (or a function name and its variables) and an expression, but found",
c]),a.location)}3<a.length&&(b=a.slice(1).map(function(a){return a.location}),c=b.length+" parts",m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected exactly two parts, but found",new types.MultiPart(c,b,!1)]),a.location));if(a[1]instanceof Array)return 0===a[1].length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least a function name within ",new types.ColoredPart("the parentheses",a[1].location)]),a.location),a[1][0]instanceof k||
m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a function name after the open parenthesis but found ",new types.ColoredPart("something else",a[1][0].location)]),a.location),a[1].forEach(function(b){b instanceof k||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable name but found ",new types.ColoredPart("something else",b.location)]),a.location)}),3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body, but nothing's there"]),
a.location),b=a[1].slice(1).map(C),b.location=a[1].location,new ba(C(a[1][0]),b,v(a[2]),a);if(a[1]instanceof k)return 3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the variable ",new types.ColoredPart(a[1].val,a[1].location)," but nothing's there"]),a.location),new ca(C(a[1]),v(a[2]),a);m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a name (or a function name and its variables) "," and an expression, but found",
new types.ColoredPart("something else",a[1].location)]),a.location)}function e(a){if(3!==a.length){var b=a.slice(1).map(function(a){return a.location});b=4>a.length?" fewer than two":new types.MultiPart("more than two parts",b,!1);m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected exactly two parts for the value: a name and an expression, but found",b]),a.location)}if(a[1]instanceof k)return 3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),
": expected an expression after the name ",new types.ColoredPart(a[1].val,a[1].location)," but nothing's there"]),a.location),new ca(C(a[1]),v(a[2]),a);m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a name but found ",new types.ColoredPart("something else",a[1].location)]),a.location)}function d(a){if(3!==a.length){var b=a.slice(1).map(function(a){return a.location});b=4>a.length?" fewer than two":new types.MultiPart("more than two parts",b,!1);m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected exactly two parts for the function: a header (function name and variables, in parentheses) and a body (any expression), but found",b]),a.location)}if(a[1]instanceof Array)return 0===a[1].length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least a function name within ",new types.ColoredPart("the parentheses",a[1].location)]),a.location),a[1][0]instanceof k||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a function name after the open parenthesis but found ",
new types.ColoredPart("something else",a[1][0].location)]),a.location),a[1].forEach(function(b){b instanceof k||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable name, but found ",new types.ColoredPart("something else",b.location)]),a.location)}),3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body after ",new types.ColoredPart("the header",a[1].location,!1),", but nothing's there"]),
a.location),b=a[1].slice(1).map(C),b.location=a[1].location,new ba(C(a[1][0]),b,v(a[2]),a);m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a header (function name and variables, in parentheses) and a body for the function"]),a.location)}var h=n(a)?b(a):A(a)?g(a):H(a)?c(a):I(a)?e(a):F(a)?d(a):m(new types.Message([": expected to find a definition, but found: "+a]),a.location);h.location=a.location;return h}function v(a){return b(a)?E(a):K(a)}function E(c){function h(a){d(a[0],
"unquote")&&m(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");d(a[0],"unquote-splicing")&&m(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");d(a[0],"else")&&m(new types.Message([new types.ColoredPart(a[0].val,a.location),": not allowed ",new types.ColoredPart("here",a.location),", because this is not a question in a clause"]),a.location);
return b(a)?new q(v(a[0]),a.slice(1).map(v),a[0]):m(new types.Message(["function call sexp"]),a.location)}function w(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one variable (in parentheses) after lambda, but nothing's there"]),a.location);a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one variable (in parentheses) after lambda, but found ",new types.ColoredPart("something else",
a[1].location)]),a.location);a[1].forEach(function(b){b instanceof k||(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a list of variables after lambda, but found ",new types.ColoredPart("something else",b.location)]),m(b,a.location))});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body, but nothing's there"]),a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),
c=b.length+" extra "+(1===b.length?"part":"parts");b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only one expression for the function body, but found ",new types.MultiPart(c,b,!1)]);m(b,a.location)}b=a[1].map(C);b.location=a[1].location;return new e(b,v(a[2]),a[0])}function z(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one definition (in square brackets) after local, but nothing's there"]),a.location);a[1]instanceof
Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a collection of definitions, but given ",new types.ColoredPart("something else",a[1].location)]),a[1].location);a[1].forEach(function(b){u(b)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a definition, but given ",new types.ColoredPart("something else",b.location)]),b.location)});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),
a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+(1===b.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}return new x(a[1].map(P),v(a[2]),a[0])}function f(a){3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),a.location);a[1]instanceof
Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",a[1].location)]),a.location);a[1].forEach(function(b){G(b)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",b.location)]),b.location)});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),
a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+(1===b.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}return new t(a[1].map(N),v(a[2]),a[0])}function la(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one binding (in parentheses) after let, but nothing's there"]),a.location);
a[1]instanceof Array||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected sequence of key value pairs, but given ",new types.ColoredPart("something else",a[1].location)]),a[1].location);a[1].forEach(function(b){G(b)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",b.location)]),b.location)});if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+
(1===b.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),a.location);return new aa(a[1].map(N),v(a[2]),a)}function l(a){1===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),
a.location);if(!(a[1]instanceof Array)){var b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected sequence of key/value pairs, but given ",new types.ColoredPart("something else",a[1].location)]);m(b,a.location)}a[1].forEach(function(b){G(b)||m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",b.location)]),b.location)});2===a.length&&m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a single body, but found none"]),a.location);if(3<a.length){b=a.slice(3).map(function(a){return a.location});var c=b.length+" extra "+(1===b.length?"part":"parts");m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}b=a[1].map(N);b.location=a[1].location;return new M(b,v(a[2]),a[0])}function n(a){4>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a test, a consequence, and an alternative, but all three were not found"]),
a.location);if(4<a.length){var b=a.slice(1).map(function(a){return a.location});m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only a test, a consequence, and an alternative, ","but found ",new types.MultiPart("more than three of these",b,!1)]),a.location)}return new V(v(a[1]),v(a[2]),v(a[3]),a[0])}function ba(a){function c(a){return b(a)?a.map(c):a instanceof Array&&0===a.length?a:K(a)}2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),
": expected a single argument, but did not find one."]),a.location);if(2<a.length){var e=a.slice(1).map(function(a){return a.location});m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",e,!1)]),a.location)}return new g(c(a[1]))}return function(){var b=c[0];a(b)?d("\u03bb",b)?b=w(c):d("lambda",b)?b=w(c):d("local",b)?b=z(c):d("letrec",b)?b=f(c):d("let",b)?b=la(c):d("let*",b)?b=l(c):d("cond",b)?b=D(c):d("case",
b)?b=R(c):d("if",b)?b=n(c):d("begin",b)?(2>c.length&&(b=new types.Message([new types.ColoredPart(c[0].val,c[0].location),": Inside a begin, expected to find a body, but nothing was found."]),m(b,c.location)),b=new J(c.slice(1).map(v),c[0])):d("and",b)?(3>c.length&&m(new types.Message([new types.ColoredPart(c[0].val,c[0].location),": expected at least 2 arguments, but given ",1===c.length?"0":new types.ColoredPart((c.length-1).toString(),c[1].location)]),c.location),b=new p(c.slice(1).map(v),c[0])):
d("or",b)?(3>c.length&&m(new types.Message([new types.ColoredPart(c[0].val,c[0].location),": expected at least 2 arguments, but given ",1===c.length?"0":new types.ColoredPart((c.length-1).toString(),c[1].location)]),c.location),b=new da(c.slice(1).map(v),c[0])):b=d("when",b)?Q(c):d("unless",b)?Q(c):d("quote",b)?ba(c):d("quasiquote",b)?U(c):d("unquote",b)?S(c):d("unquote-splicing",b)?y(c):h(c):b=h(c);b.location=c.location;return b}()}function Q(a){3>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected at a test and at least one result after "+a[0]+", but nothing's there"]),a.location);var b=a.slice(2),c=new Z(v(a[1]),l(b),a[0]);b.location=b[0].location;c.location=a.location;return c}function D(b){1===b.length&&m(new types.Message([new types.ColoredPart(b[0].val,b[0].location),": expected at least one clause after cond, but nothing's there"]),b.location);var c=[b[0].location,b.location.start(),b.location.end()];b.slice(1).forEach(function(a){var g=[a.location.start(),
a.location.end()];a instanceof Array||m(new types.Message([new types.MultiPart(b[0].val,c,!0),": expected a clause with a question and an answer, but found ",new types.ColoredPart("something else",a.location)]),a.location);0===a.length&&m(new types.Message([new types.MultiPart(b[0].val,c,!0),": expected a clause with a question and an answer, but found an ",new types.MultiPart("empty part",g,!0)]),a.location);1===a.length&&m(new types.Message([new types.MultiPart(b[0].val,c,!0),": expected a clause with a question and an answer, but found a ",
new types.MultiPart("clause",g,!0)," with only ",new types.MultiPart("one part",[a[0].location],!1)]),a.location);if(2<a.length){var e=a.map(function(a){return a.location}),h=e.length+" parts";m(new types.Message([new types.MultiPart(b[0].val,c,!0),": expected a clause with a question and an answer, but found ",new types.MultiPart("a clause",g,!0)," with ",new types.MultiPart(h,e,!1)]),a.location)}});var g=b.slice(1).length,e=b.slice(1).map(function(a){var b=v(a[0]),c=v(a[1]);c=new O(b,c);-1<plt.compiler.keywords.indexOf(b.val)&&
"else"!==b.val&&m(new types.Message([new types.ColoredPart(b.val,b.location),": expected an open parenthesis before ",b.val,", but found none"]),b.location);b.isClause=!0;c.location=a.location;return c});b.slice(1).forEach(function(e,h){a(e[0])&&d(e[0],"else")&&h<g-1&&m(new types.Message([new types.MultiPart("cond",c,!0),": ","found an ",new types.ColoredPart("else clause",e.location)," that isn't the last clause in its cond expression; there is ",new types.ColoredPart("another clause",b[h+2].location),
" after it"]),e.location)});return new ea(e,b[0])}function R(b){function c(b){return a(b[0])&&"else"===b[0].val}if(1===b.length){var e=new types.Message([new types.ColoredPart(b[0].val,b[0].location),": expected at least one clause after case, but nothing's there"]);m(e,b.location)}var w=[b[0].location,b.location.start(),b.location.end()];2===b.length&&(e=new types.Message([new types.MultiPart(b[0].val,w,!0),": expected a clause with at least one choice (in parentheses) and an answer after the expression, but nothing's there"]),
m(e,b.location));e=b.slice(2);e.forEach(function(a){var c=[a.location.start(),a.location.end()];if(!(a instanceof Array)){var g=new types.Message([new types.MultiPart(b[0].val,w,!0),": expected a clause with at least one choice (in parentheses), but found ",new types.ColoredPart("something else",a.location)]);m(g,b.location)}0===a.length&&(g=new types.Message([new types.MultiPart(b[0].val,w,!0),": expected at least one choice (in parentheses) and an answer, but found an ",new types.ColoredPart("empty part",
a.location)]),m(g,b.location));a[0]instanceof Array||a[0]instanceof k&&d(a[0],"else")||(g=new types.Message([new types.MultiPart(b[0].val,w,!0),": expected 'else', or at least one choice in parentheses, but found ",new types.ColoredPart("something else",a.location)]),m(g,b.location));1===a.length&&(g=new types.Message([new types.MultiPart(b[0].val,w,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",c,!0)," with only ",new types.ColoredPart("one part",
a[0].location)]),m(g,b.location));2<a.length&&(a=a.map(function(a){return a.location}),g=a.length+" parts",g=new types.Message([new types.MultiPart(b[0].val,w,!0),": expected only one expression for the answer in the case clause, but found a ",new types.MultiPart("clause",c,!0)," with ",new types.MultiPart(g,a,!1)]),m(g,b.location))});var z=e.length,f=e.map(function(a){var b=c(a)?a[0]:new g(a[0]),e=v(a[1]);e=new O(b,e);b.isClause=!0;e.location=a.location;return e});e.forEach(function(a,g){c(a)&&g<
z-1&&(a=new types.Message([new types.MultiPart("case",w,!0),": found an ",new types.ColoredPart("else clause",a.location),"that isn't the last clause in its case expression; there is ",new types.ColoredPart("another clause",b[g+2].location)," after it"]),m(a,b.location))});return new h(v(b[1]),f,b[0])}function N(a){if(G(a)){var b=new O(C(a[0]),v(a[1]));b.location=a.location;b.stx=a;return b}m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a sequence of key/value pairs, but given ",
new types.ColoredPart("something else",a[0].location)]),a.location)}function S(a,b){if("undefined"===typeof b)m(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");else if(2!==a.length)m(new types.Message(["Inside an unquote, expected to find a single argument, but found "+(a.length-1)]),a.location);else{if(1===b)return b=new c(v(a[1])),b.location=a[1].location,b;if(1<b)return b=new c(T(a[1],b-1)),b.location=a[1].location,
b;m(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),a.location)}}function y(a,b){if("undefined"===typeof b)m(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");else if(2!==a.length)m(new types.Message(["Inside an unquote-splicing, expected to find a single argument, but found "+(a.length-1)]),a.location);else{if(1===b)return b=new z(v(a[1])),b.location=a[1].location,
b;if(1<b)return b=new z(T(a[1],b-1)),b.location=a[1].location,b;m(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),a.location)}}function T(a,c){if(b(a)&&"unquote"===a[0].val)return S(a,c);if(b(a)&&"unquote-splicing"===a[0].val)return y(a,c);if(b(a)&&"quasiquote"===a[0].val)return U(a,c);if(b(a)){var e=a.map(function(a){return T(a,c)});e.location=a.location;return e}return 0===c?v(a):function(){var b=new g(a);b.location=a.location;return b}()}function U(a,
c){c="undefined"===typeof c?0:c;2>a.length&&m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but did not find one "]),a.location);if(2<a.length){var g=a.slice(1).map(function(a){return a.location});m(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",g,!1)]),a.location)}b(a[1])&&d(a[1][0],"unquote-splicing")&&m(new types.Message(["misuse of ,@ or `unquote-splicing' within a quasiquoting backquote"]),
a.location);c=T(a[1],c+1);c.location=a[1].location;c=new w(c);c.location=a.location;return c}function W(a){function b(){var b=new r(0);b.location=a.location;return b}var c=a.val,g=f(c.elts.filter(function(a){return void 0!==a})),e=0===g.length?b():g[g.length-1];g=c.elts.map(function(a){return void 0===a?e:v(a)});c=new k("vector");g=new q(c,g);c.location=g.location=a.location;return g}function K(b){var c=b instanceof ka?b:types.isVector(b.val)?W(b):a(b)?b:b instanceof r?b:d("quote",b)?new g(b):d("empty",
b)?new q(new k("list"),[]):new q(null,[]);c.location=b.location;return c}function C(b){return a(b)?b:m(new types.Message(["ID"]),b.location)}function G(a){return b(a)&&2===a.length}function L(c){return b(c)&&a(c[0])&&d(c[0],"require")}function X(a){if(2>a.length){var b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a module name after `require', but found nothing"]);m(b,a.location)}a[1]instanceof Array&&d(a[1][0],"lib")?(3>a[1].length&&(b=a[1].slice(1).length,b+=1===
b?" part":" parts",b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least two strings after ",new types.ColoredPart("lib",a[1][0].location)," but found only ",b]),m(b,a.location)),a[1].slice(1).forEach(function(b){types.isString(b.val)||(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a string for a library collection, but found ",new types.ColoredPart("something else",str.location)]),m(b,a.location))})):a[1]instanceof Array&&d(a[1][0],
"planet")?(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": Importing PLaneT pacakges is not supported at this time"]),m(b,a.location)):a[1]instanceof k||types.isString(a[1].val)||(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a module name as a string or a `(lib ...)' form, but found ",new types.ColoredPart("something else",a[1].location)]),m(b,a.location));b=new ia(a[1],a[0]);b.location=a.location;return b}function B(c){return b(c)&&a(c[0])&&
d(c[0],"provide")}function Y(a){var b=a.slice(1).map(function(b){if(b instanceof k||b instanceof Array&&2==b.length&&b[0]instanceof k&&d(b[0],"struct-out")&&b[1]instanceof k)return b;b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": I don't recognize the syntax of this ",new types.ColoredPart("clause",b.location)]);m(b,a.location)});b=new ja(b,a[0]);b.location=a.location;return b}var r=plt.compiler.literal,k=plt.compiler.symbolExpr,O=plt.compiler.couple,V=plt.compiler.ifExpr,J=
plt.compiler.beginExpr,aa=plt.compiler.letExpr,M=plt.compiler.letStarExpr,t=plt.compiler.letrecExpr,x=plt.compiler.localExpr,p=plt.compiler.andExpr,da=plt.compiler.orExpr,ea=plt.compiler.condExpr,h=plt.compiler.caseExpr,e=plt.compiler.lambdaExpr,g=plt.compiler.quotedExpr,c=plt.compiler.unquotedExpr,w=plt.compiler.quasiquotedExpr,z=plt.compiler.unquoteSplice,q=plt.compiler.callExpr,Z=plt.compiler.whenUnlessExpr,ba=plt.compiler.defFunc,ca=plt.compiler.defVar,ha=plt.compiler.defVars,fa=plt.compiler.defStruct,
ia=plt.compiler.requireExpr,ja=plt.compiler.provideStatement,ka=plt.compiler.unsupportedExpr,m=plt.compiler.throwError;plt.compiler.parse=function(a,b){var c=(new Date).getTime();try{var g=l(a);g.location=a.location}catch(ma){throw console.log("PARSING ERROR"),ma;}a=(new Date).getTime();b&&(console.log("Parsed in "+Math.floor(a-c)+"ms"),console.log(g));return g}})();plt.compiler.topLevelModules={};plt.compiler.knownModules={};plt.compiler.knownCollections={};window.plt=window.plt||{};
plt.compiler=plt.compiler||{};
(function(){function a(a){return function(b){b[3]=b[3]||[];b[4]=b[4]||!1;b[5]=b[5]||!1;return new d(b[0],a,b[1],b[2],b[3],b[4],b[5])}}var b=plt.compiler.moduleBinding,d=plt.compiler.functionBinding,f=plt.compiler.constantBinding,l=new b("moby/runtime/kernel/misc",[["verify-boolean-branch-value",2],["throw-cond-exhausted-error",1],["'check-operator-is-function",3],["print-values",0]].map(a('"moby/runtime/kernel/misc"'))),n=new b("moby/foreign",[["get-js-object",2,!1,["android.permission.FOREIGN-FUNCTION-INTERFACE"]]].map(a('"moby/foreign"'))),A=
new b("world-effects",[["make-effect:none",0,!1],["make-effect:beep",0,!1,["android.permission.VIBRATE"]],["make-effect:play-dtmf-tone",2,!1],["make-effect:send-sms",2,!1,["android.permission.SEND-SMS"]],["make-effect:play-sound",1,!1,["android.permission.INTERNET"]],["make-effect:stop-sound",1,!1],["make-effect:pause-sound",1,!1],["make-effect:set-sound-volume",1,!1],["make-effect:set-beep-volume",1,!1],["make-effect:raise-sound-volume",0,!1],["make-effect:lower-sound-volume",1,!1],["make-effect:set-wake-lock",
1,!1,["android.permission.WAKE-LOCK"]],["make-effect:release-wake-lock",1,!1,["android.permission.WAKE-LOCK"]],["make-effect:pick-playlist",1,!1],["make-effect:pick-random",2,!1]].map(a('"moby/world-effects"'))),I=new b("world-config",[["on-tick",1,!0],["initial-effect",1,!1],["on-key",1,!1],["on-key!",2,!1],["on-mouse",1,!1],["on-tap",1,!1],["on-tilt",1,!1],["on-redraw",1,!1],["to-draw",1,!1],["on-draw",2,!1],["stop-when",1,!1]].map(a('"moby/world-handlers"'))),F=[["START",14,!1],["test-frame",1,
!1],["sine",1,!1],["cosine",1,!1],["tangent",1,!1]],H=new b("bootstrap/bootstrap-teachpack",F.map(a('"bootstrap/bootstrap-teachpack"'))),u=new b("bootstrap2011/bootstrap-teachpack",F.map(a('"bootstrap2011/bootstrap-teachpack"'))),P=new b("bootstrap2012/bootstrap-teachpack",F.map(a('"bootstrap2012/bootstrap-teachpack"'))),v=new b("bootstrap2012/bootstrap-tilt-teachpack",F.map(a('"bootstrap2012/bootstrap-tilt-teachpack"'))),E=new b("bootstrap2014/bootstrap-teachpack",F.map(a('"bootstrap2014/bootstrap-teachpack"'))),
Q=new b("bootstrap2014/bootstrap-tilt-teachpack",F.map(a('"bootstrap2014/bootstrap-tilt-teachpack"'))),D=new b("bootstrap2015/bootstrap-teachpack",F.map(a('"bootstrap2015/bootstrap-teachpack"')));F=new b("bootstrap2015/bootstrap-tilt-teachpack",F.map(a('"bootstrap2015/bootstrap-tilt-teachpack"')));var R=new b("bootstrap/cage-teachpack",[["start",1,!1]].map(a('"bootstrap/cage-teachpack"'))),N=new b("bootstrap2011/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2011/cage-teachpack"'))),S=new b("bootstrap2012/cage-teachpack",
[["start",1,!1]].map(a('"bootstrap2012/cage-teachpack"'))),y=new b("bootstrap2014/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2014/cage-teachpack"')));cageTeachpack2015=new b("bootstrap2015/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2015/cage-teachpack"')));var T=new b("bootstrap2020/boolean-teachpack",[["start",1,!1]].map(a('"bootstrap2020/boolean-teachpack"'))),U=new b("bootstrap/function-teachpack",[["start",1,!1]].map(a('"bootstrap/function-teachpack"'))),W=new b("bootstrap2011/function-teachpack",
[["start",1,!1]].map(a('"bootstrap2011/function-teachpack"'))),K=new b("bootstrap2012/function-teachpack",[["start",1,!1]].map(a('"bootstrap2012/function-teachpack"'))),C=new b("bootstrap2014/function-teachpack",[["start",1,!1]].map(a('"bootstrap2014/function-teachpack"'))),G=new b("bootstrap2015/function-teachpack",[["start",1,!1]].map(a('"bootstrap2015/function-teachpack"'))),L=new b("location",[["get-latitude",0,!1,["android.permission.LOCATION"]],["get-longitude",0,!1,["android.permission.LOCATION"]],
["get-altitude",0,!1,["android.permission.LOCATION"]],["get-bearing",0,!1,["android.permission.LOCATION"]],["get-speed",0,!1,["android.permission.LOCATION"]],["location-distance",0,!1,["android.permission.LOCATION"]]].map(a('"moby/geolocation"'))),X=new b("tilt",[["get-x-acceleration",0,!1,["android.permission.TILT"]],["get-y-acceleration",0,!1,["android.permission.TILT"]],["get-z-acceleration",0,!1,["android.permission.TILT"]],["get-azimuth",0,!1,["android.permission.TILT"]],["get-pitch",0,!1,["android.permission.TILT"]],
["get-roll",0,!1,["android.permission.TILT"]]].map(a('"moby/tilt"'))),B=new b("telephony",[["get-signal-strength",0,!1,["android.permission.TELEPHONY"]]].map(a('"moby/net"'))),Y=new b("net",[["get-url",1,!1,["android.permission.INTERNET"]]].map(a('"moby/net"'))),r=new b("parser",[["xml->s-sexp",1,!1]].map(a('"moby/parser"'))),k=new b("jsworld",[["js-big-bang",1,!1],["big-bang",1,!1],["js-div",0,!1],["js-p",0,!1],["js-button",2,!1],["js-button!",2,!1],["js-node",1,!1],["js-text",1,!1],["js-select",
2,!1],["js-img",1,!1,["android.permission.INTERNET"]]].map(a('"moby/jsworld"')));A=new b("world",I.bindings.concat(A.bindings,"key=? play-sound animate big-bang make-color color? color-red color-green color-blue color-alpha empty-scene empty-image scene+line put-image translate place-image place-image/align circle star polygon radial-star star-polygon nw:rectangle rectangle regular-polygon rhombus square triangle triangle/sas triangle/sss triangle/ass triangle/ssa triangle/aas triangle/asa triangle/saa right-triangle isosceles-triangle ellipse line add-line add-polygon overlay overlay/xy overlay/align underlay underlay/xy underlay/align beside beside/align above above/align rotate scale scale/xy dilate crop frame flip-horizontal flip-vertical reflect-x reflect-y text text/font video/url bitmap/url image-url image? image=? image-width image-height mouse-event? mouse=? image->color-list color-list->image color-list->bitmap image-baseline mode? image-color? name->color x-place? y-place? angle? side-count? step-count?".split(" ").map(function(a){var b=
-1<["video/url","bitmap/url","image-url"].indexOf(a)?["android.permission.INTERNET"]:[];return new f(a,'"moby/world"',b,!1)})));b=new b("moby/topLevel",[["<",2,!0],["<=",2,!0],["=",2,!0],[">",2,!0],[">=",2,!0],["<>",2,!0],["=~",3],["number->string",1],["even?",1],["odd?",1],["positive?",1],["negative?",1],["number?",1],["rational?",1],["quotient",2],["remainder",2],["numerator",1],["denominator",1],["integer?",1],["real?",1],["abs",1],["acos",1],["add1",1],["angle",1],["asin",1],["atan",1,!0],["ceiling",
1],["complex?",1],["conjugate",1],["cos",1],["cosh",1],["denominator",1],["even?",1],["exact->inexact",1],["exact?",1],["exp",1],["expt",2],["floor",1],["gcd",1,!0],["imag-part",1],["inexact->exact",1],["inexact?",1],["integer->char",1],["integer-sqrt",1],["integer?",1],["lcm",1,!0],["log",1],["magnitude",1],["make-polar",2],["make-rectangular",2],["max",1,!0],["min",1,!0],["modulo",2],["negative?",1],["number?",1],["numerator",1],["odd?",1],["positive?",1],["random",1],["rational?",1],["real-part",
1],["real?",1],["round",1],["sgn",1],["sin",1],["sinh",1],["sqr",1],["sqrt",1],["nth-root",2],["sub1",1],["tan",1],["zero?",1],["+",0,!0],["-",1,!0],["*",0,!0],["/",1,!0],["not",1],["false?",1],["boolean?",1],["boolean=?",2],["symbol->string",1],["symbol=?",2],["symbol?",1],["append",0,!0],["assq",2],["assv",2],["assoc",2],["caaar",1],["caadr",1],["caar",1],["cadar",1],["cadddr",1],["caddr",1],["cadr",1],["car",1],["cddar",1],["cdddr",1],["cddr",1],["cdr",1],["cdaar",1],["cdadr",1],["cdar",1],["cons?",
1],["list?",1],["cons",2],["empty?",1],["length",1],["list",0,!0],["list*",1,!0],["range",3],["list-ref",2],["remove",2],["remove-all",2],["member",2],["member?",2],["memq",2],["memv",2],["null?",1],["pair?",1],["rest",1],["reverse",1],["first",1],["second",1],["third",1],["fourth",1],["fifth",1],["sixth",1],["seventh",1],["eighth",1],["make-list",2],["box",1],["unbox",1],["set-box!",2],["box?",1],["make-posn",2],["posn-x",1],["posn-y",1],["posn?",1],["char->integer",1],["char-alphabetic?",1],["char-ci<=?",
2,!0],["char-ci<?",2,!0],["char-ci=?",2,!0],["char-ci>=?",2,!0],["char-ci>?",2,!0],["char-downcase",1],["char-lower-case?",1],["char-numeric?",1],["char-upcase",1],["char-upper-case?",1],["char-whitespace?",1],["char<=?",2,!0],["char<?",2,!0],["char=?",2,!0],["char>=?",2,!0],["char>?",2,!0],["char?",1],["format",1,!0],["list->string",1],["make-string",2],["replicate",2],["string",0,!0],["string->list",1],["string->number",1],["string->symbol",1],["string-alphabetic?",1],["string-append",0,!0],["string-contains?",
2],["string-ci<=?",2,!0],["string-ci<?",2,!0],["string-ci=?",2,!0],["string-ci<>?",2,!0],["string-ci>=?",2,!0],["string-ci>?",2,!0],["string-copy",1],["string-length",1],["string-lower-case?",1],["string-numeric?",1],["string-ref",2],["string-upper-case?",1],["string-whitespace?",1],["string<=?",2,!0],["string<?",2,!0],["string=?",2,!0],["string<>?",2,!0],["string>=?",2,!0],["string>?",2,!0],["string?",1],["substring",3],["string-ith",2],["int->string",1],["string->int",1],["explode",1],["implode",
1],["eof-object?",1],["=~",3],["eq?",2],["equal?",2],["equal~?",3],["eqv?",2],["error",2],["identity",1],["struct?",1],["current-seconds",0],["andmap",1,!0],["apply",2,!0],["argmax",2],["argmin",2],["build-list",2],["build-string",2],["compose",0,!0],["filter",2],["foldl",2,!0],["foldr",2,!0],["map",1,!0],["for-each",1,!0],["memf",2],["ormap",1,!0],["procedure?",1],["quicksort",2],["sort",2],["void",0,!0],["xml->s-exp",1],["build-vector",2],["make-vector",1,!0],["vector",0,!0],["vector-length",1],
["vector-ref",2],["vector-set!",3],["vector->list",1],["list->vector",1],["vector?",1],["printf",1,!0],["display",1],["write",1],["newline",0],["call/cc",1],["procedure-arity",1],["check-expect",2],["EXAMPLE",2],["check-within",3],["check-error",2],["make-hasheq",0],["make-hash",0],["hash-set!",3],["hash-ref",3],["hash-remove!",2],["hash-map",2],["hash-for-each",2],["hash?",1],["raise",1],["undefined?",1],["values",0,!0],["make-struct-type",4,!0],["make-struct-field-accessor",2,!0],["make-struct-field-mutator",
2,!0],["current-continuation-marks",0,!1],["continuation-mark-set->list",2,!1],["scheme->prim-js",1,!1],["prim-js->scheme",1,!1],["procedure->cps-js-fun",1,!1],["procedure->void-js-fun",1,!1],["js-===",2,!1],["js-get-named-object",1,!1],["js-get-field",2,!0],["js-set-field!",3,!1],["js-typeof",1,!1],["js-instanceof",2,!1],["js-call",2,!0],["js-new",1,!0],["js-make-hash",0,!0],["make-world-config",2,!0],["make-bb-info",2,!1],["bb-info?",1,!1],["bb-info-change-world",1,!1],["bb-info-toplevel-node",
1,!1],["make-effect-type",4,!0],["effect?",1,!1],["world-with-effects",2,!1],["make-render-effect-type",4,!0],["render-effect-type?",1],["render-effect?",1],["make-render-effect-type",4,!0],["values",0,!0],["sleep",0,!0],["current-inexact-milliseconds",0,!1],["make-exn",2,!1],["exn-message",1,!1],["exn-continuation-marks",1,!1]].map(a('"moby/toplevel"')));plt.compiler.topLevelModules=[b,l,,k,A];plt.compiler.knownCollections="bootstrap bootstrap2011 bootstrap2012 bootstrap2014 bootstrap2015 bootstrap2020".split(" ");
plt.compiler.knownModules=[l,k,n,A,H,u,P,E,D,v,Q,F,R,N,S,y,cageTeachpack2015,T,U,W,K,C,G,L,X,B,Y,r,b]})();plt.compiler.desugar={};plt.compiler.analyze={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a,b,g){var c={};a.forEach(function(a){a instanceof u?c[a.val]?t(new types.Message([new types.ColoredPart(b.toString(),b.location),": found ",new types.ColoredPart("a variable",a.location)," that is already used ",new types.ColoredPart("here",c[a.val].location)]),a.location):c[a.val]=a:t("expected identifier "+a.val,a.location)})}function b(a,b){b=plt.compiler.defaultModuleResolver(b);var g=(new plt.compiler.emptyEnv).extendEnv_moduleBinding(b);[a.func].concat(a.args).forEach(function(a){a.context=
g});return a}function d(a,e,g){a=new H(new types.string(a.toString()));var c=new u("verify-boolean-branch-value");a=new C(a);e=new C(new H(e.toVector()));var d=new C(new H(g.location.toVector())),h=new B(c,[a,e,g,d]);h.location=c.location=g.location;a.location=e.location=d.location=g.location;b(h,"moby/runtime/kernel/misc");return h}function f(a,e,g){e=[[],e||new plt.compiler.pinfo];e=a.reduce(function(a,e){var c=e.desugar(a[1]);if(plt.compiler.isExpression(e)&&g){e=new u("print-values");var d=new B(e,
[c[0]]);e.location=d.location=c[0].location;c[0]=d;b(d,"moby/runtime/kernel/misc")}c[0].length?a[0]=a[0].concat(c[0]):a[0].push(c[0]);return[a[0],c[1]]},e);e[0].location=a.location;return e}function l(a,b,g){var c="undefined"!=typeof a.location?a.location:a instanceof Array&&"undefined"!=typeof a[0].location?a[0].location:t(types.Message(["ASSERTION FAILURE: couldn't find a usable location"]),new Location(0,0,0,0));a=a.map(function(a){if(0===g&&a instanceof X)a=a.desugar(b,g);else{var e=a instanceof
Array?l(a,g,g)[0]:a.desugar(b,g)[0];a=new u("list");e=new B(a,[e]);a.parent=e;e.location=a.location=c;a=[e,b]}return a[0]});var e=new u("append");e.location=c;a=new B(e,a);a.location=c;return[a,b]}function n(a,b,g,c,d){return new da(a,b,g,c,[],!1,d)}function A(a){this.symbl=a}function I(a,b){var g=b.env,c=g.bindings.keys(),e=types.makeLowLevelEqHash();c.forEach(function(a){e.put(a,g.bindings.get(a))});c=new plt.compiler.env(e);c=a.args.reduce(function(a,b){return a.extend(new p(b.val,!1,[],b.location))},
c);b.env=c;b=a.body.analyzeUses(b,c);b.env=g;return b}function F(a,b){b=function(a,b){return a.reduce(function(a,b){return b.collectDefinitions(a)},b)}(a,b);b=function(a,b){return a.reduce(function(a,b){return b.collectProvides(a)},b)}(a,b);return function(a,b){return a.reduce(function(a,b){return b.analyzeUses(a,a.env)},b)}(a,b)}var H=plt.compiler.literal,u=plt.compiler.symbolExpr,P=plt.compiler.Program,v=plt.compiler.couple,E=plt.compiler.ifExpr,Q=plt.compiler.beginExpr,D=plt.compiler.letExpr,R=
plt.compiler.letStarExpr,N=plt.compiler.letrecExpr,S=plt.compiler.localExpr,y=plt.compiler.andExpr,T=plt.compiler.orExpr,U=plt.compiler.condExpr,W=plt.compiler.caseExpr,K=plt.compiler.lambdaExpr,C=plt.compiler.quotedExpr,G=plt.compiler.unquotedExpr,L=plt.compiler.quasiquotedExpr,X=plt.compiler.unquoteSplice,B=plt.compiler.callExpr,Y=plt.compiler.whenUnlessExpr,r=plt.compiler.defFunc,k=plt.compiler.defVar,O=plt.compiler.defVars,V=plt.compiler.defStruct,J=plt.compiler.requireExpr,aa=plt.compiler.provideStatement,
M=plt.compiler.unsupportedExpr,t=plt.compiler.throwError,x=plt.compiler.structBinding,p=plt.compiler.constantBinding,da=plt.compiler.functionBinding,ea=plt.compiler.moduleBinding;P.prototype.desugar=function(a){return[this,a]};r.prototype.desugar=function(b){a([this.name].concat(this.args),this.stx[0],this.location);this.args.forEach(function(a){a instanceof u||t(new types.Message([new types.ColoredPart(this.stx.val,this.stx.location),": expected a variable but found ",new types.ColoredPart("something else",
a.location)]),sexp.location)});b=this.body.desugar(b);var e=new r(this.name,this.args,b[0],this.stx);e.location=this.location;return[e,b[1]]};k.prototype.desugar=function(a){if(this.expr instanceof K){var b=new r(this.name,this.expr.args,this.expr.body,this.stx);b.location=this.location;return b.desugar(a)}a=this.expr.desugar(a);b=new k(this.name,a[0],this.stx);b.location=this.location;return[b,a[1]]};O.prototype.desugar=function(a){a=this.expr.desugar(a);var b=new O(this.names,a[0],this.stx);b.location=
this.location;return[b,a[1]]};V.prototype.desugar=function(a){var b=this,g=["make-"+this.name.val,this.name.val+"?",this.name.val+"-ref",this.name.val+"-set!"].map(function(a){return new u(a)}),c=new u("make-struct-type"),d=[new C(new u(this.name.val)),new H(!1),new H(this.fields.length),new H(0)],h=new B(c,d);[h,c].concat(g,d).forEach(function(a){a.location=b.location});g=new O([this.name].concat(g),h,this.stx);var f=[g];g.location=this.location;this.fields.forEach(function(a,c){var g=new u("make-struct-field-accessor");
c=[new u(b.name.val+"-ref"),new H(c),new C(new u(a.val))];var e=new B(g,c),d=new u(b.name.val+"-"+a.val),h=new k(d,e);[h,g,e,d].concat(c).forEach(function(b){b.location=a.location});f.push(h)});return[f,a]};Q.prototype.desugar=function(a){a=f(this.exprs,a);var b=new Q(a[0],this.stx);b.location=this.location;return[b,a[1]]};K.prototype.desugar=function(b){this.stx&&a(this.args,this.stx,this.location);b=this.body.desugar(b);var e=new K(this.args,b[0],this.stx);e.location=this.location;return[e,b[1]]};
S.prototype.desugar=function(a){var b=f(this.defs,a);a=this.body.desugar(b[1]);b=new S(b[0],a[0],this.stx);b.location=this.location;return[b,a[1]]};B.prototype.desugar=function(a){this.func||t(new types.Message([new types.ColoredPart("( )",this.location),": expected a function, but nothing's there"]),this.location);a=f([this.func].concat(this.args),a);var b=new B(a[0][0],a[0].slice(1),this.stx);b.location=this.location;return[b,a[1]]};E.prototype.desugar=function(a){a=f([this.predicate,this.consequence,
this.alternative],a);var b=d(this.stx,this.stx.location,a[0][0]);b=new E(b,a[0][1],a[0][2],this.stx);b.location=this.location;return[b,a[1]]};Y.prototype.desugar=function(a){var b=new Q(this.exprs,this.stx),g=new u("void"),c=new B(g,[],this.stx),d="when"===this.stx.val?b:c,h="when"===this.stx.val?c:b;b.location=this.exprs.location;g.location=c.location=this.location;a=f([this.predicate,d,h],a);b=new E(a[0][0],a[0][1],a[0][2],this.stx);b.location=this.location;return[b,a[1]]};N.prototype.desugar=function(a){a=
(new S(this.bindings.map(function(a){var b=new k(a.first,a.second,a.stx);b.location=a.location;return b}),this.body,this.stx)).desugar(a);a[0].location=this.location;return a};D.prototype.desugar=function(a){var b=this.bindings.map(function(a){return a.first}),g=this.bindings.map(function(a){return a.second});b=new K(b,this.body,this.stx);g=new B(b,g);b.location=g.location=this.location;return g.desugar(a)};R.prototype.desugar=function(a){function b(a,b){a=new D([b],a,b.stx);a.location=b.location;
return a}return 0===this.bindings.length?this.body.desugar(a):this.bindings.reduceRight(b,this.body).desugar(a)};U.prototype.desugar=function(a){var e=new u("throw-cond-exhausted-error"),g=new C(new H(this.location.toVector())),c=b(new B(e,[g]),"moby/runtime/kernel/misc");(new u("if")).location=this.stx.location;c.location=e.location=g.location=this.location;for(e=this.clauses.length-1;-1<e;e--)this.clauses[e].first instanceof u&&"else"===this.clauses[e].first.val&&(this.clauses[e].first.val="true"),
c=new E(this.clauses[e].first,this.clauses[e].second,c,this.stx),c.location=this.location;return c.desugar(a)};W.prototype.desugar=function(a){var b=this,g=new u("if");g.location=b.location;a=a.gensym("val");var c=a[1],d=a[0].gensym("x");a=d[0];var h=d[1],f=new u("void"),k=[c,h,f];d=this.clauses;var l=d[this.clauses.length-1];l.first instanceof u&&"else"===l.first.val?(f=l.second,d.pop()):(f=new B(f,[],b.stx),f.location=b.location);l=new u("equal?");var n=new B(l,[h,c],g),p=new K([h],n,g);k=k.concat([l,
n,p]);c=new v(c,this.expr);d=d.reduceRight(function(a,c){var e=new u("ormap"),d=new B(e,[p,c.first],b.stx);a=new E(d,c.second,a,g);k=k.concat([e,d,c.first,a]);return a},f);d=new D([c],d,g);k=k.concat([c,d]);k.forEach(function(a){a.location=b.location});return d.desugar(a)};y.prototype.desugar=function(a){function b(a){var e=d(g.stx,g.stx.location,a[0]),h=2<a.length?b(a.slice(1)):d(g.stx,g.stx.location,a[1]);a=new H(!1);e=new E(e,h,a,c);[a,c,e].forEach(function(a){return a.location=g.location});return e}
var g=this,c=new u("if");a=f(this.exprs,a);var h=a[0];a=a[1];h=b(h);h.location=g.location;return[h,a]};T.prototype.desugar=function(a){function b(a,e){var h=a[0];e=e.gensym("tmp");var f=e[1],w=new u("if");f.notOriginalSource=!0;h.stx&&"if"!==h.stx.val&&(w.location=h.location,h.stx=w);e=e[0];h=new v(f,d(g.stx,g.stx.location,h));2==a.length?a=d(c,g.stx.location,a[1]):(e=b(a.slice(1),e),a=e[0],e=e[1]);a=new E(f,f,a,new u("if"));w=new D([h],a,c);[c,f,h,a,a.stx,w].forEach(function(a){return a.location=
g.location});return w.desugar(e)}var g=this,c=new u("or");a=f(this.exprs,a);var h=a[0];a=a[1];return b(h,a)};C.prototype.desugar=function(a){"undefined"===typeof this.location&&t(new types.Message(["ASSERTION ERROR: Every quotedExpr should have a location"]),loc);return function(a,b){return function(c){if(c instanceof B||c instanceof C||c instanceof M)return c.desugar(a);if(c instanceof u||c instanceof H||c instanceof Array)return c=new C(c),c.location=b,[c,a];t(new types.Message(["ASSERTION ERROR: Found an unexpected item in a quotedExpr"]),
b)}}(a,this.location)(this.val)};G.prototype.desugar=function(a,b){if("undefined"===typeof b)t(new types.Message(["misuse of a ', not under a quasiquoting backquote"]),this.location);else{if(1===b)return this.val.desugar(a);if(1<b){var g=this.val instanceof Array?l(this.val,a,b-1)[0]:this.val.desugar(a,b-1)[0];b=new C(new u("unquote"));var c=new u("list");g=[b,g];var e=new B(c,g);b.location=this.location;b.parent=g;c.location=this.location;c.parent=e;e.location=this.location;return[e,a]}t(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location)}};X.prototype.desugar=function(a,b){if("undefined"===typeof b)t(new types.Message(["misuse of a ,@, not under a quasiquoting backquote"]),this.location);else{if(1===b)return this.val.desugar(a);if(1<b){var g=this.val instanceof Array?l(this.val,a,b-1)[0]:this.val.desugar(a,b-1)[0];b=new C(new u("unquote-splicing"));var c=new u("list");g=[b,g];var e=new B(c,g);b.location=this.location;b.parent=g;c.location=this.location;c.parent=e;e.location=this.location;return[e,a]}t(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location)}};L.prototype.desugar=function(a,b){b="undefined"===typeof b?0:b;if(0<=b)var g=this.val instanceof Array?l(this.val,a,b+1)[0]:this.val.desugar(a,b+1)[0];else t(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location);if(0==b)return[g,a];b=new C(new u("quasiquote"));var c=[b,g],e=new u("list"),d=new B(e,c);b.parent=c;b.location=this.location;g.parent=c;e.parent=d;e.location=this.location;d.location=this.location;return[d,a]};u.prototype.desugar=
function(a){if(!this.isClause&&"else"===this.val){var b=this.parent&&this.parent[0]===this?this.parent.location:this.location;t(new types.Message([new types.ColoredPart(this.val,b),": not allowed ",new types.ColoredPart("here",b),", because this is not a question in a clause"]),b)}this.parent&&this.parent[0]!==this&&"define"===this.val&&(b=new types.Message([new types.ColoredPart(this.val,this.location),": not allowed inside an expression"]),t(b,this.location));!this.parent&&-1<plt.compiler.keywords.indexOf(this.val)&&
"else"!==this.val&&t(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);"."===this.val&&(b=new types.Message([this.location.source,":",this.location.startRow.toString(),":",this.location.startCol.toString(),": read: '.' is not supported as a symbol in WeScheme"]),t(b,this.location,"Error-GenericReadError"));return[this,a]};M.prototype.desugar=function(a){this.location.span=this.errorSpan;t(this.errorMsg,
this.location,"Error-GenericReadError")};P.prototype.collectDefinitions=function(a){return a};r.prototype.collectDefinitions=function(a){this.args.forEach(function(a){-1<plt.compiler.keywords.indexOf(a.val)&&t(new types.Message([new types.ColoredPart(a.val,a.location),": this is a reserved keyword and cannot be used as a variable or function name"]),a.location)});var b=n(this.name.val,!1,this.args.length,!1,this.name.location);return a.accumulateDefinedBinding(b,this.location)};k.prototype.collectDefinitions=
function(a){var b=this.expr instanceof K?n(this.name.val,!1,this.expr.args.length,!1,this.name.location):new p(this.name.val,!1,[],this.name.location);return a.accumulateDefinedBinding(b,this.location)};O.prototype.collectDefinitions=function(a){var b=this,g=function(a){return b.stx[1].val+"-"+a.val},c=function(a){return"set-"+b.stx[1].val+"-"+a.val+"!"};if("define-struct"===b.stx[0].val){var d=b.stx[1].val,h=b.stx[2],f="make-"+d,k=d+"?";g=h.map(g);var l=h.map(c);c=b.stx[1].location;g=new x(d,!1,
h,f,k,g,l,null,b.stx[1].location);h=n(f,!1,h.length,!1,c);k=n(k,!1,1,!1,c);f=n(d+"-set!",!1,1,!1,c);d=n(d+"-ref",!1,1,!1,c);return a.accumulateDefinedBindings([g,d,h,k,f],b.location)}return this.names.reduce(function(a,c){c=new p(c.val,!1,[],c.location);return a.accumulateDefinedBinding(c,b.location)},a)};J.prototype.collectDefinitions=function(a){function b(a){return(a=a.match(/^wescheme\/(\w+)$/))?a[1]:!1}function g(a){a=plt.compiler.moduleGuess(h.spec.toString());a=new types.Message(["Found require of the module ",
new types.ColoredPart(h.spec.toString(),h.spec.location),", but this module is unknown.",a.name===h.spec.toString()?"":" Did you mean '"+a.name+"'?"]);t(a,h.spec.location,"Error-UnknownModule")}function c(b){var c=window.COLLECTIONS[b].provides.map(function(a){a=new p(a,new u(b),!1);a.imported=!0;return a}),g=new ea(b,c);f=a.accumulateModule(g).accumulateModuleBindings(c)}var d=this.spec instanceof H?this.spec.val.toString():this.spec.toString(),h=this,f;a.modulePathResolver(d,a.currentModulePath)||
b(d)||g(d);var k=window.location.protocol+"//"+window.location.host+(b(d)?"/loadProject?publicId="+b(d):"/js/mzscheme-vm/collects/"+d+".js");console.log(k);window.COLLECTIONS&&window.COLLECTIONS[d]?c(d):jQuery.ajax({url:k,success:function(a){try{if(b(d)){var e=(0,eval)("("+a+")");void 0===window.COLLECTIONS&&(window.COLLECTIONS=[]);var f=plt.compiler.lex(e.source.src,d),k=plt.compiler.parse(f),w=plt.compiler.desugar(k)[0],l=plt.compiler.analyze(w),q=plt.compiler.compile(w,l);window.COLLECTIONS[d]=
{name:d,bytecode:(0,eval)("("+q.bytecode+")"),provides:q.provides}}else eval(a);a?c(d):g(d)}catch(m){if("moby-failure"===m.type)throw m;a=new types.Message(["A network error occured when trying to load ",new types.ColoredPart(h.spec.toString(),h.spec.location),". Please check your connection and try again."]);t(a,h.spec.location,"Error-NetworkError")}},error:function(a){g(d)},async:!1});return f};P.prototype.collectProvides=function(a){return a};aa.prototype.collectProvides=function(a){function b(b){a.providedNames.put(b,
new A(b))}return this.clauses.reduce(function(a,c){if(c instanceof u){if(a.definedNames.containsKey(c.val))return b(c.val),a;a=new types.Message(["The name '",new types.ColoredPart(c.toString(),c.location),"', is not defined in the program, and cannot be provided."]);t(a,c.location)}else if(c instanceof Array){if(a.definedNames.containsKey(c[1].val)&&a.definedNames.get(c[1].val)instanceof x)return c=a.definedNames.get(c[1].val),[c.name,c.constructor,c.predicate].concat(c.accessors,c.mutators).forEach(b),
a;t(new types.Message(["The struct '",new types.ColoredPart(c[1].toString(),c[1].location),"', is not defined in the program, and cannot be provided"]),c.location)}else throw"Impossible: all invalid provide clauses should have been filtered out!";},a)};P.prototype.analyzeUses=function(a,b){return a};k.prototype.analyzeUses=function(a){a.env.extend(this.expr instanceof K?n(this.name.val,!1,this.expr.args.length,!1,this.location):new p(this.name.val,!1,[],this.name.location));return this.expr.analyzeUses(a,
a.env)};O.prototype.analyzeUses=function(a){this.names.forEach(function(b){a.env.extend(new p(b.val,!1,[],b.location))});return this.expr.analyzeUses(a,a.env)};r.prototype.analyzeUses=function(a){a.env=a.env.extend(n(this.name.val,!1,this.args.length,!1,this.name.location));return I(this,a)};K.prototype.analyzeUses=function(a,b){return I(this,a)};Q.prototype.analyzeUses=function(a,b){return this.exprs.reduce(function(a,c){return c.analyzeUses(a,b)},a)};S.prototype.analyzeUses=function(a,b){a=this.defs.reduce(function(a,
c){return c.analyzeUses(a,b)},a);return this.body.analyzeUses(a,a.env)};B.prototype.analyzeUses=function(a,b){return[this.func].concat(this.args).reduce(function(g,c){return c instanceof Array?c.reduce(function(a,b){return b.analyzeUses(a,a.env)},a):c.analyzeUses(g,b)},a)};E.prototype.analyzeUses=function(a,b){return[this.predicate,this.consequence,this.alternative].reduce(function(a,c){return c.analyzeUses(a,b)},a)};u.prototype.analyzeUses=function(a,b){(-1<plt.compiler.keywords.indexOf(this.val)&&
(!this.parent||this.parent[0]!==this)||this.parent instanceof v)&&t(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);return(b=b.lookup_context(this.val))?(this.bindingLoc=b.loc,a.accumulateBindingUse(b,a)):a.accumulateFreeVariableUse(this.val,a)};plt.compiler.desugar=function(a,b,g){var c=(new Date).getTime();try{var d=f(a,b,!0),e=d[0]}catch(q){throw console.log("DESUGARING ERROR"),q;}a=(new Date).getTime();
g&&(console.log("Desugared in "+Math.floor(a-c)+"ms"),console.log(e),console.log(e.toString()));return d};plt.compiler.analyze=function(a,b){var g=(new Date).getTime();try{var c=F(a,plt.compiler.getBasePinfo("base"))}catch(w){throw console.log("ANALYSIS ERROR"),w;}a=(new Date).getTime();b&&console.log("Analyzed in "+Math.floor(a-g)+"ms");return c};plt.compiler.provideBindingId=A;plt.compiler.provideBindingStructId=function(a){this.symbl=a}})();plt.compiler.compile={};
plt.compiler.localStackReference={};plt.compiler.globalStackReference={};plt.compiler.unboundStackReference={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(){}function b(a,b,d){this.name=a;this.isBoxed=b;this.depth=d}function d(a,b,d){this.name=a;this.pos=d;this.depth=b}function f(a){this.name=a}function l(a){return types.isString(a)&&void 0!==a.chars?'"'+a.toString()+'"':a.toBytecode?a.toBytecode():a}function n(a){a=a.toString().replace(/\|/g,"");for(var b="",g="{}[],'` \\\"".split(""),d=0;d<a.length;d++)b+=(-1<g.indexOf(a.charAt(d))?"\\":"")+a.charAt(d);return b=b.replace(/\n/g,"\\n")}function A(a){e.call(this);this.name=a;this.toBytecode=
function(){return'{"$":"global-bucket","value":"'+n(this.name)+'"}'}}function I(a,b,d,f){e.call(this);this.$="module-variable";this.modidx=a;this.sym=b;this.pos=d;this.phase=f;this.toBytecode=function(){return'{"$":"module-variable","sym":'+this.sym.toBytecode()+',"modidx":'+this.modidx.toBytecode()+',"pos":'+this.pos+',"phase":'+this.phase+"}"}}function F(a,b,d){e.call(this);this.numLifts=a;this.topLevels=b;this.stxs=d;this.toBytecode=function(){return'{"$":"prefix","num-lifts":'+this.numLifts+',"toplevels":['+
this.topLevels.map(function(a){return l(a)}).join(",")+'],"stxs":['+this.stxs.map(l)+"]}"}}function H(a,b,d){e.call(this);this.maxLetDepth=a;this.prefix=b;this.code=d;this.toBytecode=function(){return'{"$":"compilation-top","max-let-depth":'+this.maxLetDepth+',"prefix":'+this.prefix.toBytecode()+',"compiled-indirects":[],"code":'+this.code.toBytecode()+"}"}}function u(a,b,d,f,h){e.call(this);this.depth=a;this.pos=b;this.constant=d;this.ready=f;this.loc=h;this.toBytecode=function(){return'{"$":"toplevel","depth":'+
this.depth.toString()+',"pos":'+this.pos.toString()+',"const?":'+this.constant+',"ready?":'+this.ready+',"loc":'+(this.loc&&this.loc.toVector().toBytecode())+"}"}}function P(a){e.call(this);this.forms=a;this.toBytecode=function(){return'{"$":"seq","forms":['+this.forms.map(l).join(",")+"]}"}}function v(a,b){e.call(this);this.ids=a;this.rhs=b;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.map(l).join(",")+'],"body":'+this.rhs.toBytecode()+"}"}}function E(a,b,d,f,h,k,n,p,r,t){e.call(this);
this.name=a;this.flags=d;this.numParams=f;this.paramTypes=h;this.rest=k;this.body=t;this.closureMap=n;this.maxLetDepth=r;this.closureTypes=p;this.operatorAndRandLocs=b;this.toBytecode=function(){return'{"$":"lam","name":'+this.name.toBytecode()+',"locs":['+this.operatorAndRandLocs.map(l).join(",")+'],"flags":['+this.flags.map(l).join(",")+'],"num-params":'+this.numParams+',"param-types":['+this.paramTypes.map(l).join(",")+'],"rest?":'+this.rest+',"closure-map":['+this.closureMap.map(l).join(",")+
'],"closure-types":['+this.closureTypes.map(l).join(",")+'],"max-let-depth":'+this.maxLetDepth+',"body":'+this.body.toBytecode()+"}"}}function Q(a,b,d){e.call(this);this.count=a;this.boxes=b;this.body=d;this.toBytecode=function(){return'{"$":"let-void","count":'+l(this.count)+',"boxes?":'+l(this.boxes)+',"body":'+this.body.toBytecode()+"}"}}function D(a,b,d,f,h){e.call(this);this.count=a;this.pos=b;this.boxes=d;this.rhs=f;this.body=h;this.toBytecode=function(){return'{"$":"install-value","count":'+
l(this.count)+',"pos":'+l(this.pos)+',"boxes?":'+l(this.boxes)+',"rhs":'+this.rhs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function R(a,b,d,f,h){e.call(this);this.unbox=a||!1;this.pos=b;this.clear=d;this.flonum=h;this.otherClears=f;this.toBytecode=function(){return'{"$":"localref","unbox?":'+this.unbox+',"pos":'+this.pos+',"clear":'+this.clear+',"other-clears?":'+this.otherClears+',"flonum?":'+this.flonum+"}"}}function N(a,b){e.call(this);this.rator=a;this.rands=b;this.toBytecode=function(){return'{"$":"application","rator":'+
this.rator.toBytecode()+',"rands":['+this.rands.map(l).join(",")+"]}"}}function S(a,b,d){e.call(this);this.testExpr=a;this.thenExpr=b;this.elseExpr=d;this.toBytecode=function(){return'{"$":"branch","test":'+this.testExpr.toBytecode()+',"then":'+this.thenExpr.toBytecode()+',"else":'+this.elseExpr.toBytecode()+"}"}}function y(a,b,d){e.call(this);this.$="with-cont-mark";this.key=a;this.val=b;this.body=d;this.toBytecode=function(){return'{"$":"with-cont-mark","key":'+(new G(new L(this.key))).toBytecode()+
',"val":'+(new G(this.val)).toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function T(a,b){e.call(this);this.$="req";this.reqs=a;this.dummy=b;this.toBytecode=function(){return'{"$":"req","reqs":'+(this.reqs instanceof G?'"'+this.reqs.val+'"':this.reqs.toBytecode())+',"dummy":'+this.dummy.toBytecode()+"}"}}function U(a,b){this.path=a;this.base=b;e.call(this);this.toBytecode=function(){return'{"$":"module-path","path":'+l(this.path)+',"base":'+l(this.base)+"}"}}function W(a,b,d){function c(a){return 1>=
a.length?a:d(a[0],a[1])?c(a.slice(1)):[a[0]].concat(c(a.slice(1)))}return c(a.sort(function(a,c){return b(a,c)?-1:b(c,a)}))}function K(a,b){var c=a[0],d=a[1];a=a[2];d=b.compile(a,d);b=d[0];d=d[1];return[[b].concat(c),d,a]}function C(a,b){var c=function(a){var b=a.modules.reduce(function(a,b){return a.concat(b.bindings)},[]),c=a.usedBindingsHash.values().filter(function(a){return a.moduleSource&&-1===b.indexOf(a)});c=b.concat(c);a=a.freeVariables.concat(a.definedNames.keys());var d=W(a,function(a,
b){return a<b},function(a,b){return a==b});a=[!1].concat(d.map(function(a){return new A(a)}),c.map(function(a){var b=a.imported?!1:new U(!1,!1);b=new U(a.moduleSource,b);return new I(b,new L(a.name),-1,0)}));c=[!1].concat(d,c.map(function(a){return a.name}));return[new F(0,a,[]),new plt.compiler.globalEnv(c,!1,new plt.compiler.emptyEnv)]}(b),d=c[0];c=c[1];var g=a.filter(plt.compiler.isDefinition),e=a.filter(function(a){return a instanceof da}),f=a.filter(plt.compiler.isExpression);b=e.reduceRight(K,
[[],b,c]);a=b[0];b=b[1];b=g.reduceRight(K,[[],b,c]);g=b[0];b=b[1];b=f.reduceRight(K,[[],b,c]);c=b[0];b=b[1];c=new P([].concat(a,g,c));return{bytecode:"/* runtime-version: local-compiler-summer2014 */\n"+(new H(0,d,c)).toBytecode(),permissions:b.permissions(),provides:b.providedNames.keys()}}var G=plt.compiler.literal,L=plt.compiler.symbolExpr,X=plt.compiler.Program,B=plt.compiler.ifExpr,Y=plt.compiler.beginExpr,r=plt.compiler.localExpr,k=plt.compiler.andExpr,O=plt.compiler.orExpr,V=plt.compiler.lambdaExpr,
J=plt.compiler.quotedExpr,aa=plt.compiler.callExpr,M=plt.compiler.defFunc,t=plt.compiler.defVar,x=plt.compiler.defVars,p=plt.compiler.defStruct,da=plt.compiler.requireExpr,ea=plt.compiler.provideStatement,h=function(a){var b=function(){};b.prototype=a;return new b};G.prototype.toBytecode=function(){return'{"$":"constant","value":'+(this.val.toBytecode?this.val.toBytecode():!0===this.val?"true":!1===this.val?"false":this.toString())+"}"};L.prototype.toBytecode=function(){return'types.symbol("'+n(this.val)+
'")'};Vector.prototype.toBytecode=function(){return"types.vector(["+this.elts.join(",")+"])"};Array.prototype.toBytecode=function(a){return"types."+(0===this.length?"EMPTY":"list(["+this.map(l).join(",")+"])")};jsnums.Rational.prototype.toBytecode=function(){return"types.rational("+l(this.n)+", "+l(this.d)+")"};jsnums.BigInteger.prototype.toBytecode=function(){return'types.bignum("'+this.toString()+'")'};jsnums.FloatPoint.prototype.toBytecode=function(){var a=this.toString();"+nan.0"===a&&(a="NaN");
"+inf.0"===a&&(a="Infinity");"-inf.0"===a&&(a="-Infinity");return'types["float"]('+a+")"};jsnums.Complex.prototype.toBytecode=function(){return"types.complex("+l(this.r)+", "+l(this.i)+")"};Char.prototype.toBytecode=function(){return"types['char'](String.fromCharCode("+this.val.charCodeAt(0)+"))"};b.prototype=h(a.prototype);d.prototype=h(a.prototype);f.prototype=h(a.prototype);var e=function(){this.toBytecode=function(){console.log(this);throw"IMPOSSIBLE - generic bytecode toBytecode method was called";
}};A.prototype=h(e.prototype);I.prototype=h(e.prototype);(function(){e.call(this)}).prototype=h(e.prototype);(function(a,b,d){e.call(this);this.datum=a;this.wraps=b;this.certs=d}).prototype=h(e.prototype);(function(a){this.encoded=a;e.call(this)}).prototype=h(e.prototype);F.prototype=h(e.prototype);(function(){e.call(this)}).prototype=h(e.prototype);(function(a){e.call(this)}).prototype=h(e.prototype);(function(a){e.call(this);this.v=a;this.toBytecode=function(){return'{"$":"indirect","v":'+this.v.toBytecode()+
"}"}}).prototype=h(e.prototype);H.prototype=h(e.prototype);(function(a,b,d,f,h,k,l){e.call(this);this.name=a;this.src=b;this.srcName=d;this.nomSrc=f;this.srcPhase=h;this.insp=l;this.isProtected=k}).prototype=h(e.prototype);u.prototype=h(e.prototype);P.prototype=h(e.prototype);v.prototype=h(e.prototype);(function(a,b,d,f){e.call(this);this.$="def-values";this.ids=a;this.rhs=b;this.prefix=d;this.maxLetDepth=f;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.toBytecode().join(",")+
'],"rhs":'+this.rhs.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a,b,d,f){e.call(this);this.ids=a;this.rhs=b;this.prefix=d;this.maxLetDepth=f}).prototype=h(e.prototype);(function(a,b,d,f,h,k,l,n,p,r,t,u){e.call(this);this.name=a;this.selfModidx=b;this.prefix=d;this.provides=f;this.requires=h;this.body=k;this.syntaxBody=l;this.unexported=n;this.maxLetDepth=p;this.dummy=r;this.langInfo=t;this.internalContext=
u;this.toBytecode=function(){return'{"$":"mod","name":'+this.name.toBytecode()+',"self-modidx":'+this.selfModidx.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"provides":'+this.provides.toBytecode()+',"requires":'+(this.requires&&this.requires.toVector().toBytecode())+',"body":'+this.body.toBytecode()+',"stx-body":'+this.syntaxBody.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=h(e.prototype);E.prototype=h(e.prototype);(function(a,b){e.call(this);this.code=
a;this.genId=b;this.toBytecode=function(){return'{"$":"closure","code":'+this.code.toBytecode()+',"gen-id":'+this.genId.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a,b){e.call(this);this.name=a;this.clauses=b;this.toBytecode=function(){return'{"$":"case-lam","name":'+this.name.toBytecode()+',"clauses":'+this.clauses.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a,b,d){e.call(this);this.rhs=a;this.body=b;this.flonum=d;this.toBytecode=function(){return'{"$": "let-one","rhs":'+this.rhs.toBytecode()+
',"body":'+this.body.toBytecode()+',"flonum":'+this.flonum.toBytecode()+"}"}}).prototype=h(e.prototype);Q.prototype=h(e.prototype);(function(a,b){e.call(this);this.procs=a;this.body=b;this.toBytecode=function(){return'{"$":"let-rec","procs":'+this.procs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}).prototype=h(e.prototype);D.prototype=h(e.prototype);(function(a,b){e.call(this);this.pos=a;this.body=b;this.toBytecode=function(){return'{"$":"boxenv","pos":'+this.pos.toBytecode()+',"body":'+this.body.toBytecode()+
"}"}}).prototype=h(e.prototype);R.prototype=h(e.prototype);(function(a,b,d){e.call(this);this.depth=a;this.pos=b;this.midpt=d}).prototype=h(e.prototype);N.prototype=h(e.prototype);S.prototype=h(e.prototype);y.prototype=h(e.prototype);(function(a){e.call(this);this.seq=a;this.toBytecode=function(){return'{"$":"beg0","seq":'+this.seq.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a){e.call(this);this.forms=a;this.toBytecode=function(){return'{"$":"splice","forms":'+this.forms.toBytecode()+"}"}}).prototype=
h(e.prototype);(function(a){e.call(this);this.topLevel=a;this.toBytecode=function(){return'{"$":"varref","top-level":'+this.topLevel.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a,b,d){e.call(this);this.id=a;this.rhs=b;this.undefOk=d;this.toBytecode=function(){return'{"$":"assign","id":'+this.id.toBytecode()+',"rhs":'+this.rhs.toBytecode()+',"undef-ok":'+this.undefOk.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a,b){e.call(this);this.proc=a;this.args=b;this.toBytecode=function(){return'{"$":"apply-values","proc":'+
this.proc.toBytecode()+',"args":'+this.args.toBytecode()+"}"}}).prototype=h(e.prototype);(function(a){e.call(this);this.id=a;this.toBytecode=function(){return'{"$":"primval","id":'+this.id.toBytecode()+"}"}}).prototype=h(e.prototype);T.prototype=h(e.prototype);(function(a,b,d){this.bool1=a;this.bool2=b;this.alist=d;e.call(this)}).prototype=h(e.prototype);(function(a,b,d){this.amt=a;this.src=b;this.dest=d;e.call(this)}).prototype=h(e.prototype);(function(a){this.val=a;e.call(this)}).prototype=h(e.prototype);
(function(a){this.sym=a;e.call(this)}).prototype=h(e.prototype);(function(a,b,d,f,h){this.path=a;this.phase=b;this.srcPhase=d;this.prefix=h;this.exceptions=f;e.call(this)}).prototype=h(e.prototype);(function(){e.call(this)}).prototype=h(e.prototype);(function(a){this.value=a;e.call(this)}).prototype=h(e.prototype);(function(a,b,d,f,h){this.path=a;this.phase=b;this.exportName=f;this.nominalExportName=h;e.call(this)}).prototype=h(e.prototype);(function(a,b,d,f){this.path=a;this.exportName=b;this.nominalPath=
d;this.nominalExportName=f;e.call(this)}).prototype=h(e.prototype);(function(a,b){this.path=a;this.nominalPath=b;e.call(this)}).prototype=h(e.prototype);(function(a,b){this.path=a;this.exportName=b;e.call(this)}).prototype=h(e.prototype);(function(a){this.path=a;e.call(this)}).prototype=h(e.prototype);(function(a,b,d,f,h,k,l){this.phase=a;this.kind=b;this.unmarshals=f;this.renames=h;this.markRenames=k;this.plusKern=l;e.call(this)}).prototype=h(e.prototype);U.prototype=h(e.prototype);X.prototype.freeVariables=
function(a,b){return a};B.prototype.freeVariables=function(a,b){return this.alternative.freeVariables(this.consequence.freeVariables(this.predicate.freeVariables(a,b),b),b)};Y.prototype.freeVariables=function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};L.prototype.freeVariables=function(a,b){return b.lookup(this.val,0)instanceof f&&-1==a.indexOf(this)?a.concat([this]):a};r.prototype.freeVariables=function(a,b){var c=this.defs.reduce(function(a,b){return(b instanceof
x?b.names:[b.name]).concat(a)},[]).reduce(function(a,b){return new plt.compiler.localEnv(b.val,!0,a)},b);a=this.body.freeVariables(a,c);return this.defs.reduce(function(a,b){if(b instanceof M){var d=b.args.reduce(function(a,b){return new plt.compiler.localEnv(b.val,!1,a)},c);return b.body.freeVariables(a,d)}return b instanceof p?a:b.expr.freeVariables(a,c)},a)};k.prototype.freeVariables=function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};O.prototype.freeVariables=
function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};V.prototype.freeVariables=function(a,b){b=this.args.slice(0).reverse().reduce(function(a,b){return new plt.compiler.localEnv(b.val,!1,a)},b);return this.body.freeVariables(a,b)};J.prototype.freeVariables=function(a,b){return a};aa.prototype.freeVariables=function(a,b){return this.func.freeVariables(a,b).concat(this.args).reduceRight(function(a,c){return c.freeVariables(a,b)},a)};X.prototype.compile=function(a,
b){return[this,b]};M.prototype.compile=function(a,b){b=this.name.compile(a,b);var c=b[0];b=b[1];b=(new V(this.args,this.body)).compile(a,b,!1,this.name);a=b[0];b=b[1];return[new v([c],a),b]};t.prototype.compile=function(a,b){b=this.name.compile(a,b);var c=b[0];b=b[1];b=this.expr.compile(a,b);a=b[0];b=b[1];return[new v([c],a),b]};x.prototype.compile=function(a,b){b=this.names.reduceRight(K,[[],b,a]);var c=b[0];b=b[1];b=this.expr.compile(a,b);a=b[0];b=b[1];return[new v(c,a),b]};Y.prototype.compile=
function(a,b){a=this.exprs.reduceRight(K,[[],b,a]);b=a[1];return[new P(a[0]),b]};V.prototype.compile=function(a,c,e,h){function g(a,b){return a.map(function(a){return-1<b.indexOf(a)?a:!1})}function k(a,b){return new plt.compiler.localEnv(b,!1,a)}void 0===e&&(e=!0);var l=this.args.map(function(a){return a.val}).reduce(k,new plt.compiler.emptyEnv);freeVarsInBody=this.body.freeVariables([],l);l=function(a,c,e){var h=c.map(function(a){return e.lookup(a.val,0)}),l=function(a,b){return 0===b.length?!1:
a(b[0])?b[0]:l(a,b.slice(1))},n=function(a){return a.depth};if(c=l(function(a){return a instanceof f},h))throw"Can't produce closure; I don't know where "+c.name+" is bound.";var m=W(h.filter(function(a){return a instanceof b}),function(a,b){return a.depth<b.depth},function(a,b){return a.depth===b.depth});c=m.map(n);var q=h.filter(function(a){return a instanceof d});h=W(q.map(n),function(a,b){return a<b},function(a,b){return a===b});a=a.reverse().map(function(a){return a.val}).reduce(k,e);a=m.reverse().reduce(function(a,
b){return b.isBoxed?new plt.compiler.localEnv(b.name,!0,a):k(a,b.name)},a);a=h.reverse().reduce(function(a,b){var c=q.filter(function(a){return a.depth===b}).map(function(a){return a.name});c=g(e.peek(b).names,c);return new plt.compiler.globalEnv(c,!1,a)},a);return[h.concat(c),a]}(this.args.slice(0),freeVarsInBody,a);a=l[0];l=this.body.compile(l[1],c);c=l[0];l=l[1];return[new E(e?[]:new L(h),[e?this.stx:h].concat(this.args).map(function(a){return a.location.toVector()}),[],this.args.length,this.args.map(function(){return new L("val")}),
!1,a,a.map(function(){return new L("val/ref")}),0,c),l]};r.prototype.compile=function(a,b){function c(a,b,e,f){if(0===a.length)return d.body.compile(g,b);var h=a[0].compile(e,b),k=h[0].rhs;b=h[1];h=a[0]instanceof x?a[0].names.length:1;a=c(a.slice(1),b,e,f+h);newBody=a[0];b=a[1];return[new D(h,f,!0,k,newBody),b]}if(0===this.defs.length)return this.body.compile(a,b);var d=this,e=this.defs.reduce(function(a,b){return a.concat(b instanceof x?b.names:b.name)},[]),g=e.reverse().reduce(function(a,b){return new plt.compiler.localEnv(b.val,
!0,a)},a);b=c(this.defs,b,g,0);a=b[0];b=b[1];return[new Q(e.length,!0,a),b]};aa.prototype.compile=function(a,b){var c=this.args.reduce(function(a,b){return new plt.compiler.unnamedEnv(a)},a),d=this.func.compile(c,b);a=d[0];c=this.args.reduceRight(K,[[],b,c])[0];b=d[1];a=new N(a,c);d=[this.func.location].concat(this.args.map(function(a){return a.location})).concat(this.location).map(function(a){return a.toVector()});return[new y(new L("moby-application-position-key"),d,new y(new L("moby-stack-record-continuation-mark-key"),
this.location.toVector(),a)),b]};B.prototype.compile=function(a,b){var c=this.predicate.compile(a,b)[0],d=this.consequence.compile(a,b)[0];a=this.alternative.compile(a,b);b=a[1];return[new S(c,d,a[0]),b]};L.prototype.compile=function(a,c){a=a.lookup(this.val,0);if(a instanceof b)a=new R(a.isBoxed,a.depth,!1,!1,!1);else if(a instanceof d)a=new u(a.depth,a.pos,!1,!1,this.location);else{if(a instanceof f)throw"Couldn't find '"+this.val+"' in the environment";throw"IMPOSSIBLE: env.lookup failed for '"+
this.val+"'! A reference should be added to the environment!";}return[a,c]};J.prototype.compile=function(a,b){function c(a){return a instanceof G?c(a.val):a instanceof Array?a.map(c):a}result=new G(c(this.val));return[result,b]};ea.prototype.compile=function(a,b){};da.prototype.compile=function(a,b){return[new T(this.spec,new u(0,0,!1,!1,!1)),b]};plt.compiler.localStackReference=b;plt.compiler.globalStackReference=d;plt.compiler.unboundStackReference=f;plt.compiler.compile=function(a,b,d){var c=(new Date).getTime();
try{var e=C(a,b)}catch(Z){throw console.log("COMPILATION ERROR"),Z;}a=(new Date).getTime();d&&(console.log("Compiled in "+Math.floor(a-c)+"ms"),console.log(JSON.stringify(e)));return e}})();plt.wescheme.RoundRobin={};
(function(){function a(a,b,d,f){b=b.replace(/[\uFEFF\u2060\u200B]/,"");try{var l=(new Date).getTime(),n=plt.compiler.lex(b,a),u=plt.compiler.parse(n),A=plt.compiler.desugar(u)[0],v=plt.compiler.analyze(A),E=plt.compiler.compile(A,v);d(JSON.stringify(E))}catch(R){a=R;try{var Q=JSON.parse(a);JSON.parse(Q["structured-error"]);var D=a}catch(N){D="!! FATAL ERROR !!\n"+a.stack}D=D.toString();if(/FATAL ERROR/.test(D.toString())){D=JSON.stringify(D);try{console.log("Logging anonymized error message to GDocs"),
document.getElementById("expr").value=b,document.getElementById("local").value=plt.wescheme.BrowserDetect.versionString+" "+D.replace(/\s+/g,"").toLowerCase(),document.getElementById("server").value="FATAL ERROR".replace(/\s+/g,"").toLowerCase(),document.getElementById("errorLogForm").submit()}catch(N){console.log("LOGGING FAILED.")}f(JSON.stringify(f("The local compiler has failed to run properly. You may want to confirm that you are running a modern web browser (IE9+, Safari 6+, FF 20+, Chrome 20+).")))}else f(D)}f=
(new Date).getTime();console.log("Compiled in: "+Math.floor(f-l)+"ms")}console||(console={log:function(){}});var b=null,d=null,f=null;plt.wescheme.RoundRobin.initialize=function(a,b,d){b()};plt.wescheme.RoundRobin.roundRobinCompiler=function(l,n,A,I){if(l===b&&n===d)return A.apply(null,f);a(l,n,function(){var a=[].slice.call(arguments,0);b=l;d=n;f=a;return A.apply(null,arguments)},I)}})();plt.wescheme.runner={};var myEditor=myEditor||{getScreenreader:function(){return!1}};
(function(){var a=function(a,b){var d=this;this.interactionsDiv=jQuery(b);this.evaluator=new Evaluator({write:function(a){d.addToInteractions(a)},compilationServletUrl:a});this.evaluator.setImageProxy("/imageProxy");this.evaluator.setRootLibraryPath("/js/mzscheme-vm/collects");this.evaluator.setDynamicModuleLoader(plt.wescheme.makeDynamicModuleLoader("/js/mzscheme-vm/collects"))};a.prototype.runCompiledCode=function(a,b){var d=this;this.evaluator.executeCompiledProgram((0,eval)("("+a+")"),function(){},
function(a){d.renderErrorAsDomNode(a)})};a.prototype.runSourceCode=function(a,b,l){var d=this;this.evaluator.executeProgram(a,b,function(){},function(a){d.renderErrorAsDomNode(a)})};a.prototype.addToInteractions=function(a){if("CANVAS"===a.nodeName||0<a.childNodes.length){for(;this.interactionsDiv[0].firstChild;)this.interactionsDiv[0].removeChild(this.interactionsDiv[0].firstChild);if(void 0!=a.nodeType)a.style.display="inline-block",a.classList.add("replOutput"),this.interactionsDiv.append(a);else{var b=
jQuery("<div style='width: 100%'></div>");b.text(a);b.style.display="inline-block";this.interactionsDiv.append(b)}this.interactionsDiv.attr("scrollTop",this.interactionsDiv.attr("scrollHeight"))}};a.prototype.renderErrorAsDomNode=function(a){var b=this.evaluator.getMessageFromExn(a),d=document.createElement("div");d["class"]="moby-error";var n=document.createElement("div");n["class"]="moby-error:message";n.appendChild(document.createTextNode(b));d.appendChild(n);a=this.evaluator.getTraceFromExn(a);
for(b=0;b<a.length;b++)d.appendChild(document.createTextNode("at: line "+a[b].line+", column "+a[b].column));return d};var b=function(a,b){plt.wescheme.RoundRobin.initialize([],function(){a.setCompileProgram(plt.wescheme.RoundRobin.roundRobinCompiler);b()},function(){a.setCompileProgram(plt.wescheme.RoundRobin.roundRobinCompiler);alert("WeScheme appears to be busy or unavailable at this time.  Please try again later.");b()})};plt.wescheme.runner.Runner=a;plt.wescheme.runner.init=function(d,f){var l=
new a(d,document.getElementById("interactions"));(new plt.wescheme.AjaxActions).loadProject(null,f,function(a){var d=a.getTitle(),f=a.getSourceCode(),n=a.getPermissions(),H=a.getNotes(),u=jQuery("#interactions");a=document.getElementsByTagName("body")[0];var P=document.createElement("div"),v=document.createElement("span"),E=document.createElement("span");P.id="description";v.id="title";E.id="notes";v.appendChild(document.createTextNode(d));E.appendChild(document.createTextNode(H));H=function(){var a=
1==u.find("canvas").length?u.find("canvas").get(0):u.get(0);a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen;document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen():a.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT)};
(function(){var a=document.createElement("div");return void 0!==(a.webkitRequestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.requestFullscreen)})()&&jQuery("<input type='button' value='Run Fullscreen'>").css("margin-top","20px").css("display","block").css("margin-left","auto").css("margin-right","auto").click(H).appendTo(a);a.insertBefore(v,a.firstChild);P.appendChild(E);a.appendChild(P);document.title=d;b(l.evaluator,function(){l.runSourceCode(d,f,n)});(function(){var a=document.getElementById("interactions"),
b=document.createElement("span");b.id="finished";b.innerHTML="The program has finished running, but only included definitions (which do not produce any output).";0==a.children.length&&a.appendChild(b)})()},function(){alert("unable to load program")})}})();
