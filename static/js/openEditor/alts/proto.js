var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(c||"")+"_"+b++,c)}var b=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6","es3");$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).i}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var g=0;g<f&&c<e;)if(b[c++]!=a[g++])return!1;return g>=f}},"es6","es3");$jscomp.polyfill("String.prototype.trimLeft",function(a){function b(){return this.replace(/^[\s\xa0]+/,"")}return a||b},"es_2019","es3");
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");var COMPILED=!0,goog=goog||{};goog.global=this;goog.DEBUG=!0;goog.LOCALE="en";
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]?c[d]:c[d]={}};goog.getObjectByName=function(a,b){a=a.split(".");b=b||goog.global;for(var c;c=a.shift();)if(goog.isDefAndNotNull(b[c]))b=b[c];else return null;return b};
goog.globalize=function(a,b){b=b||goog.global;for(var c in a)b[c]=a[c]};goog.addDependency=function(a,b,c){if(!COMPILED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,f=0;d=b[f];f++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){return a.instance_||(a.instance_=new a)}};
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");d=
-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>'),!0):!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=
!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),
goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.propertyIsEnumerableCustom_=function(a,b){if(b in a)for(var c in a)if(c==b&&Object.prototype.hasOwnProperty.call(a,b))return!0;return!1};goog.propertyIsEnumerable_=function(a,b){return a instanceof Object?Object.prototype.propertyIsEnumerable.call(a,b):goog.propertyIsEnumerableCustom_(a,b)};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};
goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};
goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){a=goog.typeOf(a);return"object"==a||"array"==a||"function"==a};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36);goog.uidCounter_=0;
goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b=b||{};for(var c in b){var d=(""+b[c]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+c+"\\}","gi"),d)}return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(a){a.call(goog.global)};var plt={wescheme:{}};"undefined"===typeof plt&&(this.plt={});"undefined"===typeof plt.wescheme&&(this.plt.wescheme={});
var WeSchemeIntentBus=function(){function a(){this.listeners=[]}a.prototype.addNotifyListener=function(a){this.listeners.push(a)};a.prototype.removeNotifyListener=function(a){a=this.listeners.indexOf(a);-1!=a&&this.listeners.splice(a,1)};a.prototype.notify=function(a,c){for(var b=0;b<this.listeners.length;b++)try{this.listeners[b].apply(this,["notify",a,c])}catch(e){}};return new a}();plt.wescheme.WeSchemeIntentBus=WeSchemeIntentBus;var WeSchemeStatusBar;
plt.wescheme.WeSchemeStatusBar=WeSchemeStatusBar=function(){function a(a){this.statusbar=a;this.announcements=document.getElementById("announcementlist");this.delay_till_fade=5E3;this.fadeCallbackId=void 0;var b=this;plt.wescheme.WeSchemeIntentBus.addNotifyListener(function(a,c,d){var e={"before-save":"Saving your program (please wait...)","after-save":"Your program has been saved","before-clone":"Saving a copy of this program to your account","after-clone":"You are now working on your own copy",
"before-load":"Loading your program (please wait...)","after-load":"Your program has been loaded","before-publish":"Publishing your program (please wait...)","after-publish":"Program has been published","before-run":"Running your program (please wait...)","after-run":"Finished running your program","before-editor-reload-on-save":"Please wait; saving program..."},f=-1<["before-save","before-load","before-publish","before-run"].indexOf(c);"notify"===a&&e[c]?b.notify(e[c],f):"notify"===a&&"load-file"===
c?b.notify('Waiting on "'+d+'"'):"notify"===a&&"exception"===c&&d[0]instanceof WeSchemeEditor&&b.notify("Exception occured in operation "+d[1])})}var b=!1;a.prototype.catchAttention=function(){if(!b){var a=0,d=this;b=!0;var e=this.statusbar.css("opacity")||"0",f=function(){d.statusbar.css("display","block");d.statusbar.css("opacity","1");a++};f();var g=setInterval(function(){f();1<a&&(d.statusbar.css("opacity",e),setTimeout(function(){d.statusbar.css("display","none")},500),b=!1,clearInterval(g))},
1E3)}};a.prototype.notify=function(a,b){var c=this;if(-1==a.indexOf("Waiting on")){var d=document.createElement("li");d.appendChild(document.createTextNode(a));c.announcements.appendChild(d)}d=function(){c.statusbar.fadeOut("fast",function(){c.statusbar.text("")})};this.fadeCallbackId&&(clearTimeout(this.fadeCallbackId),this.fadeCallbackId=void 0);a&&this.catchAttention();this.statusbar.text(a);this.statusbar.fadeIn("fast");b||(this.fadeCallbackId=setTimeout(d,this.delay_till_fade))};return a}();
plt.wescheme.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersionFloat(navigator.userAgent)||this.searchVersionFloat(navigator.appVersion)||void 0;this.versionString=this.searchVersionString(navigator.userAgent)||this.searchVersionString(navigator.appVersion)||"unknown";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=
a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}},searchVersionString:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return a.substring(b+this.versionSearchString.length+1)},searchVersionFloat:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,
subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},
{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"},{string:navigator.userAgent,subString:"Edge",identity:"Edge",versionSearch:"Edge"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,
subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"},{string:navigator.platform,subString:"android",identity:"Android"}]};plt.wescheme.BrowserDetect.init();var F4_KEYCODE=115,F6_KEYCODE=117,F7_KEYCODE=118,F8_KEYCODE=119,F9_KEYCODE=120,F11_KEYCODE=122,BACKSPACE_KEYCODE=8,ENTER_KEYCODE=13,SAVE_KEYCODE=83,ZOOMIN_KEYCODE=187,ZOOMOUT_KEYCODE=189,DIM_KEYCODE=113,BRIGHTEN_KEYCODE=114,QUESTION_KEYCODE=191,inMiddleOfSave=!1;
function cancelEvent(a){a.cancelBubble=!0;a.stopPropagation&&a.stopPropagation();a.returnValue=!1;a.preventDefault&&a.preventDefault();a.preventDefault||(a.keyCode=0)}
plt.wescheme.topKeymap=function(a){if(a.keyCode===SAVE_KEYCODE&&("Mac"===plt.wescheme.BrowserDetect.OS?a.metaKey:a.ctrlKey))return inMiddleOfSave||(inMiddleOfSave=!0,myEditor.save(function(){inMiddleOfSave=!1},function(){inMiddleOfSave=!1},function(){inMiddleOfSave=!1})),cancelEvent(a),!1;if(a.keyCode===F4_KEYCODE)return myEditor.toggleScreenreader(),cancelEvent(a),!1;if(a.keyCode===F6_KEYCODE)return myEditor.cycleFocus(a.shiftKey),cancelEvent(a),!1;if(a.keyCode===F7_KEYCODE||a.keyCode===ENTER_KEYCODE&&
a.ctrlKey)return myEditor.run(),cancelEvent(a),!1;if(a.keyCode===F8_KEYCODE)return myEditor.requestBreak(),cancelEvent(a),!1;if(a.keyCode===F9_KEYCODE)return myEditor.share(),cancelEvent(a),!1;if(a.keyCode===F11_KEYCODE)return myEditor.showPicker(!1),cancelEvent(a),!1;if(a.keyCode===DIM_KEYCODE||a.keyCode===BRIGHTEN_KEYCODE)return a.codemirrorIgnore=!0,!1;if(a.keyCode===ZOOMIN_KEYCODE&&("Mac"===plt.wescheme.BrowserDetect.OS?a.metaKey:a.ctrlKey)){a=parseInt(document.getElementById("middle").style.fontSize)||
10;document.getElementById("middle").style.fontSize=a+1+"pt";a=document.getElementsByClassName("CodeMirror");for(var b=0;b<a.length;b++)a[b].CodeMirror.refresh();return!1}if(a.keyCode===ZOOMOUT_KEYCODE&&("Mac"===plt.wescheme.BrowserDetect.OS?a.metaKey:a.ctrlKey)){a=parseInt(document.getElementById("middle").style.fontSize)||10;document.getElementById("middle").style.fontSize=a-1+"pt";a=document.getElementsByClassName("CodeMirror");for(b=0;b<a.length;b++)a[b].CodeMirror.refresh();return!1}if(a.keyCode===
QUESTION_KEYCODE&&a.metaKey)return myEditor.toggleHelp(),cancelEvent(a),!1;if(a.target===document.body)return a.keyCode===BACKSPACE_KEYCODE?(cancelEvent(a),!1):!0};var WeSchemeTextContainer;
(function(){var a=0;WeSchemeTextContainer=function(c,e,f,g){var d=this;this.div=c;this.mode="textarea";this.impl=null;this.options=e;this.keymaps=[];jQuery(this.div).empty();c=new b(this,e,function(a){d.impl=a;f(d)});c.editor.getWrapperElement().id=g||"textContainerID"+a;c.editor.getWrapperElement().impl=c;a++};WeSchemeTextContainer.prototype.refresh=function(){this.impl.refresh()};WeSchemeTextContainer.prototype.getSourceB=function(){return this.impl.getSourceB()};WeSchemeTextContainer.prototype.getDiv=
function(){return this.div};WeSchemeTextContainer.prototype.getCode=function(){return this.impl.getCode.apply(this.impl,arguments).replace(/\r\n/g,"\n")};WeSchemeTextContainer.prototype.setCode=function(a){return this.impl.setCode(a.replace(/\r\n/g,"\n"))};WeSchemeTextContainer.prototype.clearHistory=function(){return this.impl.clearHistory()};WeSchemeTextContainer.prototype.highlight=function(a,b,c,g,k,h){return this.impl.highlight(a,b,c,g,k,h)};WeSchemeTextContainer.prototype.unhighlightAll=function(){return this.impl.unhighlightAll()};
WeSchemeTextContainer.prototype.moveCursor=function(a){return this.impl.moveCursor(a)};WeSchemeTextContainer.prototype.scrollIntoView=function(a,b){this.impl.scrollIntoView(a,b)};WeSchemeTextContainer.prototype.setSelection=function(a,b,c,g,k){return this.impl.setSelection(a,b,c,g,k)};WeSchemeTextContainer.prototype.focus=function(){this.impl.focus()};WeSchemeTextContainer.prototype.getCursorStartPosition=function(){return this.impl.getCursorStartPosition()};WeSchemeTextContainer.prototype.setCursorToBeginning=
function(){this.impl.setCursorToBeginning()};WeSchemeTextContainer.prototype.setCursorToEnd=function(){this.impl.setCursorToEnd()};WeSchemeTextContainer.prototype.getCSS=function(a){return this.impl.getCSS(a)};var b=function(a,b,c){var d=this;this.behaviorE=receiverE();this.behavior=startsWith(this.behaviorE,"");this.highlightedAreas=[];var e={};jQuery.extend(e,b.extraKeys);e.Tab="indentAuto";e["Mac"===plt.wescheme.BrowserDetect.OS?"Cmd-I":"Ctrl-I"]=function(a){var b=a.getCursor(!0),c=a.getCursor(!1);
CodeMirror.commands.selectAll(a);CodeMirror.commands.indentAuto(a);a.setSelection(b,c)};this.editor=CodeMirror(a.getDiv(),{theme:b.theme||"scheme",mode:"scheme2",extraKeys:e,lineNumbers:b.lineNumbers,lineWrapping:!0,matchBrackets:b.matchBrackets||!0,autoCloseBrackets:b.autoCloseBrackets||!1,value:b.content||"",readOnly:b.readOnly,cursorBlinkRate:b.cursorBlinkRate});this.editor.getGutterElement().setAttribute("aria-hidden","true");this.editor.on("change",function(){d.behaviorE.sendEvent(d.editor.getValue())});
this.editor.getInputField().setAttribute("role","input");this.editor.on("beforeChange",function(a,b){function c(a){return a.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"')}"paste"===b.origin&&(b.text=b.text.map(c))});try{this.editor.getWrapperElement().style.width=b.width||"100%"}catch(h){}if(!b.dynamicHeight)try{this.editor.getWrapperElement().style.height=b.height||"100%"}catch(h){}try{this.editor.getScrollerElement().style.width="100%"}catch(h){}if(b.dynamicHeight){try{this.editor.getScrollerElement().style.height=
"auto"}catch(h){}try{this.editor.getScrollerElement().style.overflow="visible"}catch(h){}}else try{this.editor.getScrollerElement().style.height="100%"}catch(h){}this.editor.refresh();b.clone&&"definitions"===a.div.id&&(a=document.createElement("div"),document.getElementById("middle").appendChild(a),(new CodeMirror(a,{value:this.editor.getDoc().linkedDoc(),lineNumbers:this.editor.getOption("lineNumbers"),viewportMargin:Infinity})).getWrapperElement().id="printedCM");c.call(d,d)};b.prototype.getSourceB=
function(){return this.behavior};b.prototype.getCode=function(a,b){var c=this.editor.getValue();valueNow(this.behavior)!==c&&this.behaviorE.sendEvent(c);return c.substring(a,b)};b.prototype.setCode=function(a){this.editor.setValue(a);this.behaviorE.sendEvent(a);this.editor.refresh()};b.prototype.clearHistory=function(){this.editor.clearHistory();this.editor.refresh()};var c=0;b.prototype.highlight=function(a,b,f,g,k,h){b--;f=document.querySelectorAll('[href="/static/css/default.css"]')[0].sheet;a="highlight"+
(c+"x");c++;f.insertRule?f.insertRule("."+a+" { background-color: "+h+";}",0):f.addRule("."+a,"background-color: "+h,0);h=this.editor.posFromIndex(parseInt(b));f=this.editor.posFromIndex(parseInt(b)+parseInt(k));var d=this.editor.markText(h,f,{className:a});this.highlightedAreas.push(d);this.scrollIntoView(b,k);return{clear:function(){return d.clear()},find:function(){return d.find()},styleName:a}};b.prototype.moveCursor=function(a){var b=this.editor.posFromIndex(a);a=b.handle;b=b.column-1;var c=
this.editor.getCursor(!1).line;a==c&&this.editor.setCursor({line:a+1,ch:b});this.editor.setCursor({line:a,ch:b})};b.prototype.scrollIntoView=function(a,b){a=this.editor.posFromIndex(a);a.ch--;this.editor.scrollIntoView(a,b)};b.prototype.setSelection=function(a,b,c,g,k){b--;a=this.editor.posFromIndex(parseInt(b));b=this.editor.posFromIndex(parseInt(b)+parseInt(k));this.editor.setSelection(a,b)};b.prototype.unhighlightAll=function(){this.highlightedAreas.forEach(function(a){a.clear()});this.highlightedAreas=
[]};b.prototype.getCursorStartPosition=function(){return this.editor.indexFromPos(this.editor.getCursor(!0))};b.prototype.setCursorToBeginning=function(){this.editor.setCursor(0,0)};b.prototype.setCursorToEnd=function(){this.editor.setCursor({line:this.editor.lineCount()})};b.prototype.shutdown=function(){};b.prototype.focus=function(){this.editor.focus();this.editor.refresh()};b.prototype.refresh=function(){this.editor.refresh()};b.prototype.getCSS=function(a){return this.editor.findMarksAt(a)}})();
plt.wescheme.WeSchemeTextContainer=WeSchemeTextContainer;plt.wescheme.SharedAs=function(a){this.entries=a};plt.wescheme.SharedAs.fromDom=function(a){var b=[];jQuery(a).children("Entry").each(function(){var a=jQuery(this).children("publicId").text(),d=jQuery(this).children("title").text(),e=parseInt(jQuery(this).children("modified").text());b.push({publicId:a,title:d,modified:e})});return new plt.wescheme.SharedAs(b)};plt.wescheme.SharedAs.prototype.getEntries=function(){return this.entries};
plt.wescheme.WeSchemeProperties={};plt.wescheme.WeSchemeProperties.wescheme_server_base="http://www.wescheme.org";plt.wescheme.base64={};
(function(){plt.wescheme.base64.encode=function(a){var b=0,c=0,d=[];if(!a)return a;do{var e=a.charCodeAt(b++);var f=a.charCodeAt(b++);var g=a.charCodeAt(b++);var k=e<<16|f<<8|g;e=k>>18&63;f=k>>12&63;g=k>>6&63;k&=63;d[c++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)}while(b<
a.length);b=d.join("");a=a.length%3;return(a?b.slice(0,a-3):b)+"===".slice(a||3)};plt.wescheme.base64.decode=function(a){var b=0,c=0,d=[];if(!a)return a;a+="";do{var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));
var h=e<<18|f<<12|g<<6|k;e=h>>16&255;f=h>>8&255;h&=255;64==g?d[c++]=String.fromCharCode(e):64==k?d[c++]=String.fromCharCode(e,f):d[c++]=String.fromCharCode(e,f,h)}while(b<a.length);return d.join("")}})();plt.wescheme.Program={};
(function(){plt.wescheme.Program=function(a){this.json=a};plt.wescheme.Program.prototype.getId=function(){return this.json.id};plt.wescheme.Program.prototype.hasSharingUrls=function(){return 0<this.getSharedAsEntries().length};plt.wescheme.Program.prototype.getSharedAsEntries=function(){return new plt.wescheme.SharedAs(this.json.sharedAs)};plt.wescheme.Program.prototype.isPublished=function(){return this.json.published};plt.wescheme.Program.prototype.getTitle=function(){return this.json.title};plt.wescheme.Program.prototype.getOwner=
function(){return this.json.owner};plt.wescheme.Program.prototype.getPublicId=function(){return this.json.publicId};plt.wescheme.Program.prototype.getNotes=function(){return this.json.notes};plt.wescheme.Program.prototype.getSourceCode=function(){return this.json.source.src};plt.wescheme.Program.prototype.getPermissions=function(){return this.json.permissions};plt.wescheme.Program.prototype.getProvides=function(){return this.json.provides};plt.wescheme.Program.prototype.isSourcePublic=function(){return this.json.isSourcePublic};
plt.wescheme.Program.prototype.getObjectCode=function(){return this.json.object.obj};plt.wescheme.Program.prototype.isAndroidPackageBuilt=function(){return!1};plt.wescheme.Program.prototype.getAndroidPackageUrl=function(){return""};plt.wescheme.Program.prototype.getPublicEditingUrl=function(){return plt.wescheme.WeSchemeProperties.wescheme_server_base+"/openEditor?publicId="+encodeURIComponent(this.getPublicId())}})();plt.wescheme.AjaxActions={};
(function(){plt.wescheme.AjaxActions=function(){};plt.wescheme.AjaxActions.prototype.loadProject=function(a,b,c,d){data=a?{pid:a}:{publicId:b};data.gensym=Math.random();jQuery.ajax({cache:!1,data:data,dataType:"json",type:"GET",url:"/loadProject",success:function(a){c(new plt.wescheme.Program(a))},error:function(a){d(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.listProjects=function(a,b){var c={};c.gensym=Math.random();jQuery.ajax({cache:!1,data:c,
dataType:"xml",type:"GET",url:"/listProjects",success:function(b){b=jQuery(b);a(b)},error:function(a){b(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.makeAClone=function(a,b,c,d){jQuery.ajax({cache:!1,data:null===b?{pid:a}:{pid:a,code:b},dataType:"text",type:"POST",url:"/cloneProject",success:function(a){a=parseInt(a);c(a)},error:function(a){d(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.share=
function(a,b,c,d){jQuery.ajax({cache:!1,data:{pid:a,isPublic:b},dataType:"xml",type:"POST",url:"/shareProject",success:function(a){c(jQuery(a))},error:function(a){d(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.deleteProject=function(a,b,c){jQuery.ajax({cache:!1,data:{pid:a},dataType:"xml",type:"POST",url:"/deleteProject",success:function(a){b(jQuery(a))},error:function(a){c(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.save=
function(a,b,c){var d,e={},f=["title","code","notes"];a.pid&&(e.pid=a.pid);for(d=0;d<f.length;d++)Object.hasOwnProperty.call(a,f[d])&&(e[f[d]]=a[f[d]]);jQuery.ajax({cache:!1,data:e,dataType:"text",type:"POST",url:"/saveProject",success:function(a){a=parseInt(a);b(a)},error:function(a){c(a.statusText)},xhr:function(a){return new XMLHttpRequest(a)}})};plt.wescheme.AjaxActions.prototype.sendFeedback=function(a,b,c,d){jQuery.ajax({cache:!1,data:{author:a,type:b,feedbackText:c},datatype:"text",type:"POST",
url:"/addFeedback",success:function(a){d()},error:function(a){d()},xhr:function(a){return new XMLHttpRequest(a)}})}})();


plt.config={};
plt.config.APP_ID="wescheme-prototyping";
plt.config.CLIENT_ID="239382796313-gr5fodbdqpb7uotgpffrdelkgna1gqel.apps.googleusercontent.com";
plt.config.API_KEY="AIzaSyDx3i-7tQtMquLGQvRdVCxIYZjrmPx986U";


goog.debug={};goog.debug.Error=function(a){this.stack=Error().stack||"";a&&(this.message=String(a))};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";
goog.string={};goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)};goog.string.endsWith=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c};goog.string.caseInsensitiveStartsWith=function(a,b){return 0==goog.string.caseInsensitiveCompare(b,a.substr(0,b.length))};goog.string.caseInsensitiveEndsWith=function(a,b){return 0==goog.string.caseInsensitiveCompare(b,a.substr(a.length-b.length,b.length))};
goog.string.subs=function(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/%s/,d)}return a};goog.string.collapseWhitespace=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(a){return/^[\s\xa0]*$/.test(a)};goog.string.isEmptySafe=function(a){return goog.string.isEmpty(goog.string.makeSafe(a))};goog.string.isBreakingWhitespace=function(a){return!/[^\t\n\r ]/.test(a)};goog.string.isAlpha=function(a){return!/[^a-zA-Z]/.test(a)};
goog.string.isNumeric=function(a){return!/[^0-9]/.test(a)};goog.string.isAlphaNumeric=function(a){return!/[^a-zA-Z0-9]/.test(a)};goog.string.isSpace=function(a){return" "==a};goog.string.isUnicodeChar=function(a){return 1==a.length&&" "<=a&&"~">=a||"\u0080"<=a&&"\ufffd">=a};goog.string.stripNewlines=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")};
goog.string.normalizeWhitespace=function(a){return a.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(a){return a.replace(/\xa0|[ \t]+/g," ")};goog.string.collapseBreakingSpaces=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")};goog.string.trim=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")};
goog.string.caseInsensitiveCompare=function(a,b){a=String(a).toLowerCase();b=String(b).toLowerCase();return a<b?-1:a==b?0:1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(a,b){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var c=a.toLowerCase().match(goog.string.numerateCompareRegExp_),d=b.toLowerCase().match(goog.string.numerateCompareRegExp_),e=Math.min(c.length,d.length),f=0;f<e;f++){var g=c[f],k=d[f];if(g!=k)return a=parseInt(g,10),!isNaN(a)&&(b=parseInt(k,10),!isNaN(b)&&a-b)?a-b:g<k?-1:1}return c.length!=d.length?c.length-d.length:a<b?-1:1};goog.string.encodeUriRegExp_=/^[a-zA-Z0-9\-_.!~*'()]*$/;
goog.string.urlEncode=function(a){a=String(a);return goog.string.encodeUriRegExp_.test(a)?a:encodeURIComponent(a)};goog.string.urlDecode=function(a){return decodeURIComponent(a.replace(/\+/g," "))};goog.string.newLineToBr=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")};
goog.string.htmlEscape=function(a,b){if(b)return a.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");if(!goog.string.allRe_.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(goog.string.amperRe_,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(goog.string.ltRe_,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(goog.string.gtRe_,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(goog.string.quotRe_,"&quot;"));return a};
goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/"/g;goog.string.allRe_=/[&<>"]/;goog.string.unescapeEntities=function(a){return goog.string.contains(a,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(a):goog.string.unescapePureXmlEntities_(a):a};
goog.string.unescapeEntitiesUsingDom_=function(a){var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},c=document.createElement("div");return a.replace(goog.string.HTML_ENTITY_PATTERN_,function(a,e){var d=b[a];if(d)return d;"#"==e.charAt(0)&&(e=Number("0"+e.substr(1)),isNaN(e)||(d=String.fromCharCode(e)));d||(c.innerHTML=a+" ",d=c.firstChild.nodeValue.slice(0,-1));return b[a]=d})};
goog.string.unescapePureXmlEntities_=function(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:return"#"!=c.charAt(0)||(c=Number("0"+c.substr(1)),isNaN(c))?a:String.fromCharCode(c)}})};goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g;goog.string.whitespaceEscape=function(a,b){return goog.string.newLineToBr(a.replace(/  /g," &#160;"),b)};
goog.string.stripQuotes=function(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a};goog.string.truncate=function(a,b,c){c&&(a=goog.string.unescapeEntities(a));a.length>b&&(a=a.substring(0,b-3)+"...");c&&(a=goog.string.htmlEscape(a));return a};
goog.string.truncateMiddle=function(a,b,c,d){c&&(a=goog.string.unescapeEntities(a));if(d&&a.length>b){d>b&&(d=b);var e=a.length-d;a=a.substring(0,b-d)+"..."+a.substring(e)}else a.length>b&&(d=Math.floor(b/2),e=a.length-d,a=a.substring(0,d+b%2)+"..."+a.substring(e));c&&(a=goog.string.htmlEscape(a));return a};goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};
goog.string.quote=function(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b[c+1]=goog.string.specialEscapeChars_[d]||(31<e&&127>e?d:goog.string.escapeChar(d))}b.push('"');return b.join("")};goog.string.escapeString=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=goog.string.escapeChar(a.charAt(c));return b.join("")};
goog.string.escapeChar=function(a){if(a in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[a];if(a in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[a]=goog.string.specialEscapeChars_[a];var b=a.charCodeAt(0);if(31<b&&127>b)var c=a;else{if(256>b){if(c="\\x",16>b||256<b)c+="0"}else c="\\u",4096>b&&(c+="0");c+=b.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[a]=c};goog.string.toMap=function(a){for(var b={},c=0;c<a.length;c++)b[a.charAt(c)]=!0;return b};
goog.string.contains=function(a,b){return-1!=a.indexOf(b)};goog.string.removeAt=function(a,b,c){var d=a;0<=b&&b<a.length&&0<c&&(d=a.substr(0,b)+a.substr(b+c,a.length-b-c));return d};goog.string.remove=function(a,b){b=new RegExp(goog.string.regExpEscape(b),"");return a.replace(b,"")};goog.string.removeAll=function(a,b){b=new RegExp(goog.string.regExpEscape(b),"g");return a.replace(b,"")};
goog.string.regExpEscape=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(a,b){return Array(b+1).join(a)};goog.string.padNumber=function(a,b,c){a=goog.isDef(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return goog.string.repeat("0",Math.max(0,b-c))+a};goog.string.makeSafe=function(a){return null==a?"":String(a)};goog.string.buildString=function(a){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)};
goog.string.compareVersions=function(a,b){var c=0;a=goog.string.trim(String(a)).split(".");b=goog.string.trim(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",g=b[e]||"",k=/(\d*)(\D*)/g,h=/(\d*)(\D*)/g;do{var r=k.exec(f)||["","",""],p=h.exec(g)||["","",""];if(0==r[0].length&&0==p[0].length)break;c=0==r[1].length?0:parseInt(r[1],10);var v=0==p[1].length?0:parseInt(p[1],10);c=goog.string.compareElements_(c,v)||goog.string.compareElements_(0==r[2].length,
0==p[2].length)||goog.string.compareElements_(r[2],p[2])}while(0==c)}return c};goog.string.compareElements_=function(a,b){return a<b?-1:a>b?1:0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=goog.string.HASHCODE_MAX_;return b};goog.string.uniqueStringCounter_=2147483648*Math.random()|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(a){var b=Number(a);return 0==b&&goog.string.isEmpty(a)?NaN:b};goog.string.toCamelCaseCache_={};goog.string.toCamelCase=function(a){return goog.string.toCamelCaseCache_[a]||(goog.string.toCamelCaseCache_[a]=String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()}))};goog.string.toSelectorCaseCache_={};goog.string.toSelectorCase=function(a){return goog.string.toSelectorCaseCache_[a]||(goog.string.toSelectorCaseCache_[a]=String(a).replace(/([A-Z])/g,"-$1").toLowerCase())};
goog.asserts={};goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(a,b){b.unshift(a);goog.debug.Error.call(this,goog.string.subs.apply(null,b));b.shift();this.messagePattern=a};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else a&&(e+=": "+a,f=b);throw new goog.asserts.AssertionError(""+e,f||[]);};
goog.asserts.assert=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!a&&goog.asserts.doAssertFailure_("",null,b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.fail=function(a,b){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(a)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertString=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isString(a)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertFunction=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(a)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertObject=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isObject(a)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertArray=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isArray(a)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};goog.asserts.assertBoolean=function(a,b,c){goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(a)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(a),a],b,Array.prototype.slice.call(arguments,2));return a};
goog.asserts.assertInstanceof=function(a,b,c,d){!goog.asserts.ENABLE_ASSERTS||a instanceof b||goog.asserts.doAssertFailure_("instanceof check failed.",null,c,Array.prototype.slice.call(arguments,3))};goog.array={};goog.NATIVE_ARRAY_PROTOTYPES=!0;goog.array.peek=function(a){return a[a.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.indexOf?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(goog.isString(a))return goog.isString(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};
goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(goog.isString(a))return goog.isString(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;return-1};
goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.forEach?function(a,b,c){goog.asserts.assert(null!=a.length);goog.array.ARRAY_PROTOTYPE_.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};goog.array.forEachRight=function(a,b,c){var d=a.length,e=goog.isString(a)?a.split(""):a;for(--d;0<=d;--d)d in e&&b.call(c,e[d],d,a)};
goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.filter?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=goog.isString(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var h=g[k];b.call(c,h,k,a)&&(e[f++]=h)}return e};
goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.map?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=goog.isString(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};goog.array.reduce=function(a,b,c,d){if(a.reduce)return d?a.reduce(goog.bind(b,d),c):a.reduce(b,c);var e=c;goog.array.forEach(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.reduceRight=function(a,b,c,d){if(a.reduceRight)return d?a.reduceRight(goog.bind(b,d),c):a.reduceRight(b,c);var e=c;goog.array.forEachRight(a,function(c,g){e=b.call(d,e,c,g,a)});return e};
goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.some?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&goog.array.ARRAY_PROTOTYPE_.every?function(a,b,c){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};goog.array.find=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};
goog.array.findIndex=function(a,b,c){for(var d=a.length,e=goog.isString(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1};goog.array.findRight=function(a,b,c){b=goog.array.findIndexRight(a,b,c);return 0>b?null:goog.isString(a)?a.charAt(b):a[b]};goog.array.findIndexRight=function(a,b,c){var d=a.length,e=goog.isString(a)?a.split(""):a;for(--d;0<=d;d--)if(d in e&&b.call(c,e[d],d,a))return d;return-1};goog.array.contains=function(a,b){return 0<=goog.array.indexOf(a,b)};
goog.array.isEmpty=function(a){return 0==a.length};goog.array.clear=function(a){if(!goog.isArray(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0};goog.array.insert=function(a,b){goog.array.contains(a,b)||a.push(b)};goog.array.insertAt=function(a,b,c){goog.array.splice(a,c,0,b)};goog.array.insertArrayAt=function(a,b,c){goog.partial(goog.array.splice,a,c,0).apply(null,b)};
goog.array.insertBefore=function(a,b,c){var d;2==arguments.length||0>(d=goog.array.indexOf(a,c))?a.push(b):goog.array.insertAt(a,b,d)};goog.array.remove=function(a,b){b=goog.array.indexOf(a,b);var c;(c=0<=b)&&goog.array.removeAt(a,b);return c};goog.array.removeAt=function(a,b){goog.asserts.assert(null!=a.length);return 1==goog.array.ARRAY_PROTOTYPE_.splice.call(a,b,1).length};goog.array.removeIf=function(a,b,c){b=goog.array.findIndex(a,b,c);return 0<=b?(goog.array.removeAt(a,b),!0):!1};
goog.array.concat=function(a){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.clone=function(a){if(goog.isArray(a))return goog.array.concat(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b};goog.array.toArray=function(a){return goog.isArray(a)?goog.array.concat(a):goog.array.clone(a)};
goog.array.extend=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(goog.isArray(d)||(e=goog.isArrayLike(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,k=0;k<g;k++)a[f+k]=d[k];else a.push(d)}};goog.array.splice=function(a,b,c,d){goog.asserts.assert(null!=a.length);return goog.array.ARRAY_PROTOTYPE_.splice.apply(a,goog.array.slice(arguments,1))};
goog.array.slice=function(a,b,c){goog.asserts.assert(null!=a.length);return 2>=arguments.length?goog.array.ARRAY_PROTOTYPE_.slice.call(a,b):goog.array.ARRAY_PROTOTYPE_.slice.call(a,b,c)};goog.array.removeDuplicates=function(a,b){b=b||a;for(var c={},d=0,e=0;e<a.length;){var f=a[e++],g=goog.isObject(f)?"o"+goog.getUid(f):(typeof f).charAt(0)+f;Object.prototype.hasOwnProperty.call(c,g)||(c[g]=!0,b[d++]=f)}b.length=d};
goog.array.binarySearch=function(a,b,c){return goog.array.binarySearch_(a,c||goog.array.defaultCompare,!1,b)};goog.array.binarySelect=function(a,b,c){return goog.array.binarySearch_(a,b,!0,void 0,c)};goog.array.binarySearch_=function(a,b,c,d,e){for(var f=0,g=a.length,k;f<g;){var h=f+g>>1;var r=c?b.call(e,a[h],h,a):b(d,a[h]);0<r?f=h+1:(g=h,k=!r)}return k?f:~f};goog.array.sort=function(a,b){goog.asserts.assert(null!=a.length);goog.array.ARRAY_PROTOTYPE_.sort.call(a,b||goog.array.defaultCompare)};
goog.array.stableSort=function(a,b){for(var c=0;c<a.length;c++)a[c]={index:c,value:a[c]};var d=b||goog.array.defaultCompare;goog.array.sort(a,function(a,b){return d(a.value,b.value)||a.index-b.index});for(c=0;c<a.length;c++)a[c]=a[c].value};goog.array.sortObjectsByKey=function(a,b,c){var d=c||goog.array.defaultCompare;goog.array.sort(a,function(a,c){return d(a[b],c[b])})};
goog.array.isSorted=function(a,b,c){b=b||goog.array.defaultCompare;for(var d=1;d<a.length;d++){var e=b(a[d-1],a[d]);if(0<e||0==e&&c)return!1}return!0};goog.array.equals=function(a,b,c){if(!goog.isArrayLike(a)||!goog.isArrayLike(b)||a.length!=b.length)return!1;var d=a.length;c=c||goog.array.defaultCompareEquality;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0};goog.array.compare=function(a,b,c){return goog.array.equals(a,b,c)};
goog.array.compare3=function(a,b,c){c=c||goog.array.defaultCompare;for(var d=Math.min(a.length,b.length),e=0;e<d;e++){var f=c(a[e],b[e]);if(0!=f)return f}return goog.array.defaultCompare(a.length,b.length)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(a,b,c){c=goog.array.binarySearch(a,b,c);return 0>c?(goog.array.insertAt(a,b,-(c+1)),!0):!1};
goog.array.binaryRemove=function(a,b,c){b=goog.array.binarySearch(a,b,c);return 0<=b?goog.array.removeAt(a,b):!1};goog.array.bucket=function(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d],f=b(e,d,a);goog.isDef(f)&&(c[f]||(c[f]=[])).push(e)}return c};goog.array.repeat=function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c};goog.array.flatten=function(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];goog.isArray(d)?b.push.apply(b,goog.array.flatten.apply(null,d)):b.push(d)}return b};
goog.array.rotate=function(a,b){goog.asserts.assert(null!=a.length);a.length&&(b%=a.length,0<b?goog.array.ARRAY_PROTOTYPE_.unshift.apply(a,a.splice(-b,b)):0>b&&goog.array.ARRAY_PROTOTYPE_.push.apply(a,a.splice(0,-b)));return a};goog.array.zip=function(a){if(!arguments.length)return[];for(var b=[],c=0;;c++){for(var d=[],e=0;e<arguments.length;e++){var f=arguments[e];if(c>=f.length)return b;d.push(f[c])}b.push(d)}};
goog.array.shuffle=function(a,b){b=b||Math.random;for(var c=a.length-1;0<c;c--){var d=Math.floor(b()*(c+1)),e=a[c];a[c]=a[d];a[d]=e}};goog.userAgent={};goog.userAgent.ASSUME_IE=!1;goog.userAgent.ASSUME_GECKO=!1;goog.userAgent.ASSUME_WEBKIT=!1;goog.userAgent.ASSUME_MOBILE_WEBKIT=!1;goog.userAgent.ASSUME_OPERA=!1;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;
goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null};goog.userAgent.getNavigator=function(){return goog.global.navigator};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1;goog.userAgent.detectedIe_=!1;goog.userAgent.detectedWebkit_=!1;goog.userAgent.detectedMobile_=!1;goog.userAgent.detectedGecko_=!1;var a;if(!goog.userAgent.BROWSER_KNOWN_&&(a=goog.userAgent.getUserAgentString())){var b=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=0==a.indexOf("Opera");goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&-1!=a.indexOf("MSIE");goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&
-1!=a.indexOf("WebKit");goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&-1!=a.indexOf("Mobile");goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&"Gecko"==b.product}};goog.userAgent.BROWSER_KNOWN_||goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;
goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigator();return a&&a.platform||""};
goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=!1;goog.userAgent.ASSUME_WINDOWS=!1;goog.userAgent.ASSUME_LINUX=!1;goog.userAgent.ASSUME_X11=!1;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11")};goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_();
goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;
goog.userAgent.determineVersion_=function(){var a="",b;goog.userAgent.OPERA&&goog.global.opera?(a=goog.global.opera.version,a="function"==typeof a?a():a):(goog.userAgent.GECKO?b=/rv:([^\);]+)(\)|;)/:goog.userAgent.IE?b=/MSIE\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(b=/WebKit\/(\S+)/),b&&(a=(a=b.exec(goog.userAgent.getUserAgentString()))?a[1]:""));return goog.userAgent.IE&&(b=goog.userAgent.getDocumentMode_(),b>parseFloat(a))?String(b):a};
goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(a,b){return goog.string.compareVersions(a,b)};goog.userAgent.isVersionCache_={};goog.userAgent.isVersion=function(a){return goog.userAgent.isVersionCache_[a]||(goog.userAgent.isVersionCache_[a]=0<=goog.string.compareVersions(goog.userAgent.VERSION,a))};goog.userAgent.isDocumentModeCache_={};
goog.userAgent.isDocumentMode=function(a){return goog.userAgent.isDocumentModeCache_[a]||(goog.userAgent.isDocumentModeCache_[a]=goog.userAgent.IE&&document.documentMode&&document.documentMode>=a)};goog.dom={};
goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentMode(9)||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};
goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",DD:"DD",DEL:"DEL",DFN:"DFN",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",FIELDSET:"FIELDSET",FONT:"FONT",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",
H5:"H5",H6:"H6",HEAD:"HEAD",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MENU:"MENU",META:"META",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",P:"P",PARAM:"PARAM",PRE:"PRE",Q:"Q",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SELECT:"SELECT",SMALL:"SMALL",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUP:"SUP",TABLE:"TABLE",
TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TITLE:"TITLE",TR:"TR",TT:"TT",U:"U",UL:"UL",VAR:"VAR"};goog.dom.classes={};goog.dom.classes.set=function(a,b){a.className=b};goog.dom.classes.get=function(a){return(a=a.className)&&"function"==typeof a.split?a.split(/\s+/):[]};goog.dom.classes.add=function(a,b){var c=goog.dom.classes.get(a),d=goog.array.slice(arguments,1);d=goog.dom.classes.add_(c,d);a.className=c.join(" ");return d};
goog.dom.classes.remove=function(a,b){var c=goog.dom.classes.get(a),d=goog.array.slice(arguments,1);d=goog.dom.classes.remove_(c,d);a.className=c.join(" ");return d};goog.dom.classes.add_=function(a,b){for(var c=0,d=0;d<b.length;d++)goog.array.contains(a,b[d])||(a.push(b[d]),c++);return c==b.length};goog.dom.classes.remove_=function(a,b){for(var c=0,d=0;d<a.length;d++)goog.array.contains(b,a[d])&&(goog.array.splice(a,d--,1),c++);return c==b.length};
goog.dom.classes.swap=function(a,b,c){for(var d=goog.dom.classes.get(a),e=!1,f=0;f<d.length;f++)d[f]==b&&(goog.array.splice(d,f--,1),e=!0);e&&(d.push(c),a.className=d.join(" "));return e};goog.dom.classes.addRemove=function(a,b,c){var d=goog.dom.classes.get(a);goog.isString(b)?goog.array.remove(d,b):goog.isArray(b)&&goog.dom.classes.remove_(d,b);goog.isString(c)&&!goog.array.contains(d,c)?d.push(c):goog.isArray(c)&&goog.dom.classes.add_(d,c);a.className=d.join(" ")};
goog.dom.classes.has=function(a,b){return goog.array.contains(goog.dom.classes.get(a),b)};goog.dom.classes.enable=function(a,b,c){c?goog.dom.classes.add(a,b):goog.dom.classes.remove(a,b)};goog.dom.classes.toggle=function(a,b){var c=!goog.dom.classes.has(a,b);goog.dom.classes.enable(a,b,c);return c};goog.math={};goog.math.Coordinate=function(a,b){this.x=goog.isDef(a)?a:0;this.y=goog.isDef(b)?b:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};
goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"});goog.math.Coordinate.equals=function(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1};goog.math.Coordinate.distance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)};goog.math.Coordinate.squaredDistance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return c*c+a*a};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};
goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};goog.math.Size=function(a,b){this.width=a;this.height=b};goog.math.Size.equals=function(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"});
goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};
goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};goog.math.Size.prototype.fitsInside=function(a){return this.width<=a.width&&this.height<=a.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
goog.math.Size.prototype.scale=function(a){this.width*=a;this.height*=a;return this};goog.math.Size.prototype.scaleToFit=function(a){a=this.aspectRatio()>a.aspectRatio()?a.width/this.width:a.height/this.height;return this.scale(a)};goog.object={};goog.object.forEach=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)};goog.object.filter=function(a,b,c){var d={},e;for(e in a)b.call(c,a[e],e,a)&&(d[e]=a[e]);return d};goog.object.map=function(a,b,c){var d={},e;for(e in a)d[e]=b.call(c,a[e],e,a);return d};
goog.object.some=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return!0;return!1};goog.object.every=function(a,b,c){for(var d in a)if(!b.call(c,a[d],d,a))return!1;return!0};goog.object.getCount=function(a){var b=0,c;for(c in a)b++;return b};goog.object.getAnyKey=function(a){for(var b in a)return b};goog.object.getAnyValue=function(a){for(var b in a)return a[b]};goog.object.contains=function(a,b){return goog.object.containsValue(a,b)};
goog.object.getValues=function(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};goog.object.getKeys=function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};goog.object.getValueByKeys=function(a,b){var c=goog.isArrayLike(b),d=c?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],goog.isDef(a));c++);return a};goog.object.containsKey=function(a,b){return b in a};goog.object.containsValue=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1};
goog.object.findKey=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d};goog.object.findValue=function(a,b,c){return(b=goog.object.findKey(a,b,c))&&a[b]};goog.object.isEmpty=function(a){for(var b in a)return!1;return!0};goog.object.clear=function(a){for(var b in a)delete a[b]};goog.object.remove=function(a,b){var c;(c=b in a)&&delete a[b];return c};goog.object.add=function(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');goog.object.set(a,b,c)};
goog.object.get=function(a,b,c){return b in a?a[b]:c};goog.object.set=function(a,b,c){a[b]=c};goog.object.setIfUndefined=function(a,b,c){return b in a?a[b]:a[b]=c};goog.object.clone=function(a){var b={},c;for(c in a)b[c]=a[c];return b};goog.object.unsafeClone=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.object.unsafeClone(a[c]);return b}return a};
goog.object.transpose=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");goog.object.extend=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<goog.object.PROTOTYPE_FIELDS_.length;f++)c=goog.object.PROTOTYPE_FIELDS_[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};
goog.object.create=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};goog.object.createSet=function(a){var b=arguments.length;if(1==b&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};goog.dom.ASSUME_QUIRKS_MODE=!1;
goog.dom.ASSUME_STANDARDS_MODE=!1;goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.dom.getDomHelper=function(a){return a?new goog.dom.DomHelper(goog.dom.getOwnerDocument(a)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};
goog.dom.getDocument=function(){return document};goog.dom.getElement=function(a){return goog.isString(a)?document.getElementById(a):a};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(document,a,b,c)};
goog.dom.getElementsByClass=function(a,b){var c=b||document;return goog.dom.canUseQuerySelector_(c)?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):goog.dom.getElementsByTagNameAndClass_(document,"*",a,b)};goog.dom.getElementByClass=function(a,b){var c=b||document;return(goog.dom.canUseQuerySelector_(c)?c.querySelector("."+a):goog.dom.getElementsByClass(a,b)[0])||null};
goog.dom.canUseQuerySelector_=function(a){return a.querySelectorAll&&a.querySelector&&(!goog.userAgent.WEBKIT||goog.dom.isCss1CompatMode_(document)||goog.userAgent.isVersion("528"))};
goog.dom.getElementsByTagNameAndClass_=function(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(goog.dom.canUseQuerySelector_(a)&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&goog.array.contains(b.split(/\s+/),c)&&(d[e++]=g);d.length=
e;return d}return a};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;goog.dom.setProperties=function(a,b){goog.object.forEach(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in goog.dom.DIRECT_ATTRIBUTE_MAP_?a.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[d],b):goog.string.startsWith(d,"aria-")?a.setAttribute(d,b):a[d]=b})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};goog.dom.getViewportSize=function(a){return goog.dom.getViewportSize_(a||window)};
goog.dom.getViewportSize_=function(a){var b=a.document;if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("500")&&!goog.userAgent.MOBILE){"undefined"==typeof a.innerHeight&&(a=window);b=a.innerHeight;var c=a.document.documentElement.scrollHeight;a==a.top&&c<b&&(b-=15);return new goog.math.Size(a.innerWidth,b)}a=goog.dom.isCss1CompatMode_(b)?b.documentElement:b.body;return new goog.math.Size(a.clientWidth,a.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};
goog.dom.getDocumentHeight_=function(a){var b=a.document,c=0;if(b){a=goog.dom.getViewportSize_(a).height;c=b.body;var d=b.documentElement;if(goog.dom.isCss1CompatMode_(b)&&d.scrollHeight)c=d.scrollHeight!=a?d.scrollHeight:d.offsetHeight;else{b=d.scrollHeight;var e=d.offsetHeight;d.clientHeight!=e&&(b=c.scrollHeight,e=c.offsetHeight);c=b>a?b>e?b:e:b<e?b:e}}return c};goog.dom.getPageScroll=function(a){return goog.dom.getDomHelper((a||goog.global||window).document).getDocumentScroll()};
goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(a){var b=goog.dom.getDocumentScrollElement_(a);a=goog.dom.getWindow_(a);return new goog.math.Coordinate(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(a){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(a)?a.documentElement:a.body};goog.dom.getWindow=function(a){return a?goog.dom.getWindow_(a):window};goog.dom.getWindow_=function(a){return a.parentWindow||a.defaultView};goog.dom.createDom=function(a,b,c){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(a,b){var c=b[0],d=b[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',goog.string.htmlEscape(d.name),'"');if(d.type){c.push(' type="',goog.string.htmlEscape(d.type),'"');var e={};goog.object.extend(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);d&&(goog.isString(d)?c.className=d:goog.isArray(d)?goog.dom.classes.add.apply(null,[c].concat(d)):goog.dom.setProperties(c,d));2<b.length&&
goog.dom.append_(a,c,b,2);return c};goog.dom.append_=function(a,b,c,d){function e(c){c&&b.appendChild(goog.isString(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];goog.isArrayLike(f)&&!goog.dom.isNodeLike(f)?goog.array.forEach(goog.dom.isNodeList(f)?goog.array.clone(f):f,e):e(f)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(a){return document.createElement(a)};goog.dom.createTextNode=function(a){return document.createTextNode(a)};
goog.dom.createTable=function(a,b,c){return goog.dom.createTable_(document,a,b,!!c)};goog.dom.createTable_=function(a,b,c,d){for(var e=["<tr>"],f=0;f<c;f++)e.push(d?"<td>&nbsp;</td>":"<td></td>");e.push("</tr>");e=e.join("");c=["<table>"];for(f=0;f<b;f++)c.push(e);c.push("</table>");a=a.createElement("DIV");a.innerHTML=c.join("");return a.removeChild(a.firstChild)};goog.dom.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(document,a)};
goog.dom.htmlToDocumentFragment_=function(a,b){var c=a.createElement("div");goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(c.innerHTML="<br>"+b,c.removeChild(c.firstChild)):c.innerHTML=b;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(a=a.createDocumentFragment();c.firstChild;)a.appendChild(c.firstChild);return a};goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};
goog.dom.isCss1CompatMode_=function(a){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==a.compatMode};goog.dom.canHaveChildren=function(a){if(a.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "STYLE":return!1}return!0};
goog.dom.appendChild=function(a,b){a.appendChild(b)};goog.dom.append=function(a,b){goog.dom.append_(goog.dom.getOwnerDocument(a),a,arguments,1)};goog.dom.removeChildren=function(a){for(var b;b=a.firstChild;)a.removeChild(b)};goog.dom.insertSiblingBefore=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)};goog.dom.insertSiblingAfter=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)};goog.dom.insertChildAt=function(a,b,c){a.insertBefore(b,a.childNodes[c]||null)};
goog.dom.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};goog.dom.replaceNode=function(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)};goog.dom.flattenElement=function(a){var b,c=a.parentNode;if(c&&c.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(a.removeNode)return a.removeNode(!1);for(;b=a.firstChild;)c.insertBefore(b,a);return goog.dom.removeNode(a)}};
goog.dom.getChildren=function(a){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&void 0!=a.children?a.children:goog.array.filter(a.childNodes,function(a){return a.nodeType==goog.dom.NodeType.ELEMENT})};goog.dom.getFirstElementChild=function(a){return void 0!=a.firstElementChild?a.firstElementChild:goog.dom.getNextElementNode_(a.firstChild,!0)};goog.dom.getLastElementChild=function(a){return void 0!=a.lastElementChild?a.lastElementChild:goog.dom.getNextElementNode_(a.lastChild,!1)};
goog.dom.getNextElementSibling=function(a){return void 0!=a.nextElementSibling?a.nextElementSibling:goog.dom.getNextElementNode_(a.nextSibling,!0)};goog.dom.getPreviousElementSibling=function(a){return void 0!=a.previousElementSibling?a.previousElementSibling:goog.dom.getNextElementNode_(a.previousSibling,!1)};goog.dom.getNextElementNode_=function(a,b){for(;a&&a.nodeType!=goog.dom.NodeType.ELEMENT;)a=b?a.nextSibling:a.previousSibling;return a};
goog.dom.getNextNode=function(a){if(!a)return null;if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null};goog.dom.getPreviousNode=function(a){if(!a)return null;if(!a.previousSibling)return a.parentNode;for(a=a.previousSibling;a&&a.lastChild;)a=a.lastChild;return a};goog.dom.isNodeLike=function(a){return goog.isObject(a)&&0<a.nodeType};goog.dom.isElement=function(a){return goog.isObject(a)&&a.nodeType==goog.dom.NodeType.ELEMENT};
goog.dom.isWindow=function(a){return goog.isObject(a)&&a.window==a};goog.dom.contains=function(a,b){if(a.contains&&b.nodeType==goog.dom.NodeType.ELEMENT)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};
goog.dom.compareNodeOrder=function(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=a.nodeType==goog.dom.NodeType.ELEMENT,d=b.nodeType==goog.dom.NodeType.ELEMENT;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,f=b.parentNode;return e==f?goog.dom.compareSiblingOrder_(a,b):!c&&goog.dom.contains(e,b)?-1*goog.dom.compareParentsDescendantNodeIe_(a,b):!d&&goog.dom.contains(f,
a)?goog.dom.compareParentsDescendantNodeIe_(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}d=goog.dom.getOwnerDocument(a);c=d.createRange();c.selectNode(a);c.collapse(!0);a=d.createRange();a.selectNode(b);a.collapse(!0);return c.compareBoundaryPoints(goog.global.Range.START_TO_END,a)};goog.dom.compareParentsDescendantNodeIe_=function(a,b){var c=a.parentNode;if(c==b)return-1;for(;b.parentNode!=c;)b=b.parentNode;return goog.dom.compareSiblingOrder_(b,a)};
goog.dom.compareSiblingOrder_=function(a,b){for(;b=b.previousSibling;)if(b==a)return-1;return 1};goog.dom.findCommonAncestor=function(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=Infinity;for(b=0;b<c;b++){for(var f=[],g=arguments[b];g;)f.unshift(g),g=g.parentNode;d.push(f);e=Math.min(e,f.length)}f=null;for(b=0;b<e;b++){g=d[0][b];for(var k=1;k<c;k++)if(g!=d[k][b])return f;f=g}return f};
goog.dom.getOwnerDocument=function(a){return a.nodeType==goog.dom.NodeType.DOCUMENT?a:a.ownerDocument||a.document};goog.dom.getFrameContentDocument=function(a){return a.contentDocument||a.contentWindow.document};goog.dom.getFrameContentWindow=function(a){return a.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(a))};
goog.dom.setTextContent=function(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&a.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{goog.dom.removeChildren(a);var c=goog.dom.getOwnerDocument(a);a.appendChild(c.createTextNode(b))}};goog.dom.getOuterHtml=function(a){if("outerHTML"in a)return a.outerHTML;var b=goog.dom.getOwnerDocument(a).createElement("div");b.appendChild(a.cloneNode(!0));return b.innerHTML};
goog.dom.findNode=function(a,b){var c=[];return goog.dom.findNodes_(a,b,c,!0)?c[0]:void 0};goog.dom.findNodes=function(a,b){var c=[];goog.dom.findNodes_(a,b,c,!1);return c};goog.dom.findNodes_=function(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||goog.dom.findNodes_(a,b,c,d))return!0;a=a.nextSibling}return!1};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};
goog.dom.isFocusableTabIndex=function(a){var b=a.getAttributeNode("tabindex");return b&&b.specified?(a=a.tabIndex,goog.isNumber(a)&&0<=a&&32768>a):!1};goog.dom.setFocusableTabIndex=function(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))};
goog.dom.getTextContent=function(a){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in a)a=goog.string.canonicalizeNewlines(a.innerText);else{var b=[];goog.dom.getTextContent_(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a};goog.dom.getRawTextContent=function(a){var b=[];goog.dom.getTextContent_(a,b,!1);return b.join("")};
goog.dom.getTextContent_=function(a,b,c){if(!(a.nodeName in goog.dom.TAGS_TO_IGNORE_))if(a.nodeType==goog.dom.NodeType.TEXT)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)b.push(goog.dom.PREDEFINED_TAG_VALUES_[a.nodeName]);else for(a=a.firstChild;a;)goog.dom.getTextContent_(a,b,c),a=a.nextSibling};goog.dom.getNodeTextLength=function(a){return goog.dom.getTextContent(a).length};
goog.dom.getNodeTextOffset=function(a,b){b=b||goog.dom.getOwnerDocument(a).body;for(var c=[];a&&a!=b;){for(var d=a;d=d.previousSibling;)c.unshift(goog.dom.getTextContent(d));a=a.parentNode}return goog.string.trimLeft(c.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(a,b,c){a=[a];for(var d=0,e;0<a.length&&d<b;)if(e=a.pop(),!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT){var f=e.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");d+=f.length}else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)d+=goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName].length;else for(f=e.childNodes.length-1;0<=f;f--)a.push(e.childNodes[f]);goog.isObject(c)&&(c.remainder=e?e.nodeValue.length+b-d-1:0,c.node=e);return e};
goog.dom.isNodeList=function(a){if(a&&"number"==typeof a.length){if(goog.isObject(a))return"function"==typeof a.item||"string"==typeof a.item;if(goog.isFunction(a))return"function"==typeof a.item}return!1};goog.dom.getAncestorByTagNameAndClass=function(a,b,c){var d=b?b.toUpperCase():null;return goog.dom.getAncestor(a,function(a){return(!d||a.nodeName==d)&&(!c||goog.dom.classes.has(a,c))},!0)};goog.dom.getAncestorByClass=function(a,b){return goog.dom.getAncestorByTagNameAndClass(a,null,b)};
goog.dom.getAncestor=function(a,b,c,d){c||(a=a.parentNode);c=null==d;for(var e=0;a&&(c||e<=d);){if(b(a))return a;a=a.parentNode;e++}return null};goog.dom.getActiveElement=function(a){try{return a&&a.activeElement}catch(b){}return null};goog.dom.DomHelper=function(a){this.document_=a||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;goog.dom.DomHelper.prototype.setDocument=function(a){this.document_=a};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};
goog.dom.DomHelper.prototype.getElement=function(a){return goog.isString(a)?this.document_.getElementById(a):a};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(a,b,c){return goog.dom.getElementsByTagNameAndClass_(this.document_,a,b,c)};goog.dom.DomHelper.prototype.getElementsByClass=function(a,b){return goog.dom.getElementsByClass(a,b||this.document_)};
goog.dom.DomHelper.prototype.getElementByClass=function(a,b){return goog.dom.getElementByClass(a,b||this.document_)};goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(a){return goog.dom.getViewportSize(a||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};
goog.dom.DomHelper.prototype.createDom=function(a,b,c){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createTextNode=function(a){return this.document_.createTextNode(a)};goog.dom.DomHelper.prototype.createTable=function(a,b,c){return goog.dom.createTable_(this.document_,a,b,!!c)};
goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(a){return goog.dom.htmlToDocumentFragment_(this.document_,a)};goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};
goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;
goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;
goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;
goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;
goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.events={};
goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",
DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",CONTEXTMENU:"contextmenu",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",
BEFOREPASTE:"beforepaste",MESSAGE:"message",CONNECT:"connect",TRANSITIONEND:goog.userAgent.WEBKIT?"webkitTransitionEnd":goog.userAgent.OPERA?"oTransitionEnd":"transitionend"};goog.disposable={};goog.disposable.IDisposable=function(){};goog.Disposable=function(){goog.Disposable.ENABLE_MONITORING&&(goog.Disposable.instances_[goog.getUid(this)]=this)};goog.Disposable.ENABLE_MONITORING=!1;goog.Disposable.instances_={};
goog.Disposable.getUndisposedObjects=function(){var a=[],b;for(b in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(b)&&a.push(goog.Disposable.instances_[Number(b)]);return a};goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}};goog.Disposable.prototype.disposed_=!1;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;
goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.ENABLE_MONITORING)){var a=goog.getUid(this);if(!goog.Disposable.instances_.hasOwnProperty(a))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[a]}};goog.Disposable.prototype.registerDisposable=function(a){this.dependentDisposables_||(this.dependentDisposables_=[]);this.dependentDisposables_.push(a)};
goog.Disposable.prototype.disposeInternal=function(){this.dependentDisposables_&&goog.disposeAll.apply(null,this.dependentDisposables_)};goog.dispose=function(a){a&&"function"==typeof a.dispose&&a.dispose()};goog.disposeAll=function(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];goog.isArrayLike(d)?goog.disposeAll.apply(null,d):goog.dispose(d)}};goog.debug.entryPointRegistry={};goog.debug.EntryPointMonitor=function(){};goog.debug.entryPointRegistry.refList_=[];
goog.debug.entryPointRegistry.monitors_=[];goog.debug.entryPointRegistry.monitorsMayExist_=!1;goog.debug.entryPointRegistry.register=function(a){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=a;if(goog.debug.entryPointRegistry.monitorsMayExist_)for(var b=goog.debug.entryPointRegistry.monitors_,c=0;c<b.length;c++)a(goog.bind(b[c].wrap,b[c]))};
goog.debug.entryPointRegistry.monitorAll=function(a){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var b=goog.bind(a.wrap,a),c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](b);goog.debug.entryPointRegistry.monitors_.push(a)};
goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(a){var b=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(a==b[b.length-1],"Only the most recent monitor can be unwrapped.");a=goog.bind(a.unwrap,a);for(var c=0;c<goog.debug.entryPointRegistry.refList_.length;c++)goog.debug.entryPointRegistry.refList_[c](a);b.length--};goog.debug.errorHandlerWeakDep={protectEntryPoint:function(a,b){return a}};
goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentMode(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersion("8")};goog.events.Event=function(a,b){goog.Disposable.call(this);this.type=a;this.currentTarget=this.target=b};goog.inherits(goog.events.Event,goog.Disposable);goog.events.Event.prototype.disposeInternal=function(){delete this.type;delete this.target;delete this.currentTarget};
goog.events.Event.prototype.propagationStopped_=!1;goog.events.Event.prototype.returnValue_=!0;goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0};goog.events.Event.prototype.preventDefault=function(){this.returnValue_=!1};goog.events.Event.stopPropagation=function(a){a.stopPropagation()};goog.events.Event.preventDefault=function(a){a.preventDefault()};goog.reflect={};goog.reflect.object=function(a,b){return b};
goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=goog.nullFunction;goog.reflect.canAccessProperty=function(a,b){try{return goog.reflect.sinkValue(a[b]),!0}catch(c){}return!1};goog.events.BrowserEvent=function(a,b){a&&this.init(a,b)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};goog.events.BrowserEvent.IEButtonMap=[1,4,2];goog.events.BrowserEvent.prototype.target=null;
goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;
goog.events.BrowserEvent.prototype.ctrlKey=!1;goog.events.BrowserEvent.prototype.altKey=!1;goog.events.BrowserEvent.prototype.shiftKey=!1;goog.events.BrowserEvent.prototype.metaKey=!1;goog.events.BrowserEvent.prototype.platformModifierKey=!1;goog.events.BrowserEvent.prototype.event_=null;
goog.events.BrowserEvent.prototype.init=function(a,b){var c=this.type=a.type;goog.events.Event.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;(b=a.relatedTarget)?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(b,"nodeName")||(b=null)):c==goog.events.EventType.MOUSEOVER?b=a.fromElement:c==goog.events.EventType.MOUSEOUT&&(b=a.toElement);this.relatedTarget=b;this.offsetX=void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=
void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.platformModifierKey=goog.userAgent.MAC?a.metaKey:a.ctrlKey;this.state=a.state;this.event_=a;delete this.returnValue_;delete this.propagationStopped_};
goog.events.BrowserEvent.prototype.isButton=function(a){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==a:"click"==this.type?a==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[a])};goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var a=this.event_;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};
goog.events.BrowserEvent.prototype.disposeInternal=function(){goog.events.BrowserEvent.superClass_.disposeInternal.call(this);this.relatedTarget=this.currentTarget=this.target=this.event_=null};goog.events.EventWrapper=function(){};goog.events.EventWrapper.prototype.listen=function(a,b,c,d,e){};goog.events.EventWrapper.prototype.unlisten=function(a,b,c,d,e){};goog.events.Listener=function(){};goog.events.Listener.counter_=0;goog.events.Listener.prototype.key=0;
goog.events.Listener.prototype.removed=!1;goog.events.Listener.prototype.callOnce=!1;goog.events.Listener.prototype.init=function(a,b,c,d,e,f){if(goog.isFunction(a))this.isFunctionListener_=!0;else if(a&&a.handleEvent&&goog.isFunction(a.handleEvent))this.isFunctionListener_=!1;else throw Error("Invalid listener argument");this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.handler=f;this.callOnce=!1;this.key=++goog.events.Listener.counter_;this.removed=!1};
goog.events.Listener.prototype.handleEvent=function(a){return this.isFunctionListener_?this.listener.call(this.handler||this.src,a):this.listener.handleEvent.call(this.listener,a)};goog.events.ASSUME_GOOD_GC=!1;goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};goog.events.onString_="on";goog.events.onStringMap_={};goog.events.keySeparator_="_";
goog.events.listen=function(a,b,c,d,e){if(b){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listen(a,b[f],c,d,e);return null}d=!!d;var g=goog.events.listenerTree_;b in g||(g[b]={count_:0,remaining_:0});g=g[b];d in g||(g[d]={count_:0,remaining_:0},g.count_++);g=g[d];var k=goog.getUid(a);g.remaining_++;if(g[k]){var h=g[k];for(f=0;f<h.length;f++)if(g=h[f],g.listener==c&&g.handler==e){if(g.removed)break;return h[f].key}}else h=g[k]=[],g.count_++;f=goog.events.getProxy();f.src=a;g=new goog.events.Listener;
g.init(c,f,a,b,d,e);c=g.key;f.key=c;h.push(g);goog.events.listeners_[c]=g;goog.events.sources_[k]||(goog.events.sources_[k]=[]);goog.events.sources_[k].push(g);a.addEventListener?a!=goog.global&&a.customEvent_||a.addEventListener(b,f,d):a.attachEvent(goog.events.getOnString_(b),f);return c}throw Error("Invalid event type");};
goog.events.getProxy=function(){var a=goog.events.handleBrowserEvent_,b=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b};goog.events.listenOnce=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.listenOnce(a,b[f],c,d,e);return null}a=goog.events.listen(a,b,c,d,e);goog.events.listeners_[a].callOnce=!0;return a};
goog.events.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e)};goog.events.unlisten=function(a,b,c,d,e){if(goog.isArray(b)){for(var f=0;f<b.length;f++)goog.events.unlisten(a,b[f],c,d,e);return null}d=!!d;a=goog.events.getListeners_(a,b,d);if(!a)return!1;for(f=0;f<a.length;f++)if(a[f].listener==c&&a[f].capture==d&&a[f].handler==e)return goog.events.unlistenByKey(a[f].key);return!1};
goog.events.unlistenByKey=function(a){if(!goog.events.listeners_[a])return!1;var b=goog.events.listeners_[a];if(b.removed)return!1;var c=b.src,d=b.type,e=b.proxy,f=b.capture;c.removeEventListener?c!=goog.global&&c.customEvent_||c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(goog.events.getOnString_(d),e);c=goog.getUid(c);e=goog.events.listenerTree_[d][f][c];if(goog.events.sources_[c]){var g=goog.events.sources_[c];goog.array.remove(g,b);0==g.length&&delete goog.events.sources_[c]}b.removed=
!0;e.needsCleanup_=!0;goog.events.cleanUp_(d,f,c,e);delete goog.events.listeners_[a];return!0};goog.events.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e)};
goog.events.cleanUp_=function(a,b,c,d){if(!d.locked_&&d.needsCleanup_){for(var e=0,f=0;e<d.length;e++)d[e].removed?d[e].proxy.src=null:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.needsCleanup_=!1;0==f&&(delete goog.events.listenerTree_[a][b][c],goog.events.listenerTree_[a][b].count_--,0==goog.events.listenerTree_[a][b].count_&&(delete goog.events.listenerTree_[a][b],goog.events.listenerTree_[a].count_--),0==goog.events.listenerTree_[a].count_&&delete goog.events.listenerTree_[a])}};
goog.events.removeAll=function(a,b,c){var d=0,e=null==b,f=null==c;c=!!c;if(null!=a){if(a=goog.getUid(a),goog.events.sources_[a]){a=goog.events.sources_[a];for(var g=a.length-1;0<=g;g--){var k=a[g];!e&&b!=k.type||!f&&c!=k.capture||(goog.events.unlistenByKey(k.key),d++)}}}else goog.object.forEach(goog.events.sources_,function(a){for(var g=a.length-1;0<=g;g--){var k=a[g];!e&&b!=k.type||!f&&c!=k.capture||(goog.events.unlistenByKey(k.key),d++)}});return d};
goog.events.getListeners=function(a,b,c){return goog.events.getListeners_(a,b,c)||[]};goog.events.getListeners_=function(a,b,c){var d=goog.events.listenerTree_;return b in d&&(d=d[b],c in d&&(d=d[c],a=goog.getUid(a),d[a]))?d[a]:null};goog.events.getListener=function(a,b,c,d,e){d=!!d;if(a=goog.events.getListeners_(a,b,d))for(b=0;b<a.length;b++)if(!a[b].removed&&a[b].listener==c&&a[b].capture==d&&a[b].handler==e)return a[b];return null};
goog.events.hasListener=function(a,b,c){a=goog.getUid(a);var d=goog.events.sources_[a];if(d){var e=goog.isDef(b),f=goog.isDef(c);return e&&f?(d=goog.events.listenerTree_[b],!!d&&!!d[c]&&a in d[c]):e||f?goog.array.some(d,function(a){return e&&a.type==b||f&&a.capture==c}):!0}return!1};goog.events.expose=function(a){var b=[],c;for(c in a)a[c]&&a[c].id?b.push(c+" = "+a[c]+" ("+a[c].id+")"):b.push(c+" = "+a[c]);return b.join("\n")};
goog.events.getOnString_=function(a){return a in goog.events.onStringMap_?goog.events.onStringMap_[a]:goog.events.onStringMap_[a]=goog.events.onString_+a};goog.events.fireListeners=function(a,b,c,d){var e=goog.events.listenerTree_;return b in e&&(e=e[b],c in e)?goog.events.fireListeners_(e[c],a,b,c,d):!0};
goog.events.fireListeners_=function(a,b,c,d,e){var f=1;b=goog.getUid(b);if(a[b]){a.remaining_--;a=a[b];a.locked_?a.locked_++:a.locked_=1;try{for(var g=a.length,k=0;k<g;k++){var h=a[k];h&&!h.removed&&(f&=!1!==goog.events.fireListener(h,e))}}finally{a.locked_--,goog.events.cleanUp_(c,d,b,a)}}return!!f};goog.events.fireListener=function(a,b){b=a.handleEvent(b);a.callOnce&&goog.events.unlistenByKey(a.key);return b};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};
goog.events.dispatchEvent=function(a,b){var c=b.type||b,d=goog.events.listenerTree_;if(!(c in d))return!0;if(goog.isString(b))b=new goog.events.Event(b,a);else if(b instanceof goog.events.Event)b.target=b.target||a;else{var e=b;b=new goog.events.Event(c,a);goog.object.extend(b,e)}e=1;d=d[c];c=!0 in d;var f;if(c){var g=[];for(f=a;f;f=f.getParentEventTarget())g.push(f);f=d[!0];f.remaining_=f.count_;for(var k=g.length-1;!b.propagationStopped_&&0<=k&&f.remaining_;k--)b.currentTarget=g[k],e&=goog.events.fireListeners_(f,
g[k],b.type,!0,b)&&0!=b.returnValue_}if(!1 in d)if(f=d[!1],f.remaining_=f.count_,c)for(k=0;!b.propagationStopped_&&k<g.length&&f.remaining_;k++)b.currentTarget=g[k],e&=goog.events.fireListeners_(f,g[k],b.type,!1,b)&&0!=b.returnValue_;else for(;!b.propagationStopped_&&a&&f.remaining_;a=a.getParentEventTarget())b.currentTarget=a,e&=goog.events.fireListeners_(f,a,b.type,!1,b)&&0!=b.returnValue_;return!!e};goog.events.protectBrowserEventEntryPoint=function(a){goog.events.handleBrowserEvent_=a.protectEntryPoint(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(a,b){if(!goog.events.listeners_[a])return!0;a=goog.events.listeners_[a];var c=a.type,d=goog.events.listenerTree_;if(!(c in d))return!0;d=d[c];if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var e=b||goog.getObjectByName("window.event");b=!0 in d;var f=!1 in d;if(b){if(goog.events.isMarkedIeEvent_(e))return!0;goog.events.markIeEvent_(e)}var g=new goog.events.BrowserEvent;g.init(e,this);e=!0;try{if(b){for(var k=[],h=g.currentTarget;h;h=h.parentNode)k.push(h);
var r=d[!0];r.remaining_=r.count_;for(var p=k.length-1;!g.propagationStopped_&&0<=p&&r.remaining_;p--)g.currentTarget=k[p],e&=goog.events.fireListeners_(r,k[p],c,!0,g);if(f)for(r=d[!1],r.remaining_=r.count_,p=0;!g.propagationStopped_&&p<k.length&&r.remaining_;p++)g.currentTarget=k[p],e&=goog.events.fireListeners_(r,k[p],c,!1,g)}else e=goog.events.fireListener(a,g)}finally{k&&(k.length=0),g.dispose()}return e}r=new goog.events.BrowserEvent(b,this);try{e=goog.events.fireListener(a,r)}finally{r.dispose()}return e};
goog.events.markIeEvent_=function(a){var b=!1;if(0==a.keyCode)try{a.keyCode=-1;return}catch(c){b=!0}if(b||void 0==a.returnValue)a.returnValue=!0};goog.events.isMarkedIeEvent_=function(a){return 0>a.keyCode||void 0!=a.returnValue};goog.events.uniqueIdCounter_=0;goog.events.getUniqueId=function(a){return a+"_"+goog.events.uniqueIdCounter_++};goog.debug.entryPointRegistry.register(function(a){goog.events.handleBrowserEvent_=a(goog.events.handleBrowserEvent_)});goog.events.EventTarget=function(){goog.Disposable.call(this)};
goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.EventTarget.prototype.customEvent_=!0;goog.events.EventTarget.prototype.parentEventTarget_=null;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};goog.events.EventTarget.prototype.setParentEventTarget=function(a){this.parentEventTarget_=a};goog.events.EventTarget.prototype.addEventListener=function(a,b,c,d){goog.events.listen(this,a,b,c,d)};
goog.events.EventTarget.prototype.removeEventListener=function(a,b,c,d){goog.events.unlisten(this,a,b,c,d)};goog.events.EventTarget.prototype.dispatchEvent=function(a){return goog.events.dispatchEvent(this,a)};goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);goog.events.removeAll(this);this.parentEventTarget_=null};
goog.Timer=function(a,b){goog.events.EventTarget.call(this);this.interval_=a||1;this.timerObject_=b||goog.Timer.defaultTimerObject;this.boundTick_=goog.bind(this.tick_,this);this.last_=goog.now()};goog.inherits(goog.Timer,goog.events.EventTarget);goog.Timer.MAX_TIMEOUT_=2147483647;goog.Timer.prototype.enabled=!1;goog.Timer.defaultTimerObject=goog.global.window;goog.Timer.intervalScale=.8;goog.Timer.prototype.timer_=null;goog.Timer.prototype.getInterval=function(){return this.interval_};
goog.Timer.prototype.setInterval=function(a){this.interval_=a;this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()};goog.Timer.prototype.tick_=function(){if(this.enabled){var a=goog.now()-this.last_;0<a&&a<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-a):(this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}};
goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)};goog.Timer.prototype.start=function(){this.enabled=!0;this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())};goog.Timer.prototype.stop=function(){this.enabled=!1;this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)};goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this);this.stop();delete this.timerObject_};
goog.Timer.TICK="tick";goog.Timer.callOnce=function(a,b,c){if(goog.isFunction(a))c&&(a=goog.bind(a,c));else if(a&&"function"==typeof a.handleEvent)a=goog.bind(a.handleEvent,a);else throw Error("Invalid listener argument");return b>goog.Timer.MAX_TIMEOUT_?-1:goog.Timer.defaultTimerObject.setTimeout(a,b||0)};goog.Timer.clear=function(a){goog.Timer.defaultTimerObject.clearTimeout(a)};goog.math.Box=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};
goog.math.Box.boundingBox=function(a){for(var b=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),c=1;c<arguments.length;c++){var d=arguments[c];b.top=Math.min(b.top,d.y);b.right=Math.max(b.right,d.x);b.bottom=Math.max(b.bottom,d.y);b.left=Math.min(b.left,d.x)}return b};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};
goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"});goog.math.Box.prototype.contains=function(a){return goog.math.Box.contains(this,a)};goog.math.Box.prototype.expand=function(a,b,c,d){goog.isObject(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=b,this.bottom+=c,this.left-=d);return this};
goog.math.Box.prototype.expandToInclude=function(a){this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom)};goog.math.Box.equals=function(a,b){return a==b?!0:a&&b?a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left:!1};
goog.math.Box.contains=function(a,b){return a&&b?b instanceof goog.math.Box?b.left>=a.left&&b.right<=a.right&&b.top>=a.top&&b.bottom<=a.bottom:b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom:!1};goog.math.Box.distance=function(a,b){return b.x>=a.left&&b.x<=a.right?b.y>=a.top&&b.y<=a.bottom?0:b.y<a.top?a.top-b.y:b.y-a.bottom:b.y>=a.top&&b.y<=a.bottom?b.x<a.left?a.left-b.x:b.x-a.right:goog.math.Coordinate.distance(b,new goog.math.Coordinate(b.x<a.left?a.left:a.right,b.y<a.top?a.top:a.bottom))};
goog.math.Box.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};goog.math.Box.intersectsWithPadding=function(a,b,c){return a.left<=b.right+c&&b.left<=a.right+c&&a.top<=b.bottom+c&&b.top<=a.bottom+c};goog.math.Rect=function(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};
goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)};goog.math.Rect.createFromBox=function(a){return new goog.math.Rect(a.left,a.top,a.right-a.left,a.bottom-a.top)};goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"});goog.math.Rect.equals=function(a,b){return a==b?!0:a&&b?a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height:!1};
goog.math.Rect.prototype.intersection=function(a){var b=Math.max(this.left,a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top);a=Math.min(this.top+this.height,a.top+a.height);if(d<=a)return this.left=b,this.top=d,this.width=c-b,this.height=a-d,!0}return!1};
goog.math.Rect.intersection=function(a,b){var c=Math.max(a.left,b.left),d=Math.min(a.left+a.width,b.left+b.width);if(c<=d){var e=Math.max(a.top,b.top);a=Math.min(a.top+a.height,b.top+b.height);if(e<=a)return new goog.math.Rect(c,e,d-c,a-e)}return null};goog.math.Rect.intersects=function(a,b){return a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height};goog.math.Rect.prototype.intersects=function(a){return goog.math.Rect.intersects(this,a)};
goog.math.Rect.difference=function(a,b){var c=goog.math.Rect.intersection(a,b);if(!c||!c.height||!c.width)return[a.clone()];c=[];var d=a.top,e=a.height,f=a.left+a.width,g=a.top+a.height,k=b.left+b.width,h=b.top+b.height;b.top>a.top&&(c.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top)),d=b.top,e-=b.top-a.top);h<g&&(c.push(new goog.math.Rect(a.left,h,a.width,g-h)),e=h-d);b.left>a.left&&c.push(new goog.math.Rect(a.left,d,b.left-a.left,e));k<f&&c.push(new goog.math.Rect(k,d,f-k,e));return c};
goog.math.Rect.prototype.difference=function(a){return goog.math.Rect.difference(this,a)};goog.math.Rect.prototype.boundingRect=function(a){var b=Math.max(this.left+this.width,a.left+a.width),c=Math.max(this.top+this.height,a.top+a.height);this.left=Math.min(this.left,a.left);this.top=Math.min(this.top,a.top);this.width=b-this.left;this.height=c-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b)return null;a=a.clone();a.boundingRect(b);return a};
goog.math.Rect.prototype.contains=function(a){return a instanceof goog.math.Rect?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.style={};
goog.style.setStyle=function(a,b,c){goog.isString(b)?goog.style.setStyle_(a,c,b):goog.object.forEach(b,goog.partial(goog.style.setStyle_,a))};goog.style.setStyle_=function(a,b,c){a.style[goog.string.toCamelCase(c)]=b};goog.style.getStyle=function(a,b){return a.style[goog.string.toCamelCase(b)]||""};
goog.style.getComputedStyle=function(a,b){var c=goog.dom.getOwnerDocument(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b):""};goog.style.getCascadedStyle=function(a,b){return a.currentStyle?a.currentStyle[b]:null};goog.style.getStyle_=function(a,b){return goog.style.getComputedStyle(a,b)||goog.style.getCascadedStyle(a,b)||a.style[b]};goog.style.getComputedPosition=function(a){return goog.style.getStyle_(a,"position")};
goog.style.getBackgroundColor=function(a){return goog.style.getStyle_(a,"backgroundColor")};goog.style.getComputedOverflowX=function(a){return goog.style.getStyle_(a,"overflowX")};goog.style.getComputedOverflowY=function(a){return goog.style.getStyle_(a,"overflowY")};goog.style.getComputedZIndex=function(a){return goog.style.getStyle_(a,"zIndex")};goog.style.getComputedTextAlign=function(a){return goog.style.getStyle_(a,"textAlign")};
goog.style.getComputedCursor=function(a){return goog.style.getStyle_(a,"cursor")};goog.style.setPosition=function(a,b,c){var d=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersion("1.9");if(b instanceof goog.math.Coordinate){var e=b.x;b=b.y}else e=b,b=c;a.style.left=goog.style.getPixelStyleValue_(e,d);a.style.top=goog.style.getPixelStyleValue_(b,d)};goog.style.getPosition=function(a){return new goog.math.Coordinate(a.offsetLeft,a.offsetTop)};
goog.style.getClientViewportElement=function(a){a=a?a.nodeType==goog.dom.NodeType.DOCUMENT?a:goog.dom.getOwnerDocument(a):goog.dom.getDocument();return!goog.userAgent.IE||goog.userAgent.isDocumentMode(9)||goog.dom.getDomHelper(a).isCss1CompatMode()?a.documentElement:a.body};goog.style.getBoundingClientRect_=function(a){var b=a.getBoundingClientRect();goog.userAgent.IE&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b};
goog.style.getOffsetParent=function(a){if(goog.userAgent.IE)return a.offsetParent;var b=goog.dom.getOwnerDocument(a),c=goog.style.getStyle_(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=goog.style.getStyle_(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null};
goog.style.getVisibleRectForElement=function(a){for(var b=new goog.math.Box(0,Infinity,Infinity,0),c=goog.dom.getDomHelper(a),d=c.getDocument().body,e=c.getDocument().documentElement,f=c.getDocumentScrollElement();a=goog.style.getOffsetParent(a);)if(!(goog.userAgent.IE&&0==a.clientWidth||goog.userAgent.WEBKIT&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=goog.style.getStyle_(a,"overflow")){var g=goog.style.getPageOffset(a),k=goog.style.getClientLeftTop(a);g.x+=k.x;g.y+=k.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=c.getViewportSize();b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null};
goog.style.scrollIntoContainerView=function(a,b,c){var d=goog.style.getPageOffset(a),e=goog.style.getPageOffset(b),f=goog.style.getBorderBox(b),g=d.x-e.x-f.left;d=d.y-e.y-f.top;e=b.clientWidth-a.offsetWidth;a=b.clientHeight-a.offsetHeight;c?(b.scrollLeft+=g-e/2,b.scrollTop+=d-a/2):(b.scrollLeft+=Math.min(g,Math.max(g-e,0)),b.scrollTop+=Math.min(d,Math.max(d-a,0)))};
goog.style.getClientLeftTop=function(a){if(goog.userAgent.GECKO&&!goog.userAgent.isVersion("1.9")){var b=parseFloat(goog.style.getComputedStyle(a,"borderLeftWidth"));if(goog.style.isRightToLeft(a)){var c=a.offsetWidth-a.clientWidth-b-parseFloat(goog.style.getComputedStyle(a,"borderRightWidth"));b+=c}return new goog.math.Coordinate(b,parseFloat(goog.style.getComputedStyle(a,"borderTopWidth")))}return new goog.math.Coordinate(a.clientLeft,a.clientTop)};
goog.style.getPageOffset=function(a){var b,c=goog.dom.getOwnerDocument(a),d=goog.style.getStyle_(a,"position"),e=goog.userAgent.GECKO&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new goog.math.Coordinate(0,0),g=goog.style.getClientViewportElement(c);if(a==g)return f;if(a.getBoundingClientRect)b=goog.style.getBoundingClientRect_(a),a=goog.dom.getDomHelper(c).getDocumentScroll(),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&
!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(goog.userAgent.WEBKIT&&"fixed"==goog.style.getComputedPosition(b)){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=goog.style.getOffsetParent(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,
goog.userAgent.OPERA&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f};goog.style.getPageOffsetLeft=function(a){return goog.style.getPageOffset(a).x};goog.style.getPageOffsetTop=function(a){return goog.style.getPageOffset(a).y};goog.style.getFramedPageOffset=function(a,b){var c=new goog.math.Coordinate(0,0),d=goog.dom.getWindow(goog.dom.getOwnerDocument(a));do{var e=d==b?goog.style.getPageOffset(a):goog.style.getClientPosition(a);c.x+=e.x;c.y+=e.y}while(d&&d!=b&&(a=d.frameElement)&&(d=d.parent));return c};
goog.style.translateRectForAnotherFrame=function(a,b,c){if(b.getDocument()!=c.getDocument()){var d=b.getDocument().body;c=goog.style.getFramedPageOffset(d,c.getWindow());c=goog.math.Coordinate.difference(c,goog.style.getPageOffset(d));goog.userAgent.IE&&!b.isCss1CompatMode()&&(c=goog.math.Coordinate.difference(c,b.getDocumentScroll()));a.left+=c.x;a.top+=c.y}};
goog.style.getRelativePosition=function(a,b){a=goog.style.getClientPosition(a);b=goog.style.getClientPosition(b);return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};
goog.style.getClientPosition=function(a){var b=new goog.math.Coordinate;if(a.nodeType==goog.dom.NodeType.ELEMENT)if(a.getBoundingClientRect)a=goog.style.getBoundingClientRect_(a),b.x=a.left,b.y=a.top;else{var c=goog.dom.getDomHelper(a).getDocumentScroll();a=goog.style.getPageOffset(a);b.x=a.x-c.x;b.y=a.y-c.y}else{c=goog.isFunction(a.getBrowserEvent);var d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.getBrowserEvent().targetTouches&&(d=a.getBrowserEvent().targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b};
goog.style.setPageOffset=function(a,b,c){var d=goog.style.getPageOffset(a);b instanceof goog.math.Coordinate&&(c=b.y,b=b.x);goog.style.setPosition(a,a.offsetLeft+(b-d.x),a.offsetTop+(c-d.y))};goog.style.setSize=function(a,b,c){if(b instanceof goog.math.Size)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");goog.style.setWidth(a,b);goog.style.setHeight(a,c)};goog.style.getPixelStyleValue_=function(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a};
goog.style.setHeight=function(a,b){a.style.height=goog.style.getPixelStyleValue_(b,!0)};goog.style.setWidth=function(a,b){a.style.width=goog.style.getPixelStyleValue_(b,!0)};goog.style.getSize=function(a){if("none"!=goog.style.getStyle_(a,"display"))return goog.style.getSizeWithDisplay_(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=goog.style.getSizeWithDisplay_(a);b.display=c;b.position=e;b.visibility=d;return a};
goog.style.getSizeWithDisplay_=function(a){var b=a.offsetWidth,c=a.offsetHeight,d=goog.userAgent.WEBKIT&&!b&&!c;return goog.isDef(b)&&!d||!a.getBoundingClientRect?new goog.math.Size(b,c):(a=goog.style.getBoundingClientRect_(a),new goog.math.Size(a.right-a.left,a.bottom-a.top))};goog.style.getBounds=function(a){var b=goog.style.getPageOffset(a);a=goog.style.getSize(a);return new goog.math.Rect(b.x,b.y,a.width,a.height)};goog.style.toCamelCase=function(a){return goog.string.toCamelCase(String(a))};
goog.style.toSelectorCase=function(a){return goog.string.toSelectorCase(a)};goog.style.getOpacity=function(a){var b=a.style;a="";"opacity"in b?a=b.opacity:"MozOpacity"in b?a=b.MozOpacity:"filter"in b&&(b=b.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(a=String(b[1]/100));return""==a?a:Number(a)};goog.style.setOpacity=function(a,b){a=a.style;"opacity"in a?a.opacity=b:"MozOpacity"in a?a.MozOpacity=b:"filter"in a&&(a.filter=""===b?"":"alpha(opacity="+100*b+")")};
goog.style.setTransparentBackgroundImage=function(a,b){a=a.style;goog.userAgent.IE&&!goog.userAgent.isVersion("8")?a.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="crop")':(a.backgroundImage="url("+b+")",a.backgroundPosition="top left",a.backgroundRepeat="no-repeat")};goog.style.clearTransparentBackgroundImage=function(a){a=a.style;"filter"in a?a.filter="":a.backgroundImage="none"};goog.style.showElement=function(a,b){a.style.display=b?"":"none"};
goog.style.isElementShown=function(a){return"none"!=a.style.display};goog.style.installStyles=function(a,b){b=goog.dom.getDomHelper(b);if(goog.userAgent.IE){var c=b.getDocument().createStyleSheet();goog.style.setStyles(c,a)}else{var d=b.getElementsByTagNameAndClass("head")[0];d||(c=b.getElementsByTagNameAndClass("body")[0],d=b.createDom("head"),c.parentNode.insertBefore(d,c));c=b.createDom("style");goog.style.setStyles(c,a);b.appendChild(d,c)}return c};
goog.style.uninstallStyles=function(a){goog.dom.removeNode(a.ownerNode||a.owningElement||a)};goog.style.setStyles=function(a,b){goog.userAgent.IE?a.cssText=b:a[goog.userAgent.WEBKIT?"innerText":"innerHTML"]=b};goog.style.setPreWrap=function(a){a=a.style;goog.userAgent.IE&&!goog.userAgent.isVersion("8")?(a.whiteSpace="pre",a.wordWrap="break-word"):a.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"};
goog.style.setInlineBlock=function(a){a=a.style;a.position="relative";goog.userAgent.IE&&!goog.userAgent.isVersion("8")?(a.zoom="1",a.display="inline"):a.display=goog.userAgent.GECKO?goog.userAgent.isVersion("1.9a")?"inline-block":"-moz-inline-box":"inline-block"};goog.style.isRightToLeft=function(a){return"rtl"==goog.style.getStyle_(a,"direction")};goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;
goog.style.isUnselectable=function(a){return goog.style.unselectableStyle_?"none"==a.style[goog.style.unselectableStyle_].toLowerCase():goog.userAgent.IE||goog.userAgent.OPERA?"on"==a.getAttribute("unselectable"):!1};
goog.style.setUnselectable=function(a,b,c){c=c?null:a.getElementsByTagName("*");var d=goog.style.unselectableStyle_;if(d){if(b=b?"none":"",a.style[d]=b,c){a=0;for(var e;e=c[a];a++)e.style[d]=b}}else if(goog.userAgent.IE||goog.userAgent.OPERA)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;e=c[a];a++)e.setAttribute("unselectable",b)};goog.style.getBorderBoxSize=function(a){return new goog.math.Size(a.offsetWidth,a.offsetHeight)};
goog.style.setBorderBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();!goog.userAgent.IE||d&&goog.userAgent.isVersion("8")?goog.style.setBoxSizingSize_(a,b,"border-box"):(c=a.style,d?(d=goog.style.getPaddingBox(a),a=goog.style.getBorderBox(a),c.pixelWidth=b.width-a.left-d.left-d.right-a.right,c.pixelHeight=b.height-a.top-d.top-d.bottom-a.bottom):(c.pixelWidth=b.width,c.pixelHeight=b.height))};
goog.style.getContentBoxSize=function(a){var b=goog.dom.getOwnerDocument(a),c=goog.userAgent.IE&&a.currentStyle;if(c&&goog.dom.getDomHelper(b).isCss1CompatMode()&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=goog.style.getIePixelValue_(a,c.width,"width","pixelWidth"),a=goog.style.getIePixelValue_(a,c.height,"height","pixelHeight"),new goog.math.Size(b,a);c=goog.style.getBorderBoxSize(a);b=goog.style.getPaddingBox(a);a=goog.style.getBorderBox(a);return new goog.math.Size(c.width-a.left-
b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)};
goog.style.setContentBoxSize=function(a,b){var c=goog.dom.getOwnerDocument(a),d=goog.dom.getDomHelper(c).isCss1CompatMode();!goog.userAgent.IE||d&&goog.userAgent.isVersion("8")?goog.style.setBoxSizingSize_(a,b,"content-box"):(c=a.style,d?(c.pixelWidth=b.width,c.pixelHeight=b.height):(d=goog.style.getPaddingBox(a),a=goog.style.getBorderBox(a),c.pixelWidth=b.width+a.left+d.left+d.right+a.right,c.pixelHeight=b.height+a.top+d.top+d.bottom+a.bottom))};
goog.style.setBoxSizingSize_=function(a,b,c){a=a.style;goog.userAgent.GECKO?a.MozBoxSizing=c:goog.userAgent.WEBKIT?a.WebkitBoxSizing=c:a.boxSizing=c;a.width=b.width+"px";a.height=b.height+"px"};goog.style.getIePixelValue_=function(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return b};
goog.style.getIePixelDistance_=function(a,b){return goog.style.getIePixelValue_(a,goog.style.getCascadedStyle(a,b),"left","pixelLeft")};
goog.style.getBox_=function(a,b){if(goog.userAgent.IE){var c=goog.style.getIePixelDistance_(a,b+"Left"),d=goog.style.getIePixelDistance_(a,b+"Right"),e=goog.style.getIePixelDistance_(a,b+"Top");a=goog.style.getIePixelDistance_(a,b+"Bottom");return new goog.math.Box(e,d,a,c)}c=goog.style.getComputedStyle(a,b+"Left");d=goog.style.getComputedStyle(a,b+"Right");e=goog.style.getComputedStyle(a,b+"Top");a=goog.style.getComputedStyle(a,b+"Bottom");return new goog.math.Box(parseFloat(e),parseFloat(d),parseFloat(a),
parseFloat(c))};goog.style.getPaddingBox=function(a){return goog.style.getBox_(a,"padding")};goog.style.getMarginBox=function(a){return goog.style.getBox_(a,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};goog.style.getIePixelBorder_=function(a,b){if("none"==goog.style.getCascadedStyle(a,b+"Style"))return 0;b=goog.style.getCascadedStyle(a,b+"Width");return b in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[b]:goog.style.getIePixelValue_(a,b,"left","pixelLeft")};
goog.style.getBorderBox=function(a){if(goog.userAgent.IE){var b=goog.style.getIePixelBorder_(a,"borderLeft"),c=goog.style.getIePixelBorder_(a,"borderRight"),d=goog.style.getIePixelBorder_(a,"borderTop");a=goog.style.getIePixelBorder_(a,"borderBottom");return new goog.math.Box(d,c,a,b)}b=goog.style.getComputedStyle(a,"borderLeftWidth");c=goog.style.getComputedStyle(a,"borderRightWidth");d=goog.style.getComputedStyle(a,"borderTopWidth");a=goog.style.getComputedStyle(a,"borderBottomWidth");return new goog.math.Box(parseFloat(d),
parseFloat(c),parseFloat(a),parseFloat(b))};goog.style.getFontFamily=function(a){var b=goog.dom.getOwnerDocument(a),c="";if(b.body.createTextRange){b=b.body.createTextRange();b.moveToElementText(a);try{c=b.queryCommandValue("FontName")}catch(d){c=""}}c||(c=goog.style.getStyle_(a,"fontFamily"));a=c.split(",");1<a.length&&(c=a[0]);return goog.string.stripQuotes(c,"\"'")};goog.style.lengthUnitRegex_=/[^\d]+$/;
goog.style.getLengthUnits=function(a){return(a=a.match(goog.style.lengthUnitRegex_))&&a[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(a){var b=goog.style.getStyle_(a,"fontSize"),c=goog.style.getLengthUnits(b);if(b&&"px"==c)return parseInt(b,10);if(goog.userAgent.IE){if(c in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(a,b,"left","pixelLeft");if(a.parentNode&&a.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&c in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return a=a.parentNode,c=goog.style.getStyle_(a,"fontSize"),goog.style.getIePixelValue_(a,b==c?"1em":b,"left","pixelLeft")}c=
goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(a,c);b=c.offsetHeight;goog.dom.removeNode(c);return b};goog.style.parseStyleAttribute=function(a){var b={};goog.array.forEach(a.split(/\s*;\s*/),function(a){a=a.split(/\s*:\s*/);2==a.length&&(b[goog.string.toCamelCase(a[0].toLowerCase())]=a[1])});return b};
goog.style.toStyleAttribute=function(a){var b=[];goog.object.forEach(a,function(a,d){b.push(goog.string.toSelectorCase(d),":",a,";")});return b.join("")};goog.style.setFloat=function(a,b){a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=b};goog.style.getFloat=function(a){return a.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(a){var b=goog.dom.createElement("div");a&&(b.className=a);b.style.cssText="visiblity:hidden;overflow:auto;position:absolute;top:0;width:100px;height:100px";a=goog.dom.createElement("div");goog.style.setSize(a,"200px","200px");b.appendChild(a);goog.dom.appendChild(goog.dom.getDocument().body,b);a=b.offsetWidth-b.clientWidth;goog.dom.removeNode(b);return a};goog.positioning={};
goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:2,BOTTOM_LEFT:1,BOTTOM_RIGHT:3,TOP_START:4,TOP_END:6,BOTTOM_START:5,BOTTOM_END:7};goog.positioning.CornerBit={BOTTOM:1,RIGHT:2,FLIP_RTL:4};goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132};
goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256};goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT;
goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT;goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM;
goog.positioning.positionAtAnchor=function(a,b,c,d,e,f,g,k){var h=c.offsetParent;if(h){var r="HTML"==h.tagName||"BODY"==h.tagName;if(!r||"static"!=goog.style.getComputedPosition(h)){var p=goog.style.getPageOffset(h);r||(p=goog.math.Coordinate.difference(p,new goog.math.Coordinate(h.scrollLeft,h.scrollTop)))}}h=goog.positioning.getVisiblePart_(a);goog.style.translateRectForAnotherFrame(h,goog.dom.getDomHelper(a),goog.dom.getDomHelper(c));a=goog.positioning.getEffectiveCorner(a,b);b=new goog.math.Coordinate(a&
goog.positioning.CornerBit.RIGHT?h.left+h.width:h.left,a&goog.positioning.CornerBit.BOTTOM?h.top+h.height:h.top);p&&(b=goog.math.Coordinate.difference(b,p));e&&(b.x+=(a&goog.positioning.CornerBit.RIGHT?-1:1)*e.x,b.y+=(a&goog.positioning.CornerBit.BOTTOM?-1:1)*e.y);var v;g&&(v=goog.style.getVisibleRectForElement(c))&&p&&(v.top-=p.y,v.right-=p.x,v.bottom-=p.y,v.left-=p.x);return goog.positioning.positionAtCoordinate(b,c,d,f,v,g,k)};
goog.positioning.getVisiblePart_=function(a){var b=goog.style.getBounds(a);(a=goog.style.getVisibleRectForElement(a))&&b.intersection(goog.math.Rect.createFromBox(a));return b};
goog.positioning.positionAtCoordinate=function(a,b,c,d,e,f,g){a=a.clone();var k=goog.positioning.OverflowStatus.NONE;c=goog.positioning.getEffectiveCorner(b,c);var h=goog.style.getSize(b);g=g?g.clone():h.clone();if(d||c!=goog.positioning.Corner.TOP_LEFT)c&goog.positioning.CornerBit.RIGHT?a.x-=g.width+(d?d.right:0):d&&(a.x+=d.left),c&goog.positioning.CornerBit.BOTTOM?a.y-=g.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f&&(k=e?goog.positioning.adjustForViewport_(a,g,e,f):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,
k&goog.positioning.OverflowStatus.FAILED))return k;goog.style.setPosition(b,a);goog.math.Size.equals(h,g)||goog.style.setBorderBoxSize(b,g);return k};
goog.positioning.adjustForViewport_=function(a,b,c,d){var e=goog.positioning.OverflowStatus.NONE,f=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,g=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;(d&f)==f&&(a.x<c.left||a.x>=c.right)&&(d&=~goog.positioning.Overflow.ADJUST_X);(d&g)==g&&(a.y<c.top||a.y>=c.bottom)&&(d&=~goog.positioning.Overflow.ADJUST_Y);a.x<c.left&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=c.left,e|=goog.positioning.OverflowStatus.ADJUSTED_X);a.x<c.left&&a.x+b.width>c.right&&
d&goog.positioning.Overflow.RESIZE_WIDTH&&(b.width-=a.x+b.width-c.right,e|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED);a.x+b.width>c.right&&d&goog.positioning.Overflow.ADJUST_X&&(a.x=Math.max(c.right-b.width,c.left),e|=goog.positioning.OverflowStatus.ADJUSTED_X);d&goog.positioning.Overflow.FAIL_X&&(e|=(a.x<c.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(a.x+b.width>c.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0));a.y<c.top&&d&goog.positioning.Overflow.ADJUST_Y&&(a.y=c.top,e|=goog.positioning.OverflowStatus.ADJUSTED_Y);
a.y>=c.top&&a.y+b.height>c.bottom&&d&goog.positioning.Overflow.RESIZE_HEIGHT&&(b.height-=a.y+b.height-c.bottom,e|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED);a.y+b.height>c.bottom&&d&goog.positioning.Overflow.ADJUST_Y&&(a.y=Math.max(c.bottom-b.height,c.top),e|=goog.positioning.OverflowStatus.ADJUSTED_Y);d&goog.positioning.Overflow.FAIL_Y&&(e|=(a.y<c.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(a.y+b.height>c.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0));return e};
goog.positioning.getEffectiveCorner=function(a,b){return(b&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(a)?b^goog.positioning.CornerBit.RIGHT:b)&~goog.positioning.CornerBit.FLIP_RTL};goog.positioning.flipCornerHorizontal=function(a){return a^goog.positioning.CornerBit.RIGHT};goog.positioning.flipCornerVertical=function(a){return a^goog.positioning.CornerBit.BOTTOM};goog.positioning.flipCorner=function(a){return a^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT};
goog.positioning.AbstractPosition=function(){};goog.positioning.AbstractPosition.prototype.reposition=function(a,b,c,d){};goog.positioning.AnchoredPosition=function(a,b){this.element=a;this.corner=b};goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition);goog.positioning.AnchoredPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(this.element,this.corner,a,b,void 0,c)};
goog.positioning.ViewportPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition);goog.positioning.ViewportPosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(a),goog.positioning.Corner.TOP_LEFT,a,b,this.coordinate,c,null,d)};goog.structs={};
goog.structs.getCount=function(a){return"function"==typeof a.getCount?a.getCount():goog.isArrayLike(a)||goog.isString(a)?a.length:goog.object.getCount(a)};goog.structs.getValues=function(a){if("function"==typeof a.getValues)return a.getValues();if(goog.isString(a))return a.split("");if(goog.isArrayLike(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return goog.object.getValues(a)};
goog.structs.getKeys=function(a){if("function"==typeof a.getKeys)return a.getKeys();if("function"!=typeof a.getValues){if(goog.isArrayLike(a)||goog.isString(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return goog.object.getKeys(a)}};goog.structs.contains=function(a,b){return"function"==typeof a.contains?a.contains(b):"function"==typeof a.containsValue?a.containsValue(b):goog.isArrayLike(a)||goog.isString(a)?goog.array.contains(a,b):goog.object.containsValue(a,b)};
goog.structs.isEmpty=function(a){return"function"==typeof a.isEmpty?a.isEmpty():goog.isArrayLike(a)||goog.isString(a)?goog.array.isEmpty(a):goog.object.isEmpty(a)};goog.structs.clear=function(a){"function"==typeof a.clear?a.clear():goog.isArrayLike(a)?goog.array.clear(a):goog.object.clear(a)};
goog.structs.forEach=function(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(goog.isArrayLike(a)||goog.isString(a))goog.array.forEach(a,b,c);else for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)};
goog.structs.filter=function(a,b,c){if("function"==typeof a.filter)return a.filter(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.filter(a,b,c);var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length;if(d){var g={};for(var k=0;k<f;k++)b.call(c,e[k],d[k],a)&&(g[d[k]]=e[k])}else for(g=[],k=0;k<f;k++)b.call(c,e[k],void 0,a)&&g.push(e[k]);return g};
goog.structs.map=function(a,b,c){if("function"==typeof a.map)return a.map(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.map(a,b,c);var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length;if(d){var g={};for(var k=0;k<f;k++)g[d[k]]=b.call(c,e[k],d[k],a)}else for(g=[],k=0;k<f;k++)g[k]=b.call(c,e[k],void 0,a);return g};
goog.structs.some=function(a,b,c){if("function"==typeof a.some)return a.some(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.some(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(b.call(c,e[g],d&&d[g],a))return!0;return!1};
goog.structs.every=function(a,b,c){if("function"==typeof a.every)return a.every(b,c);if(goog.isArrayLike(a)||goog.isString(a))return goog.array.every(a,b,c);for(var d=goog.structs.getKeys(a),e=goog.structs.getValues(a),f=e.length,g=0;g<f;g++)if(!b.call(c,e[g],d&&d[g],a))return!1;return!0};goog.structs.Collection=function(){};goog.iter={};goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:Error("StopIteration");goog.iter.Iterator=function(){};
goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(a){return this};goog.iter.toIterator=function(a){if(a instanceof goog.iter.Iterator)return a;if("function"==typeof a.__iterator__)return a.__iterator__(!1);if(goog.isArrayLike(a)){var b=0,c=new goog.iter.Iterator;c.next=function(){for(;;){if(b>=a.length)throw goog.iter.StopIteration;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");};
goog.iter.forEach=function(a,b,c){if(goog.isArrayLike(a))try{goog.array.forEach(a,b,c)}catch(d){if(d!==goog.iter.StopIteration)throw d;}else{a=goog.iter.toIterator(a);try{for(;;)b.call(c,a.next(),void 0,a)}catch(d){if(d!==goog.iter.StopIteration)throw d;}}};goog.iter.filter=function(a,b,c){a=goog.iter.toIterator(a);var d=new goog.iter.Iterator;d.next=function(){for(;;){var d=a.next();if(b.call(c,d,void 0,a))return d}};return d};
goog.iter.range=function(a,b,c){var d=0,e=a,f=c||1;1<arguments.length&&(d=a,e=b);if(0==f)throw Error("Range step argument must not be zero");var g=new goog.iter.Iterator;g.next=function(){if(0<f&&d>=e||0>f&&d<=e)throw goog.iter.StopIteration;var a=d;d+=f;return a};return g};goog.iter.join=function(a,b){return goog.iter.toArray(a).join(b)};goog.iter.map=function(a,b,c){a=goog.iter.toIterator(a);var d=new goog.iter.Iterator;d.next=function(){for(;;){var d=a.next();return b.call(c,d,void 0,a)}};return d};
goog.iter.reduce=function(a,b,c,d){var e=c;goog.iter.forEach(a,function(a){e=b.call(d,e,a)});return e};goog.iter.some=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(b.call(c,a.next(),void 0,a))return!0}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!1};goog.iter.every=function(a,b,c){a=goog.iter.toIterator(a);try{for(;;)if(!b.call(c,a.next(),void 0,a))return!1}catch(d){if(d!==goog.iter.StopIteration)throw d;}return!0};
goog.iter.chain=function(a){var b=arguments,c=b.length,d=0,e=new goog.iter.Iterator;e.next=function(){try{if(d>=c)throw goog.iter.StopIteration;return goog.iter.toIterator(b[d]).next()}catch(f){if(f!==goog.iter.StopIteration||d>=c)throw f;d++;return this.next()}};return e};goog.iter.dropWhile=function(a,b,c){a=goog.iter.toIterator(a);var d=new goog.iter.Iterator,e=!0;d.next=function(){for(;;){var d=a.next();if(!e||!b.call(c,d,void 0,a))return e=!1,d}};return d};
goog.iter.takeWhile=function(a,b,c){a=goog.iter.toIterator(a);var d=new goog.iter.Iterator,e=!0;d.next=function(){for(;;)if(e){var d=a.next();if(b.call(c,d,void 0,a))return d;e=!1}else throw goog.iter.StopIteration;};return d};goog.iter.toArray=function(a){if(goog.isArrayLike(a))return goog.array.toArray(a);a=goog.iter.toIterator(a);var b=[];goog.iter.forEach(a,function(a){b.push(a)});return b};
goog.iter.equals=function(a,b){a=goog.iter.toIterator(a);b=goog.iter.toIterator(b);var c;try{for(;;){var d=c=!1;var e=a.next();d=!0;var f=b.next();c=!0;if(e!=f)break}}catch(g){if(g!==goog.iter.StopIteration)throw g;if(d&&!c)return!1;if(!c)try{b.next()}catch(k){if(k!==goog.iter.StopIteration)throw k;return!0}}return!1};goog.iter.nextOrValue=function(a,b){try{return goog.iter.toIterator(a).next()}catch(c){if(c!=goog.iter.StopIteration)throw c;return b}};
goog.iter.product=function(a){if(goog.array.some(arguments,function(a){return!a.length})||!arguments.length)return new goog.iter.Iterator;var b=new goog.iter.Iterator,c=arguments,d=goog.array.repeat(0,c.length);b.next=function(){if(d){for(var a=goog.array.map(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){goog.asserts.assert(d);if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw goog.iter.StopIteration;};return b};
goog.iter.cycle=function(a){var b=goog.iter.toIterator(a),c=[],d=0;a=new goog.iter.Iterator;var e=!1;a.next=function(){var a=null;if(!e)try{return a=b.next(),c.push(a),a}catch(g){if(g!=goog.iter.StopIteration||goog.array.isEmpty(c))throw g;e=!0}a=c[d];d=(d+1)%c.length;return a};return a};goog.structs.Map=function(a,b){this.map_={};this.keys_=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)};
goog.structs.Map.prototype.count_=0;goog.structs.Map.prototype.version_=0;goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++)a.push(this.map_[this.keys_[b]]);return a};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(a){return goog.structs.Map.hasKey_(this.map_,a)};
goog.structs.Map.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(goog.structs.Map.hasKey_(this.map_,c)&&this.map_[c]==a)return!0}return!1};goog.structs.Map.prototype.equals=function(a,b){if(this===a)return!0;if(this.count_!=a.getCount())return!1;b=b||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var c,d=0;c=this.keys_[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};goog.structs.Map.defaultEquals=function(a,b){return a===b};
goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_};goog.structs.Map.prototype.clear=function(){this.map_={};this.version_=this.count_=this.keys_.length=0};goog.structs.Map.prototype.remove=function(a){return goog.structs.Map.hasKey_(this.map_,a)?(delete this.map_[a],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];goog.structs.Map.hasKey_(this.map_,c)&&(this.keys_[b++]=c);a++}this.keys_.length=b}if(this.count_!=this.keys_.length){var d={};for(b=a=0;a<this.keys_.length;)c=this.keys_[a],goog.structs.Map.hasKey_(d,c)||(this.keys_[b++]=c,d[c]=1),a++;this.keys_.length=b}};
goog.structs.Map.prototype.get=function(a,b){return goog.structs.Map.hasKey_(this.map_,a)?this.map_[a]:b};goog.structs.Map.prototype.set=function(a,b){goog.structs.Map.hasKey_(this.map_,a)||(this.count_++,this.keys_.push(a),this.version_++);this.map_[a]=b};goog.structs.Map.prototype.addAll=function(a){if(a instanceof goog.structs.Map){var b=a.getKeys();a=a.getValues()}else b=goog.object.getKeys(a),a=goog.object.getValues(a);for(var c=0;c<b.length;c++)this.set(b[c],a[c])};
goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};goog.structs.Map.prototype.transpose=function(){for(var a=new goog.structs.Map,b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.set(this.map_[c],c)}return a};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var a={},b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)};
goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)};goog.structs.Map.prototype.__iterator__=function(a){this.cleanupKeysArray_();var b=0,c=this.keys_,d=this.map_,e=this.version_,f=this,g=new goog.iter.Iterator;g.next=function(){for(;;){if(e!=f.version_)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw goog.iter.StopIteration;var g=c[b++];return a?g:d[g]}};return g};
goog.structs.Map.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};goog.structs.Set=function(a){this.map_=new goog.structs.Map;a&&this.addAll(a)};goog.structs.Set.getKey_=function(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+goog.getUid(a):b.substr(0,1)+a};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};goog.structs.Set.prototype.add=function(a){this.map_.set(goog.structs.Set.getKey_(a),a)};
goog.structs.Set.prototype.addAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};goog.structs.Set.prototype.removeAll=function(a){a=goog.structs.getValues(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};goog.structs.Set.prototype.remove=function(a){return this.map_.remove(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};
goog.structs.Set.prototype.contains=function(a){return this.map_.containsKey(goog.structs.Set.getKey_(a))};goog.structs.Set.prototype.containsAll=function(a){return goog.structs.every(a,this.contains,this)};goog.structs.Set.prototype.intersection=function(a){var b=new goog.structs.Set;a=goog.structs.getValues(a);for(var c=0;c<a.length;c++){var d=a[c];this.contains(d)&&b.add(d)}return b};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};
goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(a){return this.getCount()==goog.structs.getCount(a)&&this.isSubsetOf(a)};goog.structs.Set.prototype.isSubsetOf=function(a){var b=goog.structs.getCount(a);if(this.getCount()>b)return!1;!(a instanceof goog.structs.Set)&&5<b&&(a=new goog.structs.Set(a));return goog.structs.every(this,function(b){return goog.structs.contains(a,b)})};goog.structs.Set.prototype.__iterator__=function(a){return this.map_.__iterator__(!1)};
goog.positioning.AbsolutePosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.AbsolutePosition,goog.positioning.AbstractPosition);goog.positioning.AbsolutePosition.prototype.reposition=function(a,b,c,d){goog.positioning.positionAtCoordinate(this.coordinate,a,b,c,null,null,d)};goog.functions={};goog.functions.constant=function(a){return function(){return a}};goog.functions.FALSE=goog.functions.constant(!1);
goog.functions.TRUE=goog.functions.constant(!0);goog.functions.NULL=goog.functions.constant(null);goog.functions.identity=function(a,b){return a};goog.functions.error=function(a){return function(){throw Error(a);}};goog.functions.lock=function(a){return function(){return a.call(this)}};goog.functions.withReturnValue=function(a,b){return goog.functions.sequence(a,goog.functions.constant(b))};
goog.functions.compose=function(a){var b=arguments,c=b.length;return function(){var a;c&&(a=b[c-1].apply(this,arguments));for(var e=c-2;0<=e;e--)a=b[e].call(this,a);return a}};goog.functions.sequence=function(a){var b=arguments,c=b.length;return function(){for(var a,e=0;e<c;e++)a=b[e].apply(this,arguments);return a}};goog.functions.and=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};
goog.functions.or=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(b[a].apply(this,arguments))return!0;return!1}};goog.functions.not=function(a){return function(){return!a.apply(this,arguments)}};goog.functions.create=function(a,b){var c=function(){};c.prototype=a.prototype;c=new c;a.apply(c,Array.prototype.slice.call(arguments,1));return c};goog.positioning.AnchoredViewportPosition=function(a,b,c){goog.positioning.AnchoredPosition.call(this,a,b);this.adjust_=c};
goog.inherits(goog.positioning.AnchoredViewportPosition,goog.positioning.AnchoredPosition);goog.positioning.AnchoredViewportPosition.prototype.getLastResortOverflow=function(){return goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y};
goog.positioning.AnchoredViewportPosition.prototype.reposition=function(a,b,c,d){var e=goog.positioning.positionAtAnchor(this.element,this.corner,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d);if(e&goog.positioning.OverflowStatus.FAILED){var f=this.correctCorner_(e,this.corner);b=this.correctCorner_(e,b);e=goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,d);e&goog.positioning.OverflowStatus.FAILED&&
(f=this.correctCorner_(e,f),b=this.correctCorner_(e,b),this.adjust_?goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,this.getLastResortOverflow(),d):goog.positioning.positionAtAnchor(this.element,f,a,b,null,c,goog.positioning.Overflow.IGNORE,d))}};
goog.positioning.AnchoredViewportPosition.prototype.correctCorner_=function(a,b){a&goog.positioning.OverflowStatus.FAILED_HORIZONTAL&&(b=goog.positioning.flipCornerHorizontal(b));a&goog.positioning.OverflowStatus.FAILED_VERTICAL&&(b=goog.positioning.flipCornerVertical(b));return b};goog.positioning.ClientPosition=function(a,b){this.coordinate=a instanceof goog.math.Coordinate?a:new goog.math.Coordinate(a,b)};goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition);
goog.positioning.ClientPosition.prototype.reposition=function(a,b,c,d){var e=goog.style.getClientViewportElement(a),f=new goog.math.Coordinate(this.coordinate.x+e.scrollLeft,this.coordinate.y+e.scrollTop);goog.positioning.positionAtAnchor(e,goog.positioning.Corner.TOP_LEFT,a,b,f,c,null,d)};goog.positioning.ViewportClientPosition=function(a,b){goog.positioning.ClientPosition.call(this,a,b)};goog.inherits(goog.positioning.ViewportClientPosition,goog.positioning.ClientPosition);
goog.positioning.ViewportClientPosition.prototype.lastResortOverflow_=0;goog.positioning.ViewportClientPosition.prototype.setLastResortOverflow=function(a){this.lastResortOverflow_=a};
goog.positioning.ViewportClientPosition.prototype.reposition=function(a,b,c,d){var e=goog.style.getClientViewportElement(a);e=goog.style.getVisibleRectForElement(e);var f=goog.dom.getDomHelper(a).getDocumentScrollElement();f=new goog.math.Coordinate(this.coordinate.x+f.scrollLeft,this.coordinate.y+f.scrollTop);var g=goog.positioning.Overflow.FAIL_X|goog.positioning.Overflow.FAIL_Y,k=b,h=goog.positioning.positionAtCoordinate(f,a,k,c,e,g,d);if(0!=(h&goog.positioning.OverflowStatus.FAILED)){if(h&goog.positioning.OverflowStatus.FAILED_LEFT||
h&goog.positioning.OverflowStatus.FAILED_RIGHT)k=goog.positioning.flipCornerHorizontal(k);if(h&goog.positioning.OverflowStatus.FAILED_TOP||h&goog.positioning.OverflowStatus.FAILED_BOTTOM)k=goog.positioning.flipCornerVertical(k);h=goog.positioning.positionAtCoordinate(f,a,k,c,e,g,d);0!=(h&goog.positioning.OverflowStatus.FAILED)&&goog.positioning.positionAtCoordinate(f,a,b,c,e,this.lastResortOverflow_,d)}};goog.events.EventHandler=function(a){goog.Disposable.call(this);this.handler_=a;this.keys_=[]};
goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.typeArray_=[];goog.events.EventHandler.prototype.listen=function(a,b,c,d,e){goog.isArray(b)||(goog.events.EventHandler.typeArray_[0]=b,b=goog.events.EventHandler.typeArray_);for(var f=0;f<b.length;f++){var g=goog.events.listen(a,b[f],c||this,d||!1,e||this.handler_||this);this.keys_.push(g)}return this};
goog.events.EventHandler.prototype.listenOnce=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.listenOnce(a,b[f],c,d,e);else a=goog.events.listenOnce(a,b,c||this,d,e||this.handler_||this),this.keys_.push(a);return this};goog.events.EventHandler.prototype.listenWithWrapper=function(a,b,c,d,e){b.listen(a,c,d,e||this.handler_,this);return this};goog.events.EventHandler.prototype.getListenerCount=function(){return this.keys_.length};
goog.events.EventHandler.prototype.unlisten=function(a,b,c,d,e){if(goog.isArray(b))for(var f=0;f<b.length;f++)this.unlisten(a,b[f],c,d,e);else if(a=goog.events.getListener(a,b,c||this,d,e||this.handler_||this))a=a.key,goog.events.unlistenByKey(a),goog.array.remove(this.keys_,a);return this};goog.events.EventHandler.prototype.unlistenWithWrapper=function(a,b,c,d,e){b.unlisten(a,c,d,e||this.handler_,this);return this};
goog.events.EventHandler.prototype.removeAll=function(){goog.array.forEach(this.keys_,goog.events.unlistenByKey);this.keys_.length=0};goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(a){throw Error("EventHandler.handleEvent not implemented");};
goog.events.KeyCodes={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,
CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,
BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(a){if(a.altKey&&!a.ctrlKey||a.metaKey||a.keyCode>=goog.events.KeyCodes.F1&&a.keyCode<=goog.events.KeyCodes.F12)return!1;switch(a.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;default:return a.keyCode<
goog.events.KeyCodes.FIRST_MEDIA_KEY||a.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}};
goog.events.KeyCodes.firesKeyPressEvent=function(a,b,c,d,e){if(!(goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525")))return!0;if(goog.userAgent.MAC&&e)return goog.events.KeyCodes.isCharacterKey(a);if(e&&!d||!c&&(b==goog.events.KeyCodes.CTRL||b==goog.events.KeyCodes.ALT)||goog.userAgent.IE&&d&&b==a)return!1;switch(a){case goog.events.KeyCodes.ENTER:return!(goog.userAgent.IE&&goog.userAgent.isDocumentMode(9));case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(a)};
goog.events.KeyCodes.isCharacterKey=function(a){if(a>=goog.events.KeyCodes.ZERO&&a<=goog.events.KeyCodes.NINE||a>=goog.events.KeyCodes.NUM_ZERO&&a<=goog.events.KeyCodes.NUM_MULTIPLY||a>=goog.events.KeyCodes.A&&a<=goog.events.KeyCodes.Z||goog.userAgent.WEBKIT&&0==a)return!0;switch(a){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;
default:return!1}};goog.fx={};goog.fx.Transition=function(){};goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"};goog.ui={};goog.ui.PopupBase=function(a,b){goog.events.EventTarget.call(this);this.handler_=new goog.events.EventHandler(this);this.setElement(a||null);b&&this.setType(b)};goog.inherits(goog.ui.PopupBase,goog.events.EventTarget);goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"};
goog.ui.PopupBase.prototype.element_=null;goog.ui.PopupBase.prototype.autoHide_=!0;goog.ui.PopupBase.prototype.autoHideRegion_=null;goog.ui.PopupBase.prototype.isVisible_=!1;goog.ui.PopupBase.prototype.shouldHideAsync_=!1;goog.ui.PopupBase.prototype.lastShowTime_=-1;goog.ui.PopupBase.prototype.lastHideTime_=-1;goog.ui.PopupBase.prototype.hideOnEscape_=!1;goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0;goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY;
goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"};goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150;goog.ui.PopupBase.prototype.getType=function(){return this.type_};goog.ui.PopupBase.prototype.setType=function(a){this.type_=a};goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_};goog.ui.PopupBase.prototype.setShouldHideAsync=function(a){this.shouldHideAsync_=a};goog.ui.PopupBase.prototype.getElement=function(){return this.element_};
goog.ui.PopupBase.prototype.setElement=function(a){this.ensureNotVisible_();this.element_=a};goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_};goog.ui.PopupBase.prototype.setAutoHide=function(a){this.ensureNotVisible_();this.autoHide_=a};goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_};goog.ui.PopupBase.prototype.setHideOnEscape=function(a){this.ensureNotVisible_();this.hideOnEscape_=a};
goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_};goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(a){this.enableCrossIframeDismissal_=a};goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_};goog.ui.PopupBase.prototype.setAutoHideRegion=function(a){this.autoHideRegion_=a};goog.ui.PopupBase.prototype.setTransition=function(a,b){this.showTransition_=a;this.hideTransition_=b};
goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_};goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_};goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.");};goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_};goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};
goog.ui.PopupBase.prototype.setVisible=function(a){this.showTransition_&&this.showTransition_.stop();this.hideTransition_&&this.hideTransition_.stop();a?this.show_():this.hide_()};goog.ui.PopupBase.prototype.reposition=goog.nullFunction;
goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var a=goog.dom.getOwnerDocument(this.element_);this.hideOnEscape_&&this.handler_.listen(a,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0);if(this.autoHide_)if(this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){try{var b=a.activeElement}catch(d){}for(;b&&
"IFRAME"==b.nodeName;){try{var c=goog.dom.getFrameContentDocument(b)}catch(d){break}a=c;b=a.activeElement}this.handler_.listen(a,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0);this.handler_.listen(a,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(a,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition();this.isVisible_=
!0;if(this.showTransition_)goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow_,!1,this),this.showTransition_.play();else this.onShow_()}};
goog.ui.PopupBase.prototype.hide_=function(a){if(!this.isVisible_||!this.onBeforeHide_(a))return!1;this.handler_&&this.handler_.removeAll();this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,a),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(a);return!0};
goog.ui.PopupBase.prototype.continueHidingPopup_=function(a){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement_,0,this):this.hidePopupElement_():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_();this.isVisible_=!1;this.onHide_(a)};goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible";goog.style.showElement(this.element_,!0)};
goog.ui.PopupBase.prototype.hidePopupElement_=function(){this.element_.style.visibility="hidden";goog.style.showElement(this.element_,!1)};goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.left="-200px";this.element_.style.top="-200px"};goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)};goog.ui.PopupBase.prototype.onShow_=function(){this.lastShowTime_=goog.now();this.lastHideTime_=-1;this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)};
goog.ui.PopupBase.prototype.onBeforeHide_=function(a){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:a})};goog.ui.PopupBase.prototype.onHide_=function(a){this.lastHideTime_=goog.now();this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:a})};goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(a){a=a.target;goog.dom.contains(this.element_,a)||this.autoHideRegion_&&!goog.dom.contains(this.autoHideRegion_,a)||this.shouldDebounce_()||this.hide_(a)};
goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(a){a.keyCode==goog.events.KeyCodes.ESC&&this.hide_(a.target)&&(a.preventDefault(),a.stopPropagation())};goog.ui.PopupBase.prototype.onDocumentBlur_=function(a){if(this.enableCrossIframeDismissal_){var b=goog.dom.getOwnerDocument(this.element_);if(goog.userAgent.IE||goog.userAgent.OPERA){if(a=b.activeElement,!a||goog.dom.contains(this.element_,a)||"BODY"==a.tagName)return}else if(a.target!=b)return;this.shouldDebounce_()||this.hide_()}};
goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS};goog.ui.PopupBase.prototype.disposeInternal=function(){goog.base(this,"disposeInternal");this.handler_.dispose();goog.dispose(this.showTransition_);goog.dispose(this.hideTransition_);delete this.element_;delete this.handler_};goog.ui.Popup=function(a,b){this.popupCorner_=goog.positioning.Corner.TOP_START;this.position_=b||void 0;goog.ui.PopupBase.call(this,a)};
goog.inherits(goog.ui.Popup,goog.ui.PopupBase);goog.ui.Popup.Corner=goog.positioning.Corner;goog.ui.Popup.Overflow=goog.positioning.Overflow;goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_};goog.ui.Popup.prototype.setPinnedCorner=function(a){this.popupCorner_=a;this.isVisible()&&this.reposition()};goog.ui.Popup.prototype.getPosition=function(){return this.position_||null};goog.ui.Popup.prototype.setPosition=function(a){this.position_=a||void 0;this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null};goog.ui.Popup.prototype.setMargin=function(a,b,c,d){this.margin_=null==a||a instanceof goog.math.Box?a:new goog.math.Box(a,b,c,d);this.isVisible()&&this.reposition()};
goog.ui.Popup.prototype.reposition=function(){if(this.position_){var a=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,b=this.getElement();a&&(b.style.visibility="hidden",goog.style.showElement(b,!0));this.position_.reposition(b,this.popupCorner_,this.margin_);a&&goog.style.showElement(b,!1)}};goog.ui.Popup.positionPopup=function(a,b,c,d,e,f,g){return 0==(goog.positioning.positionAtAnchor(a,b,c,d,e,f,g)&goog.positioning.OverflowStatus.FAILED)};
goog.ui.Popup.positionAtCoordinate=function(a,b,c,d){goog.positioning.positionAtCoordinate(a,b,c,d);return!0};goog.ui.Popup.AnchoredPosition=goog.positioning.AnchoredPosition;goog.ui.Popup.AnchoredViewPortPosition=goog.positioning.AnchoredViewportPosition;goog.ui.Popup.AbsolutePosition=goog.positioning.AbsolutePosition;goog.ui.Popup.ViewPortPosition=goog.positioning.ViewportPosition;goog.ui.Popup.ClientPosition=goog.positioning.ClientPosition;goog.ui.Popup.ViewPortClientPosition=goog.positioning.ViewportClientPosition;
goog.ui.Tooltip=function(a,b,c){this.dom_=c||(a?goog.dom.getDomHelper(goog.dom.getElement(a)):goog.dom.getDomHelper());goog.ui.Popup.call(this,this.dom_.createDom("div",{style:"position:absolute;display:none;"}));this.cursorPosition=new goog.math.Coordinate(1,1);this.elements_=new goog.structs.Set;a&&this.attach(a);null!=b&&this.setText(b)};goog.inherits(goog.ui.Tooltip,goog.ui.Popup);goog.ui.Tooltip.activeInstances_=[];goog.ui.Tooltip.prototype.activeEl_=null;
goog.ui.Tooltip.prototype.className="goog-tooltip";goog.ui.Tooltip.prototype.showDelayMs_=500;goog.ui.Tooltip.prototype.hideDelayMs_=0;goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4};goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1};goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_};goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_};
goog.ui.Tooltip.prototype.attach=function(a){a=goog.dom.getElement(a);this.elements_.add(a);goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.listen(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.listen(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.detach=function(a){if(a)a=goog.dom.getElement(a),this.detachElement_(a),this.elements_.remove(a);else{for(var b=this.elements_.getValues(),c=0;a=b[c];c++)this.detachElement_(a);this.elements_.clear()}};
goog.ui.Tooltip.prototype.detachElement_=function(a){goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);goog.events.unlisten(a,goog.events.EventType.FOCUS,this.handleFocus,!1,this);goog.events.unlisten(a,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)};
goog.ui.Tooltip.prototype.setShowDelayMs=function(a){this.showDelayMs_=a};goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_};goog.ui.Tooltip.prototype.setHideDelayMs=function(a){this.hideDelayMs_=a};goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_};goog.ui.Tooltip.prototype.setText=function(a){goog.dom.setTextContent(this.getElement(),a)};goog.ui.Tooltip.prototype.setHtml=function(a){this.getElement().innerHTML=a};
goog.ui.Tooltip.prototype.setElement=function(a){var b=this.getElement();b&&goog.dom.removeNode(b);goog.ui.Tooltip.superClass_.setElement.call(this,a);a&&(b=this.dom_.getDocument().body,b.insertBefore(a,b.lastChild))};goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())};goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML};
goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE};goog.ui.Tooltip.prototype.setRequireInteraction=function(a){this.requireInteraction_=a};
goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(a){if(!this.isVisible())return!1;var b=goog.style.getPageOffset(this.getElement()),c=goog.style.getSize(this.getElement());return b.x<=a.x&&a.x<=b.x+c.width&&b.y<=a.y&&a.y<=b.y+c.height};
goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)||a.setVisible(!1);goog.array.insert(goog.ui.Tooltip.activeInstances_,this);a=this.getElement();a.className=this.className;this.clearHideTimer();goog.events.listen(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.listen(a,goog.events.EventType.MOUSEOUT,
this.handleTooltipMouseOut,!1,this);this.clearShowTimer();return!0};
goog.ui.Tooltip.prototype.onHide_=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var a=this.getElement(),b,c=0;b=goog.ui.Tooltip.activeInstances_[c];c++)b.anchor&&goog.dom.contains(a,b.anchor)&&b.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer_();goog.events.unlisten(a,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this);goog.events.unlisten(a,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this);this.anchor=void 0;this.getState()==
goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1);goog.ui.PopupBase.prototype.onHide_.call(this)};goog.ui.Tooltip.prototype.maybeShow=function(a,b){this.anchor==a&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(a,b)):this.anchor=void 0);this.showTimer=void 0};goog.ui.Tooltip.prototype.getElements=function(){return this.elements_};goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_};
goog.ui.Tooltip.prototype.setActiveElement=function(a){this.activeEl_=a};goog.ui.Tooltip.prototype.showForElement=function(a,b){this.attach(a);this.activeEl_=a;this.positionAndShow_(a,b)};goog.ui.Tooltip.prototype.positionAndShow_=function(a,b){this.anchor=a;this.setPosition(b||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR));this.setVisible(!0)};
goog.ui.Tooltip.prototype.maybeHide=function(a){this.hideTimer=void 0;a==this.anchor&&(null!=this.activeEl_&&(this.activeEl_==this.getElement()||this.elements_.contains(this.activeEl_))||this.hasActiveChild()||this.setVisible(!1))};goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)};
goog.ui.Tooltip.prototype.saveCursorPosition_=function(a){var b=this.dom_.getDocumentScroll();this.cursorPosition.x=a.clientX+b.x;this.cursorPosition.y=a.clientY+b.y};goog.ui.Tooltip.prototype.handleMouseOver=function(a){var b=this.getAnchorFromElement(a.target);this.activeEl_=b;this.clearHideTimer();b!=this.anchor&&(this.anchor=b,this.startShowTimer(b),this.checkForParentTooltip_(),this.saveCursorPosition_(a))};
goog.ui.Tooltip.prototype.getAnchorFromElement=function(a){try{for(;a&&!this.elements_.contains(a);)a=a.parentNode;return a}catch(b){return null}};goog.ui.Tooltip.prototype.handleMouseMove=function(a){this.saveCursorPosition_(a);this.seenInteraction_=!0};
goog.ui.Tooltip.prototype.handleFocus=function(a){this.activeEl_=a=this.getAnchorFromElement(a.target);this.seenInteraction_=!0;if(this.anchor!=a){this.anchor=a;var b=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer();this.startShowTimer(a,b);this.checkForParentTooltip_()}};goog.ui.Tooltip.prototype.getPositioningStrategy=function(a){return a==goog.ui.Tooltip.Activation.CURSOR?(a=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(a)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)};
goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var a,b=0;a=goog.ui.Tooltip.activeInstances_[b];b++)goog.dom.contains(a.getElement(),this.anchor)&&(a.childTooltip_=this,this.parentTooltip_=a)};
goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(a){var b=this.getAnchorFromElement(a.target),c=this.getAnchorFromElement(a.relatedTarget);b!=c&&(b==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,!this.isVisible()||a.relatedTarget&&goog.dom.contains(this.getElement(),a.relatedTarget)?this.anchor=void 0:this.startHideTimer_())};
goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(a){a=this.getElement();this.activeEl_!=a&&(this.clearHideTimer(),this.activeEl_=a)};goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(a){var b=this.getElement();this.activeEl_!=b||a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)||(this.activeEl_=null,this.startHideTimer_())};goog.ui.Tooltip.prototype.startShowTimer=function(a,b){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,a,b),this.showDelayMs_))};
goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)};goog.ui.Tooltip.prototype.startHideTimer_=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))};goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)};
goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1);this.clearShowTimer();this.detach();this.getElement()&&goog.dom.removeNode(this.getElement());this.activeEl_=null;delete this.dom_;goog.ui.Tooltip.superClass_.disposeInternal.call(this)};goog.ui.Tooltip.CursorTooltipPosition=function(a,b){goog.positioning.ViewportPosition.call(this,a,b)};goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition);
goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(a,b,c){b=goog.style.getClientViewportElement(a);b=goog.style.getVisibleRectForElement(b);c=c?new goog.math.Box(c.top+10,c.right,c.bottom,c.left+10):new goog.math.Box(10,0,0,10);goog.positioning.positionAtCoordinate(this.coordinate,a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,
a,goog.positioning.Corner.TOP_START,c,b,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};goog.ui.Tooltip.ElementTooltipPosition=function(a){goog.positioning.AnchoredPosition.call(this,a,goog.positioning.Corner.BOTTOM_RIGHT)};goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition);
goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(a,b,c){var d=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,a,b,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,a,goog.positioning.Corner.BOTTOM_LEFT,d,c,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)};
goog.ui.AdvancedTooltip=function(a,b,c){goog.ui.Tooltip.call(this,a,b,c)};goog.inherits(goog.ui.AdvancedTooltip,goog.ui.Tooltip);goog.ui.AdvancedTooltip.prototype.cursorTracking_=!1;goog.ui.AdvancedTooltip.prototype.cursorTrackingHideDelayMs_=100;goog.ui.AdvancedTooltip.prototype.tracking_=!1;goog.ui.AdvancedTooltip.prototype.setHotSpotPadding=function(a){this.hotSpotPadding_=a||null};goog.ui.AdvancedTooltip.prototype.getHotSpotPadding=function(){return this.hotSpotPadding_};
goog.ui.AdvancedTooltip.prototype.setCursorTracking=function(a){this.cursorTracking_=a};goog.ui.AdvancedTooltip.prototype.getCursorTracking=function(){return this.cursorTracking_};goog.ui.AdvancedTooltip.prototype.setCursorTrackingHideDelayMs=function(a){this.cursorTrackingHideDelayMs_=a};goog.ui.AdvancedTooltip.prototype.getCursorTrackingHideDelayMs=function(){return this.cursorTrackingHideDelayMs_};
goog.ui.AdvancedTooltip.prototype.onShow_=function(){goog.ui.AdvancedTooltip.superClass_.onShow_.call(this);this.boundingBox_=goog.style.getBounds(this.getElement()).toBox();this.anchor&&(this.anchorBox_=goog.style.getBounds(this.anchor).toBox());this.tracking_=this.cursorTracking_;goog.events.listen(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this)};
goog.ui.AdvancedTooltip.prototype.onHide_=function(){goog.events.unlisten(this.getDomHelper().getDocument(),goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this);this.anchorBox_=this.boundingBox_=this.paddingBox_=null;this.tracking_=!1;goog.ui.AdvancedTooltip.superClass_.onHide_.call(this)};goog.ui.AdvancedTooltip.prototype.isMouseInTooltip=function(){return this.isCoordinateInTooltip(this.cursorPosition)};
goog.ui.AdvancedTooltip.prototype.isCoordinateInTooltip=function(a){return this.paddingBox_?this.paddingBox_.contains(a):goog.ui.AdvancedTooltip.superClass_.isCoordinateInTooltip.call(this,a)};goog.ui.AdvancedTooltip.prototype.isCoordinateActive_=function(a){if(this.anchorBox_&&this.anchorBox_.contains(a)||this.isCoordinateInTooltip(a))return!0;var b=this.getChildTooltip();return!!b&&b.isCoordinateInTooltip(a)};
goog.ui.AdvancedTooltip.prototype.maybeHide=function(a){this.hideTimer=void 0;a!=this.anchor||this.isCoordinateActive_(this.cursorPosition)||this.getActiveElement()||this.hasActiveChild()||goog.userAgent.GECKO&&0==this.cursorPosition.x&&0==this.cursorPosition.y||this.setVisible(!1)};
goog.ui.AdvancedTooltip.prototype.handleMouseMove=function(a){var b=this.isVisible();if(this.boundingBox_){var c=this.getDomHelper().getDocumentScroll();c=new goog.math.Coordinate(a.clientX+c.x,a.clientY+c.y);this.isCoordinateActive_(c)?b=!1:this.tracking_&&(b=goog.math.Box.distance(this.boundingBox_,this.cursorPosition),b=goog.math.Box.distance(this.boundingBox_,c)>=b)}b?(this.startHideTimer_(),this.setActiveElement(null),(b=this.getChildTooltip())&&b.setActiveElement(null)):this.getState()==goog.ui.Tooltip.State.WAITING_TO_HIDE&&
this.clearHideTimer();goog.ui.AdvancedTooltip.superClass_.handleMouseMove.call(this,a)};goog.ui.AdvancedTooltip.prototype.handleTooltipMouseOver=function(a){this.getActiveElement()!=this.getElement()&&(this.tracking_=!1,this.setActiveElement(this.getElement()),!this.paddingBox_&&this.hotSpotPadding_&&(this.paddingBox_=this.boundingBox_.clone().expand(this.hotSpotPadding_)))};
goog.ui.AdvancedTooltip.prototype.getHideDelayMs=function(){return this.tracking_?this.cursorTrackingHideDelayMs_:goog.base(this,"getHideDelayMs")};goog.ui.AdvancedTooltip.prototype.resetHotSpot=function(){this.paddingBox_=null};plt.wescheme.helpers={};
(function(){plt.wescheme.helpers.makeShareUrl=function(a){var b=document.createElement("a");b.href="/view?publicId="+encodeURIComponent(a);return b.href};plt.wescheme.helpers.urlToAnchor=function(a){var b=document.createElement("a");b.appendChild(document.createTextNode(a));b.href=a;return b};plt.wescheme.helpers.trimWhitespace=function(a){a=a.replace(/^\s+/,"");return a=a.replace(/\s+$/,"")};plt.wescheme.helpers.generateSocialBookmarks=function(a,b){var c=document.createElement("ul");c.className=
"socialBookmarks";var d=function(a,b,d){var e=document.createElement("a"),f=document.createElement("img"),g=document.createElement("li");e.className="socialBookmarklet";e.title="Share via "+a;f.src=b;f.alt="Share via "+a;f.className="socialBookmarklet";e.appendChild(f);e.href=d;e.target="_blank";g.appendChild(e);c.appendChild(g)},e=function(a){var b,c=[];for(b in a)Object.hasOwnProperty.call(a,b)&&c.push(b+"="+encodeURIComponent(a[b]));return c.join("&")};d("email","/static/img/icon_email.png","https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1"+
e({su:a,body:b}));d("Facebook","/static/img/icon_facebook.png","http://www.facebook.com/sharer.php?"+e({u:b,t:a}));d("Twitter","/static/img/icon_twitter.png","http://twitter.com/home?"+e({status:b}));d("Pinterest","/static/img/icon_pinterest.png","http://pinterest.com/pin/create/button/?"+e({url:b,description:a}));d("Reddit","/static/img/icon_reddit.png","http://www.reddit.com/submit?"+e({url:b,title:a}));d("Barcode","/static/img/icon_qrcode.png","http://qrcode.kaywa.com/img.php?"+e({s:8,d:b}));return c};plt.wescheme.helpers.prettyPrintDate=
function(a){var b=new Date;b.setTime(parseInt(a));a=b.getUTCDate();var c=b.getUTCMonth()+1,d=b.getFullYear(),e=(0==b.getHours()%12?12:b.getHours()%12)+":";var f=b.getMinutes();f=1==(f+"").length?"0"+f:f;b=e+f+(12<=b.getHours()?"pm":"am");return a+"/"+c+"/"+d+", "+b}})();plt.wescheme.SharingDialog={};
(function(){plt.wescheme.SharingDialog=function(a,c){this.pid=a;this.code=c;this.actions=new plt.wescheme.AjaxActions};plt.wescheme.SharingDialog.prototype.show=function(a,c){var b=this,e=jQuery("<div/>"),f=function(){e.dialog("close");h(!0)},g=function(){e.dialog("close");h(!1)},k=function(){document.getElementById("editor").removeAttribute("aria-hidden")},h=function(a){plt.wescheme.WeSchemeIntentBus.notify("before-publish",b);b.actions.makeAClone(b.pid,b.code,function(b){r(a,b,!1)},p)},r=function(c,
d,e){function f(){var a=document.getElementById("sharedLink");a.select();a.setSelectionRange(0,99999);document.execCommand("copy")}b.actions.share(d,c,function(c){var d=jQuery("<div/>");document.getElementById("editor").setAttribute("aria-hidden",!0);d.dialog({title:"Sharing your program",bgiframe:!0,modal:!0,beforeClose:k,width:600,close:function(){a&&a(c)}});plt.wescheme.WeSchemeIntentBus.notify("after-publish",b);d.append(jQuery("<p/>").text("Program has been shared: "));var e=c.find("publicId").text();
url=plt.wescheme.helpers.makeShareUrl(e);inpt=document.createElement("input");inpt.id="sharedLink";inpt.style="width: 515px; padding: 0px 4px; line-height: 25px;";inpt.value=url;inpt.readOnly=!0;d.append(inpt);anchor=plt.wescheme.helpers.urlToAnchor(url);title=c.find("title").text();copyBtn=document.createElement("button");copyBtn.onclick=f;copyBtn.innerHTML="&#10697;";d.append(copyBtn);d.append(jQuery("<p/>"));d.append(jQuery(plt.wescheme.helpers.generateSocialBookmarks(title,anchor.href)));d.dialog("open")},
v)},p=function(){alert("cloning failed");c&&c()},v=function(){alert("Sharing failed.");c&&c()};document.getElementById("editor").setAttribute("aria-hidden",!0);this.pid?(e.append(jQuery("<p/>").text("Publishing will let your friends run this program. Would you like them to be able to see your code, too?")),e.dialog({title:"Publish My Program",bgiframe:!0,modal:!0,beforeClose:k,overlay:{opacity:.5,background:"black"},buttons:{Yes:f,No:g}})):(e.append(jQuery("<p/>").text("The program needs to be saved before it can be shared.")),
e.dialog({title:"Sharing your program",bgiframe:!0,modal:!0,beforeClose:k,overlay:{opacity:.5,background:"black"},buttons:{}}));e.dialog("open")};plt.wescheme.SharingDialog.makeShareButton=function(b,c,d){var e=b.hasSharingUrls()?jQuery("<img class='button' src='/static/img/share.png'/>"):jQuery("<img class='button' src='/static/img/share-decolored.png'/>");e.click(function(){(new plt.wescheme.SharingDialog(b.getId(),null)).show(c,d)});e=jQuery("<span/>").addClass("ProgramPublished").append(e);a(e.get(0),
b);return e};var a=function(a,c){a=new goog.ui.AdvancedTooltip(a);a.className="tooltip";if(c.hasSharingUrls()){a.setHtml("<h2>Program sharing</h2>This program has been shared.",!0);var b=goog.dom.createElement("ul");c=c.getSharedAsEntries()[0];var e=goog.dom.createElement("li");b.appendChild(e);var f=c.title;var g=c.publicId;var k=c.title;if(""!=g){var h=document.createElement("a");h.href=plt.wescheme.helpers.makeShareUrl(g);h.target="_blank";h.appendChild(document.createTextNode(k||h.href));g=h}else throw Error();
e.appendChild(g);e.appendChild(goog.dom.createTextNode(" ["+plt.wescheme.helpers.prettyPrintDate(c.modified)+"]"));e.appendChild(plt.wescheme.helpers.generateSocialBookmarks(f,g.href));goog.dom.appendChild(a.getElement(),b)}else a.setHtml("<h2>Program sharing</h2>This program has not been shared yet.  Click the share icon to share it.",!0);a.setHotSpotPadding(new goog.math.Box(5,5,5,5));a.setCursorTracking(!0);a.setHideDelayMs(250)}})();plt.wescheme.NotesDialog={};
(function(){plt.wescheme.NotesDialog=function(a){this.pid=a;this.actions=new plt.wescheme.AjaxActions;this.textArea=jQuery("<textarea class='notesTextarea'></textarea>");this.textArea.css("width","100%");this.textArea.css("height","100%")};plt.wescheme.NotesDialog.prototype.show=function(a,b){var c=this,d=jQuery("<div/>"),e=function(){d.dialog("close")},f=function(){c.pid?c.actions.save({pid:c.pid,notes:c.textArea.val()},a,b):a()};c.pid?c.actions.loadProject(c.pid,null,function(a){a.getNotes()?c.textArea.val(a.getNotes()):
c.textArea.val("Enter your notes here.");d.append(jQuery("<div/>").append(c.textArea).css("height","100%"));d.dialog({title:"Notes",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"},buttons:{Save:e},width:400,height:500,close:f});d.dialog("open")},b):(d.append(jQuery("<span>Please save the program first. You may need to go back and log in, if you haven't already.</span>")),d.dialog({title:"Notes",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"},buttons:{Close:e},width:400,height:500,
close:f}),d.dialog("open"))}})();plt.wescheme.tokenizer={};
(function(){function a(a){for(var c="",d=0;4>d;d++)c+=" ";a=a.replace(/\t/g,c).replace(/\u00a0/g," ").replace(/\r\n?/g,"\n");var e=0,h=[];a=a.split("\n");for(c=0;c<a.length;c++)0!=c&&h.push("\n"),h.push(a[c]);return{next:function(){if(e<h.length)return h[e++];throw b;}}}var b={toString:function(){return"StopIteration"}},c=function(a){function c(){for(;e==d.length;){h+=d;d="";e=0;try{d=a.next()}catch(r){if(r!=b)throw r;return!1}}return!0}var d="",e=0,h="";return{peek:function(){return c()?d.charAt(e):
null},next:function(){if(!c()){if(0<h.length)throw"End of stringstream reached without emptying buffer ('"+h+"').";throw b;}return d.charAt(e++)},get:function(){var a=h;h="";0<e&&(a+=d.slice(0,e),d=d.slice(e),e=0);return a},push:function(a){d=d.slice(0,e)+a+d.slice(e)},lookAhead:function(b,c,f,g){function k(a){return g?a.toLowerCase():a}b=k(b);var p=!1,B=h,r=e;for(f&&this.nextWhileMatches(/[\s\u00a0]/);;){f=e+b.length;var I=d.length-e;if(f<=d.length){p=b==k(d.slice(e,f));e=f;break}else if(b.slice(0,
I)==k(d.slice(e))){h+=d;d="";try{d=a.next()}catch(Q){break}e=0;b=b.slice(I)}else break}p&&c||(d=h.slice(B.length)+d,e=r,h=B);return p},more:function(){return null!==this.peek()},applies:function(a){var b=this.peek();return null!==b&&a(b)},nextWhile:function(a){for(var b;null!==(b=this.peek())&&a(b);)this.next()},matches:function(a){var b=this.peek();return null!==b&&a.test(b)},nextWhileMatches:function(a){for(var b;null!==(b=this.peek())&&a.test(b);)this.next()},equals:function(a){return a===this.peek()},
endOfLine:function(){var a=this.peek();return null==a||"\n"==a}}},d=function(){var a=function(a){return"\n"!=a&&/^[\s\u00a0]*$/.test(a)},c=function(a,b){for(var c=!1;;){if(a.endOfLine())return!0;var d=a.next();if(d==b&&!c)return!1;c=!c&&"\\"==d}},d=/[\s\u00a0]/,k=/[\s\(\)\[\]\{\}\"\,\'\`\;]/,h=/[^\s\(\)\[\]\{\}\"\,\'\`\;]/,r=[/^((?:(?:\#[ei])?[+\-]?(?:(?:\d+\/\d+)|(?:(?:\d+\.\d+|\d+\.|\.\d+)(?:[eE][+\-]?\d+)?)|(?:\d+(?:[eE][+\-]?\d+)?)))?(?:[+\-](?:(?:\d+\/\d+)|(?:(?:\d+\.\d+|\d+\.|\.\d+)(?:[eE][+\-]?\d+)?)|(?:\d+(?:[eE][+\-]?\d+)?)))i$)/,
/^((?:#[ei])?[+-]inf.0)$/,/^((?:#[ei])?[+-]nan.0)$/,/^((?:\#[ei])?[+\-]?(?:(?:\d+\/\d+)|(?:(?:\d+\.\d+|\d+\.|\.\d+)(?:[eE][+\-]?\d+)?)|(?:\d+(?:[eE][+\-]?\d+)?))$)/,/^0[xX][0-9A-Fa-f]+$/],p=function(a,b){if("\n"===a.peek())return a.next(),{type:"whitespace",style:"whitespace",content:a.get()};var d=c(a,'"');d?b(p):b(v);return{type:"string",style:"scheme-string",content:a.get(),isUnclosed:d}},v=function(b,e){var f=function(){b.nextWhileMatches(h);var a=b.get(),c;a:{for(c=0;c<r.length;c++)if(r[c].test(a)){c=
!0;break a}c=!1}return c?{type:"number",style:"scheme-number",content:a}:{type:"variable",style:"scheme-symbol",content:a}},g=function(a){(a=c(b,a))&&e(p);return{type:"string",style:"scheme-string",content:b.get(),isUnclosed:a}},I=function(){if(b.equals(";")){b.next();var a=b.get();return{type:"comment",style:"scheme-symbol",content:a}}if(b.equals("\\"))return b.next(),b.next(),a=b.get(),{type:"char",style:"scheme-symbol",content:a};a=b.get();return{type:"symbol",style:"scheme-symbol",content:a}},
v=b.next();if("\n"===v)f={type:"whitespace",style:"whitespace",content:b.get()};else if(d.test(v))b.nextWhile(a),f={type:"whitespace",style:"whitespace",content:b.get()};else if("#"===v)f=I();else if(";"===v){for(;!b.endOfLine();)b.next();f={type:"comment",style:"scheme-comment",content:b.get()}}else f='"'===v?g(v):k.test(v)?{type:v,style:"scheme-punctuation"}:f();return f},z=function(a,c){var d={state:c,take:function(b){"string"==typeof b&&(b={style:b,type:b});b.content=(b.content||"")+a.get();b.value=
b.content;return b},next:function(){if(!a.more())throw b;for(var c;!c;)c=d.state(a,function(a){d.state=a});return this.take(c)}};return d};return function(a,b){return z(a,b||v)}}();plt.wescheme.tokenizer.tokenize=function(e){e=d(c(a(e)));var f=[];try{for(;;){var g=e.next();f.push(g)}}catch(k){if(k!=b)throw k;}return f};plt.wescheme.tokenizer.hasCompleteExpression=function(a){a=plt.wescheme.tokenizer.tokenize(a);var b=[],c,d={"(":!0,"[":!0,"{":!0},e={")":"(","]":"[","}":"{"};for(c=0;c<a.length;c++)if(d[a[c].type])b.push(a[c].type);
else if(e[a[c].type]&&(0===b.length||b.pop()!==e[a[c].type]))return!1;return 0===b.length}})();plt.compiler={};plt.compiler.throwError={};plt.compiler.Program={};plt.compiler.comment={};plt.compiler.couple={};plt.compiler.defFunc={};plt.compiler.defVar={};plt.compiler.defVars={};plt.compiler.defStruct={};plt.compiler.beginExpr={};plt.compiler.lambdaExpr={};plt.compiler.localExpr={};plt.compiler.letrecExpr={};plt.compiler.letExpr={};plt.compiler.letStarExpr={};plt.compiler.condExpr={};
plt.compiler.caseExpr={};plt.compiler.andExpr={};plt.compiler.orExpr={};plt.compiler.callExpr={};plt.compiler.ifExpr={};plt.compiler.whenUnlessExpr={};plt.compiler.symbolExpr={};plt.compiler.literal={};plt.compiler.quotedExpr={};plt.compiler.unquotedExpr={};plt.compiler.quasiquotedExpr={};plt.compiler.unquoteSplice={};plt.compiler.requireExpr={};plt.compiler.provideStatement={};plt.compiler.unsupportedExpr={};plt.compiler.pinfo={};plt.compiler.getBasePinfo={};plt.compiler.isExpression={};
plt.compiler.isDefinition={};plt.compiler.env={};plt.compiler.emptyEnv={};plt.compiler.localEnv={};plt.compiler.globalEnv={};plt.compiler.moduleBinding={};plt.compiler.functionBinding={};plt.compiler.constantBinding={};plt.compiler.structBinding={};plt.compiler.unnamedEnv={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a,b,c){b.source=b.source||"<unknown>";a.args=a.args.map(function(a){if("string"===typeof a)return a;if(a instanceof D)return'["span", [["class", "SchemeValue-Symbol"]], '+a.val+"]";if(void 0!==a.location)return{text:a.text,type:"ColoredPart",loc:a.location.toString(),toString:function(){return a.text}};if(void 0!==a.locations)return{text:a.text,type:"MultiPart",solid:a.solid,locs:a.locations.map(function(a){return a.toString()}),toString:function(){return a.text}}});a={type:"moby-failure",
"dom-message":["span",[["class","Error"]],["span",[["class",c||"Message"]]].concat(c?[["span",[["class","Error.reason"]],a.toString()],["span",[["class",(c||"message")+("Error-GenericReadError"===c?".locations":".otherLocations")]]]]:a.args.map(function(a){return a.toString()})),["br",[],""],["span",[["class","Error.location"]],["span",[["class","location-reference"],["style","display:none"]],["span",[["class","location-offset"]],(b.startChar+1).toString()],["span",[["class","location-line"]],b.startRow.toString()],
["span",[["class","location-column"]],b.startCol.toString()],["span",[["class","location-span"]],b.span.toString()],["span",[["class","location-id"]],b.source.toString()]]]],"structured-error":JSON.stringify({message:c?!1:a.args,location:b.toString()})};throw JSON.stringify(a);}function b(a){m.call(this);this.txt=a;this.toString=function(){return";"+this.txt}}function c(a,b,c,d){m.call(this);this.name=a;this.args=b;this.body=c;this.stx=d;this.toString=function(){return"(define ("+this.name.toString()+
" "+this.args.join(" ")+")\n    "+this.body.toString()+")"}}function d(a,b,c){m.call(this);this.name=a;this.expr=b;this.stx=c;this.toString=function(){return"(define "+this.name.toString()+" "+this.expr.toString()+")"}}function e(a,b,c){m.call(this);this.names=a;this.expr=b;this.stx=c;this.toString=function(){return"(define-values ("+this.names.join(" ")+") "+this.expr.toString()+")"}}function f(a,b,c){m.call(this);this.name=a;this.fields=b;this.stx=c;this.toString=function(){return"(define-struct "+
this.name.toString()+" ("+this.fields.toString()+"))"}}function g(a,b){m.call(this);this.exprs=a;this.stx=b;this.toString=function(){return"(begin "+this.exprs.join(" ")+")"}}function k(a,b,c){m.call(this);this.args=a;this.body=b;this.stx=c;this.toString=function(){return"(lambda ("+this.args.join(" ")+") "+this.body.toString()+")"}}function h(a,b,c){m.call(this);this.defs=a;this.body=b;this.stx=c;this.toString=function(){return"(local ("+this.defs.toString()+") "+this.body.toString()+")"}}function r(a,
b,c){m.call(this);this.expr=a;this.clauses=b;this.stx=c;this.toString=function(){return"(case "+this.expr.toString()+"\n    "+this.clauses.join("\n    ")+")"}}function p(a,b,c){m.call(this);this.func=a;this.args=b;this.stx=c;this.toString=function(){return"("+[this.func].concat(this.args).join(" ")+")"}}function v(a,b,c,d){m.call(this);this.predicate=a;this.consequence=b;this.alternative=c;this.stx=d;this.toString=function(){return"(if "+this.predicate.toString()+" "+this.consequence.toString()+" "+
this.alternative.toString()+")"}}function z(a,b,c){m.call(this);this.predicate=a;this.exprs=b;this.stx=c;this.toString=function(){return"("+this.stx[0]+" "+this.predicate.toString()+" "+this.exprs.toString()+")"}}function D(a,b){m.call(this);this.val=a;this.stx=b}function E(a){m.call(this);this.val=a;this.toString=function(){if(!0===this.val)return"#t";if(!1===this.val)return"#f";if(this.val instanceof Char){var a=this.val.val;return"\b"===a?"#\\backspace":"\t"===a?"#\\tab":"\n"===a?"#\\newline":
" "===a?"#\\space":"\v"===a?"#\\vtab":this.val.toWrittenString()}return types.toWrittenString(this.val)}}function B(a){m.call(this);this.val=a;this.toString=function(){function a(a){a=a.val;if("quasiquote"===a)a="`";else if("quote"===a)a="'";else if("unquote"===a)a=",";else{if("unquote-splicing"!==a)throw"impossible quote-like string";a=",@"}return a}function b(c){return c instanceof Array&&2===c.length&&c[0]instanceof D&&("quasiquote"===c[0].val||"quote"===c[0].val||"unquote"===c[0].val||"unquote-splicing"===
c[0].val)?a(c[0]).concat(b(c[1])):c instanceof Array?c.reduce(function(a,c){return a.concat(b(c))},"(").concat(")"):c.toString()}return"'"+b(this.val)}}function P(a){m.call(this);this.val=a;this.toString=function(){return","+this.val.toString()}}function I(a){m.call(this);this.val=a;this.toString=function(){return this.val instanceof Array?"`("+this.val.toString()+")":"`"+this.val.toString()}}function Q(a){m.call(this);this.val=a;this.toString=function(){return",@"+this.val.toString()}}function A(a,
b){m.call(this);this.spec=a;this.stx=b;this.toString=function(){return"(require "+this.spec.toString()+")"}}function R(a,b){m.call(this);this.clauses=a;this.stx=b;this.toString=function(){return"(provide "+this.clauses.toString()+")"}}function u(a,b,c){m.call(this);this.val=a;this.errorMsg=b;this.errorSpan=c;this.toString=function(){return this.val.toString()}}function O(a,b,c,d){this.name=a;this.moduleSource=b;this.permissions=c;this.loc=d;this.toString=function(){return this.name};return this}function C(a,
b,c,d,e,f,g){this.name=a;this.moduleSource=b;this.minArity=c;this.isVarArity=d;this.permissions=e;this.isCps=f;this.loc=g;this.toString=function(){return this.name};return this}function H(a,b,c,d,e,f,g,u,k){this.name=a;this.moduleSource=b;this.fields=c;this.constructor=d;this.predicate=e;this.accessors=f;this.mutators=g;this.permissions=u;this.loc=k;this.toString=function(){return this.name};return this}function G(a){var b=this;this.bindings=a||N();this.lookup=function(a){return this.bindings.containsKey(a)?
this.bindings.get(a):!1};this.peek=function(a){return 0==a?this:this instanceof K?"IMPOSSIBLE - peeked at an emptyEnv!":this.parent.peek(a-1)};this.contains=function(a){return!1!==this.lookup(a)};this.keys=this.bindings.keys;this.extend=function(a){this.bindings.put(a.name,a);return new plt.compiler.env(this.bindings)};this.extendFunction=function(a,b,c,d,e){return this.extend(new C(a,b,c,d,[],!1,e))};this.extendConstant=function(a,b,c){return this.extend(new O(a,b,[],c))};this.lookup_context=function(a){return a.context instanceof
G?a.context.contains(a)?a.context.lookup(a):!1:b.contains(a)?b.lookup(a):!1};this.extendEnv_moduleBinding=function(a){return a.bindings.reduceRight(function(a,b){return a.extend(b)},this)};this.toString=function(){return this.bindings.values().reduce(function(a,b){return a+"\n  |---"+b.name},"")}}function K(){G.call(this);this.lookup=function(a,b){return new plt.compiler.unboundStackReference(a)}}function U(a){G.call(this);this.parent=a;this.lookup=function(a,b){return this.parent.lookup(a,b+1)}}
function F(a,b,c){G.call(this);this.name=a;this.boxed=b;this.parent=c;this.lookup=function(a,b){return a===this.name?new plt.compiler.localStackReference(a,this.boxed,b):this.parent.lookup(a,b+1)}}function V(a,b,c){G.call(this);this.names=a;this.boxed=b;this.parent=c;this.lookup=function(a,b){var c=this.names.indexOf(a);return-1<c?new plt.compiler.globalStackReference(a,b,c):this.parent.lookup(a,b+1)}}var w=function(a){var b=function(){};b.prototype=a;return new b},m=function(){this.toString=function(){return this.val.toString()};
this.location=null};b.prototype=w(m.prototype);c.prototype=w(m.prototype);d.prototype=w(m.prototype);e.prototype=w(m.prototype);f.prototype=w(m.prototype);g.prototype=w(m.prototype);k.prototype=w(m.prototype);h.prototype=w(m.prototype);r.prototype=w(m.prototype);p.prototype=w(m.prototype);v.prototype=w(m.prototype);z.prototype=w(m.prototype);D.prototype=w(m.prototype);E.prototype=w(m.prototype);Vector.prototype.toString=Vector.prototype.toWrittenString=function(){var a=this.elts.filter(function(a){return void 0!==
a}),b=a[a.length-1];return"#("+this.elts.map(function(a){return void 0===a?b:a})+")"};B.prototype=w(m.prototype);P.prototype=w(m.prototype);I.prototype=w(m.prototype);Q.prototype=w(m.prototype);A.prototype=w(m.prototype);R.prototype=w(m.prototype);u.prototype=w(m.prototype);var N=types.makeLowLevelEqHash;plt.compiler.keywords="cond else let case let* letrec quote quasiquote unquote unquote-splicing local begin if or and when unless lambda \u03bb define define-struct define-values".split(" ");K.prototype=
w(G.prototype);U.prototype=w(G.prototype);F.prototype=w(G.prototype);V.prototype=w(G.prototype);plt.compiler.defaultModuleResolver=function(a){for(var b=0;b<plt.compiler.knownModules.length;b++)if(plt.compiler.knownModules[b].name===a)return plt.compiler.knownModules[b];return!1};plt.compiler.moduleGuess=function(a){return plt.compiler.knownModules.reduce(function(b,c){var d=c.name;if(0===d.length)d=a.length;else if(0===a.length)d=d.length;else{for(var e=[],f=0;f<=a.length;f++)e[f]=[f];for(var g=
0;g<=d.length;g++)e[0][g]=g;for(f=1;f<=a.length;f++)for(g=1;g<=d.length;g++)a.charAt(f-1)==d.charAt(g-1)?e[f][g]=e[f-1][g-1]:e[f][g]=Math.min(e[f-1][g-1]+1,Math.min(e[f][g-1]+1,e[f-1][g]+1));d=e[a.length][d.length]}return d<b.distance?{name:c.name,distance:d}:b},{name:a,distance:5})};plt.compiler.defaultModulePathResolver=function(a,b){b=a.toString().split("/");var c=b[0];b.slice(1).join();return-1<plt.compiler.knownCollections.indexOf(c)&&plt.compiler.defaultModuleResolver(a.toString())||/^wescheme\/\w+$/.exec(a)};
plt.compiler.throwError=a;plt.compiler.Program=m;plt.compiler.comment=b;plt.compiler.couple=function(a,b){this.first=a;this.second=b;this.toString=function(){return"("+this.first.toString()+" "+this.second.toString()+")"}};plt.compiler.defFunc=c;plt.compiler.defVar=d;plt.compiler.defVars=e;plt.compiler.defStruct=f;plt.compiler.beginExpr=g;plt.compiler.lambdaExpr=k;plt.compiler.localExpr=h;plt.compiler.letrecExpr=function(a,b,c){this.bindings=a;this.body=b;this.stx=c;this.toString=function(){return"(letrec ("+
this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letExpr=function(a,b,c){this.bindings=a;this.body=b;this.stx=c;this.toString=function(){return"(let ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letStarExpr=function(a,b,c){this.bindings=a;this.body=b;this.stx=c;this.toString=function(){return"(let* ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.condExpr=function(a,b){this.clauses=a;this.stx=b;this.toString=function(){return"(cond\n    "+
this.clauses.join("\n    ")+")"}};plt.compiler.caseExpr=r;plt.compiler.andExpr=function(a,b){this.exprs=a;this.stx=b;this.toString=function(){return"(and "+this.exprs.join(" ")+")"}};plt.compiler.orExpr=function(a,b){this.exprs=a;this.stx=b;this.toString=function(){return"(or "+this.exprs.toString()+")"}};plt.compiler.callExpr=p;plt.compiler.ifExpr=v;plt.compiler.whenUnlessExpr=z;plt.compiler.symbolExpr=D;plt.compiler.literal=E;plt.compiler.quotedExpr=B;plt.compiler.unquotedExpr=P;plt.compiler.quasiquotedExpr=
I;plt.compiler.unquoteSplice=Q;plt.compiler.requireExpr=A;plt.compiler.provideStatement=R;plt.compiler.unsupportedExpr=u;plt.compiler.pinfo=function(b,c,d,e,f,g,u,k,h,x,l,t,n,W){this.env=b||new K;this.modules=c||[];this.usedBindingsHash=d||N();this.freeVariables=e||[];this.gensymCounter=f||0;this.providedNames=g||N();this.definedNames=u||N();this.sharedExpressions=k||N();this.withLocationEmits=h||!0;this.allowRedefinition=x||!1;this.moduleResolver=l||plt.compiler.defaultModuleResolver;this.modulePathResolver=
t||plt.compiler.defaultModulePathResolver;this.currentModulePath=n||"";this.declaredPermissions=W||[];this.isRedefinition=function(a){return this.env.lookup(a)};this.usedBindings=this.usedBindingsHash.values;this.accumulateDeclaredPermission=function(a,b){this.declaredPermissions=[[a,b]].concat(this.declaredPermissions);return this};this.accumulateSharedExpression=function(a,b){b=makeLabeledTranslation(this.gensymCounter,b);this.sharedExpressions.put(b,a);return this};this.accumulateDefinedBinding=
function(b,c){if(-1<plt.compiler.keywords.indexOf(b.name))a(new types.Message([new types.ColoredPart(b.name,b.loc),": this is a reserved keyword and cannot be used as a variable or function name"]),b.loc);else if(!this.allowRedefinition&&this.isRedefinition(b.name))c=this.env.lookup(b.name),c.loc?a(new types.Message([new types.ColoredPart(b.name,b.loc),": this name has a ",new types.ColoredPart("previous definition",c.loc)," and cannot be re-defined"]),b.loc):a(new types.Message([new types.ColoredPart(b.name,
b.loc),": this name has a ","previous definition"," and cannot be re-defined"]),b.loc);else return this.env.extend(b),this.definedNames.put(b.name,b),this};this.accumulateDefinedBindings=function(a,b){var c=this;a.forEach(function(a){c.accumulateDefinedBinding(a,b)});return this};this.accumulateModuleBindings=function(a){var b=this;a.forEach(function(a){b.env.extend(a)});return this};this.accumulateModule=function(a){this.modules=[a].concat(this.modules);return this};this.accumulateBindingUse=function(a){var b=
this.usedBindingsHash.get(a.name);b&&b.moduleSource||this.usedBindingsHash.put(a.name,a);return this};this.accumulateFreeVariableUse=function(a){this.freeVariables=-1<this.freeVariables.indexOf(a)?this.freeVariables:[a].concat(this.freeVariables);return this};this.gensym=function(a){return[this,new D(a+this.gensymCounter++)]};this.permissions=function(){return this.usedBindings().reduce(function(a,b){return(b instanceof C||b instanceof O)&&0<b.permissions.length?a.concat(b.permissions):a},[]).filter(function(a,
b,c){return c.indexOf(a)===b})};this.getExposedBindings=function(){function b(b){function e(a){return d.definedNames.get(a)}d.definedNames.containsKey(b.symbl)||a(new types.Message(["provided-name-not-defined: ",b.symbl]));var f=c(f,d.definedNames.get(b.symbl));return b instanceof plt.compiler.provideBindingStructId?[e(f.constructor),e(f.predicate)].concat(f.accessors.map(e),f.mutators.map(e)):[f]}function c(b,c){if(b instanceof plt.compiler.provideBindingStructId&&!(c instanceof H))a(new types.Message(["provided-structure-not-structure: ",
c.symbl]));else return c}var d=this;bindings=bindings.reduce(function(a,c){return a.concat(b(c))},[]);return bindings.map(function(a){var b=d.declaredPermissions.filter(function(b){return b[0]===a.name});a.permissions=b.map(function(a){return a[1]});return a})};this.toString=function(){var a="pinfo-------------\n**env****: "+this.env.toString();a+="\n**modules**: "+this.modules.join(",");a+="\n**used bindings**: "+this.usedBindings();a+="\n**free variables**: "+this.freeVariables.join(",");a+="\n**gensym counter**: "+
this.gensymCounter;a+="\n**provided names**: "+this.providedNames.values();a+="\n**defined names**: "+this.definedNames.values();return a+="\n**permissions**: "+this.permissions()}};plt.compiler.getBasePinfo=function(a){var b="null empty true false eof pi e js-undefined js-null".split(" ").reduce(function(a,b){return a.extendConstant(b.toString(),'"moby/toplevel"',!1)},new K),c=new plt.compiler.pinfo;b=plt.compiler.topLevelModules.reduceRight(function(a,b){return a.extendEnv_moduleBinding(b)},b);
"moby"===a?c.env=b.extendEnv_moduleBinding(mobyModuleBinding):"base"===a&&(c.env=b);return c};plt.compiler.isExpression=function(a){return!(a instanceof d||a instanceof e||a instanceof f||a instanceof c||a instanceof R||a instanceof u||a instanceof A)};plt.compiler.isDefinition=function(a){return a instanceof d||a instanceof e||a instanceof f||a instanceof c};plt.compiler.env=G;plt.compiler.emptyEnv=K;plt.compiler.localEnv=F;plt.compiler.globalEnv=V;plt.compiler.moduleBinding=function(a,b){this.name=
a;this.bindings=b};plt.compiler.functionBinding=C;plt.compiler.constantBinding=O;plt.compiler.structBinding=H;plt.compiler.unnamedEnv=U})();plt.compiler.lex={};plt.compiler.sexpToString={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return"("===a||")"===a||"["===a||"]"===a||"{"===a||"}"===a}function b(a,b){return"("===a&&")"===b||"["===a&&"]"===b||"{"===a&&"}"===b}function c(a){return"("===a?")":"["===a?"]":"{"===a?"}":")"===a?"(":"]"===a?"[":"}"===a?"{":A(new types.Message(["otherDelim: Unknown delimiter: ",a]))}function d(a,b){var c;if(b<a.length)for(c=a.charAt(b);/\s/.test(c)&&b<a.length;)"\n"===c?(w++,m=0):m++,c=a.charAt(++b);return b}function e(a){return a instanceof Array?"("+a.map(e).toString()+
")":a.toString()}function f(a,b){N=m;T=w;var e=b;b=d(a,b);var f=a.charAt(b);b>=a.length&&(L=b,A(new types.Message([J,":",T.toString(),":",(N-1).toString(),": read: (found end-of-file)"]),new y(N-1,T,b-2,2),"Error-GenericReadError"));return u.test(f)?A(new types.Message(["read: expected an open '",c(f),"' to open ",new types.ColoredPart(" "+f+" ",new y(m,T,e,1))]),new y(m,T,e,1)):R.test(f)?g(a,b):'"'===f?k(a,b):"#"===f?h(a,b):";"===f?z(a,b):C.test(f)?D(a,b):E(a,b)}function g(a,e){function g(a,b,c){a=
f(a,b);b=a.location.end().startChar+1;if(a instanceof I&&"."==a.val){if(O){var d=new types.Message(["A syntax list may have only 2 `.'s"]);A(d,c[S].location)}O=S?c.length:!1;S=S||c.length}a instanceof B||(a.parent=c,c.push(a));return b}function k(a,b,c){if(0===b){var d=new types.Message(["A `.' cannot be the first element in a syntax list"]);A(d,a[b].location)}if(b===a.length-1||c===a.length-1)d=new types.Message(["A `.' cannot be the last element in a syntax list"]),A(d,a[c||b].location);if(c)if(2!==
c-b)d=new types.Message(["Two `.'s may only surround one syntax item"]),A(d,a[c].location);else return a.slice(b+1,b+2).concat(a.slice(0,b),a.slice(c+1));a[b+1]instanceof Array||(d=new types.Message(["A `.' must be followed by a syntax list, but found ",new types.ColoredPart("something else",a[b+1].location)]),A(d,a[b+1].location));if(a.length>b+2)d=new types.Message(["A `.' followed by a syntax list must be followed by a closing delimeter, but found ",new types.ColoredPart("something else",a[b+2].location)]),
A(d,a[b+1].location);else return a.slice(0,b).concat(a[b+1],a.slice(b+2))}function x(a){if(/expected a .+ to (close|open)/.exec(a)||/unexpected/.exec(a)||/syntax list/.exec(a)||/bad syntax/.exec(a)||/bad character constant/.exec(a))throw a;var b=JSON.parse(JSON.parse(a)["structured-error"]).location;M=new y(Number(b.column),Number(b.line),Number(b.offset)-1,Number(b.span));e=L;W=a;return e}var l=m,t=w,n=e,W=!1,M=new y(l,t,n,1),h=a.charAt(e++),S=!1,O=!1;m++;var C=[];V.push(h);for(e=d(a,e);e<a.length&&
!u.test(a.charAt(e));){"\n"===a.charAt(e)&&(w++,m=0);try{e=g(a,e,C)}catch(da){e=x(da)}e=d(a,e)}if(e>=a.length){var G=new types.Message(["read: expected a closing '",c(h),"' to close ",new types.ColoredPart(" "+h.toString()+" ",new y(l,t,n,1))]);A(G,M)}b(h,a.charAt(e))||(G=new types.Message(["read: expected a closing '",c(h),"' to close ",new types.ColoredPart(" "+h.toString()+" ",new y(l,t,n,1))," but found a ",new types.ColoredPart(" "+a.charAt(e).toString()+" ",new y(m,w,e,1))]),A(G,new y(m,w,e,
1)));m++;e++;if(W)throw L=e,W;if(S||O)C=k(C,S,O);C.location=new y(l,t,n,e-n);return C}function k(a,b){var c=m,d=w,e=b,f=/^"[^"]*(\\"[^"]*)*[^\\]"|""/.test(a.slice(b)),t=/^"[^"]*(\\"[^"]*)*/.exec(a.slice(e))[0];b++;m++;for(var n,g="";b<a.length&&'"'!==a.charAt(b);){n=a.charAt(b++);"\n"===n?(w++,m=0):m++;if("\\"===n){m++;n=a.charAt(b++);if(b>=a.length)break;switch(!0){case /a/.test(n):n="\u0007";break;case /b/.test(n):n="\b";break;case /t/.test(n):n="\t";break;case /n/.test(n):n="\n";break;case /v/.test(n):n=
"\v";break;case /f/.test(n):n="\f";break;case /r/.test(n):n="\r";break;case /e/.test(n):n="'";break;case /\n/.test(n):n="";break;case /["'\\]/.test(n):break;case /[xuU]/.test(n):var u="x"===n?H:"u"===n?G:U;u.test(a.slice(b))||(L=e+t.length+1,A(new types.Message([J,":",d.toString(),":",c.toString(),": read: no hex digit following \\"+n+" in string"]),new y(c,d,e,b-e+1),"Error-GenericReadError"));u=u.exec(a.slice(b))[1];n=String.fromCharCode(parseInt(u,16));b+=u.length;m+=u.length;break;case F.test(a.slice(b-
1)):u=F.exec(a.slice(b-1))[1];n=String.fromCharCode(parseInt(u,8));b+=u.length-1;m+=u.length-1;break;default:L=e+t.length+1,A(new types.Message([J,":",d.toString(),":",c.toString(),": read: unknown escape sequence \\"+n+" in string"]),new y(c,d,e,b-e),"Error-GenericReadError")}}g+=n}f||(L=e+t.length,A(new types.Message([J,":",d.toString(),":",c.toString(),": read: expected a closing '\"'"]),new y(c,d,e,1),"Error-GenericReadError"));a=new P(new types.string(g));b++;m++;a.location=new y(c,d,e,b-e);
return a}function h(a,b){function c(a,b){a=new types.Message([J,":",w.toString(),":",(m-1).toString(),a]);A(a,new y(d,e,l,b.length+1),"Error-GenericReadError")}var d=m,e=w,l=b;b++;m++;if(b<a.length){var t=a.charAt(b).toLowerCase(),n=/^(((fl|fx|s|hash|hasheq)[[({])|((rx|px)#{0,1}"))/g.exec(a.slice(b));t=/^(!(?!\/)|reader|lang[\s]{0,1})/.exec(a.slice(b));var u=/^(c|C)(i|I|s|S)/.exec(a.slice(b)),M=/^([0-9]*)[[({]/g.exec(a.slice(b));if(n&&0<n[0].length){a=f(a,b+n[0].length-1);b=n[0].length;var h=n[0].replace(/[\(\[\{"|#"]/g,
"");switch(h){case "fl":h="flvectors";break;case "fx":h="fxvectors";break;case "s":h="structs";break;case "hash":case "hasheq":h="hashtables";break;case "px":case "rx":h="regular expressions";break;default:throw"IMPOSSIBLE: unsupportedMatch captured something it shouldn't: "+h;}M=new types.Message([J,":",w.toString(),":","0",": read-syntax: literal "+h+" not allowed"]);h=new Q(a,M,b);h.location=new y(d,e,l,n[0].length+a.location.span);return h}if(t&&0<t[0].length)c(": read: #"+t[0].trim()+" not enabled in the current context",
t[0]);else{if(u&&0<u[0].length)return X="cs"===u[0].toLowerCase(),m+=2,f(a,b+2);if(M&&0<M[0].length)return h=M[1]?parseInt(M[1]):"",n=h.toString().length,b+=n,m+=n,n=g(a,b),h=""===h?n.length:parseInt(M[1]),n.length>h&&(a=new types.Message(["read: vector length "+h+" is too small, ",n.length+" value"+(1<n.length?"s":"")," provided"]),A(a,new y(d,e,l,M[0].length))),b+=n.location.span,h=new P(new Vector(h,n)),h.location=new y(d,e,l,b-l),h;n=/^(hasheq|hash|fl|fx|\d+|true|false|[tfeibdox]|\<\<|[\\\"\%\:\&\|\;\!\`\,\']|)/i.exec(a.slice(b))[0];
M=a.charAt(b+n.length);t=n.charAt(0).toLowerCase();switch(t){case "\\":h=r(a,b-1);b+=h.location.span-1;break;case '"':c(": byte strings are not supported in WeScheme",'#"');case "%":h=E(a,b);h.val="#"+h.val;b+=h.location.span;break;case ":":h=E(a,b-1);M=new types.Message([J,":",w.toString(),":","0",": read-syntax: Keyword internment is not supported in WeScheme"]);h=new Q(h.val,M,h.location.span);b+=h.val.length-1;break;case "&":m++;a=f(a,b+1);n=new I("box");h=[n,a];b+=a.location.span+1;n.location=
new y(d,e,l,b-l);break;case "|":b--;h=p(a,b);b+=h.location.span+1;break;case ";":h=v(a,b+1);b+=h.location.span+1;break;case "!":h=z(a,b-1);b+=h.location.span;break;case "`":case ",":case "'":h=D(a,b);h.location.startChar--;h.location.span++;L=b+h.location.span;a=new types.Message([J,":",e.toString(),":",(m-1).toString()," read: WeScheme does not support the '#"+t+"' notation for ",","===t?"unsyntax":"'"===t?"syntax":"quasisyntax"]);A(a,h.location);break;case "<<":h=k(a,b-1);b+=h.location.span;break;
case "e":case "i":case "b":case "o":case "d":case "x":m--;h=E(a,b-1);b+=h.location.span-1;break;case "true":case "false":case "t":case "f":if(!O.exec(M)){h=new P("t"===t||"true"===n);b+=n.length;m+=n.length;break}default:L=b,a=new types.Message([J,":",w.toString(),":",(m-1).toString(),": read: bad syntax `#",n+M,"'"]),A(a,new y(d,e,l,(n+M).length+1),"Error-GenericReadError")}}}else L=b,A(new types.Message([J,":",w.toString(),":",(m-1).toString(),": read: bad syntax `#'"]),new y(d,e,l,b-l),"Error-GenericReadError");
h.location=new y(d,e,l,b-l);return h}function r(b,c){var d=m,e=w,f=c;c+=2;m++;for(var l="",t=!0,n;c<b.length&&"#\\"!==b.slice(c,c+2)&&(t||!/\s/.test(b.charAt(c))&&!a(b.charAt(c)));)t=!1,m++,l+=b.charAt(c++);b=/(backspace|tab|newline|space|vtab)[^a-zA-Z]*/i;t=b.exec(l);b.test(l)?(l="backspace"===l?"\b":"tab"===l?"\t":"newline"===l?"\n":"space"===l?" ":"vtab"===l?"\v":"Impossible: unknown special char was matched by special char!",c=f+2+t[1].length):/^[0-9].*/.test(l)&&F.test(l)&&F.exec(l)[0]===l&&
256>parseInt(F.exec(l)[0],8)&&31<parseInt(F.exec(l)[0],8)?(t=/[0-7]+/.exec(l)[0],l=String.fromCharCode(parseInt(t,8)),c=f+2+t.length):/[uU]/.test(l)&&(n="u"===l.charAt(0)?G:K)&&n.test(l.slice(1))?(t=n.exec(l.slice(1))[0],m+=t.length-l.length+1,l=String.fromCharCode(parseInt(t,16)),c=f+3+t.length):1===l.length||/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]$/.test(l.charAt(1))?(l=l.charAt(0),c=f+3):A(new types.Message([J,":",e.toString(),":",(d-1).toString(),": read: bad character constant: #\\",l]),new y(d-1,e,
f,c-f),"Error-GenericReadError");l=new P(new types["char"](l));l.location=new y(d,e,f,c-f);return l}function p(a,b){var c=m,d=w,e=b;b+=2;m+=2;for(var f="";b+1<a.length&&("|"!==a.charAt(b)||"#"!==a.charAt(b+1));)"\n"===a.charAt(b)&&(w++,m=0),f+=a.charAt(b),b++,m++;b+1>=a.length&&A(new types.Message(["read: Unexpected EOF when reading a multiline comment"]),new y(c,d,e,b-e));b++;m++;a=new B(f);a.location=new y(c,d,e,b-e);return a}function v(a,b){for(var c=m++,e=w,g=b,l;(b=d(a,b))&&b+1<a.length&&(l=
f(a,b))&&l instanceof B;)b=l.location.endChar;b+1>=a.length&&(L=b,A(new types.Message([J,":",e.toString(),":",(c-1).toString(),": read: expected a commented-out element for `#;' (found end-of-file)"]),new y(c-1,e,b-2,2),"Error-GenericReadError"));a=new B("("+l.toString()+")");b=l.location.endChar;a.location=new y(c,e,g,b-g);return a}function z(a,b){var c=m,d=w,e=b;b++;m++;for(var f="";b<a.length&&"\n"!==a.charAt(b);)f+=a.charAt(b),m++,b++;b>a.length&&(L=b,A(new types.Message(["read: Unexpected EOF when reading a line comment"]),
new y(c,d,e,b-e)));a=new B(f);a.location=new y(c,d,e,b+1-e);w++;m=0;return a}function D(a,b){function c(a){L=a+1;A(new types.Message([J,":",g.toString(),":",e.toString(),": read: expected an element for"+("'"==t?" quoting ":"`"==t?" quasiquoting ":","==t?" unquoting ":",@"==t?" unquoting ":""),t," (found end-of-file)"]),new y(e,g,l,t.length),"Error-GenericReadError")}var e=m,g=w,l=b,t=a.charAt(b),n="'"==t?new I("quote"):"`"==t?new I("quasiquote"):"";b+1>=a.length&&c(b);b++;m++;","==t&&("@"==a.charAt(b)?
(b++,m++,t+="@",n=new I("unquote-splicing")):n=new I("unquote"));for(n.location=new y(m-1,g,l,b-l);!u||u instanceof B;){b=d(a,b);try{var u=f(a,b)}catch(M){/read: \(found end-of-file\)/.test(M)&&c(b);if(u=/expected a .* to open ","(.)"/.exec(M))L=b+1,A(new types.Message([J,":",w.toString(),":",m.toString(),": read: unexpected `"+u[1]+"'"]),new y(m,w,b,1),"Error-GenericReadError");throw M;}b=u.location.end().startChar+1}b=[n,u];u=u.location.end().startChar+1-l;b.location=new y(e,g,l,u);return b}function E(a,
b){var c=m,d=w,e=b,f=/(\|(.|\n)*\||\\(.|\n)|[^\(\)\{\}\[\]\,\'\`\s\"\;])+/mg.exec(a.slice(b))[0],t=/\.*\\+$/.exec(f);t&&0<t[0].length%2&&(L=b=a.length,A(new types.Message([J,":",w.toString(),":",c.toString(),": read: EOF following `\\' in symbol"]),new y(c,d,e,b-e),"Error-GenericReadError"));b+=f.length;m+=f.length;t="";for(var n=0;n<f.length;n++)"\\"==f.charAt(n)&&n++,t+=f.charAt(n);t=t.split("|");if(0===t.length%2){L=a.length;var g=f.slice(0,f.length-(t[t.length-1].length+1)),u=e+g.length;m=c;for(n=
0;n<g.length;n++)"\n"===a.charAt(b)?(w++,m=0):m++;A(new types.Message([J,":",w.toString(),":",m.toString(),": read: unbalanced `|'"]),new y(m,w,u,a.length-u),"Error-GenericReadError")}a=t.reduce(function(a,b,c){return a+(c%2||X?b:b.toLowerCase())},"");"\n"===a&&(w++,m=0);n=/^$|[\(\)\{\}\[\]\,\'\`\s\"\\]/g;a=/^.*\\[\d]*.*|\|[\d]*\|/.test(f)||n.test(a)?"|"+a+"|":a;f=new I(a);if(1===t.length&&!/^[a-zA-Z\-\?]+$/.test(a))try{var h=jsnums.fromString(a,!0);if(h||0===h)h instanceof Object&&(h.stx=a,h.location=
new y(c,d,e,b-e)),f=new P(h)}catch(ca){L=b,h=new types.Message([J,":",d.toString(),":",c.toString(),": read: "+ca.message]),A(h,new y(c,d,e,b-e),"Error-GenericReadError")}f.stx=a;f.location=new y(c,d,e,b-e);return f}var B=plt.compiler.comment,P=plt.compiler.literal,I=plt.compiler.symbolExpr,Q=plt.compiler.unsupportedExpr,A=plt.compiler.throwError,R=/[(\u005B\u007B]/,u=/[)\u005D\u007D]/,O=/^[^(\u005B\u007B)\u005D\u007D\s]+/,C=/['`,]/,H=/^([0-9a-f]{1,2})/i,G=/^([0-9a-f]{1,4})/i,K=/^([0-9a-f]{1,6})/i,
U=/^([0-9a-f]{1,8})/i,F=/^([0-7]{1,3})/i,V,w,m,N,T,J,X,L,y=function(a,b,c,d,e){this.startCol=a;this.startRow=b;this.startChar=c;this.span=d;this.source=e||J;this.endCol=m;this.endRow=w;this.endChar=c+d;this.start=function(){return new y("","",this.startChar,1)};this.end=function(){return new y("","",this.startChar+this.span-1,1)};this.toString=function(){return"Loc("+this.startCol+", "+this.startRow+", "+(this.startChar+1)+","+this.span+")"};this.toVector=function(){return new types.vector(['"'+this.source+
'"',this.startChar+1,this.startRow,this.startCol,this.span])};this.toString=function(){return{line:this.startRow.toString(),id:this.source,span:this.span.toString(),offset:(this.startChar+1).toString(),column:this.startCol.toString()}}};Array.prototype.toString=function(){return this.join(" ")};plt.compiler.lex=function(a,b,c){var g=(new Date).getTime();try{var x=0;N=m=0;T=w=1;X=!0;J=b||"<definitions>";b=[];V=[];for(x=d(a,0);x<a.length;){var l=f(a,x);l instanceof B||b.push(l);x=d(a,l.location.startChar+
l.location.span)}b.location=new y(N,T,0,x,J);var t=b}catch(n){throw console.log("LEXING ERROR"),n;}a=(new Date).getTime();c&&(console.log("Lexed in "+Math.floor(a-g)+"ms"),console.log(t),console.log(e(t)));return t};plt.compiler.sexpToString=e})();plt.compiler.parse={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a){return a instanceof m}function b(a){return a instanceof Array&&1<=a.length}function c(a,b){a=a instanceof m?a.val:a;b=b instanceof m?b.val:b;return a===b}function d(a){return a.map(function(a){return p(a)?v(a):p(a)||K(a)||F(a)?K(a)?U(a):F(a)?V(a):q(new types.Message(["Not a Definition, Expression, Library Require, or Provide"]),a.location):z(a)})}function e(a){return 0===a.length?[]:b(a)?d(a):q(new types.Message(["The sexp is not a list of definitions or expressions: "+a]),
a.location)}function f(d){return b(d)&&a(d[0])&&c("define-struct",d[0])}function g(d){return b(d)&&a(d[0])&&c("define",d[0])}function k(d){return b(d)&&a(d[0])&&c("define-val",d[0])}function h(d){return b(d)&&a(d[0])&&c("define-fun",d[0])}function r(d){return b(d)&&a(d[0])&&c("define-values",d[0])}function p(a){return f(a)||g(a)||r(a)||k(a)||h(a)}function v(a){function b(a){2>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected the structure name after define-struct, but nothing's there"]),
a.location);a[1]instanceof m||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected the structure name after define-struct, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",a[1].location),", but nothing's there"]),a.location);a[2]instanceof Array||q(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",a[1].location),", but found ",new types.ColoredPart("something else",a[2].location)]),a.location);a[2].forEach(function(b){b instanceof m||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a field name, but found ",new types.ColoredPart("something else",b.location)]),a.location)});if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=1===
a[2].length?"field name":"field names",d=b.length+" extra "+(1===b.length?"part":"parts");q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected nothing after the ",new types.ColoredPart(c,a[2].location),", but found ",new types.MultiPart(d,b,!1)]),a.location)}return new da(H(a[1]),a[2].map(H),a)}function c(a){2>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found neither"]),a.location);3>a.length&&
q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found only ",new types.ColoredPart("one part",a[1].location)]),a.location);a[1]instanceof Array||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found ",new types.ColoredPart("something else",a[1].location)]),a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+(1===b.length?
"part":"parts");b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expects a list of variables and a body, but found ",new types.MultiPart(c,b,!1)]);q(b,a.location)}return new ha(a[1].map(H),z(a[2]),a)}function d(a){if(3!==a.length){var b=a.slice(1).map(function(a){return a.location}),c=4>a.length?" fewer than two":new types.MultiPart("more than two parts",b,!1);q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected exactly two parts for the definition: a name (or a function name and its variables) and an expression, but found",
c]),a.location)}3<a.length&&(b=a.slice(1).map(function(a){return a.location}),c=b.length+" parts",q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected exactly two parts, but found",new types.MultiPart(c,b,!1)]),a.location));if(a[1]instanceof Array)return 0===a[1].length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least a function name within ",new types.ColoredPart("the parentheses",a[1].location)]),a.location),a[1][0]instanceof m||
q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a function name after the open parenthesis but found ",new types.ColoredPart("something else",a[1][0].location)]),a.location),a[1].forEach(function(b){b instanceof m||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable name but found ",new types.ColoredPart("something else",b.location)]),a.location)}),3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body, but nothing's there"]),
a.location),b=a[1].slice(1).map(H),b.location=a[1].location,new ea(H(a[1][0]),b,z(a[2]),a);if(a[1]instanceof m)return 3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the variable ",new types.ColoredPart(a[1].val,a[1].location)," but nothing's there"]),a.location),new fa(H(a[1]),z(a[2]),a);q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a name (or a function name and its variables) "," and an expression, but found",
new types.ColoredPart("something else",a[1].location)]),a.location)}function e(a){if(3!==a.length){var b=a.slice(1).map(function(a){return a.location});b=4>a.length?" fewer than two":new types.MultiPart("more than two parts",b,!1);q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected exactly two parts for the value: a name and an expression, but found",b]),a.location)}if(a[1]instanceof m)return 3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),
": expected an expression after the name ",new types.ColoredPart(a[1].val,a[1].location)," but nothing's there"]),a.location),new fa(H(a[1]),z(a[2]),a);q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a name but found ",new types.ColoredPart("something else",a[1].location)]),a.location)}function n(a){if(3!==a.length){var b=a.slice(1).map(function(a){return a.location});b=4>a.length?" fewer than two":new types.MultiPart("more than two parts",b,!1);q(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected exactly two parts for the function: a header (function name and variables, in parentheses) and a body (any expression), but found",b]),a.location)}if(a[1]instanceof Array)return 0===a[1].length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least a function name within ",new types.ColoredPart("the parentheses",a[1].location)]),a.location),a[1][0]instanceof m||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a function name after the open parenthesis but found ",
new types.ColoredPart("something else",a[1][0].location)]),a.location),a[1].forEach(function(b){b instanceof m||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a variable name, but found ",new types.ColoredPart("something else",b.location)]),a.location)}),3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body after ",new types.ColoredPart("the header",a[1].location,!1),", but nothing's there"]),
a.location),b=a[1].slice(1).map(H),b.location=a[1].location,new ea(H(a[1][0]),b,z(a[2]),a);q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a header (function name and variables, in parentheses) and a body for the function"]),a.location)}var t=f(a)?b(a):g(a)?d(a):r(a)?c(a):k(a)?e(a):h(a)?n(a):q(new types.Message([": expected to find a definition, but found: "+a]),a.location);t.location=a.location;return t}function z(a){return b(a)?D(a):C(a)}function D(d){function e(a){c(a[0],
"unquote")&&q(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");c(a[0],"unquote-splicing")&&q(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");c(a[0],"else")&&q(new types.Message([new types.ColoredPart(a[0].val,a.location),": not allowed ",new types.ColoredPart("here",a.location),", because this is not a question in a clause"]),a.location);
return b(a)?new aa(z(a[0]),a.slice(1).map(z),a[0]):q(new types.Message(["function call sexp"]),a.location)}function f(a){1===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one variable (in parentheses) after lambda, but nothing's there"]),a.location);a[1]instanceof Array||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one variable (in parentheses) after lambda, but found ",new types.ColoredPart("something else",
a[1].location)]),a.location);a[1].forEach(function(b){b instanceof m||(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a list of variables after lambda, but found ",new types.ColoredPart("something else",b.location)]),q(b,a.location))});2===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression for the function body, but nothing's there"]),a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),
c=b.length+" extra "+(1===b.length?"part":"parts");b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only one expression for the function body, but found ",new types.MultiPart(c,b,!1)]);q(b,a.location)}b=a[1].map(H);b.location=a[1].location;return new l(b,z(a[2]),a[0])}function n(a){1===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one definition (in square brackets) after local, but nothing's there"]),a.location);a[1]instanceof
Array||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a collection of definitions, but given ",new types.ColoredPart("something else",a[1].location)]),a[1].location);a[1].forEach(function(b){p(b)||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a definition, but given ",new types.ColoredPart("something else",b.location)]),b.location)});2===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),
a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+(1===b.length?"part":"parts");q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}return new Y(a[1].map(v),z(a[2]),a[0])}function g(a){3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),a.location);a[1]instanceof
Array||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",a[1].location)]),a.location);a[1].forEach(function(b){G(b)||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",b.location)]),b.location)});2===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),
a.location);if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+(1===b.length?"part":"parts");q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}return new y(a[1].map(I),z(a[2]),a[0])}function x(a){1===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least one binding (in parentheses) after let, but nothing's there"]),a.location);
a[1]instanceof Array||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected sequence of key value pairs, but given ",new types.ColoredPart("something else",a[1].location)]),a[1].location);a[1].forEach(function(b){G(b)||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",b.location)]),b.location)});if(3<a.length){var b=a.slice(3).map(function(a){return a.location}),c=b.length+" extra "+
(1===b.length?"part":"parts");q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}2===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found none"]),a.location);return new X(a[1].map(I),z(a[2]),a)}function h(a){1===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected an expression after the bindings, but nothing's there"]),
a.location);if(!(a[1]instanceof Array)){var b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected sequence of key/value pairs, but given ",new types.ColoredPart("something else",a[1].location)]);q(b,a.location)}a[1].forEach(function(b){G(b)||q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",b.location)]),b.location)});2===a.length&&q(new types.Message([new types.ColoredPart(a[0].val,
a[0].location),": expected a single body, but found none"]),a.location);if(3<a.length){b=a.slice(3).map(function(a){return a.location});var c=b.length+" extra "+(1===b.length?"part":"parts");q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single body, but found ",new types.MultiPart(c,b,!1)]),a.location)}b=a[1].map(I);b.location=a[1].location;return new L(b,z(a[2]),a[0])}function k(a){4>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a test, a consequence, and an alternative, but all three were not found"]),
a.location);if(4<a.length){var b=a.slice(1).map(function(a){return a.location});q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected only a test, a consequence, and an alternative, ","but found ",new types.MultiPart("more than three of these",b,!1)]),a.location)}return new T(z(a[1]),z(a[2]),z(a[3]),a[0])}function W(a){function c(a){return b(a)?a.map(c):a instanceof Array&&0===a.length?a:C(a)}2>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but did not find one."]),
a.location);if(2<a.length){var d=a.slice(1).map(function(a){return a.location});q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",d,!1)]),a.location)}return new t(c(a[1]))}return function(){var b=d[0];a(b)?c("\u03bb",b)?b=f(d):c("lambda",b)?b=f(d):c("local",b)?b=n(d):c("letrec",b)?b=g(d):c("let",b)?b=x(d):c("let*",b)?b=h(d):c("cond",b)?b=B(d):c("case",b)?b=P(d):c("if",b)?b=k(d):c("begin",b)?(2>d.length&&
(b=new types.Message([new types.ColoredPart(d[0].val,d[0].location),": Inside a begin, expected to find a body, but nothing was found."]),q(b,d.location)),b=new J(d.slice(1).map(z),d[0])):c("and",b)?(3>d.length&&q(new types.Message([new types.ColoredPart(d[0].val,d[0].location),": expected at least 2 arguments, but given ",1===d.length?"0":new types.ColoredPart((d.length-1).toString(),d[1].location)]),d.location),b=new S(d.slice(1).map(z),d[0])):c("or",b)?(3>d.length&&q(new types.Message([new types.ColoredPart(d[0].val,
d[0].location),": expected at least 2 arguments, but given ",1===d.length?"0":new types.ColoredPart((d.length-1).toString(),d[1].location)]),d.location),b=new Z(d.slice(1).map(z),d[0])):b=c("when",b)?E(d):c("unless",b)?E(d):c("quote",b)?W(d):c("quasiquote",b)?u(d):c("unquote",b)?Q(d):c("unquote-splicing",b)?A(d):e(d):b=e(d);b.location=d.location;return b}()}function E(a){3>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at a test and at least one result after "+
a[0]+", but nothing's there"]),a.location);var b=a.slice(2),c=new ca(z(a[1]),e(b),a[0]);b.location=b[0].location;c.location=a.location;return c}function B(b){1===b.length&&q(new types.Message([new types.ColoredPart(b[0].val,b[0].location),": expected at least one clause after cond, but nothing's there"]),b.location);var d=[b[0].location,b.location.start(),b.location.end()];b.slice(1).forEach(function(a){var c=[a.location.start(),a.location.end()];a instanceof Array||q(new types.Message([new types.MultiPart(b[0].val,
d,!0),": expected a clause with a question and an answer, but found ",new types.ColoredPart("something else",a.location)]),a.location);0===a.length&&q(new types.Message([new types.MultiPart(b[0].val,d,!0),": expected a clause with a question and an answer, but found an ",new types.MultiPart("empty part",c,!0)]),a.location);1===a.length&&q(new types.Message([new types.MultiPart(b[0].val,d,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",c,!0)," with only ",
new types.MultiPart("one part",[a[0].location],!1)]),a.location);if(2<a.length){var e=a.map(function(a){return a.location}),f=e.length+" parts";q(new types.Message([new types.MultiPart(b[0].val,d,!0),": expected a clause with a question and an answer, but found ",new types.MultiPart("a clause",c,!0)," with ",new types.MultiPart(f,e,!1)]),a.location)}});var e=b.slice(1).length,f=b.slice(1).map(function(a){var b=z(a[0]),c=z(a[1]);c=new N(b,c);-1<plt.compiler.keywords.indexOf(b.val)&&"else"!==b.val&&
q(new types.Message([new types.ColoredPart(b.val,b.location),": expected an open parenthesis before ",b.val,", but found none"]),b.location);b.isClause=!0;c.location=a.location;return c});b.slice(1).forEach(function(f,n){a(f[0])&&c(f[0],"else")&&n<e-1&&q(new types.Message([new types.MultiPart("cond",d,!0),": ","found an ",new types.ColoredPart("else clause",f.location)," that isn't the last clause in its cond expression; there is ",new types.ColoredPart("another clause",b[n+2].location)," after it"]),
f.location)});return new ba(f,b[0])}function P(b){function d(b){return a(b[0])&&"else"===b[0].val}if(1===b.length){var e=new types.Message([new types.ColoredPart(b[0].val,b[0].location),": expected at least one clause after case, but nothing's there"]);q(e,b.location)}var f=[b[0].location,b.location.start(),b.location.end()];2===b.length&&(e=new types.Message([new types.MultiPart(b[0].val,f,!0),": expected a clause with at least one choice (in parentheses) and an answer after the expression, but nothing's there"]),
q(e,b.location));e=b.slice(2);e.forEach(function(a){var d=[a.location.start(),a.location.end()];if(!(a instanceof Array)){var e=new types.Message([new types.MultiPart(b[0].val,f,!0),": expected a clause with at least one choice (in parentheses), but found ",new types.ColoredPart("something else",a.location)]);q(e,b.location)}0===a.length&&(e=new types.Message([new types.MultiPart(b[0].val,f,!0),": expected at least one choice (in parentheses) and an answer, but found an ",new types.ColoredPart("empty part",
a.location)]),q(e,b.location));a[0]instanceof Array||a[0]instanceof m&&c(a[0],"else")||(e=new types.Message([new types.MultiPart(b[0].val,f,!0),": expected 'else', or at least one choice in parentheses, but found ",new types.ColoredPart("something else",a.location)]),q(e,b.location));1===a.length&&(e=new types.Message([new types.MultiPart(b[0].val,f,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",d,!0)," with only ",new types.ColoredPart("one part",
a[0].location)]),q(e,b.location));2<a.length&&(a=a.map(function(a){return a.location}),e=a.length+" parts",e=new types.Message([new types.MultiPart(b[0].val,f,!0),": expected only one expression for the answer in the case clause, but found a ",new types.MultiPart("clause",d,!0)," with ",new types.MultiPart(e,a,!1)]),q(e,b.location))});var n=e.length,l=e.map(function(a){var b=d(a)?a[0]:new t(a[0]),c=z(a[1]);c=new N(b,c);b.isClause=!0;c.location=a.location;return c});e.forEach(function(a,c){d(a)&&c<
n-1&&(a=new types.Message([new types.MultiPart("case",f,!0),": found an ",new types.ColoredPart("else clause",a.location),"that isn't the last clause in its case expression; there is ",new types.ColoredPart("another clause",b[c+2].location)," after it"]),q(a,b.location))});return new x(z(b[1]),l,b[0])}function I(a){if(G(a)){var b=new N(H(a[0]),z(a[1]));b.location=a.location;b.stx=a;return b}q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a sequence of key/value pairs, but given ",
new types.ColoredPart("something else",a[0].location)]),a.location)}function Q(a,b){if("undefined"===typeof b)q(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");else if(2!==a.length)q(new types.Message(["Inside an unquote, expected to find a single argument, but found "+(a.length-1)]),a.location);else{if(1===b)return b=new n(z(a[1])),b.location=a[1].location,b;if(1<b)return b=new n(R(a[1],b-1)),b.location=a[1].location,
b;q(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),a.location)}}function A(a,b){if("undefined"===typeof b)q(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),a.location,"Error-GenericSyntacticError");else if(2!==a.length)q(new types.Message(["Inside an unquote-splicing, expected to find a single argument, but found "+(a.length-1)]),a.location);else{if(1===b)return b=new M(z(a[1])),b.location=a[1].location,
b;if(1<b)return b=new M(R(a[1],b-1)),b.location=a[1].location,b;q(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),a.location)}}function R(a,c){if(b(a)&&"unquote"===a[0].val)return Q(a,c);if(b(a)&&"unquote-splicing"===a[0].val)return A(a,c);if(b(a)&&"quasiquote"===a[0].val)return u(a,c);if(b(a)){var d=a.map(function(a){return R(a,c)});d.location=a.location;return d}return 0===c?z(a):function(){var b=new t(a);b.location=a.location;return b}()}function u(a,
d){d="undefined"===typeof d?0:d;2>a.length&&q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but did not find one "]),a.location);if(2<a.length){var e=a.slice(1).map(function(a){return a.location});q(new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",e,!1)]),a.location)}b(a[1])&&c(a[1][0],"unquote-splicing")&&q(new types.Message(["misuse of ,@ or `unquote-splicing' within a quasiquoting backquote"]),
a.location);d=R(a[1],d+1);d.location=a[1].location;d=new W(d);d.location=a.location;return d}function O(a){function b(){var b=new w(0);b.location=a.location;return b}var c=a.val,e=d(c.elts.filter(function(a){return void 0!==a})),f=0===e.length?b():e[e.length-1];e=c.elts.map(function(a){return void 0===a?f:z(a)});c=new m("vector");e=new aa(c,e);c.location=e.location=a.location;return e}function C(b){var d=b instanceof ka?b:types.isVector(b.val)?O(b):a(b)?b:b instanceof w?b:c("quote",b)?new t(b):c("empty",
b)?new aa(new m("list"),[]):new aa(null,[]);d.location=b.location;return d}function H(b){return a(b)?b:q(new types.Message(["ID"]),b.location)}function G(a){return b(a)&&2===a.length}function K(d){return b(d)&&a(d[0])&&c(d[0],"require")}function U(a){if(2>a.length){var b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a module name after `require', but found nothing"]);q(b,a.location)}a[1]instanceof Array&&c(a[1][0],"lib")?(3>a[1].length&&(b=a[1].slice(1).length,b+=1===
b?" part":" parts",b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected at least two strings after ",new types.ColoredPart("lib",a[1][0].location)," but found only ",b]),q(b,a.location)),a[1].slice(1).forEach(function(b){types.isString(b.val)||(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a string for a library collection, but found ",new types.ColoredPart("something else",str.location)]),q(b,a.location))})):a[1]instanceof Array&&c(a[1][0],
"planet")?(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": Importing PLaneT pacakges is not supported at this time"]),q(b,a.location)):a[1]instanceof m||types.isString(a[1].val)||(b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": expected a module name as a string or a `(lib ...)' form, but found ",new types.ColoredPart("something else",a[1].location)]),q(b,a.location));b=new ia(a[1],a[0]);b.location=a.location;return b}function F(d){return b(d)&&a(d[0])&&
c(d[0],"provide")}function V(a){var b=a.slice(1).map(function(b){if(b instanceof m||b instanceof Array&&2==b.length&&b[0]instanceof m&&c(b[0],"struct-out")&&b[1]instanceof m)return b;b=new types.Message([new types.ColoredPart(a[0].val,a[0].location),": I don't recognize the syntax of this ",new types.ColoredPart("clause",b.location)]);q(b,a.location)});b=new ja(b,a[0]);b.location=a.location;return b}var w=plt.compiler.literal,m=plt.compiler.symbolExpr,N=plt.compiler.couple,T=plt.compiler.ifExpr,J=
plt.compiler.beginExpr,X=plt.compiler.letExpr,L=plt.compiler.letStarExpr,y=plt.compiler.letrecExpr,Y=plt.compiler.localExpr,S=plt.compiler.andExpr,Z=plt.compiler.orExpr,ba=plt.compiler.condExpr,x=plt.compiler.caseExpr,l=plt.compiler.lambdaExpr,t=plt.compiler.quotedExpr,n=plt.compiler.unquotedExpr,W=plt.compiler.quasiquotedExpr,M=plt.compiler.unquoteSplice,aa=plt.compiler.callExpr,ca=plt.compiler.whenUnlessExpr,ea=plt.compiler.defFunc,fa=plt.compiler.defVar,ha=plt.compiler.defVars,da=plt.compiler.defStruct,
ia=plt.compiler.requireExpr,ja=plt.compiler.provideStatement,ka=plt.compiler.unsupportedExpr,q=plt.compiler.throwError;plt.compiler.parse=function(a,b){var c=(new Date).getTime();try{var d=e(a);d.location=a.location}catch(la){throw console.log("PARSING ERROR"),la;}a=(new Date).getTime();b&&(console.log("Parsed in "+Math.floor(a-c)+"ms"),console.log(d));return d}})();plt.compiler.topLevelModules={};plt.compiler.knownModules={};plt.compiler.knownCollections={};window.plt=window.plt||{};
plt.compiler=plt.compiler||{};
(function(){function a(a){return function(b){b[3]=b[3]||[];b[4]=b[4]||!1;b[5]=b[5]||!1;return new c(b[0],a,b[1],b[2],b[3],b[4],b[5])}}var b=plt.compiler.moduleBinding,c=plt.compiler.functionBinding,d=plt.compiler.constantBinding,e=new b("moby/runtime/kernel/misc",[["verify-boolean-branch-value",2],["throw-cond-exhausted-error",1],["'check-operator-is-function",3],["print-values",0]].map(a('"moby/runtime/kernel/misc"'))),f=new b("moby/foreign",[["get-js-object",2,!1,["android.permission.FOREIGN-FUNCTION-INTERFACE"]]].map(a('"moby/foreign"'))),g=
new b("world-effects",[["make-effect:none",0,!1],["make-effect:beep",0,!1,["android.permission.VIBRATE"]],["make-effect:play-dtmf-tone",2,!1],["make-effect:send-sms",2,!1,["android.permission.SEND-SMS"]],["make-effect:play-sound",1,!1,["android.permission.INTERNET"]],["make-effect:stop-sound",1,!1],["make-effect:pause-sound",1,!1],["make-effect:set-sound-volume",1,!1],["make-effect:set-beep-volume",1,!1],["make-effect:raise-sound-volume",0,!1],["make-effect:lower-sound-volume",1,!1],["make-effect:set-wake-lock",
1,!1,["android.permission.WAKE-LOCK"]],["make-effect:release-wake-lock",1,!1,["android.permission.WAKE-LOCK"]],["make-effect:pick-playlist",1,!1],["make-effect:pick-random",2,!1]].map(a('"moby/world-effects"'))),k=new b("world-config",[["on-tick",1,!0],["initial-effect",1,!1],["on-key",1,!1],["on-key!",2,!1],["on-mouse",1,!1],["on-tap",1,!1],["on-tilt",1,!1],["on-redraw",1,!1],["to-draw",1,!1],["on-draw",2,!1],["stop-when",1,!1]].map(a('"moby/world-handlers"'))),h=[["START",14,!1],["test-frame",1,
!1],["sine",1,!1],["cosine",1,!1],["tangent",1,!1]],r=new b("bootstrap/bootstrap-teachpack",h.map(a('"bootstrap/bootstrap-teachpack"'))),p=new b("bootstrap2011/bootstrap-teachpack",h.map(a('"bootstrap2011/bootstrap-teachpack"'))),v=new b("bootstrap2012/bootstrap-teachpack",h.map(a('"bootstrap2012/bootstrap-teachpack"'))),z=new b("bootstrap2012/bootstrap-tilt-teachpack",h.map(a('"bootstrap2012/bootstrap-tilt-teachpack"'))),D=new b("bootstrap2014/bootstrap-teachpack",h.map(a('"bootstrap2014/bootstrap-teachpack"'))),
E=new b("bootstrap2014/bootstrap-tilt-teachpack",h.map(a('"bootstrap2014/bootstrap-tilt-teachpack"'))),B=new b("bootstrap2015/bootstrap-teachpack",h.map(a('"bootstrap2015/bootstrap-teachpack"')));h=new b("bootstrap2015/bootstrap-tilt-teachpack",h.map(a('"bootstrap2015/bootstrap-tilt-teachpack"')));var P=new b("bootstrap/cage-teachpack",[["start",1,!1]].map(a('"bootstrap/cage-teachpack"'))),I=new b("bootstrap2011/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2011/cage-teachpack"'))),Q=new b("bootstrap2012/cage-teachpack",
[["start",1,!1]].map(a('"bootstrap2012/cage-teachpack"'))),A=new b("bootstrap2014/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2014/cage-teachpack"')));cageTeachpack2015=new b("bootstrap2015/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2015/cage-teachpack"')));var R=new b("bootstrap2020/boolean-teachpack",[["start",1,!1]].map(a('"bootstrap2020/boolean-teachpack"'))),u=new b("bootstrap/function-teachpack",[["start",1,!1]].map(a('"bootstrap/function-teachpack"'))),O=new b("bootstrap2011/function-teachpack",
[["start",1,!1]].map(a('"bootstrap2011/function-teachpack"'))),C=new b("bootstrap2012/function-teachpack",[["start",1,!1]].map(a('"bootstrap2012/function-teachpack"'))),H=new b("bootstrap2014/function-teachpack",[["start",1,!1]].map(a('"bootstrap2014/function-teachpack"'))),G=new b("bootstrap2015/function-teachpack",[["start",1,!1]].map(a('"bootstrap2015/function-teachpack"'))),K=new b("location",[["get-latitude",0,!1,["android.permission.LOCATION"]],["get-longitude",0,!1,["android.permission.LOCATION"]],
["get-altitude",0,!1,["android.permission.LOCATION"]],["get-bearing",0,!1,["android.permission.LOCATION"]],["get-speed",0,!1,["android.permission.LOCATION"]],["location-distance",0,!1,["android.permission.LOCATION"]]].map(a('"moby/geolocation"'))),U=new b("tilt",[["get-x-acceleration",0,!1,["android.permission.TILT"]],["get-y-acceleration",0,!1,["android.permission.TILT"]],["get-z-acceleration",0,!1,["android.permission.TILT"]],["get-azimuth",0,!1,["android.permission.TILT"]],["get-pitch",0,!1,["android.permission.TILT"]],
["get-roll",0,!1,["android.permission.TILT"]]].map(a('"moby/tilt"'))),F=new b("telephony",[["get-signal-strength",0,!1,["android.permission.TELEPHONY"]]].map(a('"moby/net"'))),V=new b("net",[["get-url",1,!1,["android.permission.INTERNET"]]].map(a('"moby/net"'))),w=new b("parser",[["xml->s-sexp",1,!1]].map(a('"moby/parser"'))),m=new b("jsworld",[["js-big-bang",1,!1],["big-bang",1,!1],["js-div",0,!1],["js-p",0,!1],["js-button",2,!1],["js-button!",2,!1],["js-node",1,!1],["js-text",1,!1],["js-select",
2,!1],["js-img",1,!1,["android.permission.INTERNET"]]].map(a('"moby/jsworld"')));g=new b("world",k.bindings.concat(g.bindings,"key=? play-sound animate big-bang make-color color? color-red color-green color-blue color-alpha empty-scene empty-image scene+line put-image translate place-image place-image/align circle star polygon radial-star star-polygon nw:rectangle rectangle regular-polygon rhombus square triangle triangle/sas triangle/sss triangle/ass triangle/ssa triangle/aas triangle/asa triangle/saa right-triangle isosceles-triangle ellipse line add-line add-polygon overlay overlay/xy overlay/align underlay underlay/xy underlay/align beside beside/align above above/align rotate scale scale/xy dilate crop frame flip-horizontal flip-vertical reflect-x reflect-y text text/font video/url bitmap/url image-url image? image=? image-width image-height mouse-event? mouse=? image->color-list color-list->image color-list->bitmap image-baseline mode? image-color? name->color x-place? y-place? angle? side-count? step-count?".split(" ").map(function(a){var b=
-1<["video/url","bitmap/url","image-url"].indexOf(a)?["android.permission.INTERNET"]:[];return new d(a,'"moby/world"',b,!1)})));b=new b("moby/topLevel",[["<",2,!0],["<=",2,!0],["=",2,!0],[">",2,!0],[">=",2,!0],["<>",2,!0],["=~",3],["number->string",1],["even?",1],["odd?",1],["positive?",1],["negative?",1],["number?",1],["rational?",1],["quotient",2],["remainder",2],["numerator",1],["denominator",1],["integer?",1],["real?",1],["abs",1],["acos",1],["add1",1],["angle",1],["asin",1],["atan",1,!0],["ceiling",
1],["complex?",1],["conjugate",1],["cos",1],["cosh",1],["denominator",1],["even?",1],["exact->inexact",1],["exact?",1],["exp",1],["expt",2],["floor",1],["gcd",1,!0],["imag-part",1],["inexact->exact",1],["inexact?",1],["integer->char",1],["integer-sqrt",1],["integer?",1],["lcm",1,!0],["log",1],["magnitude",1],["make-polar",2],["make-rectangular",2],["max",1,!0],["min",1,!0],["modulo",2],["negative?",1],["number?",1],["numerator",1],["odd?",1],["positive?",1],["random",1],["rational?",1],["real-part",
1],["real?",1],["round",1],["sgn",1],["sin",1],["sinh",1],["sqr",1],["sqrt",1],["nth-root",2],["sub1",1],["tan",1],["zero?",1],["+",0,!0],["-",1,!0],["*",0,!0],["/",1,!0],["not",1],["false?",1],["boolean?",1],["boolean=?",2],["symbol->string",1],["symbol=?",2],["symbol?",1],["append",0,!0],["assq",2],["assv",2],["assoc",2],["caaar",1],["caadr",1],["caar",1],["cadar",1],["cadddr",1],["caddr",1],["cadr",1],["car",1],["cddar",1],["cdddr",1],["cddr",1],["cdr",1],["cdaar",1],["cdadr",1],["cdar",1],["cons?",
1],["list?",1],["cons",2],["empty?",1],["length",1],["list",0,!0],["list*",1,!0],["range",3],["list-ref",2],["remove",2],["remove-all",2],["member",2],["member?",2],["memq",2],["memv",2],["null?",1],["pair?",1],["rest",1],["reverse",1],["first",1],["second",1],["third",1],["fourth",1],["fifth",1],["sixth",1],["seventh",1],["eighth",1],["make-list",2],["box",1],["unbox",1],["set-box!",2],["box?",1],["make-posn",2],["posn-x",1],["posn-y",1],["posn?",1],["char->integer",1],["char-alphabetic?",1],["char-ci<=?",
2,!0],["char-ci<?",2,!0],["char-ci=?",2,!0],["char-ci>=?",2,!0],["char-ci>?",2,!0],["char-downcase",1],["char-lower-case?",1],["char-numeric?",1],["char-upcase",1],["char-upper-case?",1],["char-whitespace?",1],["char<=?",2,!0],["char<?",2,!0],["char=?",2,!0],["char>=?",2,!0],["char>?",2,!0],["char?",1],["format",1,!0],["list->string",1],["make-string",2],["replicate",2],["string",0,!0],["string->list",1],["string->number",1],["string->symbol",1],["string-alphabetic?",1],["string-append",0,!0],["string-contains?",
2],["string-ci<=?",2,!0],["string-ci<?",2,!0],["string-ci=?",2,!0],["string-ci<>?",2,!0],["string-ci>=?",2,!0],["string-ci>?",2,!0],["string-copy",1],["string-length",1],["string-lower-case?",1],["string-numeric?",1],["string-ref",2],["string-upper-case?",1],["string-whitespace?",1],["string<=?",2,!0],["string<?",2,!0],["string=?",2,!0],["string<>?",2,!0],["string>=?",2,!0],["string>?",2,!0],["string?",1],["substring",3],["string-ith",2],["int->string",1],["string->int",1],["explode",1],["implode",
1],["eof-object?",1],["=~",3],["eq?",2],["equal?",2],["equal~?",3],["eqv?",2],["error",2],["identity",1],["struct?",1],["current-seconds",0],["andmap",1,!0],["apply",2,!0],["argmax",2],["argmin",2],["build-list",2],["build-string",2],["compose",0,!0],["filter",2],["foldl",2,!0],["foldr",2,!0],["map",1,!0],["for-each",1,!0],["memf",2],["ormap",1,!0],["procedure?",1],["quicksort",2],["sort",2],["void",0,!0],["xml->s-exp",1],["build-vector",2],["make-vector",1,!0],["vector",0,!0],["vector-length",1],
["vector-ref",2],["vector-set!",3],["vector->list",1],["list->vector",1],["vector?",1],["printf",1,!0],["display",1],["write",1],["newline",0],["call/cc",1],["procedure-arity",1],["check-expect",2],["EXAMPLE",2],["check-within",3],["check-error",2],["make-hasheq",0],["make-hash",0],["hash-set!",3],["hash-ref",3],["hash-remove!",2],["hash-map",2],["hash-for-each",2],["hash?",1],["raise",1],["undefined?",1],["values",0,!0],["make-struct-type",4,!0],["make-struct-field-accessor",2,!0],["make-struct-field-mutator",
2,!0],["current-continuation-marks",0,!1],["continuation-mark-set->list",2,!1],["scheme->prim-js",1,!1],["prim-js->scheme",1,!1],["procedure->cps-js-fun",1,!1],["procedure->void-js-fun",1,!1],["js-===",2,!1],["js-get-named-object",1,!1],["js-get-field",2,!0],["js-set-field!",3,!1],["js-typeof",1,!1],["js-instanceof",2,!1],["js-call",2,!0],["js-new",1,!0],["js-make-hash",0,!0],["make-world-config",2,!0],["make-bb-info",2,!1],["bb-info?",1,!1],["bb-info-change-world",1,!1],["bb-info-toplevel-node",
1,!1],["make-effect-type",4,!0],["effect?",1,!1],["world-with-effects",2,!1],["make-render-effect-type",4,!0],["render-effect-type?",1],["render-effect?",1],["make-render-effect-type",4,!0],["values",0,!0],["sleep",0,!0],["current-inexact-milliseconds",0,!1],["make-exn",2,!1],["exn-message",1,!1],["exn-continuation-marks",1,!1]].map(a('"moby/toplevel"')));plt.compiler.topLevelModules=[b,e,,m,g];plt.compiler.knownCollections="bootstrap bootstrap2011 bootstrap2012 bootstrap2014 bootstrap2015 bootstrap2020".split(" ");
plt.compiler.knownModules=[e,m,f,g,r,p,v,D,B,z,E,h,P,I,Q,A,cageTeachpack2015,R,u,O,C,H,G,K,U,F,V,w,b]})();plt.compiler.desugar={};plt.compiler.analyze={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(a,b,c){var d={};a.forEach(function(a){a instanceof p?d[a.val]?y(new types.Message([new types.ColoredPart(b.toString(),b.location),": found ",new types.ColoredPart("a variable",a.location)," that is already used ",new types.ColoredPart("here",d[a.val].location)]),a.location):d[a.val]=a:y("expected identifier "+a.val,a.location)})}function b(a,b){b=plt.compiler.defaultModuleResolver(b);var c=(new plt.compiler.emptyEnv).extendEnv_moduleBinding(b);[a.func].concat(a.args).forEach(function(a){a.context=
c});return a}function c(a,c,d){a=new r(new types.string(a.toString()));var e=new p("verify-boolean-branch-value");a=new H(a);c=new H(new r(c.toVector()));var f=new H(new r(d.location.toVector())),t=new F(e,[a,c,d,f]);t.location=e.location=d.location;a.location=c.location=f.location=d.location;b(t,"moby/runtime/kernel/misc");return t}function d(a,c,d){c=[[],c||new plt.compiler.pinfo];c=a.reduce(function(a,c){var e=c.desugar(a[1]);if(plt.compiler.isExpression(c)&&d){c=new p("print-values");var f=new F(c,
[e[0]]);c.location=f.location=e[0].location;e[0]=f;b(f,"moby/runtime/kernel/misc")}e[0].length?a[0]=a[0].concat(e[0]):a[0].push(e[0]);return[a[0],e[1]]},c);c[0].location=a.location;return c}function e(a,b,c){var d="undefined"!=typeof a.location?a.location:a instanceof Array&&"undefined"!=typeof a[0].location?a[0].location:y(types.Message(["ASSERTION FAILURE: couldn't find a usable location"]),new Location(0,0,0,0));a=a.map(function(a){if(0===c&&a instanceof U)a=a.desugar(b,c);else{var f=a instanceof
Array?e(a,c,c)[0]:a.desugar(b,c)[0];a=new p("list");f=new F(a,[f]);a.parent=f;f.location=a.location=d;a=[f,b]}return a[0]});var f=new p("append");f.location=d;a=new F(f,a);a.location=d;return[a,b]}function f(a,b,c,d,e){return new Z(a,b,c,d,[],!1,e)}function g(a){this.symbl=a}function k(a,b){var c=b.env,d=c.bindings.keys(),e=types.makeLowLevelEqHash();d.forEach(function(a){e.put(a,c.bindings.get(a))});d=new plt.compiler.env(e);d=a.args.reduce(function(a,b){return a.extend(new S(b.val,!1,[],b.location))},
d);b.env=d;b=a.body.analyzeUses(b,d);b.env=c;return b}function h(a,b){b=function(a,b){return a.reduce(function(a,b){return b.collectDefinitions(a)},b)}(a,b);b=function(a,b){return a.reduce(function(a,b){return b.collectProvides(a)},b)}(a,b);return function(a,b){return a.reduce(function(a,b){return b.analyzeUses(a,a.env)},b)}(a,b)}var r=plt.compiler.literal,p=plt.compiler.symbolExpr,v=plt.compiler.Program,z=plt.compiler.couple,D=plt.compiler.ifExpr,E=plt.compiler.beginExpr,B=plt.compiler.letExpr,P=
plt.compiler.letStarExpr,I=plt.compiler.letrecExpr,Q=plt.compiler.localExpr,A=plt.compiler.andExpr,R=plt.compiler.orExpr,u=plt.compiler.condExpr,O=plt.compiler.caseExpr,C=plt.compiler.lambdaExpr,H=plt.compiler.quotedExpr,G=plt.compiler.unquotedExpr,K=plt.compiler.quasiquotedExpr,U=plt.compiler.unquoteSplice,F=plt.compiler.callExpr,V=plt.compiler.whenUnlessExpr,w=plt.compiler.defFunc,m=plt.compiler.defVar,N=plt.compiler.defVars,T=plt.compiler.defStruct,J=plt.compiler.requireExpr,X=plt.compiler.provideStatement,
L=plt.compiler.unsupportedExpr,y=plt.compiler.throwError,Y=plt.compiler.structBinding,S=plt.compiler.constantBinding,Z=plt.compiler.functionBinding,ba=plt.compiler.moduleBinding;v.prototype.desugar=function(a){return[this,a]};w.prototype.desugar=function(b){a([this.name].concat(this.args),this.stx[0],this.location);this.args.forEach(function(a){a instanceof p||y(new types.Message([new types.ColoredPart(this.stx.val,this.stx.location),": expected a variable but found ",new types.ColoredPart("something else",
a.location)]),sexp.location)});b=this.body.desugar(b);var c=new w(this.name,this.args,b[0],this.stx);c.location=this.location;return[c,b[1]]};m.prototype.desugar=function(a){if(this.expr instanceof C){var b=new w(this.name,this.expr.args,this.expr.body,this.stx);b.location=this.location;return b.desugar(a)}a=this.expr.desugar(a);b=new m(this.name,a[0],this.stx);b.location=this.location;return[b,a[1]]};N.prototype.desugar=function(a){a=this.expr.desugar(a);var b=new N(this.names,a[0],this.stx);b.location=
this.location;return[b,a[1]]};T.prototype.desugar=function(a){var b=this,c=["make-"+this.name.val,this.name.val+"?",this.name.val+"-ref",this.name.val+"-set!"].map(function(a){return new p(a)}),d=new p("make-struct-type"),e=[new H(new p(this.name.val)),new r(!1),new r(this.fields.length),new r(0)],f=new F(d,e);[f,d].concat(c,e).forEach(function(a){a.location=b.location});c=new N([this.name].concat(c),f,this.stx);var g=[c];c.location=this.location;this.fields.forEach(function(a,c){var d=new p("make-struct-field-accessor");
c=[new p(b.name.val+"-ref"),new r(c),new H(new p(a.val))];var e=new F(d,c),f=new p(b.name.val+"-"+a.val),n=new m(f,e);[n,d,e,f].concat(c).forEach(function(b){b.location=a.location});g.push(n)});return[g,a]};E.prototype.desugar=function(a){a=d(this.exprs,a);var b=new E(a[0],this.stx);b.location=this.location;return[b,a[1]]};C.prototype.desugar=function(b){this.stx&&a(this.args,this.stx,this.location);b=this.body.desugar(b);var c=new C(this.args,b[0],this.stx);c.location=this.location;return[c,b[1]]};
Q.prototype.desugar=function(a){var b=d(this.defs,a);a=this.body.desugar(b[1]);b=new Q(b[0],a[0],this.stx);b.location=this.location;return[b,a[1]]};F.prototype.desugar=function(a){this.func||y(new types.Message([new types.ColoredPart("( )",this.location),": expected a function, but nothing's there"]),this.location);a=d([this.func].concat(this.args),a);var b=new F(a[0][0],a[0].slice(1),this.stx);b.location=this.location;return[b,a[1]]};D.prototype.desugar=function(a){a=d([this.predicate,this.consequence,
this.alternative],a);var b=c(this.stx,this.stx.location,a[0][0]);b=new D(b,a[0][1],a[0][2],this.stx);b.location=this.location;return[b,a[1]]};V.prototype.desugar=function(a){var b=new E(this.exprs,this.stx),c=new p("void"),e=new F(c,[],this.stx),f="when"===this.stx.val?b:e,g="when"===this.stx.val?e:b;b.location=this.exprs.location;c.location=e.location=this.location;a=d([this.predicate,f,g],a);b=new D(a[0][0],a[0][1],a[0][2],this.stx);b.location=this.location;return[b,a[1]]};I.prototype.desugar=function(a){a=
(new Q(this.bindings.map(function(a){var b=new m(a.first,a.second,a.stx);b.location=a.location;return b}),this.body,this.stx)).desugar(a);a[0].location=this.location;return a};B.prototype.desugar=function(a){var b=this.bindings.map(function(a){return a.first}),c=this.bindings.map(function(a){return a.second});b=new C(b,this.body,this.stx);c=new F(b,c);b.location=c.location=this.location;return c.desugar(a)};P.prototype.desugar=function(a){function b(a,b){a=new B([b],a,b.stx);a.location=b.location;
return a}return 0===this.bindings.length?this.body.desugar(a):this.bindings.reduceRight(b,this.body).desugar(a)};u.prototype.desugar=function(a){var c=new p("throw-cond-exhausted-error"),d=new H(new r(this.location.toVector())),e=b(new F(c,[d]),"moby/runtime/kernel/misc");(new p("if")).location=this.stx.location;e.location=c.location=d.location=this.location;for(c=this.clauses.length-1;-1<c;c--)this.clauses[c].first instanceof p&&"else"===this.clauses[c].first.val&&(this.clauses[c].first.val="true"),
e=new D(this.clauses[c].first,this.clauses[c].second,e,this.stx),e.location=this.location;return e.desugar(a)};O.prototype.desugar=function(a){var b=this,c=new p("if");c.location=b.location;a=a.gensym("val");var d=a[1],e=a[0].gensym("x");a=e[0];var f=e[1],g=new p("void"),u=[d,f,g];e=this.clauses;var h=e[this.clauses.length-1];h.first instanceof p&&"else"===h.first.val?(g=h.second,e.pop()):(g=new F(g,[],b.stx),g.location=b.location);h=new p("equal?");var k=new F(h,[f,d],c),x=new C([f],k,c);u=u.concat([h,
k,x]);d=new z(d,this.expr);e=e.reduceRight(function(a,d){var e=new p("ormap"),f=new F(e,[x,d.first],b.stx);a=new D(f,d.second,a,c);u=u.concat([e,f,d.first,a]);return a},g);e=new B([d],e,c);u=u.concat([d,e]);u.forEach(function(a){a.location=b.location});return e.desugar(a)};A.prototype.desugar=function(a){function b(a){var d=c(e.stx,e.stx.location,a[0]),g=2<a.length?b(a.slice(1)):c(e.stx,e.stx.location,a[1]);a=new r(!1);d=new D(d,g,a,f);[a,f,d].forEach(function(a){return a.location=e.location});return d}
var e=this,f=new p("if");a=d(this.exprs,a);var g=a[0];a=a[1];g=b(g);g.location=e.location;return[g,a]};R.prototype.desugar=function(a){function b(a,d){var g=a[0];d=d.gensym("tmp");var n=d[1],t=new p("if");n.notOriginalSource=!0;g.stx&&"if"!==g.stx.val&&(t.location=g.location,g.stx=t);d=d[0];g=new z(n,c(e.stx,e.stx.location,g));2==a.length?a=c(f,e.stx.location,a[1]):(d=b(a.slice(1),d),a=d[0],d=d[1]);a=new D(n,n,a,new p("if"));t=new B([g],a,f);[f,n,g,a,a.stx,t].forEach(function(a){return a.location=
e.location});return t.desugar(d)}var e=this,f=new p("or");a=d(this.exprs,a);var g=a[0];a=a[1];return b(g,a)};H.prototype.desugar=function(a){"undefined"===typeof this.location&&y(new types.Message(["ASSERTION ERROR: Every quotedExpr should have a location"]),loc);return function(a,b){return function(c){if(c instanceof F||c instanceof H||c instanceof L)return c.desugar(a);if(c instanceof p||c instanceof r||c instanceof Array)return c=new H(c),c.location=b,[c,a];y(new types.Message(["ASSERTION ERROR: Found an unexpected item in a quotedExpr"]),
b)}}(a,this.location)(this.val)};G.prototype.desugar=function(a,b){if("undefined"===typeof b)y(new types.Message(["misuse of a ', not under a quasiquoting backquote"]),this.location);else{if(1===b)return this.val.desugar(a);if(1<b){var c=this.val instanceof Array?e(this.val,a,b-1)[0]:this.val.desugar(a,b-1)[0];b=new H(new p("unquote"));var d=new p("list");c=[b,c];var f=new F(d,c);b.location=this.location;b.parent=c;d.location=this.location;d.parent=f;f.location=this.location;return[f,a]}y(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location)}};U.prototype.desugar=function(a,b){if("undefined"===typeof b)y(new types.Message(["misuse of a ,@, not under a quasiquoting backquote"]),this.location);else{if(1===b)return this.val.desugar(a);if(1<b){var c=this.val instanceof Array?e(this.val,a,b-1)[0]:this.val.desugar(a,b-1)[0];b=new H(new p("unquote-splicing"));var d=new p("list");c=[b,c];var f=new F(d,c);b.location=this.location;b.parent=c;d.location=this.location;d.parent=f;f.location=this.location;return[f,a]}y(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location)}};K.prototype.desugar=function(a,b){b="undefined"===typeof b?0:b;if(0<=b)var c=this.val instanceof Array?e(this.val,a,b+1)[0]:this.val.desugar(a,b+1)[0];else y(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location);if(0==b)return[c,a];b=new H(new p("quasiquote"));var d=[b,c],f=new p("list"),g=new F(f,d);b.parent=d;b.location=this.location;c.parent=d;f.parent=g;f.location=this.location;g.location=this.location;return[g,a]};p.prototype.desugar=
function(a){if(!this.isClause&&"else"===this.val){var b=this.parent&&this.parent[0]===this?this.parent.location:this.location;y(new types.Message([new types.ColoredPart(this.val,b),": not allowed ",new types.ColoredPart("here",b),", because this is not a question in a clause"]),b)}this.parent&&this.parent[0]!==this&&"define"===this.val&&(b=new types.Message([new types.ColoredPart(this.val,this.location),": not allowed inside an expression"]),y(b,this.location));!this.parent&&-1<plt.compiler.keywords.indexOf(this.val)&&
"else"!==this.val&&y(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);"."===this.val&&(b=new types.Message([this.location.source,":",this.location.startRow.toString(),":",this.location.startCol.toString(),": read: '.' is not supported as a symbol in WeScheme"]),y(b,this.location,"Error-GenericReadError"));return[this,a]};L.prototype.desugar=function(a){this.location.span=this.errorSpan;y(this.errorMsg,
this.location,"Error-GenericReadError")};v.prototype.collectDefinitions=function(a){return a};w.prototype.collectDefinitions=function(a){this.args.forEach(function(a){-1<plt.compiler.keywords.indexOf(a.val)&&y(new types.Message([new types.ColoredPart(a.val,a.location),": this is a reserved keyword and cannot be used as a variable or function name"]),a.location)});var b=f(this.name.val,!1,this.args.length,!1,this.name.location);return a.accumulateDefinedBinding(b,this.location)};m.prototype.collectDefinitions=
function(a){var b=this.expr instanceof C?f(this.name.val,!1,this.expr.args.length,!1,this.name.location):new S(this.name.val,!1,[],this.name.location);return a.accumulateDefinedBinding(b,this.location)};N.prototype.collectDefinitions=function(a){var b=this,c=function(a){return b.stx[1].val+"-"+a.val},d=function(a){return"set-"+b.stx[1].val+"-"+a.val+"!"};if("define-struct"===b.stx[0].val){var e=b.stx[1].val,g=b.stx[2],u="make-"+e,h=e+"?";c=g.map(c);var k=g.map(d);d=b.stx[1].location;c=new Y(e,!1,
g,u,h,c,k,null,b.stx[1].location);g=f(u,!1,g.length,!1,d);h=f(h,!1,1,!1,d);u=f(e+"-set!",!1,1,!1,d);e=f(e+"-ref",!1,1,!1,d);return a.accumulateDefinedBindings([c,e,g,h,u],b.location)}return this.names.reduce(function(a,c){c=new S(c.val,!1,[],c.location);return a.accumulateDefinedBinding(c,b.location)},a)};J.prototype.collectDefinitions=function(a){function b(a){return(a=a.match(/^wescheme\/(\w+)$/))?a[1]:!1}function c(a){a=plt.compiler.moduleGuess(f.spec.toString());a=new types.Message(["Found require of the module ",
new types.ColoredPart(f.spec.toString(),f.spec.location),", but this module is unknown.",a.name===f.spec.toString()?"":" Did you mean '"+a.name+"'?"]);y(a,f.spec.location,"Error-UnknownModule")}function d(b){var c=window.COLLECTIONS[b].provides.map(function(a){a=new S(a,new p(b),!1);a.imported=!0;return a}),d=new ba(b,c);g=a.accumulateModule(d).accumulateModuleBindings(c)}var e=this.spec instanceof r?this.spec.val.toString():this.spec.toString(),f=this,g;a.modulePathResolver(e,a.currentModulePath)||
b(e)||c(e);var u=window.location.protocol+"//"+window.location.host+(b(e)?"/loadProject?publicId="+b(e):"/js/mzscheme-vm/collects/"+e+".js");console.log(u);window.COLLECTIONS&&window.COLLECTIONS[e]?d(e):jQuery.ajax({url:u,success:function(a){try{if(b(e)){var g=(0,eval)("("+a+")");void 0===window.COLLECTIONS&&(window.COLLECTIONS=[]);var n=plt.compiler.lex(g.source.src,e),t=plt.compiler.parse(n),u=plt.compiler.desugar(t)[0],h=plt.compiler.analyze(u),k=plt.compiler.compile(u,h);window.COLLECTIONS[e]=
{name:e,bytecode:(0,eval)("("+k.bytecode+")"),provides:k.provides}}else eval(a);a?d(e):c(e)}catch(q){if("moby-failure"===q.type)throw q;a=new types.Message(["A network error occured when trying to load ",new types.ColoredPart(f.spec.toString(),f.spec.location),". Please check your connection and try again."]);y(a,f.spec.location,"Error-NetworkError")}},error:function(a){c(e)},async:!1});return g};v.prototype.collectProvides=function(a){return a};X.prototype.collectProvides=function(a){function b(b){a.providedNames.put(b,
new g(b))}return this.clauses.reduce(function(a,c){if(c instanceof p){if(a.definedNames.containsKey(c.val))return b(c.val),a;a=new types.Message(["The name '",new types.ColoredPart(c.toString(),c.location),"', is not defined in the program, and cannot be provided."]);y(a,c.location)}else if(c instanceof Array){if(a.definedNames.containsKey(c[1].val)&&a.definedNames.get(c[1].val)instanceof Y)return c=a.definedNames.get(c[1].val),[c.name,c.constructor,c.predicate].concat(c.accessors,c.mutators).forEach(b),
a;y(new types.Message(["The struct '",new types.ColoredPart(c[1].toString(),c[1].location),"', is not defined in the program, and cannot be provided"]),c.location)}else throw"Impossible: all invalid provide clauses should have been filtered out!";},a)};v.prototype.analyzeUses=function(a,b){return a};m.prototype.analyzeUses=function(a){a.env.extend(this.expr instanceof C?f(this.name.val,!1,this.expr.args.length,!1,this.location):new S(this.name.val,!1,[],this.name.location));return this.expr.analyzeUses(a,
a.env)};N.prototype.analyzeUses=function(a){this.names.forEach(function(b){a.env.extend(new S(b.val,!1,[],b.location))});return this.expr.analyzeUses(a,a.env)};w.prototype.analyzeUses=function(a){a.env=a.env.extend(f(this.name.val,!1,this.args.length,!1,this.name.location));return k(this,a)};C.prototype.analyzeUses=function(a,b){return k(this,a)};E.prototype.analyzeUses=function(a,b){return this.exprs.reduce(function(a,c){return c.analyzeUses(a,b)},a)};Q.prototype.analyzeUses=function(a,b){a=this.defs.reduce(function(a,
c){return c.analyzeUses(a,b)},a);return this.body.analyzeUses(a,a.env)};F.prototype.analyzeUses=function(a,b){return[this.func].concat(this.args).reduce(function(c,d){return d instanceof Array?d.reduce(function(a,b){return b.analyzeUses(a,a.env)},a):d.analyzeUses(c,b)},a)};D.prototype.analyzeUses=function(a,b){return[this.predicate,this.consequence,this.alternative].reduce(function(a,c){return c.analyzeUses(a,b)},a)};p.prototype.analyzeUses=function(a,b){(-1<plt.compiler.keywords.indexOf(this.val)&&
(!this.parent||this.parent[0]!==this)||this.parent instanceof z)&&y(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);return(b=b.lookup_context(this.val))?(this.bindingLoc=b.loc,a.accumulateBindingUse(b,a)):a.accumulateFreeVariableUse(this.val,a)};plt.compiler.desugar=function(a,b,c){var e=(new Date).getTime();try{var f=d(a,b,!0),g=f[0]}catch(aa){throw console.log("DESUGARING ERROR"),aa;}a=(new Date).getTime();
c&&(console.log("Desugared in "+Math.floor(a-e)+"ms"),console.log(g),console.log(g.toString()));return f};plt.compiler.analyze=function(a,b){var c=(new Date).getTime();try{var d=h(a,plt.compiler.getBasePinfo("base"))}catch(W){throw console.log("ANALYSIS ERROR"),W;}a=(new Date).getTime();b&&console.log("Analyzed in "+Math.floor(a-c)+"ms");return d};plt.compiler.provideBindingId=g;plt.compiler.provideBindingStructId=function(a){this.symbl=a}})();plt.compiler.compile={};
plt.compiler.localStackReference={};plt.compiler.globalStackReference={};plt.compiler.unboundStackReference={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(){}function b(a,b,c){this.name=a;this.isBoxed=b;this.depth=c}function c(a,b,c){this.name=a;this.pos=c;this.depth=b}function d(a){this.name=a}function e(a){return types.isString(a)&&void 0!==a.chars?'"'+a.toString()+'"':a.toBytecode?a.toBytecode():a}function f(a){a=a.toString().replace(/\|/g,"");for(var b="",c="{}[],'` \\\"".split(""),d=0;d<a.length;d++)b+=(-1<c.indexOf(a.charAt(d))?"\\":"")+a.charAt(d);return b=b.replace(/\n/g,"\\n")}function g(a){l.call(this);this.name=a;this.toBytecode=
function(){return'{"$":"global-bucket","value":"'+f(this.name)+'"}'}}function k(a,b,c,d){l.call(this);this.$="module-variable";this.modidx=a;this.sym=b;this.pos=c;this.phase=d;this.toBytecode=function(){return'{"$":"module-variable","sym":'+this.sym.toBytecode()+',"modidx":'+this.modidx.toBytecode()+',"pos":'+this.pos+',"phase":'+this.phase+"}"}}function h(a,b,c){l.call(this);this.numLifts=a;this.topLevels=b;this.stxs=c;this.toBytecode=function(){return'{"$":"prefix","num-lifts":'+this.numLifts+',"toplevels":['+
this.topLevels.map(function(a){return e(a)}).join(",")+'],"stxs":['+this.stxs.map(e)+"]}"}}function r(a,b,c){l.call(this);this.maxLetDepth=a;this.prefix=b;this.code=c;this.toBytecode=function(){return'{"$":"compilation-top","max-let-depth":'+this.maxLetDepth+',"prefix":'+this.prefix.toBytecode()+',"compiled-indirects":[],"code":'+this.code.toBytecode()+"}"}}function p(a,b,c,d,e){l.call(this);this.depth=a;this.pos=b;this.constant=c;this.ready=d;this.loc=e;this.toBytecode=function(){return'{"$":"toplevel","depth":'+
this.depth.toString()+',"pos":'+this.pos.toString()+',"const?":'+this.constant+',"ready?":'+this.ready+',"loc":'+(this.loc&&this.loc.toVector().toBytecode())+"}"}}function v(a){l.call(this);this.forms=a;this.toBytecode=function(){return'{"$":"seq","forms":['+this.forms.map(e).join(",")+"]}"}}function z(a,b){l.call(this);this.ids=a;this.rhs=b;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.map(e).join(",")+'],"body":'+this.rhs.toBytecode()+"}"}}function D(a,b,c,d,f,g,u,h,k,C){l.call(this);
this.name=a;this.flags=c;this.numParams=d;this.paramTypes=f;this.rest=g;this.body=C;this.closureMap=u;this.maxLetDepth=k;this.closureTypes=h;this.operatorAndRandLocs=b;this.toBytecode=function(){return'{"$":"lam","name":'+this.name.toBytecode()+',"locs":['+this.operatorAndRandLocs.map(e).join(",")+'],"flags":['+this.flags.map(e).join(",")+'],"num-params":'+this.numParams+',"param-types":['+this.paramTypes.map(e).join(",")+'],"rest?":'+this.rest+',"closure-map":['+this.closureMap.map(e).join(",")+
'],"closure-types":['+this.closureTypes.map(e).join(",")+'],"max-let-depth":'+this.maxLetDepth+',"body":'+this.body.toBytecode()+"}"}}function E(a,b,c){l.call(this);this.count=a;this.boxes=b;this.body=c;this.toBytecode=function(){return'{"$":"let-void","count":'+e(this.count)+',"boxes?":'+e(this.boxes)+',"body":'+this.body.toBytecode()+"}"}}function B(a,b,c,d,f){l.call(this);this.count=a;this.pos=b;this.boxes=c;this.rhs=d;this.body=f;this.toBytecode=function(){return'{"$":"install-value","count":'+
e(this.count)+',"pos":'+e(this.pos)+',"boxes?":'+e(this.boxes)+',"rhs":'+this.rhs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function P(a,b,c,d,e){l.call(this);this.unbox=a||!1;this.pos=b;this.clear=c;this.flonum=e;this.otherClears=d;this.toBytecode=function(){return'{"$":"localref","unbox?":'+this.unbox+',"pos":'+this.pos+',"clear":'+this.clear+',"other-clears?":'+this.otherClears+',"flonum?":'+this.flonum+"}"}}function I(a,b){l.call(this);this.rator=a;this.rands=b;this.toBytecode=function(){return'{"$":"application","rator":'+
this.rator.toBytecode()+',"rands":['+this.rands.map(e).join(",")+"]}"}}function Q(a,b,c){l.call(this);this.testExpr=a;this.thenExpr=b;this.elseExpr=c;this.toBytecode=function(){return'{"$":"branch","test":'+this.testExpr.toBytecode()+',"then":'+this.thenExpr.toBytecode()+',"else":'+this.elseExpr.toBytecode()+"}"}}function A(a,b,c){l.call(this);this.$="with-cont-mark";this.key=a;this.val=b;this.body=c;this.toBytecode=function(){return'{"$":"with-cont-mark","key":'+(new G(new K(this.key))).toBytecode()+
',"val":'+(new G(this.val)).toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function R(a,b){l.call(this);this.$="req";this.reqs=a;this.dummy=b;this.toBytecode=function(){return'{"$":"req","reqs":'+(this.reqs instanceof G?'"'+this.reqs.val+'"':this.reqs.toBytecode())+',"dummy":'+this.dummy.toBytecode()+"}"}}function u(a,b){this.path=a;this.base=b;l.call(this);this.toBytecode=function(){return'{"$":"module-path","path":'+e(this.path)+',"base":'+e(this.base)+"}"}}function O(a,b,c){function d(a){return 1>=
a.length?a:c(a[0],a[1])?d(a.slice(1)):[a[0]].concat(d(a.slice(1)))}return d(a.sort(function(a,c){return b(a,c)?-1:b(c,a)}))}function C(a,b){var c=a[0],d=a[1];a=a[2];d=b.compile(a,d);b=d[0];d=d[1];return[[b].concat(c),d,a]}function H(a,b){var c=function(a){var b=a.modules.reduce(function(a,b){return a.concat(b.bindings)},[]),c=a.usedBindingsHash.values().filter(function(a){return a.moduleSource&&-1===b.indexOf(a)});c=b.concat(c);a=a.freeVariables.concat(a.definedNames.keys());var d=O(a,function(a,
b){return a<b},function(a,b){return a==b});a=[!1].concat(d.map(function(a){return new g(a)}),c.map(function(a){var b=a.imported?!1:new u(!1,!1);b=new u(a.moduleSource,b);return new k(b,new K(a.name),-1,0)}));c=[!1].concat(d,c.map(function(a){return a.name}));return[new h(0,a,[]),new plt.compiler.globalEnv(c,!1,new plt.compiler.emptyEnv)]}(b),d=c[0];c=c[1];var e=a.filter(plt.compiler.isDefinition),f=a.filter(function(a){return a instanceof Z}),n=a.filter(plt.compiler.isExpression);b=f.reduceRight(C,
[[],b,c]);a=b[0];b=b[1];b=e.reduceRight(C,[[],b,c]);e=b[0];b=b[1];b=n.reduceRight(C,[[],b,c]);c=b[0];b=b[1];c=new v([].concat(a,e,c));return{bytecode:"/* runtime-version: local-compiler-summer2014 */\n"+(new r(0,d,c)).toBytecode(),permissions:b.permissions(),provides:b.providedNames.keys()}}var G=plt.compiler.literal,K=plt.compiler.symbolExpr,U=plt.compiler.Program,F=plt.compiler.ifExpr,V=plt.compiler.beginExpr,w=plt.compiler.localExpr,m=plt.compiler.andExpr,N=plt.compiler.orExpr,T=plt.compiler.lambdaExpr,
J=plt.compiler.quotedExpr,X=plt.compiler.callExpr,L=plt.compiler.defFunc,y=plt.compiler.defVar,Y=plt.compiler.defVars,S=plt.compiler.defStruct,Z=plt.compiler.requireExpr,ba=plt.compiler.provideStatement,x=function(a){var b=function(){};b.prototype=a;return new b};G.prototype.toBytecode=function(){return'{"$":"constant","value":'+(this.val.toBytecode?this.val.toBytecode():!0===this.val?"true":!1===this.val?"false":this.toString())+"}"};K.prototype.toBytecode=function(){return'types.symbol("'+f(this.val)+
'")'};Vector.prototype.toBytecode=function(){return"types.vector(["+this.elts.join(",")+"])"};Array.prototype.toBytecode=function(a){return"types."+(0===this.length?"EMPTY":"list(["+this.map(e).join(",")+"])")};jsnums.Rational.prototype.toBytecode=function(){return"types.rational("+e(this.n)+", "+e(this.d)+")"};jsnums.BigInteger.prototype.toBytecode=function(){return'types.bignum("'+this.toString()+'")'};jsnums.FloatPoint.prototype.toBytecode=function(){var a=this.toString();"+nan.0"===a&&(a="NaN");
"+inf.0"===a&&(a="Infinity");"-inf.0"===a&&(a="-Infinity");return'types["float"]('+a+")"};jsnums.Complex.prototype.toBytecode=function(){return"types.complex("+e(this.r)+", "+e(this.i)+")"};Char.prototype.toBytecode=function(){return"types['char'](String.fromCharCode("+this.val.charCodeAt(0)+"))"};b.prototype=x(a.prototype);c.prototype=x(a.prototype);d.prototype=x(a.prototype);var l=function(){this.toBytecode=function(){console.log(this);throw"IMPOSSIBLE - generic bytecode toBytecode method was called";
}};g.prototype=x(l.prototype);k.prototype=x(l.prototype);(function(){l.call(this)}).prototype=x(l.prototype);(function(a,b,c){l.call(this);this.datum=a;this.wraps=b;this.certs=c}).prototype=x(l.prototype);(function(a){this.encoded=a;l.call(this)}).prototype=x(l.prototype);h.prototype=x(l.prototype);(function(){l.call(this)}).prototype=x(l.prototype);(function(a){l.call(this)}).prototype=x(l.prototype);(function(a){l.call(this);this.v=a;this.toBytecode=function(){return'{"$":"indirect","v":'+this.v.toBytecode()+
"}"}}).prototype=x(l.prototype);r.prototype=x(l.prototype);(function(a,b,c,d,e,f,g){l.call(this);this.name=a;this.src=b;this.srcName=c;this.nomSrc=d;this.srcPhase=e;this.insp=g;this.isProtected=f}).prototype=x(l.prototype);p.prototype=x(l.prototype);v.prototype=x(l.prototype);z.prototype=x(l.prototype);(function(a,b,c,d){l.call(this);this.$="def-values";this.ids=a;this.rhs=b;this.prefix=c;this.maxLetDepth=d;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.toBytecode().join(",")+
'],"rhs":'+this.rhs.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a,b,c,d){l.call(this);this.ids=a;this.rhs=b;this.prefix=c;this.maxLetDepth=d}).prototype=x(l.prototype);(function(a,b,c,d,e,f,g,u,h,k,C,O){l.call(this);this.name=a;this.selfModidx=b;this.prefix=c;this.provides=d;this.requires=e;this.body=f;this.syntaxBody=g;this.unexported=u;this.maxLetDepth=h;this.dummy=k;this.langInfo=C;this.internalContext=
O;this.toBytecode=function(){return'{"$":"mod","name":'+this.name.toBytecode()+',"self-modidx":'+this.selfModidx.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"provides":'+this.provides.toBytecode()+',"requires":'+(this.requires&&this.requires.toVector().toBytecode())+',"body":'+this.body.toBytecode()+',"stx-body":'+this.syntaxBody.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=x(l.prototype);D.prototype=x(l.prototype);(function(a,b){l.call(this);this.code=
a;this.genId=b;this.toBytecode=function(){return'{"$":"closure","code":'+this.code.toBytecode()+',"gen-id":'+this.genId.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a,b){l.call(this);this.name=a;this.clauses=b;this.toBytecode=function(){return'{"$":"case-lam","name":'+this.name.toBytecode()+',"clauses":'+this.clauses.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a,b,c){l.call(this);this.rhs=a;this.body=b;this.flonum=c;this.toBytecode=function(){return'{"$": "let-one","rhs":'+this.rhs.toBytecode()+
',"body":'+this.body.toBytecode()+',"flonum":'+this.flonum.toBytecode()+"}"}}).prototype=x(l.prototype);E.prototype=x(l.prototype);(function(a,b){l.call(this);this.procs=a;this.body=b;this.toBytecode=function(){return'{"$":"let-rec","procs":'+this.procs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}).prototype=x(l.prototype);B.prototype=x(l.prototype);(function(a,b){l.call(this);this.pos=a;this.body=b;this.toBytecode=function(){return'{"$":"boxenv","pos":'+this.pos.toBytecode()+',"body":'+this.body.toBytecode()+
"}"}}).prototype=x(l.prototype);P.prototype=x(l.prototype);(function(a,b,c){l.call(this);this.depth=a;this.pos=b;this.midpt=c}).prototype=x(l.prototype);I.prototype=x(l.prototype);Q.prototype=x(l.prototype);A.prototype=x(l.prototype);(function(a){l.call(this);this.seq=a;this.toBytecode=function(){return'{"$":"beg0","seq":'+this.seq.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a){l.call(this);this.forms=a;this.toBytecode=function(){return'{"$":"splice","forms":'+this.forms.toBytecode()+"}"}}).prototype=
x(l.prototype);(function(a){l.call(this);this.topLevel=a;this.toBytecode=function(){return'{"$":"varref","top-level":'+this.topLevel.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a,b,c){l.call(this);this.id=a;this.rhs=b;this.undefOk=c;this.toBytecode=function(){return'{"$":"assign","id":'+this.id.toBytecode()+',"rhs":'+this.rhs.toBytecode()+',"undef-ok":'+this.undefOk.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a,b){l.call(this);this.proc=a;this.args=b;this.toBytecode=function(){return'{"$":"apply-values","proc":'+
this.proc.toBytecode()+',"args":'+this.args.toBytecode()+"}"}}).prototype=x(l.prototype);(function(a){l.call(this);this.id=a;this.toBytecode=function(){return'{"$":"primval","id":'+this.id.toBytecode()+"}"}}).prototype=x(l.prototype);R.prototype=x(l.prototype);(function(a,b,c){this.bool1=a;this.bool2=b;this.alist=c;l.call(this)}).prototype=x(l.prototype);(function(a,b,c){this.amt=a;this.src=b;this.dest=c;l.call(this)}).prototype=x(l.prototype);(function(a){this.val=a;l.call(this)}).prototype=x(l.prototype);
(function(a){this.sym=a;l.call(this)}).prototype=x(l.prototype);(function(a,b,c,d,e){this.path=a;this.phase=b;this.srcPhase=c;this.prefix=e;this.exceptions=d;l.call(this)}).prototype=x(l.prototype);(function(){l.call(this)}).prototype=x(l.prototype);(function(a){this.value=a;l.call(this)}).prototype=x(l.prototype);(function(a,b,c,d,e){this.path=a;this.phase=b;this.exportName=d;this.nominalExportName=e;l.call(this)}).prototype=x(l.prototype);(function(a,b,c,d){this.path=a;this.exportName=b;this.nominalPath=
c;this.nominalExportName=d;l.call(this)}).prototype=x(l.prototype);(function(a,b){this.path=a;this.nominalPath=b;l.call(this)}).prototype=x(l.prototype);(function(a,b){this.path=a;this.exportName=b;l.call(this)}).prototype=x(l.prototype);(function(a){this.path=a;l.call(this)}).prototype=x(l.prototype);(function(a,b,c,d,e,f,g){this.phase=a;this.kind=b;this.unmarshals=d;this.renames=e;this.markRenames=f;this.plusKern=g;l.call(this)}).prototype=x(l.prototype);u.prototype=x(l.prototype);U.prototype.freeVariables=
function(a,b){return a};F.prototype.freeVariables=function(a,b){return this.alternative.freeVariables(this.consequence.freeVariables(this.predicate.freeVariables(a,b),b),b)};V.prototype.freeVariables=function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};K.prototype.freeVariables=function(a,b){return b.lookup(this.val,0)instanceof d&&-1==a.indexOf(this)?a.concat([this]):a};w.prototype.freeVariables=function(a,b){var c=this.defs.reduce(function(a,b){return(b instanceof
Y?b.names:[b.name]).concat(a)},[]).reduce(function(a,b){return new plt.compiler.localEnv(b.val,!0,a)},b);a=this.body.freeVariables(a,c);return this.defs.reduce(function(a,b){if(b instanceof L){var d=b.args.reduce(function(a,b){return new plt.compiler.localEnv(b.val,!1,a)},c);return b.body.freeVariables(a,d)}return b instanceof S?a:b.expr.freeVariables(a,c)},a)};m.prototype.freeVariables=function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};N.prototype.freeVariables=
function(a,b){return this.exprs.reduceRight(function(a,c){return c.freeVariables(a,b)},a)};T.prototype.freeVariables=function(a,b){b=this.args.slice(0).reverse().reduce(function(a,b){return new plt.compiler.localEnv(b.val,!1,a)},b);return this.body.freeVariables(a,b)};J.prototype.freeVariables=function(a,b){return a};X.prototype.freeVariables=function(a,b){return this.func.freeVariables(a,b).concat(this.args).reduceRight(function(a,c){return c.freeVariables(a,b)},a)};U.prototype.compile=function(a,
b){return[this,b]};L.prototype.compile=function(a,b){b=this.name.compile(a,b);var c=b[0];b=b[1];b=(new T(this.args,this.body)).compile(a,b,!1,this.name);a=b[0];b=b[1];return[new z([c],a),b]};y.prototype.compile=function(a,b){b=this.name.compile(a,b);var c=b[0];b=b[1];b=this.expr.compile(a,b);a=b[0];b=b[1];return[new z([c],a),b]};Y.prototype.compile=function(a,b){b=this.names.reduceRight(C,[[],b,a]);var c=b[0];b=b[1];b=this.expr.compile(a,b);a=b[0];b=b[1];return[new z(c,a),b]};V.prototype.compile=
function(a,b){a=this.exprs.reduceRight(C,[[],b,a]);b=a[1];return[new v(a[0]),b]};T.prototype.compile=function(a,e,f,g){function u(a,b){return a.map(function(a){return-1<b.indexOf(a)?a:!1})}function h(a,b){return new plt.compiler.localEnv(b,!1,a)}void 0===f&&(f=!0);var k=this.args.map(function(a){return a.val}).reduce(h,new plt.compiler.emptyEnv);freeVarsInBody=this.body.freeVariables([],k);k=function(a,e,f){var g=e.map(function(a){return f.lookup(a.val,0)}),k=function(a,b){return 0===b.length?!1:
a(b[0])?b[0]:k(a,b.slice(1))},l=function(a){return a.depth};if(e=k(function(a){return a instanceof d},g))throw"Can't produce closure; I don't know where "+e.name+" is bound.";var C=O(g.filter(function(a){return a instanceof b}),function(a,b){return a.depth<b.depth},function(a,b){return a.depth===b.depth});e=C.map(l);var G=g.filter(function(a){return a instanceof c});g=O(G.map(l),function(a,b){return a<b},function(a,b){return a===b});a=a.reverse().map(function(a){return a.val}).reduce(h,f);a=C.reverse().reduce(function(a,
b){return b.isBoxed?new plt.compiler.localEnv(b.name,!0,a):h(a,b.name)},a);a=g.reverse().reduce(function(a,b){var c=G.filter(function(a){return a.depth===b}).map(function(a){return a.name});c=u(f.peek(b).names,c);return new plt.compiler.globalEnv(c,!1,a)},a);return[g.concat(e),a]}(this.args.slice(0),freeVarsInBody,a);a=k[0];k=this.body.compile(k[1],e);e=k[0];k=k[1];return[new D(f?[]:new K(g),[f?this.stx:g].concat(this.args).map(function(a){return a.location.toVector()}),[],this.args.length,this.args.map(function(){return new K("val")}),
!1,a,a.map(function(){return new K("val/ref")}),0,e),k]};w.prototype.compile=function(a,b){function c(a,b,e,g){if(0===a.length)return d.body.compile(f,b);var u=a[0].compile(e,b),h=u[0].rhs;b=u[1];u=a[0]instanceof Y?a[0].names.length:1;a=c(a.slice(1),b,e,g+u);newBody=a[0];b=a[1];return[new B(u,g,!0,h,newBody),b]}if(0===this.defs.length)return this.body.compile(a,b);var d=this,e=this.defs.reduce(function(a,b){return a.concat(b instanceof Y?b.names:b.name)},[]),f=e.reverse().reduce(function(a,b){return new plt.compiler.localEnv(b.val,
!0,a)},a);b=c(this.defs,b,f,0);a=b[0];b=b[1];return[new E(e.length,!0,a),b]};X.prototype.compile=function(a,b){var c=this.args.reduce(function(a,b){return new plt.compiler.unnamedEnv(a)},a),d=this.func.compile(c,b);a=d[0];c=this.args.reduceRight(C,[[],b,c])[0];b=d[1];a=new I(a,c);d=[this.func.location].concat(this.args.map(function(a){return a.location})).concat(this.location).map(function(a){return a.toVector()});return[new A(new K("moby-application-position-key"),d,new A(new K("moby-stack-record-continuation-mark-key"),
this.location.toVector(),a)),b]};F.prototype.compile=function(a,b){var c=this.predicate.compile(a,b)[0],d=this.consequence.compile(a,b)[0];a=this.alternative.compile(a,b);b=a[1];return[new Q(c,d,a[0]),b]};K.prototype.compile=function(a,e){a=a.lookup(this.val,0);if(a instanceof b)a=new P(a.isBoxed,a.depth,!1,!1,!1);else if(a instanceof c)a=new p(a.depth,a.pos,!1,!1,this.location);else{if(a instanceof d)throw"Couldn't find '"+this.val+"' in the environment";throw"IMPOSSIBLE: env.lookup failed for '"+
this.val+"'! A reference should be added to the environment!";}return[a,e]};J.prototype.compile=function(a,b){function c(a){return a instanceof G?c(a.val):a instanceof Array?a.map(c):a}result=new G(c(this.val));return[result,b]};ba.prototype.compile=function(a,b){};Z.prototype.compile=function(a,b){return[new R(this.spec,new p(0,0,!1,!1,!1)),b]};plt.compiler.localStackReference=b;plt.compiler.globalStackReference=c;plt.compiler.unboundStackReference=d;plt.compiler.compile=function(a,b,c){var d=(new Date).getTime();
try{var e=H(a,b)}catch(ca){throw console.log("COMPILATION ERROR"),ca;}a=(new Date).getTime();c&&(console.log("Compiled in "+Math.floor(a-d)+"ms"),console.log(JSON.stringify(e)));return e}})();plt.wescheme.RoundRobin={};
(function(){function a(a,b,c,d){b=b.replace(/[\uFEFF\u2060\u200B]/,"");try{var e=(new Date).getTime(),f=plt.compiler.lex(b,a),g=plt.compiler.parse(f),k=plt.compiler.desugar(g)[0],z=plt.compiler.analyze(k),D=plt.compiler.compile(k,z);c(JSON.stringify(D))}catch(P){a=P;try{var E=JSON.parse(a);JSON.parse(E["structured-error"]);var B=a}catch(I){B="!! FATAL ERROR !!\n"+a.stack}B=B.toString();if(/FATAL ERROR/.test(B.toString())){B=JSON.stringify(B);try{console.log("Logging anonymized error message to GDocs"),
document.getElementById("expr").value=b,document.getElementById("local").value=plt.wescheme.BrowserDetect.versionString+" "+B.replace(/\s+/g,"").toLowerCase(),document.getElementById("server").value="FATAL ERROR".replace(/\s+/g,"").toLowerCase(),document.getElementById("errorLogForm").submit()}catch(I){console.log("LOGGING FAILED.")}d(JSON.stringify(d("The local compiler has failed to run properly. You may want to confirm that you are running a modern web browser (IE9+, Safari 6+, FF 20+, Chrome 20+).")))}else d(B)}d=
(new Date).getTime();console.log("Compiled in: "+Math.floor(d-e)+"ms")}console||(console={log:function(){}});var b=null,c=null,d=null;plt.wescheme.RoundRobin.initialize=function(a,b,c){b()};plt.wescheme.RoundRobin.roundRobinCompiler=function(e,f,g,k){if(e===b&&f===c)return g.apply(null,d);a(e,f,function(){var a=[].slice.call(arguments,0);b=e;c=f;d=a;return g.apply(null,arguments)},k)}})();plt.wescheme.makeDynamicModuleLoader={};
(function(){plt.wescheme.makeDynamicModuleLoader=function(a){var b=new plt.wescheme.AjaxActions,c=function(a,c,f){var d=a.match(/wescheme\/(\w+)/)[1];b.loadProject(null,d,function(b){try{window.COLLECTIONS[a]={name:a,bytecode:(0,eval)("("+b.getObjectCode()+")"),provides:b.getProvides()}}catch(h){f();return}c()},f)};return function(b,e,f){window.COLLECTIONS=window.COLLECTIONS||{};var d=b.match(/^wescheme\/(\w+)$/)?!0:!1;d?c(b,e,f):loadScript(a+"/"+b+"-min.js?__gensym="+encodeURIComponent(""+Math.random()),
e,f)}}})();var WeSchemeInteractions;
WeSchemeInteractions=function(){function a(a,b){return 0<a}function b(a,b){return 1<b-a}function c(a){a.cachedWidth=1;for(var b=0;b<a.children.length;b++)a.cachedWidth+=a.children[b].cachedWidth||c(a.children[b]);a.cachedWidth=Math.max(a.cachedWidth,a.offsetWidth);return a.cachedWidth}navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i);var d=function(a,b){var c=this;this.interactionsDiv=jQuery(a);this.interactionsDiv.empty();this.resetters=[];this.previousInteractionsDiv=document.createElement("div");
this.previousInteractionsTextContainers={};this.interactionsDiv.append(this.previousInteractionsDiv);this.withColoredErrorMessages=!0;setTimeout(function(){c.sayAndForget("Press F4 to toggle extra accessibility features")},1E3);new f(this,this.interactionsDiv,function(a){c.prompt=a;p(c,function(d){c.evaluator=d;c.highlighter=function(a,b,c,d,e,f){};a.historyArray=[{code:"",output:!1}];a.historyIndex=0;a.maxSavedHistory=100;b&&b(c)})})};d.prototype.reset=function(){var a=this;this.notifyBus("before-reset",
this);var b;for(b=a.resetters.length-1;0<=b;b--)a.resetters[b]();r(a);p(a,function(b){a.evaluator=b;jQuery(a.previousInteractionsDiv).empty();a.notifyBus("after-reset",a);a.prompt.clear()})};var e=function(a,b){var c=!1,d=function(){c=!0;a.removeOnReset(d)};a.addOnReset(d);return function(){c||b.apply(null,arguments)}};d.prototype.disableColoredErrorMessages=function(){this.withColoredErrorMessages=!1};d.prototype.setPromptText=function(a){this.prompt.setText(a)};d.prototype.say=function(a,b){if(""!==
a){console.log(a);var c=document.getElementById("announcementlist"),d=document.createElement("LI");d.appendChild(document.createTextNode(a));c.insertBefore(d,c.firstChild);b&&setTimeout(function(){c.removeChild(d)},1E3)}};d.prototype.sayAndForget=function(a){this.say(a,!0)};d.prototype.speakChar=function(a){var b=a.getCursor(),c=b.line;b=b.ch;a=a.getRange({line:c,ch:b},{line:c,ch:b+1});this.sayAndForget(a)};d.prototype.speakHistory=function(a){0===a&&(a=10);var b=this.prompt.historyArray.length-1;
if(a>b)return!1;a=this.prompt.historyArray[b-a];this.sayAndForget(a.code+(a.output?" evaluates to "+(a.output.ariaText||a.output.textContent):" did not produce any value"));return!0};var f=function(a,b,c){var d=this;this.interactions=a;this.div=jQuery("<div style='clear: left;'><span class='top-aligned-inline-block' aria-hidden='true'>&gt;&nbsp;</span><span class='top-aligned-inline-block' style='position: absolute; left: 20px; right: 5px;'/></div>");b.append(this.div);b=this.div.find("span").get(1);
new plt.wescheme.WeSchemeTextContainer(b,{dynamicHeight:!0,lineNumbers:!1,autoCloseBrackets:!0,makeTransparentIframe:!0,extraKeys:{Enter:function(a){if(d.hasCompleteExpression())d.onEvaluation();else CodeMirror.commands.newlineAndIndent(a)},"Shift-Enter":function(a){CodeMirror.commands.newlineAndIndent(a)},"Alt-Down":function(a){d.onHistoryNext()},"Alt-Up":function(a){d.onHistoryPrevious()},PageDown:function(a){d.onHistoryNext()},PageUp:function(a){d.onHistoryPrevious()},Left:function(b){b.moveH(-1,
"char");a.speakChar(b)},Right:function(b){b.moveH(1,"char");a.speakChar(b)},"Alt-1":function(b){a.speakHistory(1)},"Alt-2":function(b){a.speakHistory(2)},"Alt-3":function(b){a.speakHistory(3)},"Alt-4":function(b){a.speakHistory(4)},"Alt-5":function(b){a.speakHistory(5)},"Alt-6":function(b){a.speakHistory(6)},"Alt-7":function(b){a.speakHistory(7)},"Alt-8":function(b){a.speakHistory(8)},"Alt-9":function(b){a.speakHistory(9)},"Alt-0":function(b){a.speakHistory(0)}}},function(a){d.textContainer=a;c&&
c(d)})};f.prototype.onEvaluation=function(){this.saveHistoryWithCleanup();var a=this,b=a.textContainer.getCode();a.textContainer.setCode("");var c=document.createElement("div"),d=document.createElement("span");d.className="top-aligned-inline-block";d.appendChild(document.createTextNode(">"));var e=document.createElement("span");e.className="top-aligned-inline-block";e.style.width="90%";c.appendChild(d);c.appendChild(document.createTextNode(" "));c.appendChild(e);a.interactions.addToInteractions(c);
d.setAttribute("aria-hidden","true");new plt.wescheme.WeSchemeTextContainer(e,{dynamicHeight:!0,lineNumbers:!1,content:b,makeTransparentIframe:!0,readOnly:!0,cursorBlinkRate:0,inputStyle:"contenteditable",matchBrackets:!0,autoCloseBrackets:!0},function(c){var d=R();a.interactions.previousInteractionsTextContainers[d]=c;a.interactions.runCode(b,d,function(){})});a.focus()};f.prototype.onHistoryPrevious=function(){this.doHistory(-1,a)};f.prototype.onHistoryNext=function(){this.doHistory(1,b)};f.prototype.doHistory=
function(a,b){if(1<this.historyArray.length){var c=jQuery.trim(this.textContainer.getCode());if(c===this.historyArray[this.historyIndex].code)b(this.historyIndex,this.historyArray.length)&&this.doHistoryPart2(a);else{var d=this.historyArray.length-1;b(d,this.historyArray.length)&&(this.historyIndex=d,this.historyArray[this.historyIndex].code=c,this.doHistoryPart2(a))}}};f.prototype.doHistoryPart2=function(a){this.historyIndex+=a;this.textContainer.getDiv();this.interactions.say(this.historyArray[this.historyIndex].code);
this.textContainer.setCode(this.historyArray[this.historyIndex].code);this.textContainer.setCursorToEnd()};f.prototype.saveHistoryWithCleanup=function(){var a=jQuery.trim(this.textContainer.getCode()),b=this.historyArray.length-1;this.historyArray[b].code=a;var c=1>b?null:this.historyArray[b-1].code;if((!c||c!==a)&&""!==a){for(a=Math.max(0,this.historyArray.length-this.maxSavedHistory);0<a;)this.historyArray.shift(),a--;b=this.historyArray.length}this.historyArray[b]={code:"",output:!1};this.historyIndex=
b};f.prototype.setRecentOutput=function(a){0<this.historyIndex&&this.historyIndex<this.historyArray.length&&(this.historyArray[this.historyIndex-1].output=a)};f.prototype.hasCompleteExpression=function(){return plt.wescheme.tokenizer.hasCompleteExpression(this.textContainer.getCode())};f.prototype.setText=function(a){this.textContainer.setCode(a)};f.prototype.clear=function(){this.textContainer.setCode("")};f.prototype.getDiv=function(){return this.div};f.prototype.hide=function(){this.div.hide()};
f.prototype.show=function(){this.div.show()};f.prototype.focus=function(){this.interactions._scrollToBottom();this.textContainer.focus()};var g=[];d.prototype.initializeRoundRobinCompilation=function(a,b){plt.wescheme.RoundRobin.initialize(g,function(){a.setCompileProgram(plt.wescheme.RoundRobin.roundRobinCompiler);b()},function(){a.setCompileProgram(plt.wescheme.RoundRobin.roundRobinCompiler);alert("WeScheme appears to be busy or unavailable at this time.  Please try again later.");b()})};var k=
function(a){var b=-1<a.className.indexOf("wrapped"),d=a.cachedWidth||c(a),e=document.getElementById("inter").offsetWidth;d=d>e;if(!b&&d||b&&!d)for(a.className=d?a.className+" wrapped":a.className.replace(/ wrapped/g,""),b=0;b<a.children.length;b++)k(a.children[b])},h=null;jQuery(window).bind("resize",function(){clearTimeout(h);h=setTimeout(function(){for(var a=document.getElementsByClassName("replOutput"),b=0;b<a.length;b++)k(a[b])},250)});var r=function(a){a.evaluator.write=function(a){};a.evaluator.transformDom=
function(a){};a.evaluator.requestBreak()},p=function(a,b){var c=new Evaluator({write:function(b){var c=b.ariaText||b.innerText;"CANVAS"===b.nodeName&&void 0!==window.Blob&&(b.ondblclick=function(){var a=b.toDataURL().match(/data:([^;]*)(;base64)?,([0-9A-Za-z+/]+)/),c=atob(a[3]),d=new ArrayBuffer(c.length);d=new Uint8Array(d);for(var e=0;e<d.length;e++)d[e]=c.charCodeAt(e);a=new Blob([d],{type:a[1]});void 0!=window.navigator.msSaveBlob?window.navigator.msSaveBlob(a,"WeScheme Image"):(c=document.createElement("a"),
c.href=(URL||webkitURL).createObjectURL(a),c.target=c.download="WeScheme Image",document.body.appendChild(c),c.click(),document.body.removeChild(c))},b.style.cursor="url(/static/img/dblclick.png), pointer");b.className+=" replOutput";b.setAttribute("aria-label",c);a.addToInteractions(b);a.sayAndForget(c);""!==c&&a.prompt.setRecentOutput(b);k(b)},transformDom:function(b){return a._transformDom(b)}}),d=jQuery("<div/>");a.initializeRoundRobinCompilation(c,function(){c.makeToplevelNode=function(){document.getElementById("editor").setAttribute("aria-hidden",
!0);d.dialog({bgiframe:!0,position:{my:"left top",at:"left top"},modal:!0,width:"auto",height:"auto",beforeClose:function(b,c){document.getElementById("editor").removeAttribute("aria-hidden");a.evaluator.requestBreak();d.dialog("destroy")},resizable:!1,closeOnEscape:!0});d.get(0).parentNode.style.position="absolute";var b=function(a){a&&(a.stopPropagation(),a.preventDefault());a=c.get(0);a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen;
document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen;d.dialog("option","closeOnEscape",document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen():a.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT)};(function(){var a=
document.createElement("div");return void 0!==(a.webkitRequestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.requestFullscreen)})()&&(jQuery("<span><img src='/static/img/fullscreen.png' style='position: absolute;'></span>").css("margin-top","5px").css("background-image","none").css("position","absolute").css("cursor","pointer").css("left","2em").click(b).appendTo(d.parent().find(".ui-dialog-titlebar")),d.dblclick(b));var c=jQuery("<div class='evaluatorToplevelNode' role='log' aria-live='polite'></div>");
for(c.css("background-color","white");d[0].firstChild;)d[0].removeChild(d[0].firstChild);d.append(c);d.dialog("open");return c.get(0)};c.setImageProxy("/imageProxy");c.setRootLibraryPath("/js/mzscheme-vm/collects");c.setDynamicModuleLoader(plt.wescheme.makeDynamicModuleLoader("/js/mzscheme-vm/collects"));b(c)})};d.prototype.focusOnPrompt=function(){this.prompt.focus()};d.prototype.notifyBus=function(a,b){"undefined"!=typeof plt.wescheme.WeSchemeIntentBus&&plt.wescheme.WeSchemeIntentBus.notify("after-reset",
this)};d.prototype.setSourceHighlighter=function(a){this.highlighter=a};d.prototype.setAddToCurrentHighlighter=function(a){this.addToCurrentHighlighter=a};d.prototype.setMoveCursor=function(a){this.moveCursor=a};d.prototype.setScrollIntoView=function(a){this.scrollIntoView=a};d.prototype.addSetSelection=function(a){this.setSelection=a};d.prototype.setFocus=function(a){this.focus=a};d.prototype.focus=function(){this.prompt.focus()};d.prototype.addOnReset=function(a){this.resetters.push(a)};d.prototype.removeOnReset=
function(a){var b;for(b=0;b<this.resetters.length;b++)if(a===this.resetters[b]){this.resetters.splice(b,1);break}};d.prototype.addToInteractions=function(a){this.notifyBus("before-add-to-interactions",this);if(void 0!=a.nodeType){var b=jQuery(a);b.click(function(a){a.stopPropagation()})}else b=jQuery("<div style='width: 100%'></div>"),b.text(a),b.click(function(a){a.stopPropagation()});jQuery(this.previousInteractionsDiv).append(b);this._scrollToBottom();this.notifyBus("after-add-to-interactions",
this)};d.prototype._scrollToBottom=function(){this.interactionsDiv.attr("scrollTop",this.interactionsDiv.attr("scrollHeight"))};d.prototype._transformDom=function(a){return helpers.isLocationDom(a)?this._rewriteLocationDom(a):a};d.prototype._rewriteLocationDom=function(a){document.createElement("span");a=a.children;for(var b,c,d,e,f,g,h=0;h<a.length;h++){var k=a[h].textContent||a[h].innerText;"location-id"===a[h].className&&(c=k);"location-offset"===a[h].className&&(b=k);"location-span"===a[h].className&&
(d=k);"location-line"===a[h].className&&(e=k);"location-column"===a[h].className&&(f=k);"location-color"===a[h].className&&(g=k)}g||(g="red");return this.createLocationHyperlink({id:c,offset:parseInt(b),line:parseInt(e),column:parseInt(f),span:parseInt(d),color:g})};d.prototype.runCode=function(a,b,c){function d(){plt.wescheme.WeSchemeEditor.defnInFocus?jQuery("#definitions").click():f.focusOnPrompt()}var f=this;"<definitions>"==b&&(f.compileTimeError=!1);setTimeout(e(f,function(){f.notifyBus("before-run",
f);f.disableInput();f.evaluator.executeProgram(b,a,e(f,function(){f.enableInput();d();c()}),e(f,function(a){f.handleError(a);f.enableInput();"<definitions>"==b&&(f.compileTimeError=!0);d();c()}))}),0)};d.prototype.handleError=function(a){var b=document.createElement("div");if(types.isSchemeError(a)&&types.isExnBreak(a.val)){b.className="moby-break-error";var c="The program has stopped."}else{b.className="moby-error";if(a.structuredError&&a.structuredError.message){var d=a.structuredError.message;
c=[];var e;for(e=0;e<d.length;e++)if("string"===typeof d[e])c.push(d[e]);else if("ColoredPart"===d[e].type)c.push(new types.ColoredPart(d[e].text,z(d[e].loc)));else if("GradientPart"===d[e].type){var f,g=[];for(f=0;f<d[e].parts.length;f++){var h=d[e].parts[f];g.push(new types.ColoredPart(h.text,z(h.loc)))}c.push(new types.GradientPart(g))}else"MultiPart"===d[e].type?c.push(new types.MultiPart(d[e].text,D(d[e].locs),d[e].solid)):c.push(d[e]+"");d=new types.Message(c)}else d=this.evaluator.getMessageFromExn(a);
c=d}d=document.createElement("div");d.className="moby-error:message";if(types.isMessage(c))if(this.withColoredErrorMessages)E(this,d,c);else{e=c;a:if(a.structuredError&&a.structuredError.message)c=a.structuredError.location;else{for(c=this.evaluator.getTraceFromExn(a);0<c.length;){c=c[0];break a}c=!1}e=e.args;g=new v(240,181,194);for(f=0;f<e.length;f++)if(types.isColoredPart(e[f]))d.appendChild(document.createTextNode(e[f].text));else if(types.isGradientPart(e[f])){var k=e[f].coloredParts;for(h=0;h<
k.length;h++)d.appendChild(document.createTextNode(k[h].text+""))}else types.isMultiPart(e[f])?d.appendChild(document.createTextNode(e[f].text+"")):d.appendChild(document.createTextNode(e[f]+""));this.addToCurrentHighlighter(c.id,c.offset,c.line,c.column,c.span,g+"")}else a.domMessage?b.appendChild(a.domMessage):d.appendChild(document.createTextNode(c));b.appendChild(d);a.structuredError&&a.structuredError.message&&(d=this.createLocationHyperlink(a.structuredError.location),b.appendChild(d));c=this.evaluator.getTraceFromExn(a);
e=document.createElement("div");e.className="error-stack-trace";for(d=0;d<c.length;d++)f=this.createLocationHyperlink(c[d]),e.appendChild(f);types.isSchemeError(a)&&types.isExnBreak(a.val)||b.appendChild(e);this.compileTimeError&&(c="An error occured the last time Run was clicked. This may be causing the error you see here. Make sure you fix the first error you see in the Interactions Area!",a=document.createElement("span"),a.className="compileTimeError",console.log(c),a.appendChild(document.createTextNode(c)),
console.log(a),b.appendChild(a));console.log(b);this.addToInteractions(b);this.say(b.textContent);this.prompt.setRecentOutput(b);this.addToInteractions("\n")};var v=function(a,b,c){this.red=a;this.green=b;this.blue=c};v.prototype.toString=function(){return"rgb("+this.red+","+this.green+","+this.blue+")"};var z=function(a){return types.vector([a.id,parseInt(a.offset),parseInt(a.line),parseInt(a.column),parseInt(a.span)])},D=function(a){var b=[],c;for(c=0;c<a.length;c++)b.push(z(a[c]));return b},E=
function(a,b,c){c=c.args;var d=[[new v(135,206,235),new v(176,196,222),new v(176,224,230),new v(173,216,230)],[new v(238,130,238),new v(216,191,216),new v(221,160,221),new v(218,112,214)],[new v(255,228,181),new v(238,232,170),new v(255,218,185)],[new v(222,184,135),new v(255,228,196),new v(255,222,173),new v(245,222,179)]],e=0,f=d[e][0],g,h=function(a,b){var c=0,g,h=1,k=2/(a.length+1);for(g=0;g<a.length;g++){c>=d[e].length&&(c=0,h-=k);f=d[e][c];var m=h;m="rgb("+Math.floor(m*f.red+255*(1-m))+","+
Math.floor(m*f.green+255*(1-m))+","+Math.floor(m*f.blue+255*(1-m))+")";b(a[g],m);c++}},k=function(c){B(a,b,f,c.text,[f],[c.location]);e=(e+1)%d.length},p=function(c){h(c.coloredParts,function(c,d){B(a,b,d,c.text,[d],[c.location])});e=(e+1)%d.length},m=function(c){var g=[],k,m=f;if(0<c.locations.length){if(c.solid||1===c.locations.length){for(k=0;k<c.locations.length;k++)g.push(m);B(a,b,m,c.text,g,c.locations)}else{h([void 0].concat(c.locations),function(a,b){g.push(b)});B(a,b,m,c.text,g.slice(1),
c.locations);jQuery(b).append("\u00ab");for(k=0;k<c.locations.length;k++)m=jQuery("<tt/>"),m.text("\u2b1c"),B(a,b,g.slice(1)[k],m,[g.slice(1)[k]],[c.locations[k]]);jQuery(b).append("\u00bb")}e=(e+1)%d.length}else b.appendChild(document.createTextNode(c.text+""))};for(g=0;g<c.length;g++)f=d[e][0],types.isColoredPart(c[g])?k(c[g]):types.isGradientPart(c[g])?p(c[g]):types.isMultiPart(c[g])?m(c[g]):b.appendChild(document.createTextNode(c[g]+""))},B=function(a,b,c,d,e,f){var g,h=[];"string"===typeof d&&
(d=jQuery("<span/>").text(d));for(g=0;g<f.length;g++)h.push(a.addToCurrentHighlighter(f[g].ref(0),f[g].ref(1),f[g].ref(2),f[g].ref(3),f[g].ref(4),e[g]+""));"<no-location>"===f[0].ref(0)?jQuery(b).append(d):(a=P(a,f,h,c),c=jQuery("<span/>").css("background-color",c+"").addClass("colored-link").click(a),d=jQuery("<a/>").append(d).attr("href","#").click(a),jQuery(c).append(d),jQuery(b).append(c))},P=function(a,b,c,d){var e=b[0];return function(b){b.stopPropagation();b.preventDefault();a.scrollIntoView(e.ref(0),
parseInt(e.ref(1)));a.focusOnPrompt();for(b=0;b<c.length;b++)I(c[b].styleName)}},I=function(a){var b=0,c=setInterval(function(){jQuery("."+a).css("opacity",b);b+=.02;1<=b&&clearInterval(c)},15)};d.prototype.createLocationHyperlink=function(a,b){b||(b=document.createTextNode("at: line "+a.line+", column "+a.column+", in "+a.id));var c=document.createElement("p");c.className="location-paragraph";var d=document.createElement("a");d.href="#";d.onclick=Q(this,a);d.appendChild(b);c.appendChild(d);return c};
var Q=function(a,b){return function(){a.highlighter(b.id,b.offset,b.line,b.column,b.span,"rgb(255, 200, 200)")}};d.prototype.disableInput=function(){this.prompt.hide()};d.prototype.enableInput=function(){this.prompt.show()};d.prototype.requestBreak=function(){this.evaluator.requestBreak()};d.prototype.toString=function(){return"WeSchemeInteractions()"};var A=0;var R=function(){return"<interactions"+A++ +">"};return d}();plt.wescheme.WeSchemeInteractions=WeSchemeInteractions;var WeSchemeEditor;
(function(){var a=0,b;WeSchemeEditor=function(a,b){var c=this;this.userName=a.userName;this.actions=new plt.wescheme.AjaxActions;this.onResize=void 0;this.defn=a.defn;this.screenreader=this.isOwner=!1;this.suppressWarningBeforeUnloadE=receiverE();this.suppressWarningBeforeUnloadB=startsWith(this.suppressWarningBeforeUnloadE,!1);new plt.wescheme.WeSchemeInteractions(a.interactions,function(d){c.interactions=d;c.interactions.setSourceHighlighter(function(a,b,d,e,f,v){c.unhighlightAll();return c.highlight(a,
b,d,e,f,v)});c.interactions.setAddToCurrentHighlighter(function(a,b,d,e,f,v){return c.highlight(a,b,d,e,f,v)});c.interactions.addOnReset(function(){c.defn.unhighlightAll()});c.interactions.setMoveCursor(function(a,b){c.moveCursor(a,b)});c.interactions.setScrollIntoView(function(a,b,d){c.scrollIntoView(a,b,d)});c.interactions.setFocus(function(a){c.focus(a)});c.interactions.addSetSelection(function(a,b,d,e,f){c.setSelection(a,b,d,e,f)});c.pid=!1;c.filenameEntry=new FlapjaxValueHandler(a.filenameInput.get(0));
c.filenameEntry.node.type="text";c.filenameEntry.setValue("");c.filenameEntry.behavior.changes().mapE(function(a){document.title=plt.wescheme.helpers.trimWhitespace(a)||"<< Unnamed Program >>";plt.wescheme.WeSchemeIntentBus.notify("filename-changed",c)});c.defn.getSourceB().changes().mapE(function(){c.unhighlightAll();plt.wescheme.WeSchemeIntentBus.notify("definitions-changed",c)});c.savedE=receiverE();c.loadedE=receiverE();c.isPublishedE=receiverE();c.contentChangedE=mergeE(constantE(changes(c.defn.getSourceB()),
!0),constantE(changes(c.filenameEntry.behavior),!0));c.isOwnerE=receiverE();c.isLoggedInB=constantB(c._getIsLoggedIn());c.pidB=startsWith(c.loadedE.mapE(function(a){return c.pid}),c.pid);c.isNewFileB=startsWith(changes(c.pidB).mapE(function(a){return 0==c.pid}),0==c.pid);c.isPublishedB=startsWith(c.isPublishedE,!1);c.isOwnerB=startsWith(c.isOwnerE,c.isOwner);c.isDirtyB=startsWith(mergeE(constantE(c.loadedE,!1),constantE(c.savedE,!1),constantE(c.contentChangedE,!0)),!1);c.isAutosaveEnabledB=andB(c.isDirtyB,
notB(c.isPublishedB),c.isOwnerB,c.isLoggedInB);c.autosaveRequestedE=calmE(andE(c.contentChangedE,changes(c.isAutosaveEnabledB)),constantB(1E4));c.autosaveRequestedE.mapE(function(a){a&&c._autosave()});b&&b(c)});this.focusCarousel=[document.getElementById("Tools"),c.defn.div.getElementsByClassName("CodeMirror-scroll")[0],c.interactions.prompt.div[0],document.getElementById("announcements")]};WeSchemeEditor.prototype.setOnResize=function(a){this.onResize=a};WeSchemeEditor.prototype.forceOnResize=function(){this.onResize()};
WeSchemeEditor.prototype.disableColoredErrorMessages=function(){this.interactions.disableColoredErrorMessages()};WeSchemeEditor.prototype.highlight=function(a,b,e,f,g,k){if("<no-location>"!==a){if("<definitions>"===a)return this.defn.highlight(a,b,e,f,g,k);if(this.interactions.previousInteractionsTextContainers[a])return this.interactions.previousInteractionsTextContainers[a].highlight(a,b,e,f,g,k)}};WeSchemeEditor.prototype.setSelection=function(a,b,e,f,g,k){"<definitions>"===a?this.defn.setSelection(a,
b,e,f,g):this.interactions.previousInteractionsTextContainers[a]&&this.interactions.previousInteractionsTextContainers[a].setSelection(a,b,e,f,g)};WeSchemeEditor.prototype.unhighlightAll=function(){for(var a in this.interactions.previousInteractionsTextContainers)this.interactions.previousInteractionsTextContainers.hasOwnProperty(a)&&this.interactions.previousInteractionsTextContainers[a].unhighlightAll();this.defn.unhighlightAll()};WeSchemeEditor.prototype.moveCursor=function(a,b){"<definitions>"===
a?this.defn.moveCursor(b):this.interactions.previousInteractionsTextContainers[a]&&this.interactions.previousInteractionsTextContainers[a].moveCursor(b)};WeSchemeEditor.prototype.scrollIntoView=function(a,b,e){"<definitions>"===a?this.defn.scrollIntoView(b,e):this.interactions.previousInteractionsTextContainers[a]&&this.interactions.previousInteractionsTextContainers[a].scrollIntoView(b,e)};WeSchemeEditor.prototype.focus=function(a){"<definitions>"===a?this.defn.focus():this.interactions.previousInteractionsTextContainers[a]&&
this.interactions.previousInteractionsTextContainers[a].focus()};WeSchemeEditor.prototype._getIsLoggedIn=function(){return this.userName&&"null"!=this.userName};WeSchemeEditor.prototype._autosave=function(){plt.wescheme.WeSchemeIntentBus.notify("autosave",this);this.save()};WeSchemeEditor.prototype.save=function(c,d,e){var f=this,g=function(d){f.pid=d;f.savedE.sendEvent(!0);a=0;clearTimeout(b);plt.wescheme.WeSchemeIntentBus.notify("after-save",f);c&&c()},k=function(){a=Math.min(a+1,8);b=setTimeout(function(){alert("Unable to save!\n\nYou may have been logged out of Google Services.\nRefresh the Program List to log back in.")},
1E3*Math.pow(2,a));d&&d()},h=function(a){f.suppressWarningBeforeUnloadE.sendEvent(!0);plt.wescheme.WeSchemeIntentBus.notify("before-editor-reload-on-save",f);window.location="/openEditor?pid="+encodeURIComponent(a)};f.filenameEntry.attr("value",plt.wescheme.helpers.trimWhitespace(f.filenameEntry.attr("value")));f._enforceNonemptyName(function(){plt.wescheme.WeSchemeIntentBus.notify("before-save",f);0==f.pid?f.actions.save({pid:!1,title:f.filenameEntry.attr("value"),code:f.defn.getCode()},h,k):valueNow(f.isPublishedB)?
f.actions.makeAClone(f.pid,f.defn.getCode(),function(a){f.actions.save({pid:a,title:f.filenameEntry.attr("value"),code:f.defn.getCode()},function(){g(a);h(a)},k)},k):f.actions.save({pid:f.pid,title:f.filenameEntry.attr("value"),code:f.defn.getCode()},g,k)},function(){e&&e()},!0)};WeSchemeEditor.prototype._enforceNonemptyName=function(a,b,e){var c=this;if(""===plt.wescheme.helpers.trimWhitespace(c.filenameEntry.attr("value"))){var d=jQuery("<div/>"),k=!1,h=jQuery("<input type='text' style='border: solid'/>");
d.append(jQuery("<p/>").text("Please provide a name for your program: "));d.append(jQuery("<p/>").text("(The name cannot be left blank.)"));d.append(h);d.dialog({title:"Saving your program",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"},buttons:{Save:function(){k=!0;d.dialog("close");c.filenameEntry.attr("value",plt.wescheme.helpers.trimWhitespace(h.attr("value")));c._enforceNonemptyName(a,b,!1)},"Don't Save":function(){k=!0;d.dialog("close");b()}}});d.bind("dialogclose",function(a,
c){k||b()});var r;d.dialog("widget").parent().find(":button").each(function(a){"Save"===jQuery(this).text()&&(r=this)});e=function(){setTimeout(function(){""===plt.wescheme.helpers.trimWhitespace(h.val())?(r.disabled=!0,jQuery(r).hide("fast")):(r.disabled=!1,jQuery(r).show("fast"))},0)};e();h.keydown(e);h.change(e)}else a()};WeSchemeEditor.prototype.load=function(a,b,e){var c=this,d=function(d){c.pid=d.getId();var e="/openEditor?publicId="+encodeURIComponent(d.getPublicId());document.createElement("a").href=
e;c.filenameEntry.attr("value",d.getTitle());a.pid?c.defn.setCode(d.getSourceCode()):a.publicId&&d.isSourcePublic()?c.defn.setCode(d.getSourceCode()):c.defn.setCode(";;  << Source code has not been shared >>");c.userName===d.getOwner()?c._setIsOwner(!0):c._setIsOwner(!1);c.loadedE.sendEvent(!0);c.isPublishedE.sendEvent(d.isPublished());plt.wescheme.WeSchemeIntentBus.notify("after-load",c);b&&b(d.getSourceCode())},k=function(){alert("The load failed.");e&&e()};if(a.pid)plt.wescheme.WeSchemeIntentBus.notify("before-load",
this),c.actions.loadProject(a.pid,void 0,d,k);else if(a.publicId)plt.wescheme.WeSchemeIntentBus.notify("before-load",this),c.actions.loadProject(void 0,a.publicId,d,k);else throw Error("pid or publicId required");};WeSchemeEditor.prototype.share=function(){(new plt.wescheme.SharingDialog(this.pid,this.defn.getCode())).show()};WeSchemeEditor.prototype.showNotesDialog=function(){(new plt.wescheme.NotesDialog(this.pid)).show(function(){},function(){})};WeSchemeEditor.prototype.toggleHelp=function(){function a(a){b.style.top=
"100%";b.blur()}var b=document.getElementById("helpDialog");"25%"==b.style.top?a():(b.style.top="25%",b.focus(),document.getElementById("editor").setAttribute("aria-activedescendant",b.id));b.onclick=a};


// Create and render a Google Picker object for selecting from Drive
WeSchemeEditor.prototype.showPicker=function(a){
    
    // where is the focus?
    var editor = a ? this.defn : this.interactions.prompt.textContainer;

    
    // Setting the image permissions for anyone having
    // the link.
    function setPermissionsAndInsertCode(fileId, body) {
        var request = gapi.client.drive.permissions.insert({
            'fileId': fileId,
            'resource': body
        });

        request.execute(function(resp) { });

        // Insert the generated code for producing the image in the 
        // definitions console.
        var code = editor.getCode();
        var curPos = editor.getCursorStartPosition();
        var preCursorCode = code.slice(0, curPos);
        var postCursorCode = code.slice(curPos, code.length);
        var pathToImg = "\"https://drive.google.com/uc?export=download&id=" + fileId + "\"";
        editor.setCode(preCursorCode + "(image-url "+ pathToImg +")"+postCursorCode);
    }



    function pickerCallback(data) {
        if (data.action == google.picker.Action.PICKED) {
            var doc = data[google.picker.Response.DOCUMENTS][0];
            var url = doc[google.picker.Document.URL];

            var permissions_body = {
                'role': 'reader',
                'type': 'anyone',
                'value': 'default',
                'withLink': true
            };

            // gapi.load('drive', 'v2', setPermissionsAndInsertCode.bind(this, doc.id, permissions_body));
            gapi.client.load('drive', 'v2', setPermissionsAndInsertCode.bind(this, doc.id, permissions_body));
        }
    }

    const showPicker = () => {
        // TODO(developer): Replace with your API key
        var view = new google.picker.View(google.picker.ViewId.DOCS);
        view.setMimeTypes("image/png,image/jpeg,image/jpg,image/webp");
        const picker = new google.picker.PickerBuilder()
            .enableFeature(google.picker.Feature.NAV_HIDDEN)
            .enableFeature(google.picker.Feature.MULTISELECT_ENABLED)
            .addView(view)
            .addView(new google.picker.DocsUploadView())
            .setAppId(plt.config.APP_ID)
            .setOAuthToken(accessToken)
            .setDeveloperKey(plt.config.API_KEY)
            .setCallback(pickerCallback)
            .build();
        picker.setVisible(true);
    }

    // Request an access token
    tokenClient.callback = async (response) => {
        if (response.error !== undefined) {
            throw (response);
        }
        accessToken = response.access_token;
        showPicker();
    };

    if (accessToken === null) {
        // Prompt the user to select a Google Account and ask for consent to share their data
        // when establishing a new session.
        tokenClient.requestAccessToken({prompt: 'consent'});
    } else {
        // Skip display of account chooser and consent dialog for an existing session.
        tokenClient.requestAccessToken({prompt: ''});
    }
}

WeSchemeEditor.prototype.toggleScreenreader=function(){this.screenreader=!this.screenreader;this.interactions.say("screenreader features "+(this.screenreader?"on":"off"),!0)};WeSchemeEditor.prototype.getScreenreader=function(){return this.screenreader};WeSchemeEditor.prototype.cycleFocus=function(a){var b=this.focusCarousel.length,c=this.focusCarousel.find(function(a){return a.contains(document.activeElement)});
c=this.focusCarousel.indexOf(c);a=this.focusCarousel[((c+(a?-1:1))%b+b)%b];document.activeElement.blur();document.getElementById("editor").setAttribute("aria-activedescendant",a.id);a.click();a.focus()};WeSchemeEditor.prototype.run=function(a){var b=this;if(!0===b.isRunning)return!1;b.isRunning=!0;plt.wescheme.WeSchemeIntentBus.notify("before-run",this);this.interactions.reset();this.interactions.runCode(this.defn.getCode(),"<definitions>",function(){b.isRunning=!1;plt.wescheme.WeSchemeIntentBus.notify("after-run",
b);a&&a()})};WeSchemeEditor.prototype.getDefinitionsText=function(){return this.defn.getCode()};WeSchemeEditor.prototype.setDefinitionsText=function(a){this.defn.setCode(a)};WeSchemeEditor.prototype.requestBreak=function(){this.interactions.requestBreak()};WeSchemeEditor.prototype._setIsOwner=function(a){this.isOwner=a;this.isOwnerE.sendEvent(a)};WeSchemeEditor.prototype.toString=function(){return"WeSchemeEditor()"};WeSchemeEditor.prototype.getTokenizer=function(){return plt.wescheme.tokenizer}})();
plt.wescheme.WeSchemeEditor=WeSchemeEditor;plt.wescheme.selenium={};plt.wescheme.selenium.test1=function(){alert("hi, this is a function")};plt.wescheme.selenium.findParen=function(a){for(var b=jQuery("span").filter(function(){return jQuery(this).text()===a});0<b.length;)return jQuery("span").filter(function(){return jQuery(this).text()===a}).css("background-color")};plt.wescheme.selenium.moveCursor=function(a){window.myEditor.defn.impl.moveCursor(a);return!0};
plt.wescheme.selenium.hasColoredText=function(a,b){var c=jQuery("span"),d;for(d=0;d<c.length;d++){var e=jQuery(c[d]);if(e.text()===a&&e.css("background-color")===b)return!0}return!1};plt.wescheme.selenium.hasText=function(a){var b=jQuery("div"),c;for(c=0;c<b.length;c++)if(jQuery(b[c]).text()===a)return!0;return!1};goog.dom.a11y={};
goog.dom.a11y.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",
PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};
goog.dom.a11y.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",
MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",
TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"};goog.dom.a11y.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"};goog.dom.a11y.setRole=function(a,b){a.setAttribute("role",b);a.roleName=b};goog.dom.a11y.getRole=function(a){return a.roleName||""};goog.dom.a11y.setState=function(a,b,c){a.setAttribute("aria-"+b,c)};goog.dom.a11y.getState=function(a,b){a=a.getAttribute("aria-"+b);return!0===a||!1===a?a?"true":"false":a?String(a):""};
goog.dom.a11y.getActiveDescendant=function(a){var b=goog.dom.a11y.getState(a,goog.dom.a11y.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(a).getElementById(b)};goog.dom.a11y.setActiveDescendant=function(a,b){goog.dom.a11y.setState(a,goog.dom.a11y.State.ACTIVEDESCENDANT,b?b.id:"")};goog.dom.a11y.Announcer=function(a){goog.base(this);this.domHelper_=a;this.liveRegions_={}};goog.inherits(goog.dom.a11y.Announcer,goog.Disposable);
goog.dom.a11y.Announcer.prototype.disposeInternal=function(){goog.object.forEach(this.liveRegions_,this.domHelper_.removeNode,this.domHelper_);this.domHelper_=this.liveRegions_=null;goog.base(this,"disposeInternal")};goog.dom.a11y.Announcer.prototype.say=function(a,b){goog.dom.setTextContent(this.getLiveRegion_(b||goog.dom.a11y.LivePriority.POLITE),a)};
goog.dom.a11y.Announcer.prototype.getLiveRegion_=function(a){if(this.liveRegions_[a])return this.liveRegions_[a];var b=this.domHelper_.createElement("div");b.style.position="absolute";b.style.top="-1000px";goog.dom.a11y.setState(b,"live",a);goog.dom.a11y.setState(b,"atomic","true");this.domHelper_.getDocument().body.appendChild(b);return this.liveRegions_[a]=b};goog.events.KeyHandler=function(a,b){goog.events.EventTarget.call(this);a&&this.attach(a,b)};goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);
goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,
63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.mozKeyCodeToKeyCodeMap_={61:187,59:186};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525");
goog.events.KeyHandler.prototype.handleKeyDown_=function(a){goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!a.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!a.altKey)&&(this.keyCode_=this.lastKey_=-1);goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(a.keyCode,this.lastKey_,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):this.keyCode_=goog.userAgent.GECKO&&a.keyCode in goog.events.KeyHandler.mozKeyCodeToKeyCodeMap_?goog.events.KeyHandler.mozKeyCodeToKeyCodeMap_[a.keyCode]:
a.keyCode};goog.events.KeyHandler.prototype.handleKeyup_=function(a){this.keyCode_=this.lastKey_=-1};
goog.events.KeyHandler.prototype.handleEvent=function(a){var b=a.getBrowserEvent();if(goog.userAgent.IE&&a.type==goog.events.EventType.KEYPRESS){var c=this.keyCode_;var d=c!=goog.events.KeyCodes.ENTER&&c!=goog.events.KeyCodes.ESC?b.keyCode:0}else goog.userAgent.WEBKIT&&a.type==goog.events.EventType.KEYPRESS?(c=this.keyCode_,d=0<=b.charCode&&63232>b.charCode&&goog.events.KeyCodes.isCharacterKey(c)?b.charCode:0):goog.userAgent.OPERA?(c=this.keyCode_,d=goog.events.KeyCodes.isCharacterKey(c)?b.keyCode:
0):(c=b.keyCode||this.keyCode_,d=b.charCode||0,goog.userAgent.MAC&&d==goog.events.KeyCodes.QUESTION_MARK&&!c&&(c=goog.events.KeyCodes.SLASH));var e=c,f=b.keyIdentifier;c?63232<=c&&c in goog.events.KeyHandler.safariKey_?e=goog.events.KeyHandler.safariKey_[c]:25==c&&a.shiftKey&&(e=9):f&&f in goog.events.KeyHandler.keyIdentifier_&&(e=goog.events.KeyHandler.keyIdentifier_[f]);a=e==this.lastKey_;this.lastKey_=e;b=new goog.events.KeyEvent(e,d,a,b);try{this.dispatchEvent(b)}finally{b.dispose()}};
goog.events.KeyHandler.prototype.getElement=function(){return this.element_};goog.events.KeyHandler.prototype.attach=function(a,b){this.keyUpKey_&&this.detach();this.element_=a;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,b);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,b,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,b,this)};
goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null);this.element_=null;this.keyCode_=this.lastKey_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(a,b,c,d){goog.events.BrowserEvent.call(this,d);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=a;this.charCode=b;this.repeat=c};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance();
goog.ui.Component=function(a){goog.events.EventTarget.call(this);this.dom_=a||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.defaultRightToLeft_=null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(a,b){switch(a){case goog.ui.Component.State.DISABLED:return b?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return b?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return b?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return b?goog.ui.Component.EventType.SELECT:
goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return b?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return b?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return b?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(a){goog.ui.Component.defaultRightToLeft_=a};goog.ui.Component.prototype.id_=null;goog.ui.Component.prototype.inDocument_=!1;goog.ui.Component.prototype.element_=null;goog.ui.Component.prototype.rightToLeft_=null;goog.ui.Component.prototype.model_=null;goog.ui.Component.prototype.parent_=null;goog.ui.Component.prototype.children_=null;goog.ui.Component.prototype.childIndex_=null;goog.ui.Component.prototype.wasDecorated_=!1;
goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(a){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,a,this));this.id_=a};goog.ui.Component.prototype.getElement=function(){return this.element_};goog.ui.Component.prototype.setElementInternal=function(a){this.element_=a};
goog.ui.Component.prototype.getElementsByClass=function(a){return this.element_?this.dom_.getElementsByClass(a,this.element_):[]};goog.ui.Component.prototype.getElementByClass=function(a){return this.element_?this.dom_.getElementByClass(a,this.element_):null};goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))};
goog.ui.Component.prototype.setParent=function(a){if(this==a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(a&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=a)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=a;goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(a){if(this.parent_&&this.parent_!=a)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,a)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};goog.ui.Component.prototype.render=function(a){this.render_(a)};
goog.ui.Component.prototype.renderBefore=function(a){this.render_(a.parentNode,a)};goog.ui.Component.prototype.render_=function(a,b){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom();a?a.insertBefore(this.element_,b||null):this.dom_.getDocument().body.appendChild(this.element_);this.parent_&&!this.parent_.isInDocument()||this.enterDocument()};
goog.ui.Component.prototype.decorate=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(a&&this.canDecorate(a))this.wasDecorated_=!0,this.dom_&&this.dom_.getDocument()==goog.dom.getOwnerDocument(a)||(this.dom_=goog.dom.getDomHelper(a)),this.decorateInternal(a),this.enterDocument();else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(a){return!0};goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};
goog.ui.Component.prototype.decorateInternal=function(a){this.element_=a};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0;this.forEachChild(function(a){!a.isInDocument()&&a.getElement()&&a.enterDocument()})};goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(a){a.isInDocument()&&a.exitDocument()});this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll();this.inDocument_=!1};
goog.ui.Component.prototype.disposeInternal=function(){goog.ui.Component.superClass_.disposeInternal.call(this);this.inDocument_&&this.exitDocument();this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_);this.forEachChild(function(a){a.dispose()});!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_);this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null};
goog.ui.Component.prototype.makeId=function(a){return this.getId()+"."+a};goog.ui.Component.prototype.makeIds=function(a){var b={},c;for(c in a)b[c]=this.makeId(a[c]);return b};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(a){this.model_=a};goog.ui.Component.prototype.getFragmentFromId=function(a){return a.substring(this.getId().length+1)};
goog.ui.Component.prototype.getElementByFragment=function(a){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(a))};goog.ui.Component.prototype.addChild=function(a,b){this.addChildAt(a,this.getChildCount(),b)};
goog.ui.Component.prototype.addChildAt=function(a,b,c){if(a.inDocument_&&(c||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>b||b>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]);a.getParent()==this?(goog.object.set(this.childIndex_,a.getId(),a),goog.array.remove(this.children_,a)):goog.object.add(this.childIndex_,a.getId(),a);a.setParent(this);goog.array.insertAt(this.children_,
a,b);a.inDocument_&&this.inDocument_&&a.getParent()==this?(c=this.getContentElement(),c.insertBefore(a.getElement(),c.childNodes[b]||null)):c?(this.element_||this.createDom(),b=this.getChildAt(b+1),a.render_(this.getContentElement(),b?b.element_:null)):this.inDocument_&&!a.inDocument_&&a.element_&&a.enterDocument()};goog.ui.Component.prototype.getContentElement=function(){return this.element_};
goog.ui.Component.prototype.isRightToLeft=function(){null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body));return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(a){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=a};goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length};
goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var a=[];this.forEachChild(function(b){a.push(b.getId())});return a};goog.ui.Component.prototype.getChild=function(a){return this.childIndex_&&a?goog.object.get(this.childIndex_,a)||null:null};goog.ui.Component.prototype.getChildAt=function(a){return this.children_?this.children_[a]||null:null};
goog.ui.Component.prototype.forEachChild=function(a,b){this.children_&&goog.array.forEach(this.children_,a,b)};goog.ui.Component.prototype.indexOfChild=function(a){return this.children_&&a?goog.array.indexOf(this.children_,a):-1};
goog.ui.Component.prototype.removeChild=function(a,b){if(a){var c=goog.isString(a)?a:a.getId();a=this.getChild(c);c&&a&&(goog.object.remove(this.childIndex_,c),goog.array.remove(this.children_,a),b&&(a.exitDocument(),a.element_&&goog.dom.removeNode(a.element_)),a.setParent(null))}if(!a)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return a};goog.ui.Component.prototype.removeChildAt=function(a,b){return this.removeChild(this.getChildAt(a),b)};
goog.ui.Component.prototype.removeChildren=function(a){for(;this.hasChildren();)this.removeChildAt(0,a)};goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);goog.ui.ControlRenderer.getCustomRenderer=function(a,b){a=new a;a.getCssClass=function(){return b};return a};goog.ui.ControlRenderer.CSS_CLASS="goog-control";goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];goog.ui.ControlRenderer.prototype.getAriaRole=function(){};
goog.ui.ControlRenderer.prototype.createDom=function(a){var b=a.getDomHelper().createDom("div",this.getClassNames(a).join(" "),a.getContent());this.setAriaStates(a,b);return b};goog.ui.ControlRenderer.prototype.getContentElement=function(a){return a};
goog.ui.ControlRenderer.prototype.enableClassName=function(a,b,c){if(a=a.getElement?a.getElement():a)if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var d=this.getAppliedCombinedClassNames_(goog.dom.classes.get(a),b);d.push(b);goog.partial(c?goog.dom.classes.add:goog.dom.classes.remove,a).apply(null,d)}else goog.dom.classes.enable(a,b,c)};goog.ui.ControlRenderer.prototype.enableExtraClassName=function(a,b,c){this.enableClassName(a,b,c)};goog.ui.ControlRenderer.prototype.canDecorate=function(a){return!0};
goog.ui.ControlRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getContentElement(b);c&&c.firstChild?a.setContentInternal(c.firstChild.nextSibling?goog.array.clone(c.childNodes):c.firstChild):a.setContentInternal(null);var d=0,e=this.getCssClass(),f=this.getStructuralCssClass(),g=!1,k=!1;c=!1;var h=goog.dom.classes.get(b);goog.array.forEach(h,function(a){g||a!=e?k||a!=f?d|=this.getStateFromClass(a):k=!0:(g=!0,f==e&&(k=!0))},this);a.setStateInternal(d);g||(h.push(e),f==e&&(k=
!0));k||h.push(f);var r=a.getExtraClassNames();r&&h.push.apply(h,r);if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var p=this.getAppliedCombinedClassNames_(h);0<p.length&&(h.push.apply(h,p),c=!0)}g&&k&&!r&&!c||goog.dom.classes.set(b,h.join(" "));this.setAriaStates(a,b);return b};goog.ui.ControlRenderer.prototype.initializeDom=function(a){a.isRightToLeft()&&this.setRightToLeft(a.getElement(),!0);a.isEnabled()&&this.setFocusable(a,a.isVisible())};
goog.ui.ControlRenderer.prototype.setAriaRole=function(a,b){(b=b||this.getAriaRole())&&goog.dom.a11y.setRole(a,b)};
goog.ui.ControlRenderer.prototype.setAriaStates=function(a,b){goog.asserts.assert(a);goog.asserts.assert(b);a.isEnabled()||this.updateAriaState(b,goog.ui.Component.State.DISABLED,!0);a.isSelected()&&this.updateAriaState(b,goog.ui.Component.State.SELECTED,!0);a.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(b,goog.ui.Component.State.CHECKED,a.isChecked());a.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(b,goog.ui.Component.State.OPENED,a.isOpen())};
goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(a,b){goog.style.setUnselectable(a,!b,!goog.userAgent.IE&&!goog.userAgent.OPERA)};goog.ui.ControlRenderer.prototype.setRightToLeft=function(a,b){this.enableClassName(a,this.getStructuralCssClass()+"-rtl",b)};goog.ui.ControlRenderer.prototype.isFocusable=function(a){var b;return a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(b=a.getKeyEventTarget())?goog.dom.isFocusableTabIndex(b):!1};
goog.ui.ControlRenderer.prototype.setFocusable=function(a,b){var c;if(a.isSupportedState(goog.ui.Component.State.FOCUSED)&&(c=a.getKeyEventTarget())){if(!b&&a.isFocused()){try{c.blur()}catch(d){}a.isFocused()&&a.handleBlur(null)}goog.dom.isFocusableTabIndex(c)!=b&&goog.dom.setFocusableTabIndex(c,b)}};goog.ui.ControlRenderer.prototype.setVisible=function(a,b){goog.style.showElement(a,b)};
goog.ui.ControlRenderer.prototype.setState=function(a,b,c){var d=a.getElement();if(d){var e=this.getClassForState(b);e&&this.enableClassName(a,e,c);this.updateAriaState(d,b,c)}};
goog.ui.ControlRenderer.prototype.updateAriaState=function(a,b,c){goog.ui.ControlRenderer.ARIA_STATE_MAP_||(goog.ui.ControlRenderer.ARIA_STATE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.dom.a11y.State.DISABLED,goog.ui.Component.State.SELECTED,goog.dom.a11y.State.SELECTED,goog.ui.Component.State.CHECKED,goog.dom.a11y.State.CHECKED,goog.ui.Component.State.OPENED,goog.dom.a11y.State.EXPANDED));(b=goog.ui.ControlRenderer.ARIA_STATE_MAP_[b])&&goog.dom.a11y.setState(a,b,c)};
goog.ui.ControlRenderer.prototype.setContent=function(a,b){var c=this.getContentElement(a);c&&(goog.dom.removeChildren(c),b&&(goog.isString(b)?goog.dom.setTextContent(c,b):(a=function(a){if(a){var b=goog.dom.getOwnerDocument(c);c.appendChild(goog.isString(a)?b.createTextNode(a):a)}},goog.isArray(b)?goog.array.forEach(b,a):!goog.isArrayLike(b)||"nodeType"in b?a(b):goog.array.forEach(goog.array.clone(b),a))))};goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};
goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};
goog.ui.ControlRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=[b],d=this.getStructuralCssClass();d!=b&&c.push(d);b=this.getClassNamesForState(a.getState());c.push.apply(c,b);(a=a.getExtraClassNames())&&c.push.apply(c,a);goog.userAgent.IE&&!goog.userAgent.isVersion("7")&&c.push.apply(c,this.getAppliedCombinedClassNames_(c));return c};
goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(a,b){var c=[];b&&(a=a.concat([b]));goog.array.forEach(this.getIe6ClassCombinations(),function(d){!goog.array.every(d,goog.partial(goog.array.contains,a))||b&&!goog.array.contains(d,b)||c.push(d.join("_"))});return c};goog.ui.ControlRenderer.prototype.getClassNamesForState=function(a){for(var b=[];a;){var c=a&-a;b.push(this.getClassForState(c));a&=~c}return b};
goog.ui.ControlRenderer.prototype.getClassForState=function(a){this.classByState_||this.createClassByStateMap_();return this.classByState_[a]};goog.ui.ControlRenderer.prototype.getStateFromClass=function(a){this.stateByClass_||this.createStateByClassMap_();a=parseInt(this.stateByClass_[a],10);return isNaN(a)?0:a};
goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var a=this.getStructuralCssClass();this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,a+"-disabled",goog.ui.Component.State.HOVER,a+"-hover",goog.ui.Component.State.ACTIVE,a+"-active",goog.ui.Component.State.SELECTED,a+"-selected",goog.ui.Component.State.CHECKED,a+"-checked",goog.ui.Component.State.FOCUSED,a+"-focused",goog.ui.Component.State.OPENED,a+"-open")};
goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.ui.registry={};goog.ui.registry.getDefaultRenderer=function(a){for(var b;a;){b=goog.getUid(a);if(b=goog.ui.registry.defaultRenderers_[b])break;a=a.superClass_?a.superClass_.constructor:null}return b?goog.isFunction(b.getInstance)?b.getInstance():new b:null};
goog.ui.registry.setDefaultRenderer=function(a,b){if(!goog.isFunction(a))throw Error("Invalid component class "+a);if(!goog.isFunction(b))throw Error("Invalid renderer class "+b);a=goog.getUid(a);goog.ui.registry.defaultRenderers_[a]=b};goog.ui.registry.getDecoratorByClassName=function(a){return a in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[a]():null};
goog.ui.registry.setDecoratorByClassName=function(a,b){if(!a)throw Error("Invalid class name "+a);if(!goog.isFunction(b))throw Error("Invalid decorator function "+b);goog.ui.registry.decoratorFunctions_[a]=b};goog.ui.registry.getDecorator=function(a){for(var b=goog.dom.classes.get(a),c=0,d=b.length;c<d;c++)if(a=goog.ui.registry.getDecoratorByClassName(b[c]))return a;return null};goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};
goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.ui.decorate=function(a){var b=goog.ui.registry.getDecorator(a);b&&b.decorate(a);return b};goog.ui.Control=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(a)};goog.inherits(goog.ui.Control,goog.ui.Component);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;
goog.ui.Control.decorate=goog.ui.decorate;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=!0;goog.ui.Control.prototype.extraClassNames_=null;
goog.ui.Control.prototype.handleMouseEvents_=!0;goog.ui.Control.prototype.allowTextSelection_=!1;goog.ui.Control.prototype.preferredAriaRole_=null;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};goog.ui.Control.prototype.setHandleMouseEvents=function(a){this.isInDocument()&&a!=this.handleMouseEvents_&&this.enableMouseEventHandling_(a);this.handleMouseEvents_=a};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};
goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};goog.ui.Control.prototype.setRenderer=function(a){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null);this.renderer_=a};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};
goog.ui.Control.prototype.addClassName=function(a){a&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,a)||this.extraClassNames_.push(a):this.extraClassNames_=[a],this.renderer_.enableExtraClassName(this,a,!0))};goog.ui.Control.prototype.removeClassName=function(a){a&&this.extraClassNames_&&(goog.array.remove(this.extraClassNames_,a),0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,a,!1))};
goog.ui.Control.prototype.enableClassName=function(a,b){b?this.addClassName(a):this.removeClassName(a)};goog.ui.Control.prototype.createDom=function(){var a=this.renderer_.createDom(this);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.isVisible()||this.renderer_.setVisible(a,!1)};goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_};
goog.ui.Control.prototype.setPreferredAriaRole=function(a){this.preferredAriaRole_=a};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};
goog.ui.Control.prototype.decorateInternal=function(a){a=this.renderer_.decorate(this,a);this.setElementInternal(a);this.renderer_.setAriaRole(a,this.getPreferredAriaRole());this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(a,!1);this.visible_="none"!=a.style.display};
goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var a=this.getKeyEventTarget();if(a){var b=this.getKeyHandler();b.attach(a);this.getHandler().listen(b,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(a,goog.events.EventType.FOCUS,
this.handleFocus).listen(a,goog.events.EventType.BLUR,this.handleBlur)}}};
goog.ui.Control.prototype.enableMouseEventHandling_=function(a){var b=this.getHandler(),c=this.getElement();a?(b.listen(c,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(c,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(c,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(c,goog.events.EventType.MOUSEOUT,this.handleMouseOut),goog.userAgent.IE&&b.listen(c,goog.events.EventType.DBLCLICK,this.handleDblClick)):(b.unlisten(c,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(c,
goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(c,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(c,goog.events.EventType.MOUSEOUT,this.handleMouseOut),goog.userAgent.IE&&b.unlisten(c,goog.events.EventType.DBLCLICK,this.handleDblClick))};goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);this.keyHandler_&&this.keyHandler_.detach();this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)};
goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_);delete this.renderer_;this.extraClassNames_=this.content_=null};goog.ui.Control.prototype.getContent=function(){return this.content_};goog.ui.Control.prototype.setContent=function(a){this.renderer_.setContent(this.getElement(),a);this.setContentInternal(a)};
goog.ui.Control.prototype.setContentInternal=function(a){this.content_=a};goog.ui.Control.prototype.getCaption=function(){var a=this.getContent();if(!a)return"";a=goog.isString(a)?a:goog.isArray(a)?goog.array.map(a,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(a);return goog.string.collapseBreakingSpaces(a)};goog.ui.Control.prototype.setCaption=function(a){this.setContent(a)};
goog.ui.Control.prototype.setRightToLeft=function(a){goog.ui.Control.superClass_.setRightToLeft.call(this,a);var b=this.getElement();b&&this.renderer_.setRightToLeft(b,a)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(a){this.allowTextSelection_=a;var b=this.getElement();b&&this.renderer_.setAllowTextSelection(b,a)};goog.ui.Control.prototype.isVisible=function(){return this.visible_};
goog.ui.Control.prototype.setVisible=function(a,b){return b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)?((b=this.getElement())&&this.renderer_.setVisible(b,a),this.isEnabled()&&this.renderer_.setFocusable(this,a),this.visible_=a,!0):!1};goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)};
goog.ui.Control.prototype.isParentDisabled_=function(){var a=this.getParent();return!!a&&"function"==typeof a.isEnabled&&!a.isEnabled()};goog.ui.Control.prototype.setEnabled=function(a){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!a)&&(a||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,a),this.setState(goog.ui.Component.State.DISABLED,!a))};goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};
goog.ui.Control.prototype.setHighlighted=function(a){this.isTransitionAllowed(goog.ui.Component.State.HOVER,a)&&this.setState(goog.ui.Component.State.HOVER,a)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};goog.ui.Control.prototype.setActive=function(a){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,a)&&this.setState(goog.ui.Component.State.ACTIVE,a)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};
goog.ui.Control.prototype.setSelected=function(a){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,a)&&this.setState(goog.ui.Component.State.SELECTED,a)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};goog.ui.Control.prototype.setChecked=function(a){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,a)&&this.setState(goog.ui.Component.State.CHECKED,a)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};
goog.ui.Control.prototype.setFocused=function(a){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,a)&&this.setState(goog.ui.Component.State.FOCUSED,a)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};goog.ui.Control.prototype.setOpen=function(a){this.isTransitionAllowed(goog.ui.Component.State.OPENED,a)&&this.setState(goog.ui.Component.State.OPENED,a)};goog.ui.Control.prototype.getState=function(){return this.state_};
goog.ui.Control.prototype.hasState=function(a){return!!(this.state_&a)};goog.ui.Control.prototype.setState=function(a,b){this.isSupportedState(a)&&b!=this.hasState(a)&&(this.renderer_.setState(this,a,b),this.state_=b?this.state_|a:this.state_&~a)};goog.ui.Control.prototype.setStateInternal=function(a){this.state_=a};goog.ui.Control.prototype.isSupportedState=function(a){return!!(this.supportedStates_&a)};
goog.ui.Control.prototype.setSupportedState=function(a,b){if(this.isInDocument()&&this.hasState(a)&&!b)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!b&&this.hasState(a)&&this.setState(a,!1);this.supportedStates_=b?this.supportedStates_|a:this.supportedStates_&~a};goog.ui.Control.prototype.isAutoState=function(a){return!!(this.autoStates_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setAutoStates=function(a,b){this.autoStates_=b?this.autoStates_|a:this.autoStates_&~a};
goog.ui.Control.prototype.isDispatchTransitionEvents=function(a){return!!(this.statesWithTransitionEvents_&a)&&this.isSupportedState(a)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(a,b){this.statesWithTransitionEvents_=b?this.statesWithTransitionEvents_|a:this.statesWithTransitionEvents_&~a};
goog.ui.Control.prototype.isTransitionAllowed=function(a,b){return this.isSupportedState(a)&&this.hasState(a)!=b&&(!(this.statesWithTransitionEvents_&a)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(a,b)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)};
goog.ui.Control.prototype.handleMouseOut=function(a){!goog.ui.Control.isMouseEventWithinElement_(a,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))};goog.ui.Control.isMouseEventWithinElement_=function(a,b){return!!a.relatedTarget&&goog.dom.contains(b,a.relatedTarget)};
goog.ui.Control.prototype.handleMouseDown=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),a.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus()));!this.isAllowTextSelection()&&a.isMouseActionButton()&&a.preventDefault()};
goog.ui.Control.prototype.handleMouseUp=function(a){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(a)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))};goog.ui.Control.prototype.handleDblClick=function(a){this.isEnabled()&&this.performActionInternal(a)};
goog.ui.Control.prototype.performActionInternal=function(a){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked());this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0);this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var b=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);if(a)for(var c=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"],d,e=0;d=c[e];e++)b[d]=a[d];return this.dispatchEvent(b)};
goog.ui.Control.prototype.handleFocus=function(a){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)};goog.ui.Control.prototype.handleBlur=function(a){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1);this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)};goog.ui.Control.prototype.handleKeyEvent=function(a){return this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Control.prototype.handleKeyEventInternal=function(a){return a.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(a)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)};goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer);goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer);
goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator";goog.ui.MenuSeparatorRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("div",this.getCssClass())};goog.ui.MenuSeparatorRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);if("HR"==b.tagName){var c=b;b=this.createDom(a);goog.dom.insertSiblingBefore(b,c);goog.dom.removeNode(c)}else goog.dom.classes.add(b,this.getCssClass());return b};goog.ui.MenuSeparatorRenderer.prototype.setContent=function(a,b){};
goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS};goog.ui.Separator=function(a,b){goog.ui.Control.call(this,null,a||goog.ui.MenuSeparatorRenderer.getInstance(),b);this.setSupportedState(goog.ui.Component.State.DISABLED,!1);this.setSupportedState(goog.ui.Component.State.HOVER,!1);this.setSupportedState(goog.ui.Component.State.ACTIVE,!1);this.setSupportedState(goog.ui.Component.State.FOCUSED,!1);this.setStateInternal(goog.ui.Component.State.DISABLED)};
goog.inherits(goog.ui.Separator,goog.ui.Control);goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);goog.dom.a11y.setRole(this.getElement(),"separator")};goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator});goog.ui.ContainerRenderer=function(){};goog.addSingletonGetter(goog.ui.ContainerRenderer);
goog.ui.ContainerRenderer.getCustomRenderer=function(a,b){a=new a;a.getCssClass=function(){return b};return a};goog.ui.ContainerRenderer.CSS_CLASS="goog-container";goog.ui.ContainerRenderer.prototype.getAriaRole=function(){};goog.ui.ContainerRenderer.prototype.enableTabIndex=function(a,b){a&&(a.tabIndex=b?0:-1)};goog.ui.ContainerRenderer.prototype.createDom=function(a){return a.getDomHelper().createDom("div",this.getClassNames(a).join(" "))};goog.ui.ContainerRenderer.prototype.getContentElement=function(a){return a};
goog.ui.ContainerRenderer.prototype.canDecorate=function(a){return"DIV"==a.tagName};goog.ui.ContainerRenderer.prototype.decorate=function(a,b){b.id&&a.setId(b.id);var c=this.getCssClass(),d=!1,e=goog.dom.classes.get(b);e&&goog.array.forEach(e,function(b){b==c?d=!0:b&&this.setStateFromClassName(a,b,c)},this);d||goog.dom.classes.add(b,c);this.decorateChildren(a,this.getContentElement(b));return b};
goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?a.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):b==c+"-vertical"&&a.setOrientation(goog.ui.Container.Orientation.VERTICAL)};
goog.ui.ContainerRenderer.prototype.decorateChildren=function(a,b,c){if(b){c=c||b.firstChild;for(var d;c&&c.parentNode==b;){d=c.nextSibling;if(c.nodeType==goog.dom.NodeType.ELEMENT){var e=this.getDecoratorForChild(c);e&&(e.setElementInternal(c),a.isEnabled()||e.setEnabled(!1),a.addChild(e),e.decorate(c))}else c.nodeValue&&""!=goog.string.trim(c.nodeValue)||b.removeChild(c);c=d}}};goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(a){return goog.ui.registry.getDecorator(a)};
goog.ui.ContainerRenderer.prototype.initializeDom=function(a){a=a.getElement();goog.style.setUnselectable(a,!0,goog.userAgent.GECKO);goog.userAgent.IE&&(a.hideFocus=!0);var b=this.getAriaRole();b&&goog.dom.a11y.setRole(a,b)};goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(a){return a.getElement()};goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS};
goog.ui.ContainerRenderer.prototype.getClassNames=function(a){var b=this.getCssClass(),c=a.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL;c=[b,c?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL};goog.ui.Container=function(a,b,c){goog.ui.Component.call(this,c);this.renderer_=b||goog.ui.ContainerRenderer.getInstance();this.orientation_=a||this.renderer_.getDefaultOrientation()};
goog.inherits(goog.ui.Container,goog.ui.Component);goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"};goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};goog.ui.Container.prototype.keyEventTarget_=null;goog.ui.Container.prototype.keyHandler_=null;goog.ui.Container.prototype.renderer_=null;goog.ui.Container.prototype.orientation_=null;goog.ui.Container.prototype.visible_=!0;goog.ui.Container.prototype.enabled_=!0;
goog.ui.Container.prototype.focusable_=!0;goog.ui.Container.prototype.highlightedIndex_=-1;goog.ui.Container.prototype.openItem_=null;goog.ui.Container.prototype.mouseButtonPressed_=!1;goog.ui.Container.prototype.allowFocusableChildren_=!1;goog.ui.Container.prototype.openFollowsHighlight_=!0;goog.ui.Container.prototype.childElementIdMap_=null;goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)};
goog.ui.Container.prototype.setKeyEventTarget=function(a){if(this.focusable_){var b=this.getKeyEventTarget(),c=this.isInDocument();this.keyEventTarget_=a;var d=this.getKeyEventTarget();c&&(this.keyEventTarget_=b,this.enableFocusHandling_(!1),this.keyEventTarget_=a,this.getKeyHandler().attach(d),this.enableFocusHandling_(!0))}else throw Error("Can't set key event target for container that doesn't support keyboard focus!");};
goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))};goog.ui.Container.prototype.getRenderer=function(){return this.renderer_};goog.ui.Container.prototype.setRenderer=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=a};goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))};
goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Container.prototype.canDecorate=function(a){return this.renderer_.canDecorate(a)};goog.ui.Container.prototype.decorateInternal=function(a){this.setElementInternal(this.renderer_.decorate(this,a));"none"==a.style.display&&(this.visible_=!1)};
goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this);this.forEachChild(function(a){a.isInDocument()&&this.registerChildId_(a)},this);var a=this.getElement();this.renderer_.initializeDom(this);this.setVisible(this.visible_,!0);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,
goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(a,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(a),goog.events.EventType.MOUSEUP,this.handleDocumentMouseUp).listen(a,[goog.events.EventType.MOUSEDOWN,goog.events.EventType.MOUSEUP,goog.events.EventType.MOUSEOVER,goog.events.EventType.MOUSEOUT],this.handleChildMouseEvents);this.isFocusable()&&this.enableFocusHandling_(!0)};
goog.ui.Container.prototype.enableFocusHandling_=function(a){var b=this.getHandler(),c=this.getKeyEventTarget();a?b.listen(c,goog.events.EventType.FOCUS,this.handleFocus).listen(c,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):b.unlisten(c,goog.events.EventType.FOCUS,this.handleFocus).unlisten(c,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)};
goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1);this.openItem_&&this.openItem_.setOpen(!1);this.mouseButtonPressed_=!1;goog.ui.Container.superClass_.exitDocument.call(this)};goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this);this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null);this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null};
goog.ui.Container.prototype.handleEnterItem=function(a){return!0};
goog.ui.Container.prototype.handleHighlightItem=function(a){var b=this.indexOfChild(a.target);if(-1<b&&b!=this.highlightedIndex_){var c=this.getHighlighted();c&&c.setHighlighted(!1);this.highlightedIndex_=b;c=this.getHighlighted();this.isMouseButtonPressed()&&c.setActive(!0);this.openFollowsHighlight_&&this.openItem_&&c!=this.openItem_&&(c.isSupportedState(goog.ui.Component.State.OPENED)?c.setOpen(!0):this.openItem_.setOpen(!1))}goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,
a.target.getElement().id)};goog.ui.Container.prototype.handleUnHighlightItem=function(a){a.target==this.getHighlighted()&&(this.highlightedIndex_=-1);goog.dom.a11y.setState(this.getElement(),goog.dom.a11y.State.ACTIVEDESCENDANT,"")};goog.ui.Container.prototype.handleOpenItem=function(a){(a=a.target)&&a!=this.openItem_&&a.getParent()==this&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=a)};
goog.ui.Container.prototype.handleCloseItem=function(a){a.target==this.openItem_&&(this.openItem_=null)};goog.ui.Container.prototype.handleMouseDown=function(a){this.enabled_&&this.setMouseButtonPressed(!0);var b=this.getKeyEventTarget();b&&goog.dom.isFocusableTabIndex(b)?b.focus():a.preventDefault()};goog.ui.Container.prototype.handleDocumentMouseUp=function(a){this.setMouseButtonPressed(!1)};
goog.ui.Container.prototype.handleChildMouseEvents=function(a){var b=this.getOwnerControl(a.target);if(b)switch(a.type){case goog.events.EventType.MOUSEDOWN:b.handleMouseDown(a);break;case goog.events.EventType.MOUSEUP:b.handleMouseUp(a);break;case goog.events.EventType.MOUSEOVER:b.handleMouseOver(a);break;case goog.events.EventType.MOUSEOUT:b.handleMouseOut(a)}};
goog.ui.Container.prototype.getOwnerControl=function(a){if(this.childElementIdMap_)for(var b=this.getElement();a&&a!==b;){var c=a.id;if(c in this.childElementIdMap_)return this.childElementIdMap_[c];a=a.parentNode}return null};goog.ui.Container.prototype.handleFocus=function(a){};goog.ui.Container.prototype.handleBlur=function(a){this.setHighlightedIndex(-1);this.setMouseButtonPressed(!1);this.openItem_&&this.openItem_.setOpen(!1)};
goog.ui.Container.prototype.handleKeyEvent=function(a){return this.isEnabled()&&this.isVisible()&&(0!=this.getChildCount()||this.keyEventTarget_)&&this.handleKeyEventInternal(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
goog.ui.Container.prototype.handleKeyEventInternal=function(a){var b=this.getHighlighted();if(b&&"function"==typeof b.handleKeyEvent&&b.handleKeyEvent(a)||this.openItem_&&this.openItem_!=b&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case goog.events.KeyCodes.ESC:if(this.isFocusable())this.getKeyEventTarget().blur();else return!1;break;case goog.events.KeyCodes.HOME:this.highlightFirst();
break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.LEFT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightNext():this.highlightPrevious();else return!1;break;case goog.events.KeyCodes.DOWN:if(this.orientation_==goog.ui.Container.Orientation.VERTICAL)this.highlightNext();else return!1;
break;case goog.events.KeyCodes.RIGHT:if(this.orientation_==goog.ui.Container.Orientation.HORIZONTAL)this.isRightToLeft()?this.highlightPrevious():this.highlightNext();else return!1;break;default:return!1}return!0};goog.ui.Container.prototype.registerChildId_=function(a){var b=a.getElement();b=b.id||(b.id=a.getId());this.childElementIdMap_||(this.childElementIdMap_={});this.childElementIdMap_[b]=a};
goog.ui.Container.prototype.addChild=function(a,b){goog.ui.Container.superClass_.addChild.call(this,a,b)};
goog.ui.Container.prototype.addChildAt=function(a,b,c){a.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0);a.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0);!this.isFocusable()&&this.isFocusableChildrenAllowed()||a.setSupportedState(goog.ui.Component.State.FOCUSED,!1);a.setHandleMouseEvents(!1);goog.ui.Container.superClass_.addChildAt.call(this,a,b,c);a.isInDocument()&&this.isInDocument()&&this.registerChildId_(a);b<=this.highlightedIndex_&&this.highlightedIndex_++};
goog.ui.Container.prototype.removeChild=function(a,b){if(a=goog.isString(a)?this.getChild(a):a){var c=this.indexOfChild(a);-1!=c&&(c==this.highlightedIndex_?a.setHighlighted(!1):c<this.highlightedIndex_&&this.highlightedIndex_--);(c=a.getElement())&&c.id&&this.childElementIdMap_&&goog.object.remove(this.childElementIdMap_,c.id)}a=goog.ui.Container.superClass_.removeChild.call(this,a,b);a.setHandleMouseEvents(!0);return a};goog.ui.Container.prototype.getOrientation=function(){return this.orientation_};
goog.ui.Container.prototype.setOrientation=function(a){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=a};goog.ui.Container.prototype.isVisible=function(){return this.visible_};
goog.ui.Container.prototype.setVisible=function(a,b){if(b||this.visible_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=a;var c=this.getElement();c&&(goog.style.showElement(c,a),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),b||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE));return!0}return!1};
goog.ui.Container.prototype.isEnabled=function(){return this.enabled_};
goog.ui.Container.prototype.setEnabled=function(a){this.enabled_!=a&&this.dispatchEvent(a?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(a?(this.enabled_=!0,this.forEachChild(function(a){a.wasDisabled?delete a.wasDisabled:a.setEnabled(!0)})):(this.forEachChild(function(a){a.isEnabled()?a.setEnabled(!1):a.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a&&this.visible_))};
goog.ui.Container.prototype.isFocusable=function(){return this.focusable_};goog.ui.Container.prototype.setFocusable=function(a){a!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(a);this.focusable_=a;this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),a)};goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_};
goog.ui.Container.prototype.setFocusableChildrenAllowed=function(a){this.allowFocusableChildren_=a};goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_};goog.ui.Container.prototype.setOpenFollowsHighlight=function(a){this.openFollowsHighlight_=a};goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_};
goog.ui.Container.prototype.setHighlightedIndex=function(a){(a=this.getChildAt(a))?a.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)};goog.ui.Container.prototype.setHighlighted=function(a){this.setHighlightedIndex(this.indexOfChild(a))};goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)};
goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.getChildCount()-1)};goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},0)};goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(a,b){return(a+1)%b},this.highlightedIndex_)};goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(a,b){a--;return 0>a?b-1:a},this.highlightedIndex_)};
goog.ui.Container.prototype.highlightHelper=function(a,b){b=0>b?this.indexOfChild(this.openItem_):b;var c=this.getChildCount();b=a.call(this,b,c);for(var d=0;d<=c;){var e=this.getChildAt(b);if(e&&this.canHighlightItem(e))return this.setHighlightedIndexFromKeyEvent(b),!0;d++;b=a.call(this,b,c)}return!1};goog.ui.Container.prototype.canHighlightItem=function(a){return a.isVisible()&&a.isEnabled()&&a.isSupportedState(goog.ui.Component.State.HOVER)};
goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(a){this.setHighlightedIndex(a)};goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_};goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_};goog.ui.Container.prototype.setMouseButtonPressed=function(a){this.mouseButtonPressed_=a};
goog.dom.ViewportSizeMonitor=function(a){goog.events.EventTarget.call(this);this.window_=a||window;this.listenerKey_=goog.events.listen(this.window_,goog.events.EventType.RESIZE,this.handleResize_,!1,this);this.size_=goog.dom.getViewportSize(this.window_);this.isPollingRequired_()&&(this.windowSizePollInterval_=window.setInterval(goog.bind(this.checkForSizeChange_,this),goog.dom.ViewportSizeMonitor.WINDOW_SIZE_POLL_RATE))};goog.inherits(goog.dom.ViewportSizeMonitor,goog.events.EventTarget);
goog.dom.ViewportSizeMonitor.getInstanceForWindow=function(a){a=a||window;var b=goog.getUid(a);return goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]=goog.dom.ViewportSizeMonitor.windowInstanceMap_[b]||new goog.dom.ViewportSizeMonitor(a)};goog.dom.ViewportSizeMonitor.windowInstanceMap_={};goog.dom.ViewportSizeMonitor.WINDOW_SIZE_POLL_RATE=500;goog.dom.ViewportSizeMonitor.prototype.listenerKey_=null;goog.dom.ViewportSizeMonitor.prototype.window_=null;
goog.dom.ViewportSizeMonitor.prototype.size_=null;goog.dom.ViewportSizeMonitor.prototype.windowSizePollInterval_=null;goog.dom.ViewportSizeMonitor.prototype.isPollingRequired_=function(){return goog.userAgent.WEBKIT&&goog.userAgent.WINDOWS||goog.userAgent.OPERA&&this.window_.self!=this.window_.top};goog.dom.ViewportSizeMonitor.prototype.getSize=function(){return this.size_?this.size_.clone():null};
goog.dom.ViewportSizeMonitor.prototype.disposeInternal=function(){goog.dom.ViewportSizeMonitor.superClass_.disposeInternal.call(this);this.listenerKey_&&(goog.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null);this.windowSizePollInterval_&&(window.clearInterval(this.windowSizePollInterval_),this.windowSizePollInterval_=null);this.size_=this.window_=null};goog.dom.ViewportSizeMonitor.prototype.handleResize_=function(a){this.checkForSizeChange_()};
goog.dom.ViewportSizeMonitor.prototype.checkForSizeChange_=function(){var a=goog.dom.getViewportSize(this.window_);goog.math.Size.equals(a,this.size_)||(this.size_=a,this.dispatchEvent(goog.events.EventType.RESIZE))};
goog.fx.Dragger=function(a,b,c){goog.events.EventTarget.call(this);this.target=a;this.handle=b||a;this.limits=c||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(a);this.eventHandler_=new goog.events.EventHandler(this);goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.3");
goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.clientX=0;goog.fx.Dragger.prototype.clientY=0;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.enabled_=!0;goog.fx.Dragger.prototype.dragging_=!1;
goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=!1;goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(a){this.limits=a||new goog.math.Rect(NaN,NaN,NaN,NaN)};goog.fx.Dragger.prototype.setHysteresis=function(a){this.hysteresisDistanceSquared_=Math.pow(a,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};
goog.fx.Dragger.prototype.setScrollTarget=function(a){this.scrollTarget_=a};goog.fx.Dragger.prototype.setCancelIeDragStart=function(a){this.ieDragStartCancellingOn_=a};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};goog.fx.Dragger.prototype.setEnabled=function(a){this.enabled_=a};
goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this);this.eventHandler_.dispose();delete this.target;delete this.handle;delete this.eventHandler_};
goog.fx.Dragger.prototype.startDrag=function(a){var b=a.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||b&&!a.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{this.maybeReinitTouchEvent_(a);if(0==this.hysteresisDistanceSquared_)if(this.initializeDrag_(a),this.dragging_)a.preventDefault();else return;else a.preventDefault();this.setupDragHandlers();this.clientX=this.startX=a.clientX;this.clientY=this.startY=a.clientY;this.screenX=a.screenX;
this.screenY=a.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();this.mouseDownTime_=goog.now()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var a=this.document_,b=a.documentElement,c=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(a,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,c);this.eventHandler_.listen(a,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,c);goog.fx.Dragger.HAS_SET_CAPTURE_?(b.setCapture(!1),this.eventHandler_.listen(b,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(a),
goog.events.EventType.BLUR,this.endDrag);goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(a,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,c)};goog.fx.Dragger.prototype.initializeDrag_=function(a){!1!==this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,a.clientX,a.clientY,a))&&(this.dragging_=!0)};
goog.fx.Dragger.prototype.endDrag=function(a,b){this.eventHandler_.removeAll();goog.fx.Dragger.HAS_SET_CAPTURE_&&this.document_.releaseCapture();var c=this.limitX(this.deltaX),d=this.limitY(this.deltaY);this.dragging_?(this.maybeReinitTouchEvent_(a),this.dragging_=!1,this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,a.clientX,a.clientY,a,c,d,b||a.type==goog.events.EventType.TOUCHCANCEL))):this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);a.type!=goog.events.EventType.TOUCHEND&&
a.type!=goog.events.EventType.TOUCHCANCEL||a.preventDefault()};goog.fx.Dragger.prototype.endDragCancel=function(a){this.endDrag(a,!0)};goog.fx.Dragger.prototype.maybeReinitTouchEvent_=function(a){var b=a.type;b==goog.events.EventType.TOUCHSTART||b==goog.events.EventType.TOUCHMOVE?a.init(a.getBrowserEvent().targetTouches[0],a.currentTarget):(b==goog.events.EventType.TOUCHEND||b==goog.events.EventType.TOUCHCANCEL)&&a.init(a.getBrowserEvent().changedTouches[0],a.currentTarget)};
goog.fx.Dragger.prototype.handleMove_=function(a){if(this.enabled_){this.maybeReinitTouchEvent_(a);var b=a.clientX-this.clientX,c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.dragging_){var d=this.startX-this.clientX,e=this.startY-this.clientY;if(d*d+e*e>this.hysteresisDistanceSquared_&&(this.initializeDrag_(a),!this.dragging_)){this.endDrag(a);return}}c=this.calculatePosition_(b,c);b=c.x;c=c.y;this.dragging_&&!1!==this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,
this,a.clientX,a.clientY,a,b,c))&&(this.doDrag(a,b,c,!1),a.preventDefault())}};goog.fx.Dragger.prototype.calculatePosition_=function(a,b){var c=goog.dom.getDomHelper(this.document_).getDocumentScroll();a+=c.x-this.pageScroll.x;b+=c.y-this.pageScroll.y;this.pageScroll=c;this.deltaX+=a;this.deltaY+=b;a=this.limitX(this.deltaX);b=this.limitY(this.deltaY);return new goog.math.Coordinate(a,b)};
goog.fx.Dragger.prototype.onScroll_=function(a){var b=this.calculatePosition_(0,0);a.clientX=this.clientX;a.clientY=this.clientY;this.doDrag(a,b.x,b.y,!0)};goog.fx.Dragger.prototype.doDrag=function(a,b,c,d){this.defaultAction(b,c);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,a.clientX,a.clientY,a,b,c))};
goog.fx.Dragger.prototype.limitX=function(a){var b=this.limits,c=isNaN(b.left)?null:b.left;b=isNaN(b.width)?0:b.width;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};goog.fx.Dragger.prototype.limitY=function(a){var b=this.limits,c=isNaN(b.top)?null:b.top;b=isNaN(b.height)?0:b.height;return Math.min(null!=c?c+b:Infinity,Math.max(null!=c?c:-Infinity,a))};goog.fx.Dragger.prototype.defaultAction=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};
goog.fx.DragEvent=function(a,b,c,d,e,f,g,k){goog.events.Event.call(this,a);this.clientX=c;this.clientY=d;this.browserEvent=e;this.left=goog.isDef(f)?f:b.deltaX;this.top=goog.isDef(g)?g:b.deltaY;this.dragger=b;this.dragCanceled=!!k};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.ui.SplitPane=function(a,b,c,d){goog.ui.Component.call(this,d);this.orientation_=c;this.firstComponent_=a;this.addChild(a);this.secondComponent_=b;this.addChild(b)};goog.inherits(goog.ui.SplitPane,goog.ui.Component);
goog.ui.SplitPane.EventType={HANDLE_DRAG_END:"handle_drag_end"};goog.ui.SplitPane.CLASS_NAME_="goog-splitpane";goog.ui.SplitPane.FIRST_CONTAINER_CLASS_NAME_="goog-splitpane-first-container";goog.ui.SplitPane.SECOND_CONTAINER_CLASS_NAME_="goog-splitpane-second-container";goog.ui.SplitPane.HANDLE_CLASS_NAME_="goog-splitpane-handle";goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_="goog-splitpane-handle-horizontal";goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_="goog-splitpane-handle-vertical";
goog.ui.SplitPane.prototype.splitDragger_=null;goog.ui.SplitPane.prototype.firstComponentContainer_=null;goog.ui.SplitPane.prototype.secondComponentContainer_=null;goog.ui.SplitPane.prototype.handleSize_=5;goog.ui.SplitPane.prototype.initialSize_=null;goog.ui.SplitPane.prototype.savedSnapSize_=null;goog.ui.SplitPane.prototype.firstComponentSize_=null;goog.ui.SplitPane.prototype.continuousResize_=!0;goog.ui.SplitPane.prototype.iframeOverlay_=null;
goog.ui.SplitPane.IframeOverlayIndex_={HIDDEN:-1,OVERLAY:1,SPLITTER_HANDLE:2};goog.ui.SplitPane.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"};
goog.ui.SplitPane.prototype.createDom=function(){var a=this.getDomHelper(),b=a.createDom("div",goog.ui.SplitPane.FIRST_CONTAINER_CLASS_NAME_),c=a.createDom("div",goog.ui.SplitPane.SECOND_CONTAINER_CLASS_NAME_),d=a.createDom("div",goog.ui.SplitPane.HANDLE_CLASS_NAME_);this.setElementInternal(a.createDom("div",goog.ui.SplitPane.CLASS_NAME_,b,c,d));this.firstComponentContainer_=b;this.secondComponentContainer_=c;this.splitpaneHandle_=d;this.setUpHandle_();this.finishSetup_()};
goog.ui.SplitPane.prototype.canDecorate=function(a){var b=goog.ui.SplitPane.FIRST_CONTAINER_CLASS_NAME_;b=goog.dom.getElementsByTagNameAndClass(null,b,a)[0];if(!b)return!1;this.firstComponentContainer_=b;b=goog.ui.SplitPane.SECOND_CONTAINER_CLASS_NAME_;b=goog.dom.getElementsByTagNameAndClass(null,b,a)[0];if(!b)return!1;this.secondComponentContainer_=b;b=goog.ui.SplitPane.HANDLE_CLASS_NAME_;a=goog.dom.getElementsByTagNameAndClass(null,b,a)[0];if(!a)return!1;this.splitpaneHandle_=a;return!0};
goog.ui.SplitPane.prototype.decorateInternal=function(a){goog.ui.SplitPane.superClass_.decorateInternal.call(this,a);this.setUpHandle_();a=goog.style.getBorderBoxSize(a);this.setSize(new goog.math.Size(a.width,a.height));this.finishSetup_()};
goog.ui.SplitPane.prototype.finishSetup_=function(){var a=this.getDomHelper();this.firstComponent_.getElement()||this.firstComponent_.createDom();a.appendChild(this.firstComponentContainer_,this.firstComponent_.getElement());this.secondComponent_.getElement()||this.secondComponent_.createDom();a.appendChild(this.secondComponentContainer_,this.secondComponent_.getElement());this.splitDragger_=new goog.fx.Dragger(this.splitpaneHandle_,this.splitpaneHandle_);this.firstComponentContainer_.style.position=
"absolute";this.secondComponentContainer_.style.position="absolute";a=this.splitpaneHandle_.style;a.position="absolute";a.overflow="hidden";a.zIndex=goog.ui.SplitPane.IframeOverlayIndex_.SPLITTER_HANDLE};
goog.ui.SplitPane.prototype.enterDocument=function(){goog.ui.SplitPane.superClass_.enterDocument.call(this);var a=this.getElement();"static"==goog.style.getComputedPosition(a)&&(a.style.position="relative");this.getHandler().listen(this.splitpaneHandle_,goog.events.EventType.DBLCLICK,this.handleDoubleClick_).listen(this.splitDragger_,goog.fx.Dragger.EventType.START,this.handleDragStart_).listen(this.splitDragger_,goog.fx.Dragger.EventType.DRAG,this.handleDrag_).listen(this.splitDragger_,goog.fx.Dragger.EventType.END,
this.handleDragEnd_);this.setFirstComponentSize(this.initialSize_)};goog.ui.SplitPane.prototype.setInitialSize=function(a){this.initialSize_=a};goog.ui.SplitPane.prototype.setHandleSize=function(a){this.handleSize_=a};goog.ui.SplitPane.prototype.setContinuousResize=function(a){this.continuousResize_=a};goog.ui.SplitPane.prototype.isVertical=function(){return this.orientation_==goog.ui.SplitPane.Orientation.VERTICAL};
goog.ui.SplitPane.prototype.setUpHandle_=function(){this.isVertical()?(this.splitpaneHandle_.style.height=this.handleSize_+"px",goog.dom.classes.add(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_)):(this.splitpaneHandle_.style.width=this.handleSize_+"px",goog.dom.classes.add(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_))};
goog.ui.SplitPane.prototype.setOrientationClassForHandle=function(){this.isVertical()?goog.dom.classes.swap(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_,goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_):goog.dom.classes.swap(this.splitpaneHandle_,goog.ui.SplitPane.HANDLE_CLASS_NAME_VERTICAL_,goog.ui.SplitPane.HANDLE_CLASS_NAME_HORIZONTAL_)};
goog.ui.SplitPane.prototype.setOrientation=function(a){if(this.orientation_!=a&&(this.orientation_=a,a=this.isVertical(),this.isInDocument()))if(this.setOrientationClassForHandle(),goog.isNumber(this.firstComponentSize_)){var b=goog.style.getBorderBoxSize(this.getElement());this.setFirstComponentSize(this.firstComponentSize_*(a?b.height/b.width:b.width/b.height))}else this.setFirstComponentSize()};goog.ui.SplitPane.prototype.getOrientation=function(){return this.orientation_};
goog.ui.SplitPane.prototype.moveAndSize_=function(a,b){goog.style.setPosition(a,b.left,b.top);goog.style.setBorderBoxSize(a,new goog.math.Size(Math.max(b.width,0),Math.max(b.height,0)))};goog.ui.SplitPane.prototype.getFirstComponentSize=function(){return this.firstComponentSize_};
goog.ui.SplitPane.prototype.setFirstComponentSize=function(a){var b=goog.style.getBorderBoxSize(this.getElement()),c=this.isVertical();this.firstComponentSize_=a=goog.isNumber(a)?a:goog.isNumber(this.firstComponentSize_)?this.firstComponentSize_:Math.floor((c?b.height:b.width)/2);if(c){var d=c=b.width;var e=this.handleSize_;var f=b.height-a-e;var g=b.width;var k=0+a;var h=0;var r=k+e;b=0}else c=a,a=b.height,d=this.handleSize_,e=b.height,g=b.width-c-d,f=b.height,h=0+c,k=0,b=h+d,r=0;this.moveAndSize_(this.firstComponentContainer_,
new goog.math.Rect(0,0,c,a));"function"==typeof this.firstComponent_.resize&&this.firstComponent_.resize(new goog.math.Size(c,a));this.moveAndSize_(this.splitpaneHandle_,new goog.math.Rect(h,k,d,e));this.moveAndSize_(this.secondComponentContainer_,new goog.math.Rect(b,r,g,f));"function"==typeof this.secondComponent_.resize&&this.secondComponent_.resize(new goog.math.Size(g,f));this.dispatchEvent(goog.ui.Component.EventType.CHANGE)};goog.ui.SplitPane.resizeWarningWorkaround_={resize:function(a){}};
goog.ui.SplitPane.prototype.setSize=function(a){goog.style.setBorderBoxSize(this.getElement(),a);this.iframeOverlay_&&goog.style.setBorderBoxSize(this.iframeOverlay_,a);this.setFirstComponentSize()};
goog.ui.SplitPane.prototype.snapIt_=function(){var a=goog.style.getRelativePosition(this.splitpaneHandle_,this.firstComponentContainer_),b=goog.style.getBorderBoxSize(this.firstComponentContainer_),c=goog.style.getContentBoxSize(this.firstComponentContainer_),d=this.isVertical();d?(b=b.height-c.height,a=a.y):(b=b.width-c.width,a=a.x);b==a?this.setFirstComponentSize(this.savedSnapSize_):(this.savedSnapSize_=d?goog.style.getBorderBoxSize(this.firstComponentContainer_).height:goog.style.getBorderBoxSize(this.firstComponentContainer_).width,
this.setFirstComponentSize(b))};
goog.ui.SplitPane.prototype.handleDragStart_=function(a){this.iframeOverlay_||(a="position: relative",goog.userAgent.IE&&(a+=";background-color: #000;filter: Alpha(Opacity=0)"),this.iframeOverlay_=this.getDomHelper().createDom("div",{style:a}),this.getDomHelper().appendChild(this.getElement(),this.iframeOverlay_));this.iframeOverlay_.style.zIndex=goog.ui.SplitPane.IframeOverlayIndex_.OVERLAY;goog.style.setBorderBoxSize(this.iframeOverlay_,goog.style.getBorderBoxSize(this.getElement()));var b=goog.style.getPosition(this.firstComponentContainer_),
c=a=0,d=b.x;b=b.y;var e=goog.style.getBorderBoxSize(this.firstComponentContainer_),f=goog.style.getContentBoxSize(this.firstComponentContainer_),g=goog.style.getContentBoxSize(this.secondComponentContainer_);this.isVertical()?(c=f.height+g.height,b+=e.height-f.height):(a=f.width+g.width,d+=e.width-f.width);a=new goog.math.Rect(d,b,a,c);this.splitDragger_.setLimits(a)};goog.ui.SplitPane.prototype.getRelativeLeft_=function(a){return a-goog.style.getPosition(this.firstComponentContainer_).x};
goog.ui.SplitPane.prototype.getRelativeTop_=function(a){return a-goog.style.getPosition(this.firstComponentContainer_).y};goog.ui.SplitPane.prototype.handleDrag_=function(a){this.continuousResize_&&(this.isVertical()?(a=this.getRelativeTop_(a.top),this.setFirstComponentSize(a)):(a=this.getRelativeLeft_(a.left),this.setFirstComponentSize(a)))};
goog.ui.SplitPane.prototype.handleDragEnd_=function(a){this.iframeOverlay_.style.zIndex=goog.ui.SplitPane.IframeOverlayIndex_.HIDDEN;this.continuousResize_||(this.isVertical()?(a=this.getRelativeTop_(a.top),this.setFirstComponentSize(a)):(a=this.getRelativeLeft_(a.left),this.setFirstComponentSize(a)));this.dispatchEvent(goog.ui.SplitPane.EventType.HANDLE_DRAG_END)};goog.ui.SplitPane.prototype.handleDoubleClick_=function(a){this.snapIt_()};
goog.ui.SplitPane.prototype.disposeInternal=function(){goog.ui.SplitPane.superClass_.disposeInternal.call(this);this.splitDragger_.dispose();this.splitDragger_=null;goog.dom.removeNode(this.iframeOverlay_);this.iframeOverlay_=null};plt.wescheme.cookies={};
(function(){var a=function(a,c,d){if(d){var b=new Date;b.setTime(b.getTime()+864E5*d);d="; expires="+b.toGMTString()}else d="";document.cookie=a+"="+c+d+"; path=/"};plt.wescheme.cookies.createCookie=a;plt.wescheme.cookies.readCookie=function(a){if(0<document.cookie.length){var b=document.cookie.indexOf(a+"=");if(-1!=b)return b=b+a.length+1,'"'===document.cookie.charAt(b)?(b++,a=document.cookie.indexOf('"',b)):a=document.cookie.indexOf(";",b),-1==a&&(a=document.cookie.length),document.cookie.substring(b,
a)}return""};plt.wescheme.cookies.eraseCookie=function(b){a(b,"",-1)}})();plt.wescheme.browserCheck={};
(function(){var a=plt.wescheme.BrowserDetect,b=plt.wescheme.cookies,c=[{browser:"Safari",greaterThanOrEqual:"6"},{browser:"Chrome",greaterThanOrEqual:"5"},{browser:"Firefox",greaterThanOrEqual:"4"},{browser:"Mozilla",greaterThanOrEqual:"10"},{browser:"Explorer",greaterThanOrEqual:"11"}],d=[{browser:"Explorer",lessThan:"8"},{browser:"Safari",lessThan:"5"},{browser:"Firefox",lessThan:"3.6"}];plt.wescheme.browserCheck=function(){var d=a.browser,h=a.versionString,p="Firefox"==a.browser&&"Android"==a.OS;
if(!f(d,h))if(e(d,h))E();else if(g(d,h))v();else if(k(d,h)||p){if("checked"!==b.readCookie("weschemeBrowserVersionCheck")){for(h=0;h<c.length;h++);b.createCookie("weschemeBrowserVersionCheck","checked");z(d,9)}}else D()};var e=function(a,b){return h(a,b,{browser:"Explorer",lessThan:"8"})},f=function(a,b){for(var d=0;d<c.length;d++)if(a===c[d].browser&&r(b,c[d].greaterThanOrEqual))return!0;return!1},g=function(a,b){for(var c=0;c<d.length;c++)if(a===d[c].browser&&p(b,d[c].lessThan))return!0;return!1},
k=function(a,b){if(g(a,b)||f(a,b))return!1;for(b=0;b<c.length;b++)if(a===c[b].browser)return!0;return!1},h=function(a,b,c){if(a===c.browser){if(c.greaterThanOrEqual)return r(b,c.greaterThanOrEqual);if(c.lessThan)return p(b,c.lessThan)}else return!1},r=function(a,b){a=a.split(".");b=b.split(".");for(var c=0;;)if(c<a.length&&c<b.length){if(parseFloat(a[c])>parseFloat(b[c]))return!0;if(parseFloat(a[c])<parseFloat(b[c]))return!1;c++}else{if(c>=a.length&&c>=b.length)return!0;if(c>=a.length)return!1;if(c>=
b.length)return!0}},p=function(a,b){a=a.split(".");b=b.split(".");for(var c=0;;)if(c<a.length&&c<b.length){if(parseFloat(a[c])<parseFloat(b[c]))return!0;if(parseFloat(a[c])>parseFloat(b[c]))return!1;c++}else{if(c>=a.length&&c>=b.length)return!1;if(c>=a.length)return!0;if(c>=b.length)return!1}},v=function(){var b=jQuery("<div/>");b.append("WeScheme detects that you're using "+a.browser+" "+a.version+" but WeScheme has only been tested on modern versions of <a href='http://www.google.com/chrome'>Chrome</a>,  <a href='http://www.getfirefox.com'>Firefox</a>, or <a href='http://www.apple.com/safari'>Safari</a>.<hr/>  Unfortunately, WeScheme is known to break under your current browser.  Please update your browser.");
b.dialog({title:"Browser version check",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"}});b.dialog("open")},z=function(b,c){var d=jQuery("<div/>");d.append("<p>WeScheme detects that you're using "+a.browser+" "+a.version+", but WeScheme needs "+b+" >= "+c+".<hr/>  WeScheme may still continue to work on your browser, but we have not tested it. We recommend installing <a href='http://www.google.com/chrome'>Chrome</a>,  <a href='http://www.getfirefox.com'>Firefox</a>, or <a href='http://www.apple.com/safari'>Safari</a>.");
d.dialog({title:"Browser version check",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"}});d.dialog("open")},D=function(){var b=jQuery("<div/>");b.append("WeScheme detects that you're using "+a.browser+" "+a.version+" but WeScheme has only been tested on modern versions of <a href='http://www.google.com/chrome'>Chrome</a>,  <a href='http://www.getfirefox.com'>Firefox</a>, or <a href='http://www.apple.com/safari'>Safari</a>.<hr/>  WeScheme may still continue to work on your browser, but we have not tested it.");
b.dialog({title:"Browser version check",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"}});b.dialog("open")},E=function(){var b=jQuery("<div/>");b.append("You appear to be using "+a.browser+" "+a.version+".  WeScheme does not support this browser.  Please upgrade to a newer version of <a href='http://www.microsoft.com/download/en/ie.aspx'>Internet Explorer</a>, or switch to <a href='http://www.google.com/chrome'>Chrome</a>,  <a href='http://www.getfirefox.com'>Firefox</a>, or <a href='http://www.apple.com/safari'>Safari</a>.");
b.dialog({title:"Browser version check",bgiframe:!0,modal:!0,overlay:{opacity:.5,background:"black"}});b.dialog("open")};a.debug={};a.debug.warn1=z;a.debug.warn2=D;a.debug.warn3=v;a.debug.versionLessThan=p;a.debug.versionGreaterThanOrEqual=r;a.debug.isFullySupported=f;a.debug.isPartiallySupported=k;a.debug.isUnsupported=g;a.debug.isOldIE=e;a.debug.warnOldIE=E;a.debug.versionMatches=h})();var myEditor,initializeEditor;
(function(){initializeEditor=function(e){b(e.hideHeader,e.hideToolbar,e.hideProjectName,e.hideFooter);c(e,function(){a(e.warnOnExit);d(e)})};var a=function(a){var b=function(){return"Are you sure you want to leave the Editor? (all unsaved changes will be lost)"};a&&(window.onbeforeunload=b,myEditor.suppressWarningBeforeUnloadB.changes().mapE(function(a){window.onbeforeunload=a?void 0:b}))},b=function(a,b,c,d){a&&(document.getElementById("Navigation").style.display="none");b&&(document.getElementById("ProgramControls").style.display=
"none");c&&(document.getElementById("FileControls").style.display="none");d&&(document.getElementById("bottom").style.display="none")},c=function(a,b){var c=a.userName,d=a.pid,e=a.publicId;plt.wescheme.WeSchemeEditor.defnInFocus=!0;new plt.wescheme.WeSchemeStatusBar(jQuery("#statusbar"));new plt.wescheme.WeSchemeTextContainer(jQuery("#definitions").get(0),{width:"100%",lineNumbers:!0,clone:!0,autoCloseBrackets:!0},function(f){myEditor=new plt.wescheme.WeSchemeEditor({userName:c,defn:f,interactions:jQuery("#inter").get(0),
filenameInput:jQuery("#filename")},function(c){myEditor=c;a.noColorError&&myEditor.disableColoredErrorMessages();jQuery("#run").click(function(){if("undefined"===typeof DeviceOrientationEvent.requestPermission&&"function"===typeof DeviceOrientationEvent.requestPermission)DeviceOrientationEvent.requestPermission()["catch"](function(a){console.error(a)});myEditor.run()});jQuery("#stop").click(function(){myEditor.requestBreak()});jQuery("#save").click(function(){myEditor.save()});jQuery("#share").click(function(){myEditor.share()});
jQuery("#updateNotes").click(function(){myEditor.showNotesDialog()});jQuery("#undo").click(function(){myEditor.defn.impl.editor.undo()});jQuery("#redo").click(function(){myEditor.defn.impl.editor.redo()});jQuery("#images").click(function(){myEditor.showPicker(plt.wescheme.WeSchemeEditor.defnInFocus)});jQuery("#help").click(function(){myEditor.toggleHelp()});jQuery("#logout").click(function(){confirm("You will be logged out of WeScheme and other Google services.")&&submitPost("/logout")});jQuery("#definitions").click(function(){plt.wescheme.WeSchemeEditor.defnInFocus=
!0});c=function(){myEditor.defn.clearHistory();a.autorunDefinitions?myEditor.run(f):f()};var f=function(){a.initialInteractionsText&&myEditor.interactions.setPromptText(a.initialInteractionsText+"");a.initialDefinitionsText&&myEditor.defn.setCode(a.initialDefinitionsText+"");jQuery("#interactions").click(function(a){plt.wescheme.WeSchemeEditor.defnInFocus=!1;myEditor.interactions.focusOnPrompt();a.stopPropagation();a.preventDefault();return!1});jQuery(document.body).keydown(plt.wescheme.topKeymap);
b()};null!==d?myEditor.load({pid:parseInt(d)},c,c):null!=e?myEditor.load({publicId:e},c,c):c()})},"definitionsCM")},d=function(a){if(a.hideDefinitions)document.getElementById("interactions").style.height="100%",document.getElementById("definitions").style.display="none";else if(a.hideInteractions)document.getElementById("interactions").style.display="none",document.getElementById("definitions").style.height="100%";else{var b=document.getElementById("top"),c=document.getElementById("bottom"),d=document.getElementById("middle"),
e=document.getElementById("splitpane"),r=document.getElementById("definitions"),p=goog.dom.getElementsByTagNameAndClass("div","CodeMirror",document.getElementById("definitions"))[0];document.getElementById("interactions");var v=new goog.ui.SplitPane(new goog.ui.Component,new goog.ui.Component,goog.ui.SplitPane.Orientation.HORIZONTAL);v.decorate(e);var z=new goog.dom.ViewportSizeMonitor,D=void 0,E=function(){var a=z.getSize(),f=a.width;a=a.height-goog.style.getBorderBoxSize(b).height-goog.style.getBorderBoxSize(c).height;
f=new goog.math.Size(f,a);D&&goog.math.Size.equals(D,f)||(D=f,v.setSize(f),goog.style.setBorderBoxSize(d,f));goog.style.setBorderBoxSize(e,f);B()},B=function(){goog.style.setBorderBoxSize(p,goog.style.getBorderBoxSize(r));for(var a=goog.dom.getElementsByTagNameAndClass("div","CodeMirror",r),b=0;b<a.length;b++){goog.style.getBorderBoxSize(a[b]);for(var c,d=goog.dom.getElementsByTagNameAndClass("div","CodeMirror-gutter",a[b]),e=0;e<d.length;e++)c=goog.style.getBorderBoxSize(d[e]).width;if("undefined"!==
typeof c)for(d=goog.dom.getElementsByTagNameAndClass("iframe",void 0,a[b]),e=0;e<d.length;e++){var f=d[e];goog.style.getBorderBoxSize(f);f.style.width=z.getSize().width-c+"px"}}myEditor.defn.refresh()};goog.events.listen(v,goog.events.EventType.CHANGE,B);goog.events.listen(z,goog.events.EventType.RESIZE,E);myEditor.setOnResize(E);jQuery(window).bind("fullscreenchange",function(){E()});setTimeout(E,0)}}})();
