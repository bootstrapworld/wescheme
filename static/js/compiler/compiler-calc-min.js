var COMPILED=!0,goog=goog||{};goog.global=this||self;goog.exportPath_=function(a,g,q,t){a=a.split(".");t=t||goog.global;a[0]in t||"undefined"==typeof t.execScript||t.execScript("var "+a[0]);for(var u;a.length&&(u=a.shift());)if(a.length||void 0===g)t=t[u]&&t[u]!==Object.prototype[u]?t[u]:t[u]={};else if(!q&&goog.isObject(g)&&goog.isObject(t[u]))for(var F in g)g.hasOwnProperty(F)&&(t[u][F]=g[F]);else t[u]=g};
goog.define=function(a,g){if(!COMPILED){var q=goog.global.CLOSURE_UNCOMPILED_DEFINES,t=goog.global.CLOSURE_DEFINES;q&&void 0===q.nodeType&&Object.prototype.hasOwnProperty.call(q,a)?g=q[a]:t&&void 0===t.nodeType&&Object.prototype.hasOwnProperty.call(t,a)&&(g=t[a])}return g};goog.FEATURESET_YEAR=2012;goog.DEBUG=!0;goog.LOCALE="en";goog.getLocale=function(){return goog.LOCALE};goog.TRUSTED_SITE=!0;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;
goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,g,q){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var t=a;(t=t.substring(0,t.lastIndexOf(".")))&&!goog.getObjectByName(t);)goog.implicitNamespaces_[t]=!0}goog.exportPath_(a,g,q)};goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/;
goog.getScriptNonce_=function(a){a=(a||goog.global).document;return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if("string"!==typeof a||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");
goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a].exports;if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;
goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var a=goog.global.$jscomp;return a?"function"!=typeof a.getCurrentModulePath?!1:!!a.getCurrentModulePath():!1};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.declareModuleId=function(a){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(a in goog.loadedModules_)throw Error('Module with namespace "'+a+'" already exists.');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=a;else{var g=goog.global.$jscomp;if(!g||"function"!=typeof g.getCurrentModulePath)throw Error('Module with namespace "'+
a+'" has been loaded incorrectly.');g=g.require(g.getCurrentModulePath());goog.loadedModules_[a]={exports:g,type:goog.ModuleType.ES6,moduleId:a}}};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&null!=goog.getObjectByName(a)},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,g){a=a.split(".");g=g||goog.global;for(var q=0;q<a.length;q++)if(g=g[a[q]],null==g)return null;return g};goog.addDependency=function(a,g,q,t){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(a,g,q,t)};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(a);if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var g=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(a)}finally{goog.moduleLoaderState_=g}}return null}};goog.requireType=function(a){return{}};goog.basePath="";goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";goog.ASSUME_ES_MODULES_TRANSPILED=!1;goog.TRANSPILE_TO_LANGUAGE="";
goog.TRANSPILER="transpile.js";goog.TRUSTED_TYPES_POLICY_NAME="goog";goog.hasBadLetScoping=null;
goog.loadModule=function(a){var g=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var q={},t=q;if("function"===typeof a)t=a.call(void 0,t);else if("string"===typeof a)t=goog.loadModuleFromSource_.call(void 0,t,a);else throw Error("Invalid module definition");var u=goog.moduleLoaderState_.moduleName;if("string"===typeof u&&u)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(u,t,q!==t):goog.SEAL_MODULE_EXPORTS&&
Object.seal&&"object"==typeof t&&null!=t&&Object.seal(t),goog.loadedModules_[u]={exports:t,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+u+'"');}finally{goog.moduleLoaderState_=g}};goog.loadModuleFromSource_=function(a,g){eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(g));return a};goog.normalizePath_=function(a){a=a.split("/");for(var g=0;g<a.length;)"."==a[g]?a.splice(g,1):g&&".."==a[g]&&a[g-1]&&".."!=a[g-1]?a.splice(--g,2):g++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var g=new goog.global.XMLHttpRequest;g.open("get",a,!1);g.send();return 0==g.status||200==g.status?g.responseText:null}catch(q){return null}};
goog.transpile_=function(a,g,q){var t=goog.global.$jscomp;t||(goog.global.$jscomp=t={});var u=t.transpile;if(!u){var F=goog.basePath+goog.TRANSPILER,M=goog.loadFileSync_(F);if(M){(function(){(0,eval)(M+"\n//# sourceURL="+F)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=
goog.global.$gwtExport.$jscomp.transpile;t=goog.global.$jscomp;u=t.transpile}}u||=t.transpile=function(V,ca){goog.logToConsole_(ca+" requires transpilation but no transpiler was found.");return V};return u(a,g,q)};goog.typeOf=function(a){var g=typeof a;return"object"!=g?g:a?Array.isArray(a)?"array":g:"null"};goog.isArrayLike=function(a){var g=goog.typeOf(a);return"array"==g||"object"==g&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};
goog.isObject=function(a){var g=typeof a;return"object"==g&&null!=a||"function"==g};goog.getUid=function(a){return Object.prototype.hasOwnProperty.call(a,goog.UID_PROPERTY_)&&a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(g){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);
goog.uidCounter_=0;goog.cloneObject=function(a){var g=goog.typeOf(a);if("object"==g||"array"==g){if("function"===typeof a.clone)return a.clone();if("undefined"!==typeof Map&&a instanceof Map)return new Map(a);if("undefined"!==typeof Set&&a instanceof Set)return new Set(a);g="array"==g?[]:{};for(var q in a)g[q]=goog.cloneObject(a[q]);return g}return a};goog.bindNative_=function(a,g,q){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,g,q){if(!a)throw Error();if(2<arguments.length){var t=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(u,t);return a.apply(g,u)}}return function(){return a.apply(g,arguments)}};goog.bind=function(a,g,q){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,g){var q=Array.prototype.slice.call(arguments,1);return function(){var t=q.slice();t.push.apply(t,arguments);return a.apply(this,t)}};goog.now=function(){return Date.now()};goog.globalEval=function(a){(0,eval)(a)};
goog.getCssName=function(a,g){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var q=function(u){return goog.cssNameMapping_[u]||u},t=function(u){u=u.split("-");for(var F=[],M=0;M<u.length;M++)F.push(q(u[M]));return F.join("-")};t=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?q:t:function(u){return u};a=g?a+"-"+t(g):t(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,g){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=g};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.GetMsgOptions=function(){};
goog.getMsg=function(a,g,q){q&&q.html&&(a=a.replace(/</g,"&lt;"));q&&q.unescapeHtmlEntities&&(a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&"));g&&(a=a.replace(/\{\$([^}]+)}/g,function(t,u){return null!=g&&u in g?g[u]:t}));return a};goog.getMsgWithFallback=function(a,g){return a};goog.exportSymbol=function(a,g,q){goog.exportPath_(a,g,!0,q)};goog.exportProperty=function(a,g,q){a[g]=q};
goog.inherits=function(a,g){function q(){}q.prototype=g.prototype;a.superClass_=g.prototype;a.prototype=new q;a.prototype.constructor=a;a.base=function(t,u,F){for(var M=Array(arguments.length-2),V=2;V<arguments.length;V++)M[V-2]=arguments[V];return g.prototype[u].apply(t,M)}};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,g){var q=g.constructor,t=g.statics;q&&q!=Object.prototype.constructor||(q=function(){throw Error("cannot instantiate an interface (no constructor defined).");});q=goog.defineClass.createSealingConstructor_(q,a);a&&goog.inherits(q,a);delete g.constructor;delete g.statics;goog.defineClass.applyProperties_(q.prototype,g);null!=t&&(t instanceof Function?t(q):goog.defineClass.applyProperties_(q,t));return q};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,g){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var q=a.apply(this,arguments)||this;q[goog.UID_PROPERTY_]=q[goog.UID_PROPERTY_];return q}:a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,g){for(var q in g)Object.prototype.hasOwnProperty.call(g,q)&&(a[q]=g[q]);for(var t=0;t<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;t++)q=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[t],Object.prototype.hasOwnProperty.call(g,q)&&(a[q]=g[q])};goog.identity_=function(a){return a};
goog.createTrustedTypesPolicy=function(a){var g=null,q=goog.global.trustedTypes;if(!q||!q.createPolicy)return g;try{g=q.createPolicy(a,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(t){goog.logToConsole_(t.message)}return g};
!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.isEdge_=function(){return!!(goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"").match(/Edge\/(\d+)(\.\d)*/i)},goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.isDocumentLoading_=function(){var a=goog.global.document;return a.attachEvent?"complete"!=a.readyState:"loading"==a.readyState},goog.findBasePath_=function(){if(void 0!=goog.global.CLOSURE_BASE_PATH&&"string"===typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=
goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,g=a.currentScript;a=g?[g]:a.getElementsByTagName("SCRIPT");for(g=a.length-1;0<=g;--g){var q=a[g].src,t=q.lastIndexOf("?");t=-1==t?q.length:t;if("base.js"==q.slice(t-7,t)){goog.basePath=q.slice(0,t-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(F,
M){u?t[F]=!0:M()?(q=F,t[F]=!1):u=t[F]=!0}function g(F){try{return!!eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(F))}catch(M){return!1}}var q="es3",t={es3:!1},u=!1;a("es5",function(){return g("[1,].length==1")});a("es6",function(){return goog.isEdge_()?!1:g('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')});
a("es7",function(){return g("2**3==8")});a("es8",function(){return g("async()=>1,1")});a("es9",function(){return g("({...rest}={}),1")});a("es_2019",function(){return g('let r;try{r="\u2029"}catch{};r')});a("es_2020",function(){return g("null?.x??1")});a("es_next",function(){return!1});return{target:q,map:t}},goog.Transpiler.prototype.needsTranspile=function(a,g){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var q=this.createRequiresTranspilation_();
this.requiresTranspilation_=q.map;this.transpilationTarget_=this.transpilationTarget_||q.target}if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a]?!0:!goog.inHtmlDocument_()||"es6"!=g||"noModule"in goog.global.document.createElement("script")?!1:!0;throw Error("Unknown language mode: "+a);},goog.Transpiler.prototype.transpile=function(a,g){return goog.transpile_(a,g,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,
"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};this.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(a,g){function q(){t&&(goog.global.setTimeout(t,0),t=null)}var t=g;if(a.length){g=[];for(var u=0;u<a.length;u++){var F=this.getPathFromDeps_(a[u]);if(!F)throw Error("Unregonized namespace: "+
a[u]);g.push(this.dependencies_[F])}F=goog.require;var M=0;for(u=0;u<a.length;u++)F(a[u]),g[u].onLoad(function(){++M==a.length&&q()})}else q()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(a,g){(a=this.getPathFromDeps_(a))&&(g||this.areDepsLoaded_(this.dependencies_[a].requires))&&(g=this.deferredCallbacks_[a])&&
(delete this.deferredCallbacks_[a],g())},goog.DebugLoader_.prototype.setDependencyFactory=function(a){this.factory_=a},goog.DebugLoader_.prototype.load_=function(a){if(this.getPathFromDeps_(a)){var g=this,q=[],t=function(u){var F=g.getPathFromDeps_(u);if(!F)throw Error("Bad dependency path or symbol: "+u);if(!g.written_[F]){g.written_[F]=!0;u=g.dependencies_[F];for(F=0;F<u.requires.length;F++)goog.isProvided_(u.requires[F])||t(u.requires[F]);q.push(u)}};t(a);a=!!this.depsToLoad_.length;this.depsToLoad_=
this.depsToLoad_.concat(q);this.paused_||a||this.loadDeps_()}else goog.logToConsole_("goog.require could not find: "+a)},goog.DebugLoader_.prototype.loadDeps_=function(){for(var a=this,g=this.paused_;this.depsToLoad_.length&&!g;)(function(){var q=!1,t=a.depsToLoad_.shift(),u=!1;a.loading_(t);var F={pause:function(){if(q)throw Error("Cannot call pause after the call to load.");g=!0},resume:function(){q?a.resume_():g=!1},loaded:function(){if(u)throw Error("Double call to loaded.");u=!0;a.loaded_(t)},
pending:function(){for(var M=[],V=0;V<a.loadingDeps_.length;V++)M.push(a.loadingDeps_[V]);return M},setModuleState:function(M){goog.moduleLoaderState_={type:M,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(M,V,ca){ca&&(goog.loadedModules_[ca]={exports:V,type:goog.ModuleType.ES6,moduleId:ca||""})},registerGoogModuleExports:function(M,V){goog.loadedModules_[M]={exports:V,type:goog.ModuleType.GOOG,moduleId:M}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(M){if(q)throw Error("Cannot register with defer after the call to load.");
a.defer_(t,M)},areDepsLoaded:function(){return a.areDepsLoaded_(t.requires)}};try{t.load(F)}finally{q=!0}})();g&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(a){this.loadingDeps_.push(a)},goog.DebugLoader_.prototype.loaded_=function(a){for(var g=0;g<this.loadingDeps_.length;g++)if(this.loadingDeps_[g]==a){this.loadingDeps_.splice(g,
1);break}for(g=0;g<this.deferredQueue_.length;g++)if(this.deferredQueue_[g]==a.path){this.deferredQueue_.splice(g,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);a.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(a){for(var g=0;g<a.length;g++){var q=this.getPathFromDeps_(a[g]);if(!q||!(q in this.deferredCallbacks_||goog.isProvided_(a[g])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=
function(a){return a in this.idToPath_?this.idToPath_[a]:a in this.dependencies_?a:null},goog.DebugLoader_.prototype.defer_=function(a,g){this.deferredCallbacks_[a.path]=g;this.deferredQueue_.push(a.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(a,
g,q){},goog.LoadController.prototype.setModuleState=function(a){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(a){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(a,g,q,t,u){this.path=a;this.relativePath=g;this.provides=q;this.requires=t;this.loadFlags=u;this.loaded_=!1;this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var a=this.path,g=a.indexOf("://");0<=g&&(a=a.substring(g+3),g=
a.indexOf("/"),0<=g&&(a=a.substring(g+1)));return a},goog.Dependency.prototype.onLoad=function(a){this.loaded_?a():this.loadCallbacks_.push(a)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var a=this.loadCallbacks_;this.loadCallbacks_=[];for(var g=0;g<a.length;g++)a[g]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(a){var g=Math.random().toString(32);goog.Dependency.callbackMap_[g]=a;return g},goog.Dependency.unregisterCallback_=
function(a){delete goog.Dependency.callbackMap_[a]},goog.Dependency.callback_=function(a,g){if(a in goog.Dependency.callbackMap_){for(var q=goog.Dependency.callbackMap_[a],t=[],u=1;u<arguments.length;u++)t.push(arguments[u]);q.apply(void 0,t)}else throw Error("Callback key "+a+" does not exist (was base.js loaded more than once?).");},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var g=
goog.global.document;if("complete"==g.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path)){a.loaded();return}throw Error('Cannot write "'+this.path+'" after document load');}var q=goog.getScriptNonce_();if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var t=function(V){V.readyState&&"complete"!=V.readyState?V.onload=t:(goog.Dependency.unregisterCallback_(u),a.loaded())},u=goog.Dependency.registerCallback_(t);q=q?' nonce="'+q+'"':"";var F=
'<script src="'+this.path+'"'+q+(goog.Dependency.defer_?" defer":"")+' id="script-'+u+'">\x3c/script>';F+="<script"+q+">";F=goog.Dependency.defer_?F+("document.getElementById('script-"+u+"').onload = function() {\n  goog.Dependency.callback_('"+u+"', this);\n};\n"):F+("goog.Dependency.callback_('"+u+"', document.getElementById('script-"+u+"'));");F+="\x3c/script>";g.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(F):F)}else{var M=g.createElement("script");M.defer=goog.Dependency.defer_;
M.async=!1;q&&(M.nonce=q);M.onload=function(){M.onload=null;a.loaded()};M.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;g.head.appendChild(M)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),a.loaded()):a.pause()},goog.Es6ModuleDependency=function(a,g,q,t,u){goog.Dependency.call(this,
a,g,q,t,u)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(a){function g(Y,L){var Z="",Q=goog.getScriptNonce_();Q&&(Z=' nonce="'+Q+'"');Y=L?'<script type="module" crossorigin'+Z+">"+L+"\x3c/script>":'<script type="module" crossorigin src="'+Y+'"'+Z+">\x3c/script>";t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(Y):Y)}function q(Y,L){var Z=t.createElement("script");Z.defer=!0;Z.async=!1;Z.type="module";Z.setAttribute("crossorigin",
!0);var Q=goog.getScriptNonce_();Q&&(Z.nonce=Q);L?Z.text=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(L):L:Z.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(Y):Y;t.head.appendChild(Z)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document,u=this;if(goog.isDocumentLoading_()){var F=g;goog.Dependency.defer_=!0}else F=q;var M=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(M);
a.setModuleState(goog.ModuleType.ES6)});F(void 0,'goog.Dependency.callback_("'+M+'")');F(this.path,void 0);var V=goog.Dependency.registerCallback_(function(Y){goog.Dependency.unregisterCallback_(V);a.registerEs6ModuleExports(u.path,Y,goog.moduleLoaderState_.moduleName)});F(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+V+'", m)');var ca=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(ca);a.clearModuleState();a.loaded()});F(void 0,'goog.Dependency.callback_("'+
ca+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),a.pause()},goog.TransformedDependency=function(a,g,q,t,u){goog.Dependency.call(this,a,g,q,t,u);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){function g(){u.contents_=goog.loadFileSync_(u.path);u.contents_&&(u.contents_=
u.transform(u.contents_),u.contents_&&(u.contents_+="\n//# sourceURL="+u.path))}function q(){u.lazyFetch_&&g();if(u.contents_){F&&a.setModuleState(goog.ModuleType.ES6);try{var Y=u.contents_;u.contents_=null;goog.globalEval(goog.CLOSURE_EVAL_PREFILTER_.createScript(Y));if(F)var L=goog.moduleLoaderState_.moduleName}finally{F&&a.clearModuleState()}F&&goog.global.$jscomp.require.ensure([u.getPathName()],function(){a.registerEs6ModuleExports(u.path,goog.global.$jscomp.require(u.getPathName()),L)});a.loaded()}}
function t(){var Y=goog.global.document,L=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(L);q()}),Z=goog.getScriptNonce_();Z="<script"+(Z?' nonce="'+Z+'"':"")+">"+goog.protectScriptTag_('goog.Dependency.callback_("'+L+'");')+"\x3c/script>";Y.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(Z):Z)}var u=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)g(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,a.loaded()):
a.pause();else{var F=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||g();var M=1<a.pending().length;if(goog.Dependency.defer_&&(M||goog.isDocumentLoading_()))a.defer(function(){q()});else{var V=goog.global.document;M=goog.inHtmlDocument_()&&("ActiveXObject"in goog.global||goog.isEdge_());if(F&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!M){goog.Dependency.defer_=!0;a.pause();var ca=V.onreadystatechange;V.onreadystatechange=function(){"interactive"==V.readyState&&(V.onreadystatechange=
ca,q(),a.resume());"function"===typeof ca&&ca.apply(void 0,arguments)}}else goog.inHtmlDocument_()&&goog.isDocumentLoading_()?t():q()}}},goog.TransformedDependency.prototype.transform=function(a){},goog.TranspiledDependency=function(a,g,q,t,u,F){goog.TransformedDependency.call(this,a,g,q,t,u);this.transpiler=F},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(a){return this.transpiler.transpile(a,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=
function(a,g,q,t,u){goog.TransformedDependency.call(this,a,g,q,t,u)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(a){return a},goog.GoogModuleDependency=function(a,g,q,t,u,F,M){goog.TransformedDependency.call(this,a,g,q,t,u);this.needsTranspile_=F;this.transpiler_=M},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(a){this.needsTranspile_&&
(a=this.transpiler_.transpile(a,this.getPathName()));return goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.prototype.addDependency=function(a,g,q,t){g=g||[];a=a.replace(/\\/g,"/");var u=goog.normalizePath_(goog.basePath+a);t&&"boolean"!==typeof t||(t=t?{module:goog.ModuleType.GOOG}:
{});q=this.factory_.createDependency(u,a,g,q,t,goog.transpiler_.needsTranspile(t.lang||"es3",t.module));this.dependencies_[u]=q;for(q=0;q<g.length;q++)this.idToPath_[g[q]]=u;this.idToPath_[a]=u},goog.DependencyFactory=function(a){this.transpiler=a},goog.DependencyFactory.prototype.createDependency=function(a,g,q,t,u,F){return u.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(a,g,q,t,u,F,this.transpiler):F?new goog.TranspiledDependency(a,g,q,t,u,this.transpiler):u.module==goog.ModuleType.ES6?
"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(a,g,q,t,u):new goog.Es6ModuleDependency(a,g,q,t,u):new goog.Dependency(a,g,q,t,u)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(a){goog.debugLoader_.setDependencyFactory(a)},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):
null,goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(a,g){goog.debugLoader_.bootstrap(a,g)});if(!COMPILED){var isChrome87=!1;try{isChrome87=eval(goog.global.trustedTypes.emptyScript)!==goog.global.trustedTypes.emptyScript}catch(a){}goog.CLOSURE_EVAL_PREFILTER_=goog.global.trustedTypes&&isChrome87&&goog.createTrustedTypesPolicy("goog#base#devonly#eval")||{createScript:goog.identity_}}var plt={compiler:{}};plt.compiler.throwError={};plt.compiler.Program={};
plt.compiler.comment={};plt.compiler.couple={};plt.compiler.defFunc={};plt.compiler.defVar={};plt.compiler.defVars={};plt.compiler.defStruct={};plt.compiler.beginExpr={};plt.compiler.lambdaExpr={};plt.compiler.localExpr={};plt.compiler.letrecExpr={};plt.compiler.letExpr={};plt.compiler.letStarExpr={};plt.compiler.condExpr={};plt.compiler.caseExpr={};plt.compiler.andExpr={};plt.compiler.orExpr={};plt.compiler.callExpr={};plt.compiler.ifExpr={};plt.compiler.whenUnlessExpr={};
plt.compiler.symbolExpr={};plt.compiler.literal={};plt.compiler.quotedExpr={};plt.compiler.unquotedExpr={};plt.compiler.quasiquotedExpr={};plt.compiler.unquoteSplice={};plt.compiler.requireExpr={};plt.compiler.provideStatement={};plt.compiler.unsupportedExpr={};plt.compiler.pinfo={};plt.compiler.getBasePinfo={};plt.compiler.isExpression={};plt.compiler.isDefinition={};plt.compiler.env={};plt.compiler.emptyEnv={};plt.compiler.localEnv={};plt.compiler.globalEnv={};plt.compiler.moduleBinding={};
plt.compiler.functionBinding={};plt.compiler.constantBinding={};plt.compiler.structBinding={};plt.compiler.unnamedEnv={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(v,y,D){y.source=y.source||"<unknown>";v.args=v.args.map(function(z){if("string"===typeof z)return z;if(z instanceof ma)return'["span", [["class", "SchemeValue-Symbol"]], '+z.val+"]";if(void 0!==z.location)return{text:z.text,type:"ColoredPart",loc:z.location.toString(),toString:function(){return z.text}};if(void 0!==z.locations)return{text:z.text,type:"MultiPart",solid:z.solid,locs:z.locations.map(function(A){return A.toString()}),toString:function(){return z.text}}});v={type:"moby-failure",
"dom-message":["span",[["class","Error"]],["span",[["class",D||"Message"]]].concat(D?[["span",[["class","Error.reason"]],v.toString()],["span",[["class",(D||"message")+("Error-GenericReadError"===D?".locations":".otherLocations")]]]]:v.args.map(function(z){return z.toString()})),["br",[],""],["span",[["class","Error.location"]],["span",[["class","location-reference"],["style","display:none"]],["span",[["class","location-offset"]],(y.startChar+1).toString()],["span",[["class","location-line"]],y.startRow.toString()],
["span",[["class","location-column"]],y.startCol.toString()],["span",[["class","location-span"]],y.span.toString()],["span",[["class","location-id"]],y.source.toString()]]]],"structured-error":JSON.stringify({message:D?!1:v.args,location:y.toString()})};throw JSON.stringify(v);}function g(v){w.call(this);this.txt=v;this.toString=function(){return";"+this.txt}}function q(v,y,D,z){w.call(this);this.name=v;this.args=y;this.body=D;this.stx=z;this.toString=function(){return"(define ("+this.name.toString()+
" "+this.args.join(" ")+")\n    "+this.body.toString()+")"}}function t(v,y,D){w.call(this);this.name=v;this.expr=y;this.stx=D;this.toString=function(){return"(define "+this.name.toString()+" "+this.expr.toString()+")"}}function u(v,y,D){w.call(this);this.names=v;this.expr=y;this.stx=D;this.toString=function(){return"(define-values ("+this.names.join(" ")+") "+this.expr.toString()+")"}}function F(v,y,D){w.call(this);this.name=v;this.fields=y;this.stx=D;this.toString=function(){return"(define-struct "+
this.name.toString()+" ("+this.fields.toString()+"))"}}function M(v,y){w.call(this);this.exprs=v;this.stx=y;this.toString=function(){return"(begin "+this.exprs.join(" ")+")"}}function V(v,y,D){w.call(this);this.args=v;this.body=y;this.stx=D;this.toString=function(){return"(lambda ("+this.args.join(" ")+") "+this.body.toString()+")"}}function ca(v,y,D){w.call(this);this.defs=v;this.body=y;this.stx=D;this.toString=function(){return"(local ("+this.defs.toString()+") "+this.body.toString()+")"}}function Y(v,
y,D){w.call(this);this.expr=v;this.clauses=y;this.stx=D;this.toString=function(){return"(case "+this.expr.toString()+"\n    "+this.clauses.join("\n    ")+")"}}function L(v,y,D){w.call(this);this.func=v;this.args=y;this.stx=D;this.toString=function(){return"("+[this.func].concat(this.args).join(" ")+")"}}function Z(v,y,D,z){w.call(this);this.predicate=v;this.consequence=y;this.alternative=D;this.stx=z;this.toString=function(){return"(if "+this.predicate.toString()+" "+this.consequence.toString()+" "+
this.alternative.toString()+")"}}function Q(v,y,D){w.call(this);this.predicate=v;this.exprs=y;this.stx=D;this.toString=function(){return"("+this.stx[0]+" "+this.predicate.toString()+" "+this.exprs.toString()+")"}}function ma(v,y){w.call(this);this.val=v;this.stx=y}function pa(v){w.call(this);this.val=v;this.toString=function(){if(!0===this.val)return"#t";if(!1===this.val)return"#f";if(this.val instanceof Char){var y=this.val.val;return"\b"===y?"#\\backspace":"\t"===y?"#\\tab":"\n"===y?"#\\newline":
" "===y?"#\\space":"\v"===y?"#\\vtab":this.val.toWrittenString()}return types.toWrittenString(this.val)}}function na(v){w.call(this);this.val=v;this.toString=function(){function y(z){z=z.val;if("quasiquote"===z)z="`";else if("quote"===z)z="'";else if("unquote"===z)z=",";else{if("unquote-splicing"!==z)throw"impossible quote-like string";z=",@"}return z}function D(z){return z instanceof Array&&2===z.length&&z[0]instanceof ma&&("quasiquote"===z[0].val||"quote"===z[0].val||"unquote"===z[0].val||"unquote-splicing"===
z[0].val)?y(z[0]).concat(D(z[1])):z instanceof Array?z.reduce(function(A,p){return A.concat(D(p))},"(").concat(")"):z.toString()}return"'"+D(this.val)}}function sa(v){w.call(this);this.val=v;this.toString=function(){return","+this.val.toString()}}function oa(v){w.call(this);this.val=v;this.toString=function(){return this.val instanceof Array?"`("+this.val.toString()+")":"`"+this.val.toString()}}function qa(v){w.call(this);this.val=v;this.toString=function(){return",@"+this.val.toString()}}function W(v,
y){w.call(this);this.spec=v;this.stx=y;this.toString=function(){return"(require "+this.spec.toString()+")"}}function ta(v,y){w.call(this);this.clauses=v;this.stx=y;this.toString=function(){return"(provide "+this.clauses.toString()+")"}}function ua(v,y,D){w.call(this);this.val=v;this.errorMsg=y;this.errorSpan=D;this.toString=function(){return this.val.toString()}}function va(v,y,D,z){this.name=v;this.moduleSource=y;this.permissions=D;this.loc=z;this.toString=function(){return this.name};return this}
function ka(v,y,D,z,A,p,l){this.name=v;this.moduleSource=y;this.minArity=D;this.isVarArity=z;this.permissions=A;this.isCps=p;this.loc=l;this.toString=function(){return this.name};return this}function ea(v,y,D,z,A,p,l,N,J){this.name=v;this.moduleSource=y;this.fields=D;this.constructor=z;this.predicate=A;this.accessors=p;this.mutators=l;this.permissions=N;this.loc=J;this.toString=function(){return this.name};return this}function ha(v){var y=this;this.bindings=v||ja();this.lookup=function(D){return this.bindings.containsKey(D)?
this.bindings.get(D):!1};this.peek=function(D){return 0==D?this:this instanceof la?"IMPOSSIBLE - peeked at an emptyEnv!":this.parent.peek(D-1)};this.contains=function(D){return!1!==this.lookup(D)};this.keys=this.bindings.keys;this.extend=function(D){this.bindings.put(D.name,D);return new plt.compiler.env(this.bindings)};this.extendFunction=function(D,z,A,p,l){return this.extend(new ka(D,z,A,p,[],!1,l))};this.extendConstant=function(D,z,A){return this.extend(new va(D,z,[],A))};this.lookup_context=
function(D){return D.context instanceof ha?D.context.contains(D)?D.context.lookup(D):!1:y.contains(D)?y.lookup(D):!1};this.extendEnv_moduleBinding=function(D){return D.bindings.reduceRight(function(z,A){return z.extend(A)},this)};this.toString=function(){return this.bindings.values().reduce(function(D,z){return D+"\n  |---"+z.name},"")}}function la(){ha.call(this);this.lookup=function(v,y){return new plt.compiler.unboundStackReference(v)}}function wa(v){ha.call(this);this.parent=v;this.lookup=function(y,
D){return this.parent.lookup(y,D+1)}}function aa(v,y,D){ha.call(this);this.name=v;this.boxed=y;this.parent=D;this.lookup=function(z,A){return z===this.name?new plt.compiler.localStackReference(z,this.boxed,A):this.parent.lookup(z,A+1)}}function xa(v,y,D){ha.call(this);this.names=v;this.boxed=y;this.parent=D;this.lookup=function(z,A){var p=this.names.indexOf(z);return-1<p?new plt.compiler.globalStackReference(z,A,p):this.parent.lookup(z,A+1)}}var I=function(v){var y=function(){};y.prototype=v;return new y},
w=function(){this.toString=function(){return this.val.toString()};this.location=null};g.prototype=I(w.prototype);q.prototype=I(w.prototype);t.prototype=I(w.prototype);u.prototype=I(w.prototype);F.prototype=I(w.prototype);M.prototype=I(w.prototype);V.prototype=I(w.prototype);ca.prototype=I(w.prototype);Y.prototype=I(w.prototype);L.prototype=I(w.prototype);Z.prototype=I(w.prototype);Q.prototype=I(w.prototype);ma.prototype=I(w.prototype);pa.prototype=I(w.prototype);Vector.prototype.toString=Vector.prototype.toWrittenString=
function(){var v=this.elts.filter(function(D){return void 0!==D}),y=v[v.length-1];return"#("+this.elts.map(function(D){return void 0===D?y:D})+")"};na.prototype=I(w.prototype);sa.prototype=I(w.prototype);oa.prototype=I(w.prototype);qa.prototype=I(w.prototype);W.prototype=I(w.prototype);ta.prototype=I(w.prototype);ua.prototype=I(w.prototype);var ja=types.makeLowLevelEqHash;plt.compiler.keywords="cond else let case let* letrec quote quasiquote unquote unquote-splicing local begin if or and when unless lambda \u03bb define define-struct define-values".split(" ");
la.prototype=I(ha.prototype);wa.prototype=I(ha.prototype);aa.prototype=I(ha.prototype);xa.prototype=I(ha.prototype);plt.compiler.defaultModuleResolver=function(v){for(var y=0;y<plt.compiler.knownModules.length;y++)if(plt.compiler.knownModules[y].name===v)return plt.compiler.knownModules[y];return!1};plt.compiler.moduleGuess=function(v){return plt.compiler.knownModules.reduce(function(y,D){var z=D.name;if(0===z.length)z=v.length;else if(0===v.length)z=z.length;else{for(var A=[],p=0;p<=v.length;p++)A[p]=
[p];for(var l=0;l<=z.length;l++)A[0][l]=l;for(p=1;p<=v.length;p++)for(l=1;l<=z.length;l++)v.charAt(p-1)==z.charAt(l-1)?A[p][l]=A[p-1][l-1]:A[p][l]=Math.min(A[p-1][l-1]+1,Math.min(A[p][l-1]+1,A[p-1][l]+1));z=A[v.length][z.length]}return z<y.distance?{name:D.name,distance:z}:y},{name:v,distance:5})};plt.compiler.defaultModulePathResolver=function(v,y){y=v.toString().split("/");var D=y[0];y.slice(1).join();return-1<plt.compiler.knownCollections.indexOf(D)&&plt.compiler.defaultModuleResolver(v.toString())||
/^wescheme\/\w+$/.exec(v)};plt.compiler.throwError=a;plt.compiler.Program=w;plt.compiler.comment=g;plt.compiler.couple=function(v,y){this.first=v;this.second=y;this.toString=function(){return"("+this.first.toString()+" "+this.second.toString()+")"}};plt.compiler.defFunc=q;plt.compiler.defVar=t;plt.compiler.defVars=u;plt.compiler.defStruct=F;plt.compiler.beginExpr=M;plt.compiler.lambdaExpr=V;plt.compiler.localExpr=ca;plt.compiler.letrecExpr=function(v,y,D){this.bindings=v;this.body=y;this.stx=D;this.toString=
function(){return"(letrec ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letExpr=function(v,y,D){this.bindings=v;this.body=y;this.stx=D;this.toString=function(){return"(let ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.letStarExpr=function(v,y,D){this.bindings=v;this.body=y;this.stx=D;this.toString=function(){return"(let* ("+this.bindings.toString()+") ("+this.body.toString()+"))"}};plt.compiler.condExpr=function(v,y){this.clauses=v;this.stx=
y;this.toString=function(){return"(cond\n    "+this.clauses.join("\n    ")+")"}};plt.compiler.caseExpr=Y;plt.compiler.andExpr=function(v,y){this.exprs=v;this.stx=y;this.toString=function(){return"(and "+this.exprs.join(" ")+")"}};plt.compiler.orExpr=function(v,y){this.exprs=v;this.stx=y;this.toString=function(){return"(or "+this.exprs.toString()+")"}};plt.compiler.callExpr=L;plt.compiler.ifExpr=Z;plt.compiler.whenUnlessExpr=Q;plt.compiler.symbolExpr=ma;plt.compiler.literal=pa;plt.compiler.quotedExpr=
na;plt.compiler.unquotedExpr=sa;plt.compiler.quasiquotedExpr=oa;plt.compiler.unquoteSplice=qa;plt.compiler.requireExpr=W;plt.compiler.provideStatement=ta;plt.compiler.unsupportedExpr=ua;plt.compiler.pinfo=function(v,y,D,z,A,p,l,N,J,e,d,c,b,k){this.env=v||new la;this.modules=y||[];this.usedBindingsHash=D||ja();this.freeVariables=z||[];this.gensymCounter=A||0;this.providedNames=p||ja();this.definedNames=l||ja();this.sharedExpressions=N||ja();this.withLocationEmits=J||!0;this.allowRedefinition=e||!1;
this.moduleResolver=d||plt.compiler.defaultModuleResolver;this.modulePathResolver=c||plt.compiler.defaultModulePathResolver;this.currentModulePath=b||"";this.declaredPermissions=k||[];this.isRedefinition=function(h){return this.env.lookup(h)};this.usedBindings=this.usedBindingsHash.values;this.accumulateDeclaredPermission=function(h,n){this.declaredPermissions=[[h,n]].concat(this.declaredPermissions);return this};this.accumulateSharedExpression=function(h,n){n=makeLabeledTranslation(this.gensymCounter,
n);this.sharedExpressions.put(n,h);return this};this.accumulateDefinedBinding=function(h,n){if(-1<plt.compiler.keywords.indexOf(h.name))a(new types.Message([new types.ColoredPart(h.name,h.loc),": this is a reserved keyword and cannot be used as a variable or function name"]),h.loc);else if(!this.allowRedefinition&&this.isRedefinition(h.name))n=this.env.lookup(h.name),n.loc?a(new types.Message([new types.ColoredPart(h.name,h.loc),": this name has a ",new types.ColoredPart("previous definition",n.loc),
" and cannot be re-defined"]),h.loc):a(new types.Message([new types.ColoredPart(h.name,h.loc),": this name has a ","previous definition"," and cannot be re-defined"]),h.loc);else return this.env.extend(h),this.definedNames.put(h.name,h),this};this.accumulateDefinedBindings=function(h,n){var G=this;h.forEach(function(B){G.accumulateDefinedBinding(B,n)});return this};this.accumulateModuleBindings=function(h){var n=this;h.forEach(function(G){n.env.extend(G)});return this};this.accumulateModule=function(h){this.modules=
[h].concat(this.modules);return this};this.accumulateBindingUse=function(h){var n=this.usedBindingsHash.get(h.name);n&&n.moduleSource||this.usedBindingsHash.put(h.name,h);return this};this.accumulateFreeVariableUse=function(h){this.freeVariables=-1<this.freeVariables.indexOf(h)?this.freeVariables:[h].concat(this.freeVariables);return this};this.gensym=function(h){return[this,new ma(h+this.gensymCounter++)]};this.permissions=function(){return this.usedBindings().reduce(function(h,n){return(n instanceof
ka||n instanceof va)&&0<n.permissions.length?h.concat(n.permissions):h},[]).filter(function(h,n,G){return G.indexOf(h)===n})};this.getExposedBindings=function(){function h(B){function E(H){return G.definedNames.get(H)}G.definedNames.containsKey(B.symbl)||a(new types.Message(["provided-name-not-defined: ",B.symbl]));var P=n(P,G.definedNames.get(B.symbl));return B instanceof plt.compiler.provideBindingStructId?[E(P.constructor),E(P.predicate)].concat(P.accessors.map(E),P.mutators.map(E)):[P]}function n(B,
E){if(B instanceof plt.compiler.provideBindingStructId&&!(E instanceof ea))a(new types.Message(["provided-structure-not-structure: ",E.symbl]));else return E}var G=this;bindings=bindings.reduce(function(B,E){return B.concat(h(E))},[]);return bindings.map(function(B){var E=G.declaredPermissions.filter(function(P){return P[0]===B.name});B.permissions=E.map(function(P){return P[1]});return B})};this.toString=function(){var h="pinfo-------------\n**env****: "+this.env.toString();h+="\n**modules**: "+
this.modules.join(",");h+="\n**used bindings**: "+this.usedBindings();h+="\n**free variables**: "+this.freeVariables.join(",");h+="\n**gensym counter**: "+this.gensymCounter;h+="\n**provided names**: "+this.providedNames.values();h+="\n**defined names**: "+this.definedNames.values();return h+("\n**permissions**: "+this.permissions())}};plt.compiler.getBasePinfo=function(v){var y="null empty true false eof pi e js-undefined js-null".split(" ").reduce(function(z,A){return z.extendConstant(A.toString(),
'"moby/toplevel"',!1)},new la),D=new plt.compiler.pinfo;y=plt.compiler.topLevelModules.reduceRight(function(z,A){return z.extendEnv_moduleBinding(A)},y);"moby"===v?D.env=y.extendEnv_moduleBinding(mobyModuleBinding):"base"===v&&(D.env=y);return D};plt.compiler.isExpression=function(v){return!(v instanceof t||v instanceof u||v instanceof F||v instanceof q||v instanceof ta||v instanceof ua||v instanceof W)};plt.compiler.isDefinition=function(v){return v instanceof t||v instanceof u||v instanceof F||
v instanceof q};plt.compiler.env=ha;plt.compiler.emptyEnv=la;plt.compiler.localEnv=aa;plt.compiler.globalEnv=xa;plt.compiler.moduleBinding=function(v,y){this.name=v;this.bindings=y};plt.compiler.functionBinding=ka;plt.compiler.constantBinding=va;plt.compiler.structBinding=ea;plt.compiler.unnamedEnv=wa})();plt.compiler.lex={};plt.compiler.sexpToString={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(p){return"("===p||")"===p||"["===p||"]"===p||"{"===p||"}"===p}function g(p,l){return"("===p&&")"===l||"["===p&&"]"===l||"{"===p&&"}"===l}function q(p){return"("===p?")":"["===p?"]":"{"===p?"}":")"===p?"(":"]"===p?"[":"}"===p?"{":W(new types.Message(["otherDelim: Unknown delimiter: ",p]))}function t(p,l){var N;if(l<p.length)for(N=p.charAt(l);/\s/.test(N)&&l<p.length;)"\n"===N?(I++,w=0):w++,N=p.charAt(++l);return l}function u(p){return p instanceof Array?"("+p.map(u).toString()+
")":p.toString()}function F(p,l){ja=w;v=I;var N=l;l=t(p,l);var J=p.charAt(l);l>=p.length&&(z=l,W(new types.Message([y,":",v.toString(),":",(ja-1).toString(),": read: (found end-of-file)"]),new A(ja-1,v,l-2,2),"Error-GenericReadError"));return ua.test(J)?W(new types.Message(["read: expected an open '",q(J),"' to open ",new types.ColoredPart(" "+J+" ",new A(w,v,N,1))]),new A(w,v,N,1)):ta.test(J)?M(p,l):'"'===J?V(p,l):"#"===J?ca(p,l):";"===J?Q(p,l):ka.test(J)?ma(p,l):pa(p,l)}function M(p,l){function N(H,
O,S){H=F(H,O);O=H.location.end().startChar+1;if(H instanceof oa&&"."==H.val){if(B){var fa=new types.Message(["A syntax list may have only 2 `.'s"]);W(fa,S[G].location)}B=G?S.length:!1;G=G||S.length}H instanceof na||(H.parent=S,S.push(H));return O}function J(H,O,S){if(0===O){var fa=new types.Message(["A `.' cannot be the first element in a syntax list"]);W(fa,H[O].location)}if(O===H.length-1||S===H.length-1)fa=new types.Message(["A `.' cannot be the last element in a syntax list"]),W(fa,H[S||O].location);
if(S)if(2!==S-O)fa=new types.Message(["Two `.'s may only surround one syntax item"]),W(fa,H[S].location);else return H.slice(O+1,O+2).concat(H.slice(0,O),H.slice(S+1));H[O+1]instanceof Array||(fa=new types.Message(["A `.' must be followed by a syntax list, but found ",new types.ColoredPart("something else",H[O+1].location)]),W(fa,H[O+1].location));if(H.length>O+2)fa=new types.Message(["A `.' followed by a syntax list must be followed by a closing delimeter, but found ",new types.ColoredPart("something else",
H[O+2].location)]),W(fa,H[O+1].location);else return H.slice(0,O).concat(H[O+1],H.slice(O+2))}function e(H){if(/expected a .+ to (close|open)/.exec(H)||/unexpected/.exec(H)||/syntax list/.exec(H)||/bad syntax/.exec(H)||/bad character constant/.exec(H))throw H;var O=JSON.parse(JSON.parse(H)["structured-error"]).location;h=new A(Number(O.column),Number(O.line),Number(O.offset)-1,Number(O.span));l=z;k=H;return l}var d=w,c=I,b=l,k=!1,h=new A(d,c,b,1),n=p.charAt(l++),G=!1,B=!1;w++;var E=[];xa.push(n);
for(l=t(p,l);l<p.length&&!ua.test(p.charAt(l));){"\n"===p.charAt(l)&&(I++,w=0);try{l=N(p,l,E)}catch(H){l=e(H)}l=t(p,l)}if(l>=p.length){var P=new types.Message(["read: expected a closing '",q(n),"' to close ",new types.ColoredPart(" "+n.toString()+" ",new A(d,c,b,1))]);W(P,h)}g(n,p.charAt(l))||(P=new types.Message(["read: expected a closing '",q(n),"' to close ",new types.ColoredPart(" "+n.toString()+" ",new A(d,c,b,1))," but found a ",new types.ColoredPart(" "+p.charAt(l).toString()+" ",new A(w,I,
l,1))]),W(P,new A(w,I,l,1)));w++;l++;if(k)throw z=l,k;if(G||B)E=J(E,G,B);E.location=new A(d,c,b,l-b);return E}function V(p,l){var N=w,J=I,e=l,d=/^"[^"]*(\\"[^"]*)*[^\\]"|""/.test(p.slice(l)),c=/^"[^"]*(\\"[^"]*)*/.exec(p.slice(e))[0];l++;w++;for(var b,k="";l<p.length&&'"'!==p.charAt(l);){b=p.charAt(l++);"\n"===b?(I++,w=0):w++;if("\\"===b){w++;b=p.charAt(l++);if(l>=p.length)break;switch(!0){case /a/.test(b):b="\u0007";break;case /b/.test(b):b="\b";break;case /t/.test(b):b="\t";break;case /n/.test(b):b=
"\n";break;case /v/.test(b):b="\v";break;case /f/.test(b):b="\f";break;case /r/.test(b):b="\r";break;case /e/.test(b):b="'";break;case /\n/.test(b):b="";break;case /["'\\]/.test(b):break;case /[xuU]/.test(b):var h="x"===b?ea:"u"===b?ha:wa;h.test(p.slice(l))||(z=e+c.length+1,W(new types.Message([y,":",J.toString(),":",N.toString(),": read: no hex digit following \\"+b+" in string"]),new A(N,J,e,l-e+1),"Error-GenericReadError"));h=h.exec(p.slice(l))[1];b=String.fromCharCode(parseInt(h,16));l+=h.length;
w+=h.length;break;case aa.test(p.slice(l-1)):h=aa.exec(p.slice(l-1))[1];b=String.fromCharCode(parseInt(h,8));l+=h.length-1;w+=h.length-1;break;default:z=e+c.length+1,W(new types.Message([y,":",J.toString(),":",N.toString(),": read: unknown escape sequence \\"+b+" in string"]),new A(N,J,e,l-e),"Error-GenericReadError")}}k+=b}d||(z=e+c.length,W(new types.Message([y,":",J.toString(),":",N.toString(),": read: expected a closing '\"'"]),new A(N,J,e,1),"Error-GenericReadError"));p=new sa(new types.string(k));
l++;w++;p.location=new A(N,J,e,l-e);return p}function ca(p,l){function N(G,B){G=new types.Message([y,":",I.toString(),":",(w-1).toString(),G]);W(G,new A(J,e,d,B.length+1),"Error-GenericReadError")}var J=w,e=I,d=l;l++;w++;if(l<p.length){var c=p.charAt(l).toLowerCase(),b=RegExp('^(((fl|fx|s|hash|hasheq)[[({])|((rx|px)#{0,1}"))',"g").exec(p.slice(l));c=/^(!(?!\/)|reader|lang[\s]{0,1})/.exec(p.slice(l));var k=RegExp("^(c|C)(i|I|s|S)").exec(p.slice(l)),h=RegExp("^([0-9]*)[[({]","g").exec(p.slice(l));if(b&&
0<b[0].length){p=F(p,l+b[0].length-1);l=b[0].length;var n=b[0].replace(/[\(\[\{"|#"]/g,"");switch(n){case "fl":n="flvectors";break;case "fx":n="fxvectors";break;case "s":n="structs";break;case "hash":case "hasheq":n="hashtables";break;case "px":case "rx":n="regular expressions";break;default:throw"IMPOSSIBLE: unsupportedMatch captured something it shouldn't: "+n;}h=new types.Message([y,":",I.toString(),":","0",": read-syntax: literal "+n+" not allowed"]);n=new qa(p,h,l);n.location=new A(J,e,d,b[0].length+
p.location.span);return n}if(c&&0<c[0].length)N(": read: #"+c[0].trim()+" not enabled in the current context",c[0]);else{if(k&&0<k[0].length)return D="cs"===k[0].toLowerCase(),w+=2,F(p,l+2);if(h&&0<h[0].length)return n=h[1]?parseInt(h[1]):"",b=n.toString().length,l+=b,w+=b,b=M(p,l),n=""===n?b.length:parseInt(h[1]),b.length>n&&(p=new types.Message(["read: vector length "+n+" is too small, ",b.length+" value"+(1<b.length?"s":"")," provided"]),W(p,new A(J,e,d,h[0].length))),l+=b.location.span,n=new sa(new Vector(n,
b)),n.location=new A(J,e,d,l-d),n;b=RegExp("^(hasheq|hash|fl|fx|\\d+|true|false|[tfeibdox]|\\<\\<|[\\\\\\\"\\%\\:\\&\\|\\;\\!\\`\\,\\']|)","i").exec(p.slice(l))[0];h=p.charAt(l+b.length);c=b.charAt(0).toLowerCase();switch(c){case "\\":n=Y(p,l-1);l+=n.location.span-1;break;case '"':N(": byte strings are not supported in WeScheme",'#"');case "%":n=pa(p,l);n.val="#"+n.val;l+=n.location.span;break;case ":":n=pa(p,l-1);h=new types.Message([y,":",I.toString(),":","0",": read-syntax: Keyword internment is not supported in WeScheme"]);
n=new qa(n.val,h,n.location.span);l+=n.val.length-1;break;case "&":w++;p=F(p,l+1);b=new oa("box");n=[b,p];l+=p.location.span+1;b.location=new A(J,e,d,l-d);break;case "|":l--;n=L(p,l);l+=n.location.span+1;break;case ";":n=Z(p,l+1);l+=n.location.span+1;break;case "!":n=Q(p,l-1);l+=n.location.span;break;case "`":case ",":case "'":n=ma(p,l);n.location.startChar--;n.location.span++;z=l+n.location.span;p=new types.Message([y,":",e.toString(),":",(w-1).toString()," read: WeScheme does not support the '#"+
c+"' notation for ",","===c?"unsyntax":"'"===c?"syntax":"quasisyntax"]);W(p,n.location);break;case "<<":n=V(p,l-1);l+=n.location.span;break;case "e":case "i":case "b":case "o":case "d":case "x":w--;n=pa(p,l-1);l+=n.location.span-1;break;case "true":case "false":case "t":case "f":if(!va.exec(h)){n=new sa("t"===c||"true"===b);l+=b.length;w+=b.length;break}default:z=l,p=new types.Message([y,":",I.toString(),":",(w-1).toString(),": read: bad syntax `#",b+h,"'"]),W(p,new A(J,e,d,(b+h).length+1),"Error-GenericReadError")}}}else z=
l,W(new types.Message([y,":",I.toString(),":",(w-1).toString(),": read: bad syntax `#'"]),new A(J,e,d,l-d),"Error-GenericReadError");n.location=new A(J,e,d,l-d);return n}function Y(p,l){var N=w,J=I,e=l;l+=2;w++;for(var d="",c=!0,b;l<p.length&&"#\\"!==p.slice(l,l+2)&&(c||!/\s/.test(p.charAt(l))&&!a(p.charAt(l)));)c=!1,w++,d+=p.charAt(l++);p=RegExp("(backspace|tab|newline|space|vtab)[^a-zA-Z]*","i");c=p.exec(d);p.test(d)?(d="backspace"===d?"\b":"tab"===d?"\t":"newline"===d?"\n":"space"===d?" ":"vtab"===
d?"\v":"Impossible: unknown special char was matched by special char!",l=e+2+c[1].length):/^[0-9].*/.test(d)&&aa.test(d)&&aa.exec(d)[0]===d&&256>parseInt(aa.exec(d)[0],8)&&31<parseInt(aa.exec(d)[0],8)?(c=/[0-7]+/.exec(d)[0],d=String.fromCharCode(parseInt(c,8)),l=e+2+c.length):/[uU]/.test(d)&&(b="u"===d.charAt(0)?ha:la)&&b.test(d.slice(1))?(c=b.exec(d.slice(1))[0],w+=c.length-d.length+1,d=String.fromCharCode(parseInt(c,16)),l=e+3+c.length):1===d.length||/[^\u00C0-\u1FFF\u2C00-\uD7FF\w]$/.test(d.charAt(1))?
(d=d.charAt(0),l=e+3):W(new types.Message([y,":",J.toString(),":",(N-1).toString(),": read: bad character constant: #\\",d]),new A(N-1,J,e,l-e),"Error-GenericReadError");d=new sa(new types["char"](d));d.location=new A(N,J,e,l-e);return d}function L(p,l){var N=w,J=I,e=l;l+=2;w+=2;for(var d="";l+1<p.length&&("|"!==p.charAt(l)||"#"!==p.charAt(l+1));)"\n"===p.charAt(l)&&(I++,w=0),d+=p.charAt(l),l++,w++;l+1>=p.length&&W(new types.Message(["read: Unexpected EOF when reading a multiline comment"]),new A(N,
J,e,l-e));l++;w++;p=new na(d);p.location=new A(N,J,e,l-e);return p}function Z(p,l){for(var N=w++,J=I,e=l,d;(l=t(p,l))&&l+1<p.length&&(d=F(p,l))&&d instanceof na;)l=d.location.endChar;l+1>=p.length&&(z=l,W(new types.Message([y,":",J.toString(),":",(N-1).toString(),": read: expected a commented-out element for `#;' (found end-of-file)"]),new A(N-1,J,l-2,2),"Error-GenericReadError"));p=new na("("+d.toString()+")");l=d.location.endChar;p.location=new A(N,J,e,l-e);return p}function Q(p,l){var N=w,J=I,
e=l;l++;w++;for(var d="";l<p.length&&"\n"!==p.charAt(l);)d+=p.charAt(l),w++,l++;l>p.length&&(z=l,W(new types.Message(["read: Unexpected EOF when reading a line comment"]),new A(N,J,e,l-e)));p=new na(d);p.location=new A(N,J,e,l+1-e);I++;w=0;return p}function ma(p,l){function N(h){z=h+1;W(new types.Message([y,":",e.toString(),":",J.toString(),": read: expected an element for"+("'"==c?" quoting ":"`"==c?" quasiquoting ":","==c?" unquoting ":",@"==c?" unquoting ":""),c," (found end-of-file)"]),new A(J,
e,d,c.length),"Error-GenericReadError")}var J=w,e=I,d=l,c=p.charAt(l),b="'"==c?new oa("quote"):"`"==c?new oa("quasiquote"):"";l+1>=p.length&&N(l);l++;w++;","==c&&("@"==p.charAt(l)?(l++,w++,c+="@",b=new oa("unquote-splicing")):b=new oa("unquote"));for(b.location=new A(w-1,e,d,l-d);!k||k instanceof na;){l=t(p,l);try{var k=F(p,l)}catch(h){/read: \(found end-of-file\)/.test(h)&&N(l);if(k=/expected a .* to open ","(.)"/.exec(h))z=l+1,W(new types.Message([y,":",I.toString(),":",w.toString(),": read: unexpected `"+
k[1]+"'"]),new A(w,I,l,1),"Error-GenericReadError");throw h;}l=k.location.end().startChar+1}l=[b,k];k=k.location.end().startChar+1-d;l.location=new A(J,e,d,k);return l}function pa(p,l){var N=w,J=I,e=l,d=RegExp("(\\|(.|\\n)*\\||\\\\(.|\\n)|[^\\(\\)\\{\\}\\[\\]\\,\\'\\`\\s\\\"\\;])+","mg").exec(p.slice(l))[0],c=/\.*\\+$/.exec(d);c&&0<c[0].length%2&&(z=l=p.length,W(new types.Message([y,":",I.toString(),":",N.toString(),": read: EOF following `\\' in symbol"]),new A(N,J,e,l-e),"Error-GenericReadError"));
l+=d.length;w+=d.length;c="";for(var b=0;b<d.length;b++)"\\"==d.charAt(b)&&b++,c+=d.charAt(b);c=c.split("|");if(0===c.length%2){z=p.length;var k=d.slice(0,d.length-(c[c.length-1].length+1)),h=e+k.length;w=N;for(b=0;b<k.length;b++)"\n"===p.charAt(l)?(I++,w=0):w++;W(new types.Message([y,":",I.toString(),":",w.toString(),": read: unbalanced `|'"]),new A(w,I,h,p.length-h),"Error-GenericReadError")}p=c.reduce(function(G,B,E){return G+(E%2||D?B:B.toLowerCase())},"");"\n"===p&&(I++,w=0);b=RegExp("^$|[\\(\\)\\{\\}\\[\\]\\,\\'\\`\\s\\\"\\\\]",
"g");p=RegExp("^.*\\\\[\\d]*.*|\\|[\\d]*\\|").test(d)||b.test(p)?"|"+p+"|":p;d=new oa(p);if(1===c.length&&!/^[a-zA-Z\-\?]+$/.test(p))try{var n=jsnums.fromString(p,!0);if(n||0===n)n instanceof Object&&(n.stx=p,n.location=new A(N,J,e,l-e)),d=new sa(n)}catch(G){z=l,n=new types.Message([y,":",J.toString(),":",N.toString(),": read: "+G.message]),W(n,new A(N,J,e,l-e),"Error-GenericReadError")}d.stx=p;d.location=new A(N,J,e,l-e);return d}var na=plt.compiler.comment,sa=plt.compiler.literal,oa=plt.compiler.symbolExpr,
qa=plt.compiler.unsupportedExpr,W=plt.compiler.throwError,ta=/[(\u005B\u007B]/,ua=/[)\u005D\u007D]/,va=/^[^(\u005B\u007B)\u005D\u007D\s]+/,ka=/['`,]/,ea=RegExp("^([0-9a-f]{1,2})","i"),ha=RegExp("^([0-9a-f]{1,4})","i"),la=RegExp("^([0-9a-f]{1,6})","i"),wa=RegExp("^([0-9a-f]{1,8})","i"),aa=RegExp("^([0-7]{1,3})","i"),xa,I,w,ja,v,y,D,z,A=function(p,l,N,J,e){this.startCol=p;this.startRow=l;this.startChar=N;this.span=J;this.source=e||y;this.endCol=w;this.endRow=I;this.endChar=N+J;this.start=function(){return new A("",
"",this.startChar,1)};this.end=function(){return new A("","",this.startChar+this.span-1,1)};this.toString=function(){return"Loc("+this.startCol+", "+this.startRow+", "+(this.startChar+1)+","+this.span+")"};this.toVector=function(){return new types.vector(['"'+this.source+'"',this.startChar+1,this.startRow,this.startCol,this.span])};this.toString=function(){return{line:this.startRow.toString(),id:this.source,span:this.span.toString(),offset:(this.startChar+1).toString(),column:this.startCol.toString()}}};
Array.prototype.toString=function(){return this.join(" ")};plt.compiler.lex=function(p,l,N){var J=(new Date).getTime();try{var e=0;ja=w=0;v=I=1;D=!0;y=l||"<definitions>";l=[];xa=[];for(e=t(p,0);e<p.length;){var d=F(p,e);d instanceof na||l.push(d);e=t(p,d.location.startChar+d.location.span)}l.location=new A(ja,v,0,e,y)}catch(c){throw console.log("LEXING ERROR"),c;}p=(new Date).getTime();N&&(console.log("Lexed in "+Math.floor(p-J)+"ms"),console.log(l),console.log(u(l)));return l};plt.compiler.sexpToString=
u})();plt.compiler.parse={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(f){return f instanceof w}function g(f){return f instanceof Array&&1<=f.length}function q(f,x){f=f instanceof w?f.val:f;x=x instanceof w?x.val:x;return f===x}function t(f){return f.map(function(x){return L(x)?Z(x):L(x)||la(x)||aa(x)?la(x)?wa(x):aa(x)?xa(x):C(new types.Message(["Not a Definition, Expression, Library Require, or Provide"]),x.location):Q(x)})}function u(f){return 0===f.length?[]:g(f)?t(f):C(new types.Message(["The sexp is not a list of definitions or expressions: "+
f]),f.location)}function F(f){return g(f)&&a(f[0])&&q("define-struct",f[0])}function M(f){return g(f)&&a(f[0])&&q("define",f[0])}function V(f){return g(f)&&a(f[0])&&q("define-val",f[0])}function ca(f){return g(f)&&a(f[0])&&q("define-fun",f[0])}function Y(f){return g(f)&&a(f[0])&&q("define-values",f[0])}function L(f){return F(f)||M(f)||Y(f)||V(f)||ca(f)}function Z(f){function x(r){2>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected the structure name after define-struct, but nothing's there"]),
r.location);r[1]instanceof w||C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected the structure name after define-struct, but found ",new types.ColoredPart("something else",r[1].location)]),r.location);3>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",r[1].location),", but nothing's there"]),r.location);r[2]instanceof Array||C(new types.Message([new types.ColoredPart(r[0].val,
r[0].location),": expected at least one field name (in parentheses) after the ",new types.ColoredPart("structure name",r[1].location),", but found ",new types.ColoredPart("something else",r[2].location)]),r.location);r[2].forEach(function(ra){ra instanceof w||C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a field name, but found ",new types.ColoredPart("something else",ra.location)]),r.location)});if(3<r.length){var R=r.slice(3).map(function(ra){return ra.location}),
m=1===r[2].length?"field name":"field names",T=R.length+" extra "+(1===R.length?"part":"parts");C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected nothing after the ",new types.ColoredPart(m,r[2].location),", but found ",new types.MultiPart(T,R,!1)]),r.location)}return new H(ea(r[1]),r[2].map(ea),r)}function K(r){2>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expects a list of variables and a body, but found neither"]),r.location);3>r.length&&
C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expects a list of variables and a body, but found only ",new types.ColoredPart("one part",r[1].location)]),r.location);r[1]instanceof Array||C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expects a list of variables and a body, but found ",new types.ColoredPart("something else",r[1].location)]),r.location);if(3<r.length){var R=r.slice(3).map(function(T){return T.location}),m=R.length+" extra "+(1===R.length?
"part":"parts");R=new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expects a list of variables and a body, but found ",new types.MultiPart(m,R,!1)]);C(R,r.location)}return new P(r[1].map(ea),Q(r[2]),r)}function ba(r){if(3!==r.length){var R=r.slice(1).map(function(T){return T.location}),m=4>r.length?" fewer than two":new types.MultiPart("more than two parts",R,!1);C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected exactly two parts for the definition: a name (or a function name and its variables) and an expression, but found",
m]),r.location)}3<r.length&&(R=r.slice(1).map(function(T){return T.location}),m=R.length+" parts",C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected exactly two parts, but found",new types.MultiPart(m,R,!1)]),r.location));if(r[1]instanceof Array)return 0===r[1].length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected at least a function name within ",new types.ColoredPart("the parentheses",r[1].location)]),r.location),r[1][0]instanceof w||
C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a function name after the open parenthesis but found ",new types.ColoredPart("something else",r[1][0].location)]),r.location),r[1].forEach(function(T){T instanceof w||C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a variable name but found ",new types.ColoredPart("something else",T.location)]),r.location)}),3>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected an expression for the function body, but nothing's there"]),
r.location),R=r[1].slice(1).map(ea),R.location=r[1].location,new B(ea(r[1][0]),R,Q(r[2]),r);if(r[1]instanceof w)return 3>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected an expression after the variable ",new types.ColoredPart(r[1].val,r[1].location)," but nothing's there"]),r.location),new E(ea(r[1]),Q(r[2]),r);C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a name (or a function name and its variables) "," and an expression, but found",
new types.ColoredPart("something else",r[1].location)]),r.location)}function da(r){if(3!==r.length){var R=r.slice(1).map(function(m){return m.location});R=4>r.length?" fewer than two":new types.MultiPart("more than two parts",R,!1);C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected exactly two parts for the value: a name and an expression, but found",R]),r.location)}if(r[1]instanceof w)return 3>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),
": expected an expression after the name ",new types.ColoredPart(r[1].val,r[1].location)," but nothing's there"]),r.location),new E(ea(r[1]),Q(r[2]),r);C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a name but found ",new types.ColoredPart("something else",r[1].location)]),r.location)}function ia(r){if(3!==r.length){var R=r.slice(1).map(function(m){return m.location});R=4>r.length?" fewer than two":new types.MultiPart("more than two parts",R,!1);C(new types.Message([new types.ColoredPart(r[0].val,
r[0].location),": expected exactly two parts for the function: a header (function name and variables, in parentheses) and a body (any expression), but found",R]),r.location)}if(r[1]instanceof Array)return 0===r[1].length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected at least a function name within ",new types.ColoredPart("the parentheses",r[1].location)]),r.location),r[1][0]instanceof w||C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a function name after the open parenthesis but found ",
new types.ColoredPart("something else",r[1][0].location)]),r.location),r[1].forEach(function(m){m instanceof w||C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a variable name, but found ",new types.ColoredPart("something else",m.location)]),r.location)}),3>r.length&&C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected an expression for the function body after ",new types.ColoredPart("the header",r[1].location,!1),", but nothing's there"]),
r.location),R=r[1].slice(1).map(ea),R.location=r[1].location,new B(ea(r[1][0]),R,Q(r[2]),r);C(new types.Message([new types.ColoredPart(r[0].val,r[0].location),": expected a header (function name and variables, in parentheses) and a body for the function"]),r.location)}var U=F(f)?x(f):M(f)?ba(f):Y(f)?K(f):V(f)?da(f):ca(f)?ia(f):C(new types.Message([": expected to find a definition, but found: "+f]),f.location);U.location=f.location;return U}function Q(f){return g(f)?ma(f):ka(f)}function ma(f){function x(m){q(m[0],
"unquote")&&C(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),m.location,"Error-GenericSyntacticError");q(m[0],"unquote-splicing")&&C(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),m.location,"Error-GenericSyntacticError");q(m[0],"else")&&C(new types.Message([new types.ColoredPart(m[0].val,m.location),": not allowed ",new types.ColoredPart("here",m.location),", because this is not a question in a clause"]),m.location);
return g(m)?new n(Q(m[0]),m.slice(1).map(Q),m[0]):C(new types.Message(["function call sexp"]),m.location)}function K(m){1===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected at least one variable (in parentheses) after lambda, but nothing's there"]),m.location);m[1]instanceof Array||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected at least one variable (in parentheses) after lambda, but found ",new types.ColoredPart("something else",
m[1].location)]),m.location);m[1].forEach(function(X){X instanceof w||(X=new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a list of variables after lambda, but found ",new types.ColoredPart("something else",X.location)]),C(X,m.location))});2===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected an expression for the function body, but nothing's there"]),m.location);if(3<m.length){var T=m.slice(3).map(function(X){return X.location}),
ra=T.length+" extra "+(1===T.length?"part":"parts");T=new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected only one expression for the function body, but found ",new types.MultiPart(ra,T,!1)]);C(T,m.location)}T=m[1].map(ea);T.location=m[1].location;return new d(T,Q(m[2]),m[0])}function ba(m){1===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected at least one definition (in square brackets) after local, but nothing's there"]),m.location);
m[1]instanceof Array||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a collection of definitions, but given ",new types.ColoredPart("something else",m[1].location)]),m[1].location);m[1].forEach(function(X){L(X)||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a definition, but given ",new types.ColoredPart("something else",X.location)]),X.location)});2===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single body, but found none"]),
m.location);if(3<m.length){var T=m.slice(3).map(function(X){return X.location}),ra=T.length+" extra "+(1===T.length?"part":"parts");C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single body, but found ",new types.MultiPart(ra,T,!1)]),m.location)}return new p(m[1].map(Z),Q(m[2]),m[0])}function da(m){3>m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected an expression after the bindings, but nothing's there"]),m.location);m[1]instanceof
Array||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",m[1].location)]),m.location);m[1].forEach(function(X){ha(X)||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",X.location)]),X.location)});2===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected an expression after the bindings, but nothing's there"]),
m.location);if(3<m.length){var T=m.slice(3).map(function(X){return X.location}),ra=T.length+" extra "+(1===T.length?"part":"parts");C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single body, but found ",new types.MultiPart(ra,T,!1)]),m.location)}return new A(m[1].map(oa),Q(m[2]),m[0])}function ia(m){1===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected at least one binding (in parentheses) after let, but nothing's there"]),
m.location);m[1]instanceof Array||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected sequence of key value pairs, but given ",new types.ColoredPart("something else",m[1].location)]),m[1].location);m[1].forEach(function(X){ha(X)||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",X.location)]),X.location)});if(3<m.length){var T=m.slice(3).map(function(X){return X.location}),
ra=T.length+" extra "+(1===T.length?"part":"parts");C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single body, but found ",new types.MultiPart(ra,T,!1)]),m.location)}2===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single body, but found none"]),m.location);return new D(m[1].map(oa),Q(m[2]),m)}function U(m){1===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected an expression after the bindings, but nothing's there"]),
m.location);if(!(m[1]instanceof Array)){var T=new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected sequence of key/value pairs, but given ",new types.ColoredPart("something else",m[1].location)]);C(T,m.location)}m[1].forEach(function(X){ha(X)||C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a key/value pair, but given ",new types.ColoredPart("something else",X.location)]),X.location)});2===m.length&&C(new types.Message([new types.ColoredPart(m[0].val,
m[0].location),": expected a single body, but found none"]),m.location);if(3<m.length){T=m.slice(3).map(function(X){return X.location});var ra=T.length+" extra "+(1===T.length?"part":"parts");C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single body, but found ",new types.MultiPart(ra,T,!1)]),m.location)}T=m[1].map(oa);T.location=m[1].location;return new z(T,Q(m[2]),m[0])}function r(m){4>m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),
": expected a test, a consequence, and an alternative, but all three were not found"]),m.location);if(4<m.length){var T=m.slice(1).map(function(ra){return ra.location});C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected only a test, a consequence, and an alternative, ","but found ",new types.MultiPart("more than three of these",T,!1)]),m.location)}return new v(Q(m[1]),Q(m[2]),Q(m[3]),m[0])}function R(m){function T(X){return g(X)?X.map(T):X instanceof Array&&0===X.length?
X:ka(X)}2>m.length&&C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single argument, but did not find one."]),m.location);if(2<m.length){var ra=m.slice(1).map(function(X){return X.location});C(new types.Message([new types.ColoredPart(m[0].val,m[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",ra,!1)]),m.location)}return new c(T(m[1]))}return function(){var m=f[0];a(m)?q("\u03bb",m)?m=K(f):q("lambda",m)?m=K(f):q("local",m)?
m=ba(f):q("letrec",m)?m=da(f):q("let",m)?m=ia(f):q("let*",m)?m=U(f):q("cond",m)?m=na(f):q("case",m)?m=sa(f):q("if",m)?m=r(f):q("begin",m)?(2>f.length&&(m=new types.Message([new types.ColoredPart(f[0].val,f[0].location),": Inside a begin, expected to find a body, but nothing was found."]),C(m,f.location)),m=new y(f.slice(1).map(Q),f[0])):q("and",m)?(3>f.length&&C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected at least 2 arguments, but given ",1===f.length?"0":new types.ColoredPart((f.length-
1).toString(),f[1].location)]),f.location),m=new l(f.slice(1).map(Q),f[0])):q("or",m)?(3>f.length&&C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected at least 2 arguments, but given ",1===f.length?"0":new types.ColoredPart((f.length-1).toString(),f[1].location)]),f.location),m=new N(f.slice(1).map(Q),f[0])):m=q("when",m)?pa(f):q("unless",m)?pa(f):q("quote",m)?R(f):q("quasiquote",m)?ua(f):q("unquote",m)?qa(f):q("unquote-splicing",m)?W(f):x(f):m=x(f);m.location=f.location;
return m}()}function pa(f){3>f.length&&C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected at a test and at least one result after "+f[0]+", but nothing's there"]),f.location);var x=f.slice(2),K=new G(Q(f[1]),u(x),f[0]);x.location=x[0].location;K.location=f.location;return K}function na(f){1===f.length&&C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected at least one clause after cond, but nothing's there"]),f.location);var x=[f[0].location,f.location.start(),
f.location.end()];f.slice(1).forEach(function(da){var ia=[da.location.start(),da.location.end()];da instanceof Array||C(new types.Message([new types.MultiPart(f[0].val,x,!0),": expected a clause with a question and an answer, but found ",new types.ColoredPart("something else",da.location)]),da.location);0===da.length&&C(new types.Message([new types.MultiPart(f[0].val,x,!0),": expected a clause with a question and an answer, but found an ",new types.MultiPart("empty part",ia,!0)]),da.location);1===
da.length&&C(new types.Message([new types.MultiPart(f[0].val,x,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",ia,!0)," with only ",new types.MultiPart("one part",[da[0].location],!1)]),da.location);if(2<da.length){var U=da.map(function(R){return R.location}),r=U.length+" parts";C(new types.Message([new types.MultiPart(f[0].val,x,!0),": expected a clause with a question and an answer, but found ",new types.MultiPart("a clause",ia,!0)," with ",new types.MultiPart(r,
U,!1)]),da.location)}});var K=f.slice(1).length,ba=f.slice(1).map(function(da){var ia=Q(da[0]),U=Q(da[1]);U=new ja(ia,U);-1<plt.compiler.keywords.indexOf(ia.val)&&"else"!==ia.val&&C(new types.Message([new types.ColoredPart(ia.val,ia.location),": expected an open parenthesis before ",ia.val,", but found none"]),ia.location);ia.isClause=!0;U.location=da.location;return U});f.slice(1).forEach(function(da,ia){a(da[0])&&q(da[0],"else")&&ia<K-1&&C(new types.Message([new types.MultiPart("cond",x,!0),": ",
"found an ",new types.ColoredPart("else clause",da.location)," that isn't the last clause in its cond expression; there is ",new types.ColoredPart("another clause",f[ia+2].location)," after it"]),da.location)});return new J(ba,f[0])}function sa(f){function x(U){return a(U[0])&&"else"===U[0].val}if(1===f.length){var K=new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected at least one clause after case, but nothing's there"]);C(K,f.location)}var ba=[f[0].location,f.location.start(),
f.location.end()];2===f.length&&(K=new types.Message([new types.MultiPart(f[0].val,ba,!0),": expected a clause with at least one choice (in parentheses) and an answer after the expression, but nothing's there"]),C(K,f.location));K=f.slice(2);K.forEach(function(U){var r=[U.location.start(),U.location.end()];if(!(U instanceof Array)){var R=new types.Message([new types.MultiPart(f[0].val,ba,!0),": expected a clause with at least one choice (in parentheses), but found ",new types.ColoredPart("something else",
U.location)]);C(R,f.location)}0===U.length&&(R=new types.Message([new types.MultiPart(f[0].val,ba,!0),": expected at least one choice (in parentheses) and an answer, but found an ",new types.ColoredPart("empty part",U.location)]),C(R,f.location));U[0]instanceof Array||U[0]instanceof w&&q(U[0],"else")||(R=new types.Message([new types.MultiPart(f[0].val,ba,!0),": expected 'else', or at least one choice in parentheses, but found ",new types.ColoredPart("something else",U.location)]),C(R,f.location));
1===U.length&&(R=new types.Message([new types.MultiPart(f[0].val,ba,!0),": expected a clause with a question and an answer, but found a ",new types.MultiPart("clause",r,!0)," with only ",new types.ColoredPart("one part",U[0].location)]),C(R,f.location));2<U.length&&(U=U.map(function(m){return m.location}),R=U.length+" parts",R=new types.Message([new types.MultiPart(f[0].val,ba,!0),": expected only one expression for the answer in the case clause, but found a ",new types.MultiPart("clause",r,!0)," with ",
new types.MultiPart(R,U,!1)]),C(R,f.location))});var da=K.length,ia=K.map(function(U){var r=x(U)?U[0]:new c(U[0]),R=Q(U[1]);R=new ja(r,R);r.isClause=!0;R.location=U.location;return R});K.forEach(function(U,r){x(U)&&r<da-1&&(U=new types.Message([new types.MultiPart("case",ba,!0),": found an ",new types.ColoredPart("else clause",U.location),"that isn't the last clause in its case expression; there is ",new types.ColoredPart("another clause",f[r+2].location)," after it"]),C(U,f.location))});return new e(Q(f[1]),
ia,f[0])}function oa(f){if(ha(f)){var x=new ja(ea(f[0]),Q(f[1]));x.location=f.location;x.stx=f;return x}C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected a sequence of key/value pairs, but given ",new types.ColoredPart("something else",f[0].location)]),f.location)}function qa(f,x){if("undefined"===typeof x)C(new types.Message(["misuse of a comma or 'unquote, not under a quasiquoting backquote"]),f.location,"Error-GenericSyntacticError");else if(2!==f.length)C(new types.Message(["Inside an unquote, expected to find a single argument, but found "+
(f.length-1)]),f.location);else{if(1===x)return x=new b(Q(f[1])),x.location=f[1].location,x;if(1<x)return x=new b(ta(f[1],x-1)),x.location=f[1].location,x;C(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),f.location)}}function W(f,x){if("undefined"===typeof x)C(new types.Message(["misuse of a ,@ or unquote-splicing, not under a quasiquoting backquote"]),f.location,"Error-GenericSyntacticError");else if(2!==f.length)C(new types.Message(["Inside an unquote-splicing, expected to find a single argument, but found "+
(f.length-1)]),f.location);else{if(1===x)return x=new h(Q(f[1])),x.location=f[1].location,x;if(1<x)return x=new h(ta(f[1],x-1)),x.location=f[1].location,x;C(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),f.location)}}function ta(f,x){if(g(f)&&"unquote"===f[0].val)return qa(f,x);if(g(f)&&"unquote-splicing"===f[0].val)return W(f,x);if(g(f)&&"quasiquote"===f[0].val)return ua(f,x);if(g(f)){var K=f.map(function(ba){return ta(ba,x)});K.location=f.location;
return K}return 0===x?Q(f):function(){var ba=new c(f);ba.location=f.location;return ba}()}function ua(f,x){x="undefined"===typeof x?0:x;2>f.length&&C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected a single argument, but did not find one "]),f.location);if(2<f.length){var K=f.slice(1).map(function(ba){return ba.location});C(new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected a single argument, but found ",new types.MultiPart("more than one.",K,
!1)]),f.location)}g(f[1])&&q(f[1][0],"unquote-splicing")&&C(new types.Message(["misuse of ,@ or `unquote-splicing' within a quasiquoting backquote"]),f.location);x=ta(f[1],x+1);x.location=f[1].location;x=new k(x);x.location=f.location;return x}function va(f){function x(){var ia=new I(0);ia.location=f.location;return ia}var K=f.val,ba=t(K.elts.filter(function(ia){return void 0!==ia})),da=0===ba.length?x():ba[ba.length-1];ba=K.elts.map(function(ia){return void 0===ia?da:Q(ia)});K=new w("vector");ba=
new n(K,ba);K.location=ba.location=f.location;return ba}function ka(f){var x=f instanceof fa?f:types.isVector(f.val)?va(f):a(f)?f:f instanceof I?f:q("quote",f)?new c(f):q("empty",f)?new n(new w("list"),[]):new n(null,[]);x.location=f.location;return x}function ea(f){return a(f)?f:C(new types.Message(["ID"]),f.location)}function ha(f){return g(f)&&2===f.length}function la(f){return g(f)&&a(f[0])&&q(f[0],"require")}function wa(f){if(2>f.length){var x=new types.Message([new types.ColoredPart(f[0].val,
f[0].location),": expected a module name after `require', but found nothing"]);C(x,f.location)}f[1]instanceof Array&&q(f[1][0],"lib")?(3>f[1].length&&(x=f[1].slice(1).length,x+=1===x?" part":" parts",x=new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected at least two strings after ",new types.ColoredPart("lib",f[1][0].location)," but found only ",x]),C(x,f.location)),f[1].slice(1).forEach(function(K){types.isString(K.val)||(K=new types.Message([new types.ColoredPart(f[0].val,
f[0].location),": expected a string for a library collection, but found ",new types.ColoredPart("something else",str.location)]),C(K,f.location))})):f[1]instanceof Array&&q(f[1][0],"planet")?(x=new types.Message([new types.ColoredPart(f[0].val,f[0].location),": Importing PLaneT pacakges is not supported at this time"]),C(x,f.location)):f[1]instanceof w||types.isString(f[1].val)||(x=new types.Message([new types.ColoredPart(f[0].val,f[0].location),": expected a module name as a string or a `(lib ...)' form, but found ",
new types.ColoredPart("something else",f[1].location)]),C(x,f.location));x=new O(f[1],f[0]);x.location=f.location;return x}function aa(f){return g(f)&&a(f[0])&&q(f[0],"provide")}function xa(f){var x=f.slice(1).map(function(K){if(K instanceof w||K instanceof Array&&2==K.length&&K[0]instanceof w&&q(K[0],"struct-out")&&K[1]instanceof w)return K;K=new types.Message([new types.ColoredPart(f[0].val,f[0].location),": I don't recognize the syntax of this ",new types.ColoredPart("clause",K.location)]);C(K,
f.location)});x=new S(x,f[0]);x.location=f.location;return x}var I=plt.compiler.literal,w=plt.compiler.symbolExpr,ja=plt.compiler.couple,v=plt.compiler.ifExpr,y=plt.compiler.beginExpr,D=plt.compiler.letExpr,z=plt.compiler.letStarExpr,A=plt.compiler.letrecExpr,p=plt.compiler.localExpr,l=plt.compiler.andExpr,N=plt.compiler.orExpr,J=plt.compiler.condExpr,e=plt.compiler.caseExpr,d=plt.compiler.lambdaExpr,c=plt.compiler.quotedExpr,b=plt.compiler.unquotedExpr,k=plt.compiler.quasiquotedExpr,h=plt.compiler.unquoteSplice,
n=plt.compiler.callExpr,G=plt.compiler.whenUnlessExpr,B=plt.compiler.defFunc,E=plt.compiler.defVar,P=plt.compiler.defVars,H=plt.compiler.defStruct,O=plt.compiler.requireExpr,S=plt.compiler.provideStatement,fa=plt.compiler.unsupportedExpr,C=plt.compiler.throwError;plt.compiler.parse=function(f,x){var K=(new Date).getTime();try{var ba=u(f);ba.location=f.location}catch(da){throw console.log("PARSING ERROR"),da;}f=(new Date).getTime();x&&(console.log("Parsed in "+Math.floor(f-K)+"ms"),console.log(ba));
return ba}})();plt.compiler.topLevelModules={};plt.compiler.knownModules={};plt.compiler.knownCollections={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(ja){return function(v){v[3]=v[3]||[];v[4]=v[4]||!1;v[5]=v[5]||!1;return new q(v[0],ja,v[1],v[2],v[3],v[4],v[5])}}var g=plt.compiler.moduleBinding,q=plt.compiler.functionBinding,t=plt.compiler.constantBinding,u=new g("moby/runtime/kernel/misc",[["verify-boolean-branch-value",2],["throw-cond-exhausted-error",1],["'check-operator-is-function",3],["print-values",0]].map(a('"moby/runtime/kernel/misc"'))),F=new g("moby/foreign",[["get-js-object",2,!1,["android.permission.FOREIGN-FUNCTION-INTERFACE"]]].map(a('"moby/foreign"'))),
M=new g("world-effects",[["make-effect:none",0,!1],["make-effect:beep",0,!1,["android.permission.VIBRATE"]],["make-effect:play-dtmf-tone",2,!1],["make-effect:send-sms",2,!1,["android.permission.SEND-SMS"]],["make-effect:play-sound",1,!1,["android.permission.INTERNET"]],["make-effect:stop-sound",1,!1],["make-effect:pause-sound",1,!1],["make-effect:set-sound-volume",1,!1],["make-effect:set-beep-volume",1,!1],["make-effect:raise-sound-volume",0,!1],["make-effect:lower-sound-volume",1,!1],["make-effect:set-wake-lock",
1,!1,["android.permission.WAKE-LOCK"]],["make-effect:release-wake-lock",1,!1,["android.permission.WAKE-LOCK"]],["make-effect:pick-playlist",1,!1],["make-effect:pick-random",2,!1]].map(a('"moby/world-effects"'))),V=new g("world-config",[["on-tick",1,!0],["initial-effect",1,!1],["on-key",1,!1],["on-key!",2,!1],["on-mouse",1,!1],["on-tap",1,!1],["on-tilt",1,!1],["on-redraw",1,!1],["to-draw",1,!1],["on-draw",2,!1],["stop-when",1,!1]].map(a('"moby/world-handlers"'))),ca=[["START",14,!1],["test-frame",
1,!1],["sine",1,!1],["cosine",1,!1],["tangent",1,!1]],Y=new g("bootstrap/bootstrap-teachpack",ca.map(a('"bootstrap/bootstrap-teachpack"'))),L=new g("bootstrap2011/bootstrap-teachpack",ca.map(a('"bootstrap2011/bootstrap-teachpack"'))),Z=new g("bootstrap2012/bootstrap-teachpack",ca.map(a('"bootstrap2012/bootstrap-teachpack"'))),Q=new g("bootstrap2012/bootstrap-tilt-teachpack",ca.map(a('"bootstrap2012/bootstrap-tilt-teachpack"'))),ma=new g("bootstrap2014/bootstrap-teachpack",ca.map(a('"bootstrap2014/bootstrap-teachpack"'))),
pa=new g("bootstrap2014/bootstrap-tilt-teachpack",ca.map(a('"bootstrap2014/bootstrap-tilt-teachpack"'))),na=new g("bootstrap2015/bootstrap-teachpack",ca.map(a('"bootstrap2015/bootstrap-teachpack"')));ca=new g("bootstrap2015/bootstrap-tilt-teachpack",ca.map(a('"bootstrap2015/bootstrap-tilt-teachpack"')));var sa=new g("bootstrap/cage-teachpack",[["start",1,!1]].map(a('"bootstrap/cage-teachpack"'))),oa=new g("bootstrap2011/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2011/cage-teachpack"'))),qa=
new g("bootstrap2012/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2012/cage-teachpack"'))),W=new g("bootstrap2014/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2014/cage-teachpack"')));cageTeachpack2015=new g("bootstrap2015/cage-teachpack",[["start",1,!1]].map(a('"bootstrap2015/cage-teachpack"')));var ta=new g("bootstrap2020/boolean-teachpack",[["start",1,!1]].map(a('"bootstrap2020/boolean-teachpack"'))),ua=new g("bootstrap/function-teachpack",[["start",1,!1]].map(a('"bootstrap/function-teachpack"'))),
va=new g("bootstrap2011/function-teachpack",[["start",1,!1]].map(a('"bootstrap2011/function-teachpack"'))),ka=new g("bootstrap2012/function-teachpack",[["start",1,!1]].map(a('"bootstrap2012/function-teachpack"'))),ea=new g("bootstrap2014/function-teachpack",[["start",1,!1]].map(a('"bootstrap2014/function-teachpack"'))),ha=new g("bootstrap2015/function-teachpack",[["start",1,!1]].map(a('"bootstrap2015/function-teachpack"'))),la=new g("location",[["get-latitude",0,!1,["android.permission.LOCATION"]],
["get-longitude",0,!1,["android.permission.LOCATION"]],["get-altitude",0,!1,["android.permission.LOCATION"]],["get-bearing",0,!1,["android.permission.LOCATION"]],["get-speed",0,!1,["android.permission.LOCATION"]],["location-distance",0,!1,["android.permission.LOCATION"]]].map(a('"moby/geolocation"'))),wa=new g("tilt",[["get-x-acceleration",0,!1,["android.permission.TILT"]],["get-y-acceleration",0,!1,["android.permission.TILT"]],["get-z-acceleration",0,!1,["android.permission.TILT"]],["get-azimuth",
0,!1,["android.permission.TILT"]],["get-pitch",0,!1,["android.permission.TILT"]],["get-roll",0,!1,["android.permission.TILT"]]].map(a('"moby/tilt"'))),aa=new g("telephony",[["get-signal-strength",0,!1,["android.permission.TELEPHONY"]]].map(a('"moby/net"'))),xa=new g("net",[["get-url",1,!1,["android.permission.INTERNET"]]].map(a('"moby/net"'))),I=new g("parser",[["xml->s-sexp",1,!1]].map(a('"moby/parser"'))),w=new g("jsworld",[["js-big-bang",1,!1],["big-bang",1,!1],["js-div",0,!1],["js-p",0,!1],["js-button",
2,!1],["js-button!",2,!1],["js-node",1,!1],["js-text",1,!1],["js-select",2,!1],["js-img",1,!1,["android.permission.INTERNET"]]].map(a('"moby/jsworld"')));M=new g("world",V.bindings.concat(M.bindings,"key=? play-sound animate big-bang make-color color? color-red color-green color-blue color-alpha empty-scene empty-image scene+line put-image place-image place-image/align circle star polygon radial-star star-polygon nw:rectangle rectangle regular-polygon rhombus square triangle triangle/sas triangle/sss triangle/ass triangle/ssa triangle/aas triangle/asa triangle/saa right-triangle isosceles-triangle ellipse line add-line add-polygon overlay overlay/xy overlay/align underlay underlay/xy underlay/align beside beside/align above above/align rotate scale scale/xy crop frame flip-horizontal flip-vertical reflect-x reflect-y text text/font video/url bitmap/url image-url image? image=? image-width image-height mouse-event? mouse=? image->color-list color-list->image color-list->bitmap image-baseline mode? image-color? name->color x-place? y-place? angle? side-count? step-count?".split(" ").map(function(ja){var v=
-1<["video/url","bitmap/url","image-url"].indexOf(ja)?["android.permission.INTERNET"]:[];return new t(ja,'"moby/world"',v,!1)})));g=new g("moby/topLevel",[["<",2,!0],["<=",2,!0],["=",2,!0],[">",2,!0],[">=",2,!0],["<>",2,!0],["=~",3],["number->string",1],["even?",1],["odd?",1],["positive?",1],["negative?",1],["number?",1],["rational?",1],["quotient",2],["remainder",2],["numerator",1],["denominator",1],["integer?",1],["real?",1],["abs",1],["acos",1],["add1",1],["angle",1],["asin",1],["atan",1,!0],["ceiling",
1],["complex?",1],["conjugate",1],["cos",1],["cosh",1],["denominator",1],["even?",1],["exact->inexact",1],["exact?",1],["exp",1],["expt",2],["floor",1],["gcd",1,!0],["imag-part",1],["inexact->exact",1],["inexact?",1],["integer->char",1],["integer-sqrt",1],["integer?",1],["lcm",1,!0],["log",1],["magnitude",1],["make-polar",2],["make-rectangular",2],["max",1,!0],["min",1,!0],["modulo",2],["negative?",1],["number?",1],["numerator",1],["odd?",1],["positive?",1],["random",1],["rational?",1],["real-part",
1],["real?",1],["round",1],["sgn",1],["sin",1],["sinh",1],["sqr",1],["sqrt",1],["nth-root",2],["sub1",1],["tan",1],["zero?",1],["+",0,!0],["-",1,!0],["*",0,!0],["/",1,!0],["not",1],["false?",1],["boolean?",1],["boolean=?",2],["symbol->string",1],["symbol=?",2],["symbol?",1],["append",0,!0],["assq",2],["assv",2],["assoc",2],["caaar",1],["caadr",1],["caar",1],["cadar",1],["cadddr",1],["caddr",1],["cadr",1],["car",1],["cddar",1],["cdddr",1],["cddr",1],["cdr",1],["cdaar",1],["cdadr",1],["cdar",1],["cons?",
1],["list?",1],["cons",2],["empty?",1],["length",1],["list",0,!0],["list*",1,!0],["range",3],["list-ref",2],["remove",2],["remove-all",2],["member",2],["member?",2],["memq",2],["memv",2],["null?",1],["pair?",1],["rest",1],["reverse",1],["first",1],["second",1],["third",1],["fourth",1],["fifth",1],["sixth",1],["seventh",1],["eighth",1],["make-list",2],["box",1],["unbox",1],["set-box!",2],["box?",1],["make-posn",2],["posn-x",1],["posn-y",1],["posn?",1],["char->integer",1],["char-alphabetic?",1],["char-ci<=?",
2,!0],["char-ci<?",2,!0],["char-ci=?",2,!0],["char-ci>=?",2,!0],["char-ci>?",2,!0],["char-downcase",1],["char-lower-case?",1],["char-numeric?",1],["char-upcase",1],["char-upper-case?",1],["char-whitespace?",1],["char<=?",2,!0],["char<?",2,!0],["char=?",2,!0],["char>=?",2,!0],["char>?",2,!0],["char?",1],["format",1,!0],["list->string",1],["make-string",2],["replicate",2],["string",0,!0],["string->list",1],["string->number",1],["string->symbol",1],["string-alphabetic?",1],["string-append",0,!0],["string-contains?",
2],["string-ci<=?",2,!0],["string-ci<?",2,!0],["string-ci=?",2,!0],["string-ci<>?",2,!0],["string-ci>=?",2,!0],["string-ci>?",2,!0],["string-copy",1],["string-length",1],["string-lower-case?",1],["string-numeric?",1],["string-ref",2],["string-upper-case?",1],["string-whitespace?",1],["string<=?",2,!0],["string<?",2,!0],["string=?",2,!0],["string<>?",2,!0],["string>=?",2,!0],["string>?",2,!0],["string?",1],["substring",3],["string-ith",2],["int->string",1],["string->int",1],["explode",1],["implode",
1],["eof-object?",1],["=~",3],["eq?",2],["equal?",2],["equal~?",3],["eqv?",2],["error",2],["identity",1],["struct?",1],["current-seconds",0],["andmap",1,!0],["apply",2,!0],["argmax",2],["argmin",2],["build-list",2],["build-string",2],["compose",0,!0],["filter",2],["foldl",2,!0],["foldr",2,!0],["map",1,!0],["for-each",1,!0],["memf",2],["ormap",1,!0],["procedure?",1],["quicksort",2],["sort",2],["void",0,!0],["xml->s-exp",1],["build-vector",2],["make-vector",1,!0],["vector",0,!0],["vector-length",1],
["vector-ref",2],["vector-set!",3],["vector->list",1],["list->vector",1],["vector?",1],["printf",1,!0],["display",1],["write",1],["newline",0],["call/cc",1],["procedure-arity",1],["check-expect",2],["EXAMPLE",2],["check-within",3],["check-error",2],["make-hasheq",0],["make-hash",0],["hash-set!",3],["hash-ref",3],["hash-remove!",2],["hash-map",2],["hash-for-each",2],["hash?",1],["raise",1],["undefined?",1],["values",0,!0],["make-struct-type",4,!0],["make-struct-field-accessor",2,!0],["make-struct-field-mutator",
2,!0],["current-continuation-marks",0,!1],["continuation-mark-set->list",2,!1],["scheme->prim-js",1,!1],["prim-js->scheme",1,!1],["procedure->cps-js-fun",1,!1],["procedure->void-js-fun",1,!1],["js-===",2,!1],["js-get-named-object",1,!1],["js-get-field",2,!0],["js-set-field!",3,!1],["js-typeof",1,!1],["js-instanceof",2,!1],["js-call",2,!0],["js-new",1,!0],["js-make-hash",0,!0],["make-world-config",2,!0],["make-bb-info",2,!1],["bb-info?",1,!1],["bb-info-change-world",1,!1],["bb-info-toplevel-node",
1,!1],["make-effect-type",4,!0],["effect?",1,!1],["world-with-effects",2,!1],["make-render-effect-type",4,!0],["render-effect-type?",1],["render-effect?",1],["make-render-effect-type",4,!0],["values",0,!0],["sleep",0,!0],["current-inexact-milliseconds",0,!1],["make-exn",2,!1],["exn-message",1,!1],["exn-continuation-marks",1,!1]].map(a('"moby/toplevel"')));plt.compiler.topLevelModules=[g,u,,w,M];plt.compiler.knownCollections="bootstrap bootstrap2011 bootstrap2012 bootstrap2014 bootstrap2015 bootstrap2020".split(" ");
plt.compiler.knownModules=[u,w,F,M,Y,L,Z,ma,na,Q,pa,ca,sa,oa,qa,W,cageTeachpack2015,ta,ua,va,ka,ea,ha,la,wa,aa,xa,I,g]})();plt.compiler.desugar={};plt.compiler.analyze={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(e,d,c){var b={};e.forEach(function(k){k instanceof L?b[k.val]?A(new types.Message([new types.ColoredPart(d.toString(),d.location),": found ",new types.ColoredPart("a variable",k.location)," that is already used ",new types.ColoredPart("here",b[k.val].location)]),k.location):b[k.val]=k:A("expected identifier "+k.val,k.location)})}function g(e,d){d=plt.compiler.defaultModuleResolver(d);var c=(new plt.compiler.emptyEnv).extendEnv_moduleBinding(d);[e.func].concat(e.args).forEach(function(b){b.context=
c});return e}function q(e,d,c){e=new Y(new types.string(e.toString()));var b=new L("verify-boolean-branch-value");e=new ea(e);d=new ea(new Y(d.toVector()));var k=new ea(new Y(c.location.toVector())),h=new aa(b,[e,d,c,k]);h.location=b.location=c.location;e.location=d.location=k.location=c.location;g(h,"moby/runtime/kernel/misc");return h}function t(e,d,c){d=[[],d||new plt.compiler.pinfo];d=e.reduce(function(b,k){var h=k.desugar(b[1]);if(plt.compiler.isExpression(k)&&c){k=new L("print-values");var n=
new aa(k,[h[0]]);k.location=n.location=h[0].location;h[0]=n;g(n,"moby/runtime/kernel/misc")}h[0].length?b[0]=b[0].concat(h[0]):b[0].push(h[0]);return[b[0],h[1]]},d);d[0].location=e.location;return d}function u(e,d,c){var b="undefined"!=typeof e.location?e.location:e instanceof Array&&"undefined"!=typeof e[0].location?e[0].location:A(types.Message(["ASSERTION FAILURE: couldn't find a usable location"]),new Location(0,0,0,0));e=e.map(function(h){if(0===c&&h instanceof wa)h=h.desugar(d,c);else{var n=
h instanceof Array?u(h,c,c)[0]:h.desugar(d,c)[0];h=new L("list");n=new aa(h,[n]);h.parent=n;n.location=h.location=b;h=[n,d]}return h[0]});var k=new L("append");k.location=b;e=new aa(k,e);e.location=b;return[e,d]}function F(e,d,c,b,k){return new N(e,d,c,b,[],!1,k)}function M(e){this.symbl=e}function V(e,d){var c=d.env,b=c.bindings.keys(),k=types.makeLowLevelEqHash();b.forEach(function(h){k.put(h,c.bindings.get(h))});b=new plt.compiler.env(k);b=e.args.reduce(function(h,n){return h.extend(new l(n.val,
!1,[],n.location))},b);d.env=b;d=e.body.analyzeUses(d,b);d.env=c;return d}function ca(e,d){d=function(c,b){return c.reduce(function(k,h){return h.collectDefinitions(k)},b)}(e,d);d=function(c,b){return c.reduce(function(k,h){return h.collectProvides(k)},b)}(e,d);return function(c,b){return c.reduce(function(k,h){return h.analyzeUses(k,k.env)},b)}(e,d)}var Y=plt.compiler.literal,L=plt.compiler.symbolExpr,Z=plt.compiler.Program,Q=plt.compiler.couple,ma=plt.compiler.ifExpr,pa=plt.compiler.beginExpr,na=
plt.compiler.letExpr,sa=plt.compiler.letStarExpr,oa=plt.compiler.letrecExpr,qa=plt.compiler.localExpr,W=plt.compiler.andExpr,ta=plt.compiler.orExpr,ua=plt.compiler.condExpr,va=plt.compiler.caseExpr,ka=plt.compiler.lambdaExpr,ea=plt.compiler.quotedExpr,ha=plt.compiler.unquotedExpr,la=plt.compiler.quasiquotedExpr,wa=plt.compiler.unquoteSplice,aa=plt.compiler.callExpr,xa=plt.compiler.whenUnlessExpr,I=plt.compiler.defFunc,w=plt.compiler.defVar,ja=plt.compiler.defVars,v=plt.compiler.defStruct,y=plt.compiler.requireExpr,
D=plt.compiler.provideStatement,z=plt.compiler.unsupportedExpr,A=plt.compiler.throwError,p=plt.compiler.structBinding,l=plt.compiler.constantBinding,N=plt.compiler.functionBinding,J=plt.compiler.moduleBinding;Z.prototype.desugar=function(e){return[this,e]};I.prototype.desugar=function(e){a([this.name].concat(this.args),this.stx[0],this.location);this.args.forEach(function(c){c instanceof L||A(new types.Message([new types.ColoredPart(this.stx.val,this.stx.location),": expected a variable but found ",
new types.ColoredPart("something else",c.location)]),sexp.location)});e=this.body.desugar(e);var d=new I(this.name,this.args,e[0],this.stx);d.location=this.location;return[d,e[1]]};w.prototype.desugar=function(e){if(this.expr instanceof ka){var d=new I(this.name,this.expr.args,this.expr.body,this.stx);d.location=this.location;return d.desugar(e)}e=this.expr.desugar(e);d=new w(this.name,e[0],this.stx);d.location=this.location;return[d,e[1]]};ja.prototype.desugar=function(e){e=this.expr.desugar(e);
var d=new ja(this.names,e[0],this.stx);d.location=this.location;return[d,e[1]]};v.prototype.desugar=function(e){var d=this,c=["make-"+this.name.val,this.name.val+"?",this.name.val+"-ref",this.name.val+"-set!"].map(function(G){return new L(G)}),b=new L("make-struct-type"),k=[new ea(new L(this.name.val)),new Y(!1),new Y(this.fields.length),new Y(0)],h=new aa(b,k);[h,b].concat(c,k).forEach(function(G){G.location=d.location});c=new ja([this.name].concat(c),h,this.stx);var n=[c];c.location=this.location;
this.fields.forEach(function(G,B){var E=new L("make-struct-field-accessor");B=[new L(d.name.val+"-ref"),new Y(B),new ea(new L(G.val))];var P=new aa(E,B),H=new L(d.name.val+"-"+G.val),O=new w(H,P);[O,E,P,H].concat(B).forEach(function(S){S.location=G.location});n.push(O)});return[n,e]};pa.prototype.desugar=function(e){e=t(this.exprs,e);var d=new pa(e[0],this.stx);d.location=this.location;return[d,e[1]]};ka.prototype.desugar=function(e){this.stx&&a(this.args,this.stx,this.location);e=this.body.desugar(e);
var d=new ka(this.args,e[0],this.stx);d.location=this.location;return[d,e[1]]};qa.prototype.desugar=function(e){var d=t(this.defs,e);e=this.body.desugar(d[1]);d=new qa(d[0],e[0],this.stx);d.location=this.location;return[d,e[1]]};aa.prototype.desugar=function(e){this.func||A(new types.Message([new types.ColoredPart("( )",this.location),": expected a function, but nothing's there"]),this.location);e=t([this.func].concat(this.args),e);var d=new aa(e[0][0],e[0].slice(1),this.stx);d.location=this.location;
return[d,e[1]]};ma.prototype.desugar=function(e){e=t([this.predicate,this.consequence,this.alternative],e);var d=q(this.stx,this.stx.location,e[0][0]);d=new ma(d,e[0][1],e[0][2],this.stx);d.location=this.location;return[d,e[1]]};xa.prototype.desugar=function(e){var d=new pa(this.exprs,this.stx),c=new L("void"),b=new aa(c,[],this.stx),k="when"===this.stx.val?d:b,h="when"===this.stx.val?b:d;d.location=this.exprs.location;c.location=b.location=this.location;e=t([this.predicate,k,h],e);d=new ma(e[0][0],
e[0][1],e[0][2],this.stx);d.location=this.location;return[d,e[1]]};oa.prototype.desugar=function(e){e=(new qa(this.bindings.map(function(d){var c=new w(d.first,d.second,d.stx);c.location=d.location;return c}),this.body,this.stx)).desugar(e);e[0].location=this.location;return e};na.prototype.desugar=function(e){var d=this.bindings.map(function(b){return b.first}),c=this.bindings.map(function(b){return b.second});d=new ka(d,this.body,this.stx);c=new aa(d,c);d.location=c.location=this.location;return c.desugar(e)};
sa.prototype.desugar=function(e){function d(c,b){c=new na([b],c,b.stx);c.location=b.location;return c}return 0===this.bindings.length?this.body.desugar(e):this.bindings.reduceRight(d,this.body).desugar(e)};ua.prototype.desugar=function(e){var d=new L("throw-cond-exhausted-error"),c=new ea(new Y(this.location.toVector())),b=g(new aa(d,[c]),"moby/runtime/kernel/misc");(new L("if")).location=this.stx.location;b.location=d.location=c.location=this.location;for(d=this.clauses.length-1;-1<d;d--)this.clauses[d].first instanceof
L&&"else"===this.clauses[d].first.val&&(this.clauses[d].first.val="true"),b=new ma(this.clauses[d].first,this.clauses[d].second,b,this.stx),b.location=this.location;return b.desugar(e)};va.prototype.desugar=function(e){var d=this,c=new L("if");c.location=d.location;e=e.gensym("val");var b=e[1],k=e[0].gensym("x");e=k[0];var h=k[1],n=new L("void"),G=[b,h,n];k=this.clauses;var B=k[this.clauses.length-1];B.first instanceof L&&"else"===B.first.val?(n=B.second,k.pop()):(n=new aa(n,[],d.stx),n.location=
d.location);B=new L("equal?");var E=new aa(B,[h,b],c),P=new ka([h],E,c);G=G.concat([B,E,P]);b=new Q(b,this.expr);k=k.reduceRight(function(H,O){var S=new L("ormap"),fa=new aa(S,[P,O.first],d.stx);H=new ma(fa,O.second,H,c);G=G.concat([S,fa,O.first,H]);return H},n);k=new na([b],k,c);G=G.concat([b,k]);G.forEach(function(H){H.location=d.location});return k.desugar(e)};W.prototype.desugar=function(e){function d(h){var n=q(c.stx,c.stx.location,h[0]),G=2<h.length?d(h.slice(1)):q(c.stx,c.stx.location,h[1]);
h=new Y(!1);n=new ma(n,G,h,b);[h,b,n].forEach(function(B){return B.location=c.location});return n}var c=this,b=new L("if");e=t(this.exprs,e);var k=e[0];e=e[1];k=d(k);k.location=c.location;return[k,e]};ta.prototype.desugar=function(e){function d(h,n){var G=h[0];n=n.gensym("tmp");var B=n[1],E=new L("if");B.notOriginalSource=!0;G.stx&&"if"!==G.stx.val&&(E.location=G.location,G.stx=E);n=n[0];G=new Q(B,q(c.stx,c.stx.location,G));2==h.length?h=q(b,c.stx.location,h[1]):(n=d(h.slice(1),n),h=n[0],n=n[1]);
h=new ma(B,B,h,new L("if"));E=new na([G],h,b);[b,B,G,h,h.stx,E].forEach(function(P){return P.location=c.location});return E.desugar(n)}var c=this,b=new L("or");e=t(this.exprs,e);var k=e[0];e=e[1];return d(k,e)};ea.prototype.desugar=function(e){"undefined"===typeof this.location&&A(new types.Message(["ASSERTION ERROR: Every quotedExpr should have a location"]),loc);return function(d,c){return function(b){if(b instanceof aa||b instanceof ea||b instanceof z)return b.desugar(d);if(b instanceof L||b instanceof
Y||b instanceof Array)return b=new ea(b),b.location=c,[b,d];A(new types.Message(["ASSERTION ERROR: Found an unexpected item in a quotedExpr"]),c)}}(e,this.location)(this.val)};ha.prototype.desugar=function(e,d){if("undefined"===typeof d)A(new types.Message(["misuse of a ', not under a quasiquoting backquote"]),this.location);else{if(1===d)return this.val.desugar(e);if(1<d){var c=this.val instanceof Array?u(this.val,e,d-1)[0]:this.val.desugar(e,d-1)[0];d=new ea(new L("unquote"));var b=new L("list");
c=[d,c];var k=new aa(b,c);d.location=this.location;d.parent=c;b.location=this.location;b.parent=k;k.location=this.location;return[k,e]}A(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location)}};wa.prototype.desugar=function(e,d){if("undefined"===typeof d)A(new types.Message(["misuse of a ,@, not under a quasiquoting backquote"]),this.location);else{if(1===d)return this.val.desugar(e);if(1<d){var c=this.val instanceof Array?u(this.val,e,d-1)[0]:
this.val.desugar(e,d-1)[0];d=new ea(new L("unquote-splicing"));var b=new L("list");c=[d,c];var k=new aa(b,c);d.location=this.location;d.parent=c;b.location=this.location;b.parent=k;k.location=this.location;return[k,e]}A(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),this.location)}};la.prototype.desugar=function(e,d){d="undefined"===typeof d?0:d;if(0<=d)var c=this.val instanceof Array?u(this.val,e,d+1)[0]:this.val.desugar(e,d+1)[0];else A(new types.Message(["ASSERTION FAILURE: depth should have been undefined, or a natural number"]),
this.location);if(0==d)return[c,e];d=new ea(new L("quasiquote"));var b=[d,c],k=new L("list"),h=new aa(k,b);d.parent=b;d.location=this.location;c.parent=b;k.parent=h;k.location=this.location;h.location=this.location;return[h,e]};L.prototype.desugar=function(e){if(!this.isClause&&"else"===this.val){var d=this.parent&&this.parent[0]===this?this.parent.location:this.location;A(new types.Message([new types.ColoredPart(this.val,d),": not allowed ",new types.ColoredPart("here",d),", because this is not a question in a clause"]),
d)}this.parent&&this.parent[0]!==this&&"define"===this.val&&(d=new types.Message([new types.ColoredPart(this.val,this.location),": not allowed inside an expression"]),A(d,this.location));!this.parent&&-1<plt.compiler.keywords.indexOf(this.val)&&"else"!==this.val&&A(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);"."===this.val&&(d=new types.Message([this.location.source,":",this.location.startRow.toString(),
":",this.location.startCol.toString(),": read: '.' is not supported as a symbol in WeScheme"]),A(d,this.location,"Error-GenericReadError"));return[this,e]};z.prototype.desugar=function(e){this.location.span=this.errorSpan;A(this.errorMsg,this.location,"Error-GenericReadError")};Z.prototype.collectDefinitions=function(e){return e};I.prototype.collectDefinitions=function(e){this.args.forEach(function(c){-1<plt.compiler.keywords.indexOf(c.val)&&A(new types.Message([new types.ColoredPart(c.val,c.location),
": this is a reserved keyword and cannot be used as a variable or function name"]),c.location)});var d=F(this.name.val,!1,this.args.length,!1,this.name.location);return e.accumulateDefinedBinding(d,this.location)};w.prototype.collectDefinitions=function(e){var d=this.expr instanceof ka?F(this.name.val,!1,this.expr.args.length,!1,this.name.location):new l(this.name.val,!1,[],this.name.location);return e.accumulateDefinedBinding(d,this.location)};ja.prototype.collectDefinitions=function(e){var d=this,
c=function(E){return d.stx[1].val+"-"+E.val},b=function(E){return"set-"+d.stx[1].val+"-"+E.val+"!"};if("define-struct"===d.stx[0].val){var k=d.stx[1].val,h=d.stx[2],n="make-"+k,G=k+"?";c=h.map(c);var B=h.map(b);b=d.stx[1].location;c=new p(k,!1,h,n,G,c,B,null,d.stx[1].location);h=F(n,!1,h.length,!1,b);G=F(G,!1,1,!1,b);n=F(k+"-set!",!1,1,!1,b);k=F(k+"-ref",!1,1,!1,b);return e.accumulateDefinedBindings([c,k,h,G,n],d.location)}return this.names.reduce(function(E,P){P=new l(P.val,!1,[],P.location);return E.accumulateDefinedBinding(P,
d.location)},e)};y.prototype.collectDefinitions=function(e){function d(B){return(B=B.match(/^wescheme\/(\w+)$/))?B[1]:!1}function c(B){B=plt.compiler.moduleGuess(h.spec.toString());B=new types.Message(["Found require of the module ",new types.ColoredPart(h.spec.toString(),h.spec.location),", but this module is unknown.",B.name===h.spec.toString()?"":" Did you mean '"+B.name+"'?"]);A(B,h.spec.location,"Error-UnknownModule")}function b(B){var E=window.COLLECTIONS[B].provides.map(function(H){H=new l(H,
new L(B),!1);H.imported=!0;return H}),P=new J(B,E);n=e.accumulateModule(P).accumulateModuleBindings(E)}var k=this.spec instanceof Y?this.spec.val.toString():this.spec.toString(),h=this,n;e.modulePathResolver(k,e.currentModulePath)||d(k)||c(k);var G=window.location.protocol+"//"+window.location.host+(d(k)?"/loadProject?publicId="+d(k):"/js/mzscheme-vm/collects/"+k+".js");console.log(G);window.COLLECTIONS&&window.COLLECTIONS[k]?b(k):jQuery.ajax({url:G,success:function(B){try{if(d(k)){var E=(0,eval)("("+
B+")");void 0===window.COLLECTIONS&&(window.COLLECTIONS=[]);var P=plt.compiler.lex(E.source.src,k),H=plt.compiler.parse(P),O=plt.compiler.desugar(H)[0],S=plt.compiler.analyze(O),fa=plt.compiler.compile(O,S);window.COLLECTIONS[k]={name:k,bytecode:(0,eval)("("+fa.bytecode+")"),provides:fa.provides}}else eval(B);B?b(k):c(k)}catch(C){if("moby-failure"===C.type)throw C;B=new types.Message(["A network error occured when trying to load ",new types.ColoredPart(h.spec.toString(),h.spec.location),". Please check your connection and try again."]);
A(B,h.spec.location,"Error-NetworkError")}},error:function(B){c(k)},async:!1});return n};Z.prototype.collectProvides=function(e){return e};D.prototype.collectProvides=function(e){function d(c){e.providedNames.put(c,new M(c))}return this.clauses.reduce(function(c,b){if(b instanceof L){if(c.definedNames.containsKey(b.val))return d(b.val),c;c=new types.Message(["The name '",new types.ColoredPart(b.toString(),b.location),"', is not defined in the program, and cannot be provided."]);A(c,b.location)}else if(b instanceof
Array){if(c.definedNames.containsKey(b[1].val)&&c.definedNames.get(b[1].val)instanceof p)return b=c.definedNames.get(b[1].val),[b.name,b.constructor,b.predicate].concat(b.accessors,b.mutators).forEach(d),c;A(new types.Message(["The struct '",new types.ColoredPart(b[1].toString(),b[1].location),"', is not defined in the program, and cannot be provided"]),b.location)}else throw"Impossible: all invalid provide clauses should have been filtered out!";},e)};Z.prototype.analyzeUses=function(e,d){return e};
w.prototype.analyzeUses=function(e){e.env.extend(this.expr instanceof ka?F(this.name.val,!1,this.expr.args.length,!1,this.location):new l(this.name.val,!1,[],this.name.location));return this.expr.analyzeUses(e,e.env)};ja.prototype.analyzeUses=function(e){this.names.forEach(function(d){e.env.extend(new l(d.val,!1,[],d.location))});return this.expr.analyzeUses(e,e.env)};I.prototype.analyzeUses=function(e){e.env=e.env.extend(F(this.name.val,!1,this.args.length,!1,this.name.location));return V(this,e)};
ka.prototype.analyzeUses=function(e,d){return V(this,e)};pa.prototype.analyzeUses=function(e,d){return this.exprs.reduce(function(c,b){return b.analyzeUses(c,d)},e)};qa.prototype.analyzeUses=function(e,d){e=this.defs.reduce(function(c,b){return b.analyzeUses(c,d)},e);return this.body.analyzeUses(e,e.env)};aa.prototype.analyzeUses=function(e,d){return[this.func].concat(this.args).reduce(function(c,b){return b instanceof Array?b.reduce(function(k,h){return h.analyzeUses(k,k.env)},e):b.analyzeUses(c,
d)},e)};ma.prototype.analyzeUses=function(e,d){return[this.predicate,this.consequence,this.alternative].reduce(function(c,b){return b.analyzeUses(c,d)},e)};L.prototype.analyzeUses=function(e,d){(-1<plt.compiler.keywords.indexOf(this.val)&&(!this.parent||this.parent[0]!==this)||this.parent instanceof Q)&&A(new types.Message([new types.ColoredPart(this.val,this.location),": expected an open parenthesis before ",this.val,", but found none"]),this.location);return(d=d.lookup_context(this.val))?(this.bindingLoc=
d.loc,e.accumulateBindingUse(d,e)):e.accumulateFreeVariableUse(this.val,e)};plt.compiler.desugar=function(e,d,c){var b=(new Date).getTime();try{var k=t(e,d,!0),h=k[0]}catch(n){throw console.log("DESUGARING ERROR"),n;}e=(new Date).getTime();c&&(console.log("Desugared in "+Math.floor(e-b)+"ms"),console.log(h),console.log(h.toString()));return k};plt.compiler.analyze=function(e,d){var c=(new Date).getTime();try{var b=ca(e,plt.compiler.getBasePinfo("base"))}catch(k){throw console.log("ANALYSIS ERROR"),
k;}e=(new Date).getTime();d&&console.log("Analyzed in "+Math.floor(e-c)+"ms");return b};plt.compiler.provideBindingId=M;plt.compiler.provideBindingStructId=function(e){this.symbl=e}})();plt.compiler.compile={};plt.compiler.localStackReference={};plt.compiler.globalStackReference={};plt.compiler.unboundStackReference={};window.plt=window.plt||{};plt.compiler=plt.compiler||{};
(function(){function a(){}function g(c,b,k){this.name=c;this.isBoxed=b;this.depth=k}function q(c,b,k){this.name=c;this.pos=k;this.depth=b}function t(c){this.name=c}function u(c){return types.isString(c)&&void 0!==c.chars?'"'+c.toString()+'"':c.toBytecode?c.toBytecode():c}function F(c){c=c.toString().replace(/\|/g,"");for(var b="",k="{}[],'` \\\"".split(""),h=0;h<c.length;h++)b+=(-1<k.indexOf(c.charAt(h))?"\\":"")+c.charAt(h);return b.replace(/\n/g,"\\n")}function M(c){d.call(this);this.name=c;this.toBytecode=
function(){return'{"$":"global-bucket","value":"'+F(this.name)+'"}'}}function V(c,b,k,h){d.call(this);this.$="module-variable";this.modidx=c;this.sym=b;this.pos=k;this.phase=h;this.toBytecode=function(){return'{"$":"module-variable","sym":'+this.sym.toBytecode()+',"modidx":'+this.modidx.toBytecode()+',"pos":'+this.pos+',"phase":'+this.phase+"}"}}function ca(c,b,k){d.call(this);this.numLifts=c;this.topLevels=b;this.stxs=k;this.toBytecode=function(){return'{"$":"prefix","num-lifts":'+this.numLifts+
',"toplevels":['+this.topLevels.map(function(h){return u(h)}).join(",")+'],"stxs":['+this.stxs.map(u)+"]}"}}function Y(c,b,k){d.call(this);this.maxLetDepth=c;this.prefix=b;this.code=k;this.toBytecode=function(){return'{"$":"compilation-top","max-let-depth":'+this.maxLetDepth+',"prefix":'+this.prefix.toBytecode()+',"compiled-indirects":[],"code":'+this.code.toBytecode()+"}"}}function L(c,b,k,h,n){d.call(this);this.depth=c;this.pos=b;this.constant=k;this.ready=h;this.loc=n;this.toBytecode=function(){return'{"$":"toplevel","depth":'+
this.depth.toString()+',"pos":'+this.pos.toString()+',"const?":'+this.constant+',"ready?":'+this.ready+',"loc":'+(this.loc&&this.loc.toVector().toBytecode())+"}"}}function Z(c){d.call(this);this.forms=c;this.toBytecode=function(){return'{"$":"seq","forms":['+this.forms.map(u).join(",")+"]}"}}function Q(c,b){d.call(this);this.ids=c;this.rhs=b;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.map(u).join(",")+'],"body":'+this.rhs.toBytecode()+"}"}}function ma(c,b,k,h,n,G,B,E,P,H){d.call(this);
this.name=c;this.flags=k;this.numParams=h;this.paramTypes=n;this.rest=G;this.body=H;this.closureMap=B;this.maxLetDepth=P;this.closureTypes=E;this.operatorAndRandLocs=b;this.toBytecode=function(){return'{"$":"lam","name":'+this.name.toBytecode()+',"locs":['+this.operatorAndRandLocs.map(u).join(",")+'],"flags":['+this.flags.map(u).join(",")+'],"num-params":'+this.numParams+',"param-types":['+this.paramTypes.map(u).join(",")+'],"rest?":'+this.rest+',"closure-map":['+this.closureMap.map(u).join(",")+
'],"closure-types":['+this.closureTypes.map(u).join(",")+'],"max-let-depth":'+this.maxLetDepth+',"body":'+this.body.toBytecode()+"}"}}function pa(c,b,k){d.call(this);this.count=c;this.boxes=b;this.body=k;this.toBytecode=function(){return'{"$":"let-void","count":'+u(this.count)+',"boxes?":'+u(this.boxes)+',"body":'+this.body.toBytecode()+"}"}}function na(c,b,k,h,n){d.call(this);this.count=c;this.pos=b;this.boxes=k;this.rhs=h;this.body=n;this.toBytecode=function(){return'{"$":"install-value","count":'+
u(this.count)+',"pos":'+u(this.pos)+',"boxes?":'+u(this.boxes)+',"rhs":'+this.rhs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function sa(c,b,k,h,n){d.call(this);this.unbox=c||!1;this.pos=b;this.clear=k;this.flonum=n;this.otherClears=h;this.toBytecode=function(){return'{"$":"localref","unbox?":'+this.unbox+',"pos":'+this.pos+',"clear":'+this.clear+',"other-clears?":'+this.otherClears+',"flonum?":'+this.flonum+"}"}}function oa(c,b){d.call(this);this.rator=c;this.rands=b;this.toBytecode=function(){return'{"$":"application","rator":'+
this.rator.toBytecode()+',"rands":['+this.rands.map(u).join(",")+"]}"}}function qa(c,b,k){d.call(this);this.testExpr=c;this.thenExpr=b;this.elseExpr=k;this.toBytecode=function(){return'{"$":"branch","test":'+this.testExpr.toBytecode()+',"then":'+this.thenExpr.toBytecode()+',"else":'+this.elseExpr.toBytecode()+"}"}}function W(c,b,k){d.call(this);this.$="with-cont-mark";this.key=c;this.val=b;this.body=k;this.toBytecode=function(){return'{"$":"with-cont-mark","key":'+(new ha(new la(this.key))).toBytecode()+
',"val":'+(new ha(this.val)).toBytecode()+',"body":'+this.body.toBytecode()+"}"}}function ta(c,b){d.call(this);this.$="req";this.reqs=c;this.dummy=b;this.toBytecode=function(){return'{"$":"req","reqs":'+(this.reqs instanceof ha?'"'+this.reqs.val+'"':this.reqs.toBytecode())+',"dummy":'+this.dummy.toBytecode()+"}"}}function ua(c,b){this.path=c;this.base=b;d.call(this);this.toBytecode=function(){return'{"$":"module-path","path":'+u(this.path)+',"base":'+u(this.base)+"}"}}function va(c,b,k){function h(n){return 1>=
n.length?n:k(n[0],n[1])?h(n.slice(1)):[n[0]].concat(h(n.slice(1)))}return h(c.sort(function(n,G){return b(n,G)?-1:b(G,n)}))}function ka(c,b){var k=c[0],h=c[1];c=c[2];h=b.compile(c,h);b=h[0];h=h[1];return[[b].concat(k),h,c]}function ea(c,b){var k=function(E){var P=E.modules.reduce(function(S,fa){return S.concat(fa.bindings)},[]),H=E.usedBindingsHash.values().filter(function(S){return S.moduleSource&&-1===P.indexOf(S)});H=P.concat(H);E=E.freeVariables.concat(E.definedNames.keys());var O=va(E,function(S,
fa){return S<fa},function(S,fa){return S==fa});E=[!1].concat(O.map(function(S){return new M(S)}),H.map(function(S){var fa=S.imported?!1:new ua(!1,!1);fa=new ua(S.moduleSource,fa);return new V(fa,new la(S.name),-1,0)}));H=[!1].concat(O,H.map(function(S){return S.name}));return[new ca(0,E,[]),new plt.compiler.globalEnv(H,!1,new plt.compiler.emptyEnv)]}(b),h=k[0];k=k[1];var n=c.filter(plt.compiler.isDefinition),G=c.filter(function(E){return E instanceof N}),B=c.filter(plt.compiler.isExpression);b=G.reduceRight(ka,
[[],b,k]);c=b[0];b=b[1];b=n.reduceRight(ka,[[],b,k]);n=b[0];b=b[1];b=B.reduceRight(ka,[[],b,k]);k=b[0];b=b[1];k=new Z([].concat(c,n,k));return{bytecode:"/* runtime-version: local-compiler-summer2014 */\n"+(new Y(0,h,k)).toBytecode(),permissions:b.permissions(),provides:b.providedNames.keys()}}var ha=plt.compiler.literal,la=plt.compiler.symbolExpr,wa=plt.compiler.Program,aa=plt.compiler.ifExpr,xa=plt.compiler.beginExpr,I=plt.compiler.localExpr,w=plt.compiler.andExpr,ja=plt.compiler.orExpr,v=plt.compiler.lambdaExpr,
y=plt.compiler.quotedExpr,D=plt.compiler.callExpr,z=plt.compiler.defFunc,A=plt.compiler.defVar,p=plt.compiler.defVars,l=plt.compiler.defStruct,N=plt.compiler.requireExpr,J=plt.compiler.provideStatement,e=function(c){var b=function(){};b.prototype=c;return new b};ha.prototype.toBytecode=function(){return'{"$":"constant","value":'+(this.val.toBytecode?this.val.toBytecode():!0===this.val?"true":!1===this.val?"false":this.toString())+"}"};la.prototype.toBytecode=function(){return'types.symbol("'+F(this.val)+
'")'};Vector.prototype.toBytecode=function(){return"types.vector(["+this.elts.join(",")+"])"};Array.prototype.toBytecode=function(c){return"types."+(0===this.length?"EMPTY":"list(["+this.map(u).join(",")+"])")};jsnums.Rational.prototype.toBytecode=function(){return"types.rational("+u(this.n)+", "+u(this.d)+")"};jsnums.BigInteger.prototype.toBytecode=function(){return'types.bignum("'+this.toString()+'")'};jsnums.FloatPoint.prototype.toBytecode=function(){var c=this.toString();"+nan.0"===c&&(c="NaN");
"+inf.0"===c&&(c="Infinity");"-inf.0"===c&&(c="-Infinity");return'types["float"]('+c+")"};jsnums.Complex.prototype.toBytecode=function(){return"types.complex("+u(this.r)+", "+u(this.i)+")"};Char.prototype.toBytecode=function(){return"types['char'](String.fromCharCode("+this.val.charCodeAt(0)+"))"};g.prototype=e(a.prototype);q.prototype=e(a.prototype);t.prototype=e(a.prototype);var d=function(){this.toBytecode=function(){console.log(this);throw"IMPOSSIBLE - generic bytecode toBytecode method was called";
}};M.prototype=e(d.prototype);V.prototype=e(d.prototype);(function(){d.call(this)}).prototype=e(d.prototype);(function(c,b,k){d.call(this);this.datum=c;this.wraps=b;this.certs=k}).prototype=e(d.prototype);(function(c){this.encoded=c;d.call(this)}).prototype=e(d.prototype);ca.prototype=e(d.prototype);(function(){d.call(this)}).prototype=e(d.prototype);(function(c){d.call(this)}).prototype=e(d.prototype);(function(c){d.call(this);this.v=c;this.toBytecode=function(){return'{"$":"indirect","v":'+this.v.toBytecode()+
"}"}}).prototype=e(d.prototype);Y.prototype=e(d.prototype);(function(c,b,k,h,n,G,B){d.call(this);this.name=c;this.src=b;this.srcName=k;this.nomSrc=h;this.srcPhase=n;this.insp=B;this.isProtected=G}).prototype=e(d.prototype);L.prototype=e(d.prototype);Z.prototype=e(d.prototype);Q.prototype=e(d.prototype);(function(c,b,k,h){d.call(this);this.$="def-values";this.ids=c;this.rhs=b;this.prefix=k;this.maxLetDepth=h;this.toBytecode=function(){return'{"$":"def-values","ids":['+this.ids.toBytecode().join(",")+
'],"rhs":'+this.rhs.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c,b,k,h){d.call(this);this.ids=c;this.rhs=b;this.prefix=k;this.maxLetDepth=h}).prototype=e(d.prototype);(function(c,b,k,h,n,G,B,E,P,H,O,S){d.call(this);this.name=c;this.selfModidx=b;this.prefix=k;this.provides=h;this.requires=n;this.body=G;this.syntaxBody=B;this.unexported=E;this.maxLetDepth=P;this.dummy=H;this.langInfo=O;this.internalContext=
S;this.toBytecode=function(){return'{"$":"mod","name":'+this.name.toBytecode()+',"self-modidx":'+this.selfModidx.toBytecode()+',"prefix":'+this.prefix.toBytecode()+',"provides":'+this.provides.toBytecode()+',"requires":'+(this.requires&&this.requires.toVector().toBytecode())+',"body":'+this.body.toBytecode()+',"stx-body":'+this.syntaxBody.toBytecode()+',"max-let-depth":'+this.maxLetDepth.toBytecode()+"}"}}).prototype=e(d.prototype);ma.prototype=e(d.prototype);(function(c,b){d.call(this);this.code=
c;this.genId=b;this.toBytecode=function(){return'{"$":"closure","code":'+this.code.toBytecode()+',"gen-id":'+this.genId.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c,b){d.call(this);this.name=c;this.clauses=b;this.toBytecode=function(){return'{"$":"case-lam","name":'+this.name.toBytecode()+',"clauses":'+this.clauses.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c,b,k){d.call(this);this.rhs=c;this.body=b;this.flonum=k;this.toBytecode=function(){return'{"$": "let-one","rhs":'+this.rhs.toBytecode()+
',"body":'+this.body.toBytecode()+',"flonum":'+this.flonum.toBytecode()+"}"}}).prototype=e(d.prototype);pa.prototype=e(d.prototype);(function(c,b){d.call(this);this.procs=c;this.body=b;this.toBytecode=function(){return'{"$":"let-rec","procs":'+this.procs.toBytecode()+',"body":'+this.body.toBytecode()+"}"}}).prototype=e(d.prototype);na.prototype=e(d.prototype);(function(c,b){d.call(this);this.pos=c;this.body=b;this.toBytecode=function(){return'{"$":"boxenv","pos":'+this.pos.toBytecode()+',"body":'+
this.body.toBytecode()+"}"}}).prototype=e(d.prototype);sa.prototype=e(d.prototype);(function(c,b,k){d.call(this);this.depth=c;this.pos=b;this.midpt=k}).prototype=e(d.prototype);oa.prototype=e(d.prototype);qa.prototype=e(d.prototype);W.prototype=e(d.prototype);(function(c){d.call(this);this.seq=c;this.toBytecode=function(){return'{"$":"beg0","seq":'+this.seq.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c){d.call(this);this.forms=c;this.toBytecode=function(){return'{"$":"splice","forms":'+
this.forms.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c){d.call(this);this.topLevel=c;this.toBytecode=function(){return'{"$":"varref","top-level":'+this.topLevel.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c,b,k){d.call(this);this.id=c;this.rhs=b;this.undefOk=k;this.toBytecode=function(){return'{"$":"assign","id":'+this.id.toBytecode()+',"rhs":'+this.rhs.toBytecode()+',"undef-ok":'+this.undefOk.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c,b){d.call(this);this.proc=
c;this.args=b;this.toBytecode=function(){return'{"$":"apply-values","proc":'+this.proc.toBytecode()+',"args":'+this.args.toBytecode()+"}"}}).prototype=e(d.prototype);(function(c){d.call(this);this.id=c;this.toBytecode=function(){return'{"$":"primval","id":'+this.id.toBytecode()+"}"}}).prototype=e(d.prototype);ta.prototype=e(d.prototype);(function(c,b,k){this.bool1=c;this.bool2=b;this.alist=k;d.call(this)}).prototype=e(d.prototype);(function(c,b,k){this.amt=c;this.src=b;this.dest=k;d.call(this)}).prototype=
e(d.prototype);(function(c){this.val=c;d.call(this)}).prototype=e(d.prototype);(function(c){this.sym=c;d.call(this)}).prototype=e(d.prototype);(function(c,b,k,h,n){this.path=c;this.phase=b;this.srcPhase=k;this.prefix=n;this.exceptions=h;d.call(this)}).prototype=e(d.prototype);(function(){d.call(this)}).prototype=e(d.prototype);(function(c){this.value=c;d.call(this)}).prototype=e(d.prototype);(function(c,b,k,h,n){this.path=c;this.phase=b;this.exportName=h;this.nominalExportName=n;d.call(this)}).prototype=
e(d.prototype);(function(c,b,k,h){this.path=c;this.exportName=b;this.nominalPath=k;this.nominalExportName=h;d.call(this)}).prototype=e(d.prototype);(function(c,b){this.path=c;this.nominalPath=b;d.call(this)}).prototype=e(d.prototype);(function(c,b){this.path=c;this.exportName=b;d.call(this)}).prototype=e(d.prototype);(function(c){this.path=c;d.call(this)}).prototype=e(d.prototype);(function(c,b,k,h,n,G,B){this.phase=c;this.kind=b;this.unmarshals=h;this.renames=n;this.markRenames=G;this.plusKern=B;
d.call(this)}).prototype=e(d.prototype);ua.prototype=e(d.prototype);wa.prototype.freeVariables=function(c,b){return c};aa.prototype.freeVariables=function(c,b){return this.alternative.freeVariables(this.consequence.freeVariables(this.predicate.freeVariables(c,b),b),b)};xa.prototype.freeVariables=function(c,b){return this.exprs.reduceRight(function(k,h){return h.freeVariables(k,b)},c)};la.prototype.freeVariables=function(c,b){return b.lookup(this.val,0)instanceof t&&-1==c.indexOf(this)?c.concat([this]):
c};I.prototype.freeVariables=function(c,b){var k=this.defs.reduce(function(h,n){return(n instanceof p?n.names:[n.name]).concat(h)},[]).reduce(function(h,n){return new plt.compiler.localEnv(n.val,!0,h)},b);c=this.body.freeVariables(c,k);return this.defs.reduce(function(h,n){if(n instanceof z){var G=n.args.reduce(function(B,E){return new plt.compiler.localEnv(E.val,!1,B)},k);return n.body.freeVariables(h,G)}return n instanceof l?h:n.expr.freeVariables(h,k)},c)};w.prototype.freeVariables=function(c,
b){return this.exprs.reduceRight(function(k,h){return h.freeVariables(k,b)},c)};ja.prototype.freeVariables=function(c,b){return this.exprs.reduceRight(function(k,h){return h.freeVariables(k,b)},c)};v.prototype.freeVariables=function(c,b){b=this.args.slice(0).reverse().reduce(function(k,h){return new plt.compiler.localEnv(h.val,!1,k)},b);return this.body.freeVariables(c,b)};y.prototype.freeVariables=function(c,b){return c};D.prototype.freeVariables=function(c,b){return this.func.freeVariables(c,b).concat(this.args).reduceRight(function(k,
h){return h.freeVariables(k,b)},c)};wa.prototype.compile=function(c,b){return[this,b]};z.prototype.compile=function(c,b){b=this.name.compile(c,b);var k=b[0];b=b[1];b=(new v(this.args,this.body)).compile(c,b,!1,this.name);c=b[0];b=b[1];return[new Q([k],c),b]};A.prototype.compile=function(c,b){b=this.name.compile(c,b);var k=b[0];b=b[1];b=this.expr.compile(c,b);c=b[0];b=b[1];return[new Q([k],c),b]};p.prototype.compile=function(c,b){b=this.names.reduceRight(ka,[[],b,c]);var k=b[0];b=b[1];b=this.expr.compile(c,
b);c=b[0];b=b[1];return[new Q(k,c),b]};xa.prototype.compile=function(c,b){c=this.exprs.reduceRight(ka,[[],b,c]);b=c[1];return[new Z(c[0]),b]};v.prototype.compile=function(c,b,k,h){function n(E,P){return E.map(function(H){return-1<P.indexOf(H)?H:!1})}function G(E,P){return new plt.compiler.localEnv(P,!1,E)}void 0===k&&(k=!0);var B=this.args.map(function(E){return E.val}).reduce(G,new plt.compiler.emptyEnv);freeVarsInBody=this.body.freeVariables([],B);B=function(E,P,H){var O=P.map(function(x){return H.lookup(x.val,
0)}),S=function(x,K){return 0===K.length?!1:x(K[0])?K[0]:S(x,K.slice(1))},fa=function(x){return x.depth};if(P=S(function(x){return x instanceof t},O))throw"Can't produce closure; I don't know where "+P.name+" is bound.";var C=va(O.filter(function(x){return x instanceof g}),function(x,K){return x.depth<K.depth},function(x,K){return x.depth===K.depth});P=C.map(fa);var f=O.filter(function(x){return x instanceof q});O=va(f.map(fa),function(x,K){return x<K},function(x,K){return x===K});E=E.reverse().map(function(x){return x.val}).reduce(G,
H);E=C.reverse().reduce(function(x,K){return K.isBoxed?new plt.compiler.localEnv(K.name,!0,x):G(x,K.name)},E);E=O.reverse().reduce(function(x,K){var ba=f.filter(function(da){return da.depth===K}).map(function(da){return da.name});ba=n(H.peek(K).names,ba);return new plt.compiler.globalEnv(ba,!1,x)},E);return[O.concat(P),E]}(this.args.slice(0),freeVarsInBody,c);c=B[0];B=this.body.compile(B[1],b);b=B[0];B=B[1];return[new ma(k?[]:new la(h),[k?this.stx:h].concat(this.args).map(function(E){return E.location.toVector()}),
[],this.args.length,this.args.map(function(){return new la("val")}),!1,c,c.map(function(){return new la("val/ref")}),0,b),B]};I.prototype.compile=function(c,b){function k(B,E,P,H){if(0===B.length)return h.body.compile(G,E);var O=B[0].compile(P,E),S=O[0].rhs;E=O[1];O=B[0]instanceof p?B[0].names.length:1;B=k(B.slice(1),E,P,H+O);newBody=B[0];E=B[1];return[new na(O,H,!0,S,newBody),E]}if(0===this.defs.length)return this.body.compile(c,b);var h=this,n=this.defs.reduce(function(B,E){return B.concat(E instanceof
p?E.names:E.name)},[]),G=n.reverse().reduce(function(B,E){return new plt.compiler.localEnv(E.val,!0,B)},c);b=k(this.defs,b,G,0);c=b[0];b=b[1];return[new pa(n.length,!0,c),b]};D.prototype.compile=function(c,b){var k=this.args.reduce(function(n,G){return new plt.compiler.unnamedEnv(n)},c),h=this.func.compile(k,b);c=h[0];k=this.args.reduceRight(ka,[[],b,k])[0];b=h[1];c=new oa(c,k);h=[this.func.location].concat(this.args.map(function(n){return n.location})).concat(this.location).map(function(n){return n.toVector()});
return[new W(new la("moby-application-position-key"),h,new W(new la("moby-stack-record-continuation-mark-key"),this.location.toVector(),c)),b]};aa.prototype.compile=function(c,b){var k=this.predicate.compile(c,b)[0],h=this.consequence.compile(c,b)[0];c=this.alternative.compile(c,b);b=c[1];return[new qa(k,h,c[0]),b]};la.prototype.compile=function(c,b){c=c.lookup(this.val,0);if(c instanceof g)c=new sa(c.isBoxed,c.depth,!1,!1,!1);else if(c instanceof q)c=new L(c.depth,c.pos,!1,!1,this.location);else{if(c instanceof
t)throw"Couldn't find '"+this.val+"' in the environment";throw"IMPOSSIBLE: env.lookup failed for '"+this.val+"'! A reference should be added to the environment!";}return[c,b]};y.prototype.compile=function(c,b){function k(h){return h instanceof ha?k(h.val):h instanceof Array?h.map(k):h}result=new ha(k(this.val));return[result,b]};J.prototype.compile=function(c,b){};N.prototype.compile=function(c,b){return[new ta(this.spec,new L(0,0,!1,!1,!1)),b]};plt.compiler.localStackReference=g;plt.compiler.globalStackReference=
q;plt.compiler.unboundStackReference=t;plt.compiler.compile=function(c,b,k){var h=(new Date).getTime();try{var n=ea(c,b)}catch(G){throw console.log("COMPILATION ERROR"),G;}c=(new Date).getTime();k&&(console.log("Compiled in "+Math.floor(c-h)+"ms"),console.log(JSON.stringify(n)));return n}})();
